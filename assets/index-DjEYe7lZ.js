function rd(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(n,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var So=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ug={exports:{}},yc={},Vg={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Il=Symbol.for("react.element"),dx=Symbol.for("react.portal"),px=Symbol.for("react.fragment"),gx=Symbol.for("react.strict_mode"),mx=Symbol.for("react.profiler"),yx=Symbol.for("react.provider"),vx=Symbol.for("react.context"),xx=Symbol.for("react.forward_ref"),wx=Symbol.for("react.suspense"),Ex=Symbol.for("react.memo"),Sx=Symbol.for("react.lazy"),y0=Symbol.iterator;function Ax(e){return e===null||typeof e!="object"?null:(e=y0&&e[y0]||e["@@iterator"],typeof e=="function"?e:null)}var $g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zg=Object.assign,Kg={};function to(e,t,r){this.props=e,this.context=t,this.refs=Kg,this.updater=r||$g}to.prototype.isReactComponent={};to.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};to.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wg(){}Wg.prototype=to.prototype;function nd(e,t,r){this.props=e,this.context=t,this.refs=Kg,this.updater=r||$g}var id=nd.prototype=new Wg;id.constructor=nd;zg(id,to.prototype);id.isPureReactComponent=!0;var v0=Array.isArray,Gg=Object.prototype.hasOwnProperty,sd={current:null},qg={key:!0,ref:!0,__self:!0,__source:!0};function Xg(e,t,r){var n,s={},o=null,u=null;if(t!=null)for(n in t.ref!==void 0&&(u=t.ref),t.key!==void 0&&(o=""+t.key),t)Gg.call(t,n)&&!qg.hasOwnProperty(n)&&(s[n]=t[n]);var h=arguments.length-2;if(h===1)s.children=r;else if(1<h){for(var g=Array(h),d=0;d<h;d++)g[d]=arguments[d+2];s.children=g}if(e&&e.defaultProps)for(n in h=e.defaultProps,h)s[n]===void 0&&(s[n]=h[n]);return{$$typeof:Il,type:e,key:o,ref:u,props:s,_owner:sd.current}}function Cx(e,t){return{$$typeof:Il,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ad(e){return typeof e=="object"&&e!==null&&e.$$typeof===Il}function Ix(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var x0=/\/+/g;function hf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ix(""+e.key):t.toString(36)}function gu(e,t,r,n,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var u=!1;if(e===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case Il:case dx:u=!0}}if(u)return u=e,s=s(u),e=n===""?"."+hf(u,0):n,v0(s)?(r="",e!=null&&(r=e.replace(x0,"$&/")+"/"),gu(s,t,r,"",function(d){return d})):s!=null&&(ad(s)&&(s=Cx(s,r+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(x0,"$&/")+"/")+e)),t.push(s)),1;if(u=0,n=n===""?".":n+":",v0(e))for(var h=0;h<e.length;h++){o=e[h];var g=n+hf(o,h);u+=gu(o,t,r,g,s)}else if(g=Ax(e),typeof g=="function")for(e=g.call(e),h=0;!(o=e.next()).done;)o=o.value,g=n+hf(o,h++),u+=gu(o,t,r,g,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function Kl(e,t,r){if(e==null)return e;var n=[],s=0;return gu(e,n,"","",function(o){return t.call(r,o,s++)}),n}function bx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rn={current:null},mu={transition:null},Tx={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:mu,ReactCurrentOwner:sd};function Yg(){throw Error("act(...) is not supported in production builds of React.")}mt.Children={map:Kl,forEach:function(e,t,r){Kl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Kl(e,function(){t++}),t},toArray:function(e){return Kl(e,function(t){return t})||[]},only:function(e){if(!ad(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mt.Component=to;mt.Fragment=px;mt.Profiler=mx;mt.PureComponent=nd;mt.StrictMode=gx;mt.Suspense=wx;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tx;mt.act=Yg;mt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=zg({},e.props),s=e.key,o=e.ref,u=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,u=sd.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var h=e.type.defaultProps;for(g in t)Gg.call(t,g)&&!qg.hasOwnProperty(g)&&(n[g]=t[g]===void 0&&h!==void 0?h[g]:t[g])}var g=arguments.length-2;if(g===1)n.children=r;else if(1<g){h=Array(g);for(var d=0;d<g;d++)h[d]=arguments[d+2];n.children=h}return{$$typeof:Il,type:e.type,key:s,ref:o,props:n,_owner:u}};mt.createContext=function(e){return e={$$typeof:vx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yx,_context:e},e.Consumer=e};mt.createElement=Xg;mt.createFactory=function(e){var t=Xg.bind(null,e);return t.type=e,t};mt.createRef=function(){return{current:null}};mt.forwardRef=function(e){return{$$typeof:xx,render:e}};mt.isValidElement=ad;mt.lazy=function(e){return{$$typeof:Sx,_payload:{_status:-1,_result:e},_init:bx}};mt.memo=function(e,t){return{$$typeof:Ex,type:e,compare:t===void 0?null:t}};mt.startTransition=function(e){var t=mu.transition;mu.transition={};try{e()}finally{mu.transition=t}};mt.unstable_act=Yg;mt.useCallback=function(e,t){return rn.current.useCallback(e,t)};mt.useContext=function(e){return rn.current.useContext(e)};mt.useDebugValue=function(){};mt.useDeferredValue=function(e){return rn.current.useDeferredValue(e)};mt.useEffect=function(e,t){return rn.current.useEffect(e,t)};mt.useId=function(){return rn.current.useId()};mt.useImperativeHandle=function(e,t,r){return rn.current.useImperativeHandle(e,t,r)};mt.useInsertionEffect=function(e,t){return rn.current.useInsertionEffect(e,t)};mt.useLayoutEffect=function(e,t){return rn.current.useLayoutEffect(e,t)};mt.useMemo=function(e,t){return rn.current.useMemo(e,t)};mt.useReducer=function(e,t,r){return rn.current.useReducer(e,t,r)};mt.useRef=function(e){return rn.current.useRef(e)};mt.useState=function(e){return rn.current.useState(e)};mt.useSyncExternalStore=function(e,t,r){return rn.current.useSyncExternalStore(e,t,r)};mt.useTransition=function(){return rn.current.useTransition()};mt.version="18.3.1";Vg.exports=mt;var Re=Vg.exports;const Nx=mc(Re),_x=rd({__proto__:null,default:Nx},[Re]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dx=Re,Rx=Symbol.for("react.element"),Ox=Symbol.for("react.fragment"),Fx=Object.prototype.hasOwnProperty,Px=Dx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mx={key:!0,ref:!0,__self:!0,__source:!0};function Zg(e,t,r){var n,s={},o=null,u=null;r!==void 0&&(o=""+r),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(u=t.ref);for(n in t)Fx.call(t,n)&&!Mx.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Rx,type:e,key:o,ref:u,props:s,_owner:Px.current}}yc.Fragment=Ox;yc.jsx=Zg;yc.jsxs=Zg;Ug.exports=yc;var qe=Ug.exports,Wf={},Qg={exports:{}},Dn={},Jg={exports:{}},em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ee,be){var oe=Ee.length;Ee.push(be);e:for(;0<oe;){var Y=oe-1>>>1,le=Ee[Y];if(0<s(le,be))Ee[Y]=be,Ee[oe]=le,oe=Y;else break e}}function r(Ee){return Ee.length===0?null:Ee[0]}function n(Ee){if(Ee.length===0)return null;var be=Ee[0],oe=Ee.pop();if(oe!==be){Ee[0]=oe;e:for(var Y=0,le=Ee.length,ne=le>>>1;Y<ne;){var U=2*(Y+1)-1,q=Ee[U],J=U+1,ve=Ee[J];if(0>s(q,oe))J<le&&0>s(ve,q)?(Ee[Y]=ve,Ee[J]=oe,Y=J):(Ee[Y]=q,Ee[U]=oe,Y=U);else if(J<le&&0>s(ve,oe))Ee[Y]=ve,Ee[J]=oe,Y=J;else break e}}return be}function s(Ee,be){var oe=Ee.sortIndex-be.sortIndex;return oe!==0?oe:Ee.id-be.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();e.unstable_now=function(){return u.now()-h}}var g=[],d=[],x=1,v=null,y=3,S=!1,w=!1,A=!1,b=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(Ee){for(var be=r(d);be!==null;){if(be.callback===null)n(d);else if(be.startTime<=Ee)n(d),be.sortIndex=be.expirationTime,t(g,be);else break;be=r(d)}}function L(Ee){if(A=!1,F(Ee),!w)if(r(g)!==null)w=!0,ce(H);else{var be=r(d);be!==null&&te(L,be.startTime-Ee)}}function H(Ee,be){w=!1,A&&(A=!1,I(P),P=-1),S=!0;var oe=y;try{for(F(be),v=r(g);v!==null&&(!(v.expirationTime>be)||Ee&&!W());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,y=v.priorityLevel;var le=Y(v.expirationTime<=be);be=e.unstable_now(),typeof le=="function"?v.callback=le:v===r(g)&&n(g),F(be)}else n(g);v=r(g)}if(v!==null)var ne=!0;else{var U=r(d);U!==null&&te(L,U.startTime-be),ne=!1}return ne}finally{v=null,y=oe,S=!1}}var _=!1,R=null,P=-1,D=5,k=-1;function W(){return!(e.unstable_now()-k<D)}function K(){if(R!==null){var Ee=e.unstable_now();k=Ee;var be=!0;try{be=R(!0,Ee)}finally{be?ie():(_=!1,R=null)}}else _=!1}var ie;if(typeof N=="function")ie=function(){N(K)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,V=G.port2;G.port1.onmessage=K,ie=function(){V.postMessage(null)}}else ie=function(){b(K,0)};function ce(Ee){R=Ee,_||(_=!0,ie())}function te(Ee,be){P=b(function(){Ee(e.unstable_now())},be)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ee){Ee.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,ce(H))},e.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<Ee?Math.floor(1e3/Ee):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(g)},e.unstable_next=function(Ee){switch(y){case 1:case 2:case 3:var be=3;break;default:be=y}var oe=y;y=be;try{return Ee()}finally{y=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ee,be){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var oe=y;y=Ee;try{return be()}finally{y=oe}},e.unstable_scheduleCallback=function(Ee,be,oe){var Y=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Y+oe:Y):oe=Y,Ee){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=oe+le,Ee={id:x++,callback:be,priorityLevel:Ee,startTime:oe,expirationTime:le,sortIndex:-1},oe>Y?(Ee.sortIndex=oe,t(d,Ee),r(g)===null&&Ee===r(d)&&(A?(I(P),P=-1):A=!0,te(L,oe-Y))):(Ee.sortIndex=le,t(g,Ee),w||S||(w=!0,ce(H))),Ee},e.unstable_shouldYield=W,e.unstable_wrapCallback=function(Ee){var be=y;return function(){var oe=y;y=be;try{return Ee.apply(this,arguments)}finally{y=oe}}}})(em);Jg.exports=em;var Bx=Jg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lx=Re,_n=Bx;function Se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tm=new Set,nl={};function ra(e,t){za(e,t),za(e+"Capture",t)}function za(e,t){for(nl[e]=t,e=0;e<t.length;e++)tm.add(t[e])}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gf=Object.prototype.hasOwnProperty,kx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w0={},E0={};function jx(e){return Gf.call(E0,e)?!0:Gf.call(w0,e)?!1:kx.test(e)?E0[e]=!0:(w0[e]=!0,!1)}function Hx(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Ux(e,t,r,n){if(t===null||typeof t>"u"||Hx(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nn(e,t,r,n,s,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var Vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vr[e]=new nn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vr[t]=new nn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vr[e]=new nn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vr[e]=new nn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vr[e]=new nn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vr[e]=new nn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vr[e]=new nn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vr[e]=new nn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vr[e]=new nn(e,5,!1,e.toLowerCase(),null,!1,!1)});var od=/[\-:]([a-z])/g;function ld(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(od,ld);Vr[t]=new nn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(od,ld);Vr[t]=new nn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(od,ld);Vr[t]=new nn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vr[e]=new nn(e,1,!1,e.toLowerCase(),null,!1,!1)});Vr.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vr[e]=new nn(e,1,!1,e.toLowerCase(),null,!0,!0)});function ud(e,t,r,n){var s=Vr.hasOwnProperty(t)?Vr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Ux(t,r,s,n)&&(r=null),n||s===null?jx(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ki=Lx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wl=Symbol.for("react.element"),Sa=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),cd=Symbol.for("react.strict_mode"),qf=Symbol.for("react.profiler"),rm=Symbol.for("react.provider"),nm=Symbol.for("react.context"),fd=Symbol.for("react.forward_ref"),Xf=Symbol.for("react.suspense"),Yf=Symbol.for("react.suspense_list"),hd=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),im=Symbol.for("react.offscreen"),S0=Symbol.iterator;function Ao(e){return e===null||typeof e!="object"?null:(e=S0&&e[S0]||e["@@iterator"],typeof e=="function"?e:null)}var or=Object.assign,df;function Bo(e){if(df===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);df=t&&t[1]||""}return`
`+df+e}var pf=!1;function gf(e,t){if(!e||pf)return"";pf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=n.stack.split(`
`),u=s.length-1,h=o.length-1;1<=u&&0<=h&&s[u]!==o[h];)h--;for(;1<=u&&0<=h;u--,h--)if(s[u]!==o[h]){if(u!==1||h!==1)do if(u--,h--,0>h||s[u]!==o[h]){var g=`
`+s[u].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=u&&0<=h);break}}}finally{pf=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bo(e):""}function Vx(e){switch(e.tag){case 5:return Bo(e.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return e=gf(e.type,!1),e;case 11:return e=gf(e.type.render,!1),e;case 1:return e=gf(e.type,!0),e;default:return""}}function Zf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Aa:return"Fragment";case Sa:return"Portal";case qf:return"Profiler";case cd:return"StrictMode";case Xf:return"Suspense";case Yf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nm:return(e.displayName||"Context")+".Consumer";case rm:return(e._context.displayName||"Context")+".Provider";case fd:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hd:return t=e.displayName||null,t!==null?t:Zf(e.type)||"Memo";case ss:t=e._payload,e=e._init;try{return Zf(e(t))}catch{}}return null}function $x(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zf(t);case 8:return t===cd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Cs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function zx(e){var t=sm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(u){n=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(u){n=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gl(e){e._valueTracker||(e._valueTracker=zx(e))}function am(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=sm(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Fu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qf(e,t){var r=t.checked;return or({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function A0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Cs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function om(e,t){t=t.checked,t!=null&&ud(e,"checked",t,!1)}function Jf(e,t){om(e,t);var r=Cs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?eh(e,t.type,r):t.hasOwnProperty("defaultValue")&&eh(e,t.type,Cs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function C0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function eh(e,t,r){(t!=="number"||Fu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Lo=Array.isArray;function Ba(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Cs(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function th(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Se(91));return or({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function I0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Se(92));if(Lo(r)){if(1<r.length)throw Error(Se(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Cs(r)}}function lm(e,t){var r=Cs(t.value),n=Cs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function b0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function um(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?um(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ql,cm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ql=ql||document.createElement("div"),ql.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ql.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function il(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var $o={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kx=["Webkit","ms","Moz","O"];Object.keys($o).forEach(function(e){Kx.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$o[t]=$o[e]})});function fm(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||$o.hasOwnProperty(e)&&$o[e]?(""+t).trim():t+"px"}function hm(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=fm(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Wx=or({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nh(e,t){if(t){if(Wx[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Se(62))}}function ih(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sh=null;function dd(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ah=null,La=null,ka=null;function T0(e){if(e=Nl(e)){if(typeof ah!="function")throw Error(Se(280));var t=e.stateNode;t&&(t=Sc(t),ah(e.stateNode,e.type,t))}}function dm(e){La?ka?ka.push(e):ka=[e]:La=e}function pm(){if(La){var e=La,t=ka;if(ka=La=null,T0(e),t)for(e=0;e<t.length;e++)T0(t[e])}}function gm(e,t){return e(t)}function mm(){}var mf=!1;function ym(e,t,r){if(mf)return e(t,r);mf=!0;try{return gm(e,t,r)}finally{mf=!1,(La!==null||ka!==null)&&(mm(),pm())}}function sl(e,t){var r=e.stateNode;if(r===null)return null;var n=Sc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Se(231,t,typeof r));return r}var oh=!1;if(Hi)try{var Co={};Object.defineProperty(Co,"passive",{get:function(){oh=!0}}),window.addEventListener("test",Co,Co),window.removeEventListener("test",Co,Co)}catch{oh=!1}function Gx(e,t,r,n,s,o,u,h,g){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(x){this.onError(x)}}var zo=!1,Pu=null,Mu=!1,lh=null,qx={onError:function(e){zo=!0,Pu=e}};function Xx(e,t,r,n,s,o,u,h,g){zo=!1,Pu=null,Gx.apply(qx,arguments)}function Yx(e,t,r,n,s,o,u,h,g){if(Xx.apply(this,arguments),zo){if(zo){var d=Pu;zo=!1,Pu=null}else throw Error(Se(198));Mu||(Mu=!0,lh=d)}}function na(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function vm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function N0(e){if(na(e)!==e)throw Error(Se(188))}function Zx(e){var t=e.alternate;if(!t){if(t=na(e),t===null)throw Error(Se(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return N0(s),e;if(o===n)return N0(s),t;o=o.sibling}throw Error(Se(188))}if(r.return!==n.return)r=s,n=o;else{for(var u=!1,h=s.child;h;){if(h===r){u=!0,r=s,n=o;break}if(h===n){u=!0,n=s,r=o;break}h=h.sibling}if(!u){for(h=o.child;h;){if(h===r){u=!0,r=o,n=s;break}if(h===n){u=!0,n=o,r=s;break}h=h.sibling}if(!u)throw Error(Se(189))}}if(r.alternate!==n)throw Error(Se(190))}if(r.tag!==3)throw Error(Se(188));return r.stateNode.current===r?e:t}function xm(e){return e=Zx(e),e!==null?wm(e):null}function wm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wm(e);if(t!==null)return t;e=e.sibling}return null}var Em=_n.unstable_scheduleCallback,_0=_n.unstable_cancelCallback,Qx=_n.unstable_shouldYield,Jx=_n.unstable_requestPaint,vr=_n.unstable_now,ew=_n.unstable_getCurrentPriorityLevel,pd=_n.unstable_ImmediatePriority,Sm=_n.unstable_UserBlockingPriority,Bu=_n.unstable_NormalPriority,tw=_n.unstable_LowPriority,Am=_n.unstable_IdlePriority,vc=null,Ci=null;function rw(e){if(Ci&&typeof Ci.onCommitFiberRoot=="function")try{Ci.onCommitFiberRoot(vc,e,void 0,(e.current.flags&128)===128)}catch{}}var oi=Math.clz32?Math.clz32:sw,nw=Math.log,iw=Math.LN2;function sw(e){return e>>>=0,e===0?32:31-(nw(e)/iw|0)|0}var Xl=64,Yl=4194304;function ko(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,o=e.pingedLanes,u=r&268435455;if(u!==0){var h=u&~s;h!==0?n=ko(h):(o&=u,o!==0&&(n=ko(o)))}else u=r&~s,u!==0?n=ko(u):o!==0&&(n=ko(o));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-oi(t),s=1<<r,n|=e[r],t&=~s;return n}function aw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ow(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-oi(o),h=1<<u,g=s[u];g===-1?(!(h&r)||h&n)&&(s[u]=aw(h,t)):g<=t&&(e.expiredLanes|=h),o&=~h}}function uh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cm(){var e=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),e}function yf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function bl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-oi(t),e[t]=r}function lw(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-oi(r),o=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~o}}function gd(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-oi(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Ft=0;function Im(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var bm,md,Tm,Nm,_m,ch=!1,Zl=[],ds=null,ps=null,gs=null,al=new Map,ol=new Map,os=[],uw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D0(e,t){switch(e){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":ps=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(t.pointerId)}}function Io(e,t,r,n,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[s]},t!==null&&(t=Nl(t),t!==null&&md(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function cw(e,t,r,n,s){switch(t){case"focusin":return ds=Io(ds,e,t,r,n,s),!0;case"dragenter":return ps=Io(ps,e,t,r,n,s),!0;case"mouseover":return gs=Io(gs,e,t,r,n,s),!0;case"pointerover":var o=s.pointerId;return al.set(o,Io(al.get(o)||null,e,t,r,n,s)),!0;case"gotpointercapture":return o=s.pointerId,ol.set(o,Io(ol.get(o)||null,e,t,r,n,s)),!0}return!1}function Dm(e){var t=Vs(e.target);if(t!==null){var r=na(t);if(r!==null){if(t=r.tag,t===13){if(t=vm(r),t!==null){e.blockedOn=t,_m(e.priority,function(){Tm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=fh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);sh=n,r.target.dispatchEvent(n),sh=null}else return t=Nl(r),t!==null&&md(t),e.blockedOn=r,!1;t.shift()}return!0}function R0(e,t,r){yu(e)&&r.delete(t)}function fw(){ch=!1,ds!==null&&yu(ds)&&(ds=null),ps!==null&&yu(ps)&&(ps=null),gs!==null&&yu(gs)&&(gs=null),al.forEach(R0),ol.forEach(R0)}function bo(e,t){e.blockedOn===t&&(e.blockedOn=null,ch||(ch=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,fw)))}function ll(e){function t(s){return bo(s,e)}if(0<Zl.length){bo(Zl[0],e);for(var r=1;r<Zl.length;r++){var n=Zl[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ds!==null&&bo(ds,e),ps!==null&&bo(ps,e),gs!==null&&bo(gs,e),al.forEach(t),ol.forEach(t),r=0;r<os.length;r++)n=os[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<os.length&&(r=os[0],r.blockedOn===null);)Dm(r),r.blockedOn===null&&os.shift()}var ja=Ki.ReactCurrentBatchConfig,ku=!0;function hw(e,t,r,n){var s=Ft,o=ja.transition;ja.transition=null;try{Ft=1,yd(e,t,r,n)}finally{Ft=s,ja.transition=o}}function dw(e,t,r,n){var s=Ft,o=ja.transition;ja.transition=null;try{Ft=4,yd(e,t,r,n)}finally{Ft=s,ja.transition=o}}function yd(e,t,r,n){if(ku){var s=fh(e,t,r,n);if(s===null)Tf(e,t,n,ju,r),D0(e,n);else if(cw(s,e,t,r,n))n.stopPropagation();else if(D0(e,n),t&4&&-1<uw.indexOf(e)){for(;s!==null;){var o=Nl(s);if(o!==null&&bm(o),o=fh(e,t,r,n),o===null&&Tf(e,t,n,ju,r),o===s)break;s=o}s!==null&&n.stopPropagation()}else Tf(e,t,n,null,r)}}var ju=null;function fh(e,t,r,n){if(ju=null,e=dd(n),e=Vs(e),e!==null)if(t=na(e),t===null)e=null;else if(r=t.tag,r===13){if(e=vm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ju=e,null}function Rm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ew()){case pd:return 1;case Sm:return 4;case Bu:case tw:return 16;case Am:return 536870912;default:return 16}default:return 16}}var us=null,vd=null,vu=null;function Om(){if(vu)return vu;var e,t=vd,r=t.length,n,s="value"in us?us.value:us.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var u=r-e;for(n=1;n<=u&&t[r-n]===s[o-n];n++);return vu=s.slice(e,1<n?1-n:void 0)}function xu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ql(){return!0}function O0(){return!1}function Rn(e){function t(r,n,s,o,u){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(r=e[h],this[h]=r?r(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ql:O0,this.isPropagationStopped=O0,this}return or(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ql)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ql)},persist:function(){},isPersistent:Ql}),t}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xd=Rn(ro),Tl=or({},ro,{view:0,detail:0}),pw=Rn(Tl),vf,xf,To,xc=or({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==To&&(To&&e.type==="mousemove"?(vf=e.screenX-To.screenX,xf=e.screenY-To.screenY):xf=vf=0,To=e),vf)},movementY:function(e){return"movementY"in e?e.movementY:xf}}),F0=Rn(xc),gw=or({},xc,{dataTransfer:0}),mw=Rn(gw),yw=or({},Tl,{relatedTarget:0}),wf=Rn(yw),vw=or({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),xw=Rn(vw),ww=or({},ro,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ew=Rn(ww),Sw=or({},ro,{data:0}),P0=Rn(Sw),Aw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Iw[e])?!!t[e]:!1}function wd(){return bw}var Tw=or({},Tl,{key:function(e){if(e.key){var t=Aw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wd,charCode:function(e){return e.type==="keypress"?xu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nw=Rn(Tw),_w=or({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),M0=Rn(_w),Dw=or({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wd}),Rw=Rn(Dw),Ow=or({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fw=Rn(Ow),Pw=or({},xc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mw=Rn(Pw),Bw=[9,13,27,32],Ed=Hi&&"CompositionEvent"in window,Ko=null;Hi&&"documentMode"in document&&(Ko=document.documentMode);var Lw=Hi&&"TextEvent"in window&&!Ko,Fm=Hi&&(!Ed||Ko&&8<Ko&&11>=Ko),B0=" ",L0=!1;function Pm(e,t){switch(e){case"keyup":return Bw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ca=!1;function kw(e,t){switch(e){case"compositionend":return Mm(t);case"keypress":return t.which!==32?null:(L0=!0,B0);case"textInput":return e=t.data,e===B0&&L0?null:e;default:return null}}function jw(e,t){if(Ca)return e==="compositionend"||!Ed&&Pm(e,t)?(e=Om(),vu=vd=us=null,Ca=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fm&&t.locale!=="ko"?null:t.data;default:return null}}var Hw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Hw[e.type]:t==="textarea"}function Bm(e,t,r,n){dm(n),t=Hu(t,"onChange"),0<t.length&&(r=new xd("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wo=null,ul=null;function Uw(e){Gm(e,0)}function wc(e){var t=Ta(e);if(am(t))return e}function Vw(e,t){if(e==="change")return t}var Lm=!1;if(Hi){var Ef;if(Hi){var Sf="oninput"in document;if(!Sf){var j0=document.createElement("div");j0.setAttribute("oninput","return;"),Sf=typeof j0.oninput=="function"}Ef=Sf}else Ef=!1;Lm=Ef&&(!document.documentMode||9<document.documentMode)}function H0(){Wo&&(Wo.detachEvent("onpropertychange",km),ul=Wo=null)}function km(e){if(e.propertyName==="value"&&wc(ul)){var t=[];Bm(t,ul,e,dd(e)),ym(Uw,t)}}function $w(e,t,r){e==="focusin"?(H0(),Wo=t,ul=r,Wo.attachEvent("onpropertychange",km)):e==="focusout"&&H0()}function zw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wc(ul)}function Kw(e,t){if(e==="click")return wc(t)}function Ww(e,t){if(e==="input"||e==="change")return wc(t)}function Gw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fi=typeof Object.is=="function"?Object.is:Gw;function cl(e,t){if(fi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Gf.call(t,s)||!fi(e[s],t[s]))return!1}return!0}function U0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function V0(e,t){var r=U0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=U0(r)}}function jm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hm(){for(var e=window,t=Fu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fu(e.document)}return t}function Sd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qw(e){var t=Hm(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&jm(r.ownerDocument.documentElement,r)){if(n!==null&&Sd(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(n.start,s);n=n.end===void 0?o:Math.min(n.end,s),!e.extend&&o>n&&(s=n,n=o,o=s),s=V0(r,o);var u=V0(r,n);s&&u&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xw=Hi&&"documentMode"in document&&11>=document.documentMode,Ia=null,hh=null,Go=null,dh=!1;function $0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;dh||Ia==null||Ia!==Fu(n)||(n=Ia,"selectionStart"in n&&Sd(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Go&&cl(Go,n)||(Go=n,n=Hu(hh,"onSelect"),0<n.length&&(t=new xd("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ia)))}function Jl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ba={animationend:Jl("Animation","AnimationEnd"),animationiteration:Jl("Animation","AnimationIteration"),animationstart:Jl("Animation","AnimationStart"),transitionend:Jl("Transition","TransitionEnd")},Af={},Um={};Hi&&(Um=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function Ec(e){if(Af[e])return Af[e];if(!ba[e])return e;var t=ba[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Um)return Af[e]=t[r];return e}var Vm=Ec("animationend"),$m=Ec("animationiteration"),zm=Ec("animationstart"),Km=Ec("transitionend"),Wm=new Map,z0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(e,t){Wm.set(e,t),ra(t,[e])}for(var Cf=0;Cf<z0.length;Cf++){var If=z0[Cf],Yw=If.toLowerCase(),Zw=If[0].toUpperCase()+If.slice(1);Ts(Yw,"on"+Zw)}Ts(Vm,"onAnimationEnd");Ts($m,"onAnimationIteration");Ts(zm,"onAnimationStart");Ts("dblclick","onDoubleClick");Ts("focusin","onFocus");Ts("focusout","onBlur");Ts(Km,"onTransitionEnd");za("onMouseEnter",["mouseout","mouseover"]);za("onMouseLeave",["mouseout","mouseover"]);za("onPointerEnter",["pointerout","pointerover"]);za("onPointerLeave",["pointerout","pointerover"]);ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qw=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function K0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Yx(n,t,void 0,e),e.currentTarget=null}function Gm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var u=n.length-1;0<=u;u--){var h=n[u],g=h.instance,d=h.currentTarget;if(h=h.listener,g!==o&&s.isPropagationStopped())break e;K0(s,h,d),o=g}else for(u=0;u<n.length;u++){if(h=n[u],g=h.instance,d=h.currentTarget,h=h.listener,g!==o&&s.isPropagationStopped())break e;K0(s,h,d),o=g}}}if(Mu)throw e=lh,Mu=!1,lh=null,e}function Xt(e,t){var r=t[vh];r===void 0&&(r=t[vh]=new Set);var n=e+"__bubble";r.has(n)||(qm(t,e,2,!1),r.add(n))}function bf(e,t,r){var n=0;t&&(n|=4),qm(r,e,n,t)}var eu="_reactListening"+Math.random().toString(36).slice(2);function fl(e){if(!e[eu]){e[eu]=!0,tm.forEach(function(r){r!=="selectionchange"&&(Qw.has(r)||bf(r,!1,e),bf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eu]||(t[eu]=!0,bf("selectionchange",!1,t))}}function qm(e,t,r,n){switch(Rm(t)){case 1:var s=hw;break;case 4:s=dw;break;default:s=yd}r=s.bind(null,t,r,e),s=void 0,!oh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Tf(e,t,r,n,s){var o=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var u=n.tag;if(u===3||u===4){var h=n.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(u===4)for(u=n.return;u!==null;){var g=u.tag;if((g===3||g===4)&&(g=u.stateNode.containerInfo,g===s||g.nodeType===8&&g.parentNode===s))return;u=u.return}for(;h!==null;){if(u=Vs(h),u===null)return;if(g=u.tag,g===5||g===6){n=o=u;continue e}h=h.parentNode}}n=n.return}ym(function(){var d=o,x=dd(r),v=[];e:{var y=Wm.get(e);if(y!==void 0){var S=xd,w=e;switch(e){case"keypress":if(xu(r)===0)break e;case"keydown":case"keyup":S=Nw;break;case"focusin":w="focus",S=wf;break;case"focusout":w="blur",S=wf;break;case"beforeblur":case"afterblur":S=wf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=F0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=mw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=Rw;break;case Vm:case $m:case zm:S=xw;break;case Km:S=Fw;break;case"scroll":S=pw;break;case"wheel":S=Mw;break;case"copy":case"cut":case"paste":S=Ew;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=M0}var A=(t&4)!==0,b=!A&&e==="scroll",I=A?y!==null?y+"Capture":null:y;A=[];for(var N=d,F;N!==null;){F=N;var L=F.stateNode;if(F.tag===5&&L!==null&&(F=L,I!==null&&(L=sl(N,I),L!=null&&A.push(hl(N,L,F)))),b)break;N=N.return}0<A.length&&(y=new S(y,w,null,r,x),v.push({event:y,listeners:A}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",y&&r!==sh&&(w=r.relatedTarget||r.fromElement)&&(Vs(w)||w[Ui]))break e;if((S||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,S?(w=r.relatedTarget||r.toElement,S=d,w=w?Vs(w):null,w!==null&&(b=na(w),w!==b||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=d),S!==w)){if(A=F0,L="onMouseLeave",I="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(A=M0,L="onPointerLeave",I="onPointerEnter",N="pointer"),b=S==null?y:Ta(S),F=w==null?y:Ta(w),y=new A(L,N+"leave",S,r,x),y.target=b,y.relatedTarget=F,L=null,Vs(x)===d&&(A=new A(I,N+"enter",w,r,x),A.target=F,A.relatedTarget=b,L=A),b=L,S&&w)t:{for(A=S,I=w,N=0,F=A;F;F=ga(F))N++;for(F=0,L=I;L;L=ga(L))F++;for(;0<N-F;)A=ga(A),N--;for(;0<F-N;)I=ga(I),F--;for(;N--;){if(A===I||I!==null&&A===I.alternate)break t;A=ga(A),I=ga(I)}A=null}else A=null;S!==null&&W0(v,y,S,A,!1),w!==null&&b!==null&&W0(v,b,w,A,!0)}}e:{if(y=d?Ta(d):window,S=y.nodeName&&y.nodeName.toLowerCase(),S==="select"||S==="input"&&y.type==="file")var H=Vw;else if(k0(y))if(Lm)H=Ww;else{H=zw;var _=$w}else(S=y.nodeName)&&S.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(H=Kw);if(H&&(H=H(e,d))){Bm(v,H,r,x);break e}_&&_(e,y,d),e==="focusout"&&(_=y._wrapperState)&&_.controlled&&y.type==="number"&&eh(y,"number",y.value)}switch(_=d?Ta(d):window,e){case"focusin":(k0(_)||_.contentEditable==="true")&&(Ia=_,hh=d,Go=null);break;case"focusout":Go=hh=Ia=null;break;case"mousedown":dh=!0;break;case"contextmenu":case"mouseup":case"dragend":dh=!1,$0(v,r,x);break;case"selectionchange":if(Xw)break;case"keydown":case"keyup":$0(v,r,x)}var R;if(Ed)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ca?Pm(e,r)&&(P="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(Fm&&r.locale!=="ko"&&(Ca||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ca&&(R=Om()):(us=x,vd="value"in us?us.value:us.textContent,Ca=!0)),_=Hu(d,P),0<_.length&&(P=new P0(P,e,null,r,x),v.push({event:P,listeners:_}),R?P.data=R:(R=Mm(r),R!==null&&(P.data=R)))),(R=Lw?kw(e,r):jw(e,r))&&(d=Hu(d,"onBeforeInput"),0<d.length&&(x=new P0("onBeforeInput","beforeinput",null,r,x),v.push({event:x,listeners:d}),x.data=R))}Gm(v,t)})}function hl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hu(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=sl(e,r),o!=null&&n.unshift(hl(e,o,s)),o=sl(e,t),o!=null&&n.push(hl(e,o,s))),e=e.return}return n}function ga(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function W0(e,t,r,n,s){for(var o=t._reactName,u=[];r!==null&&r!==n;){var h=r,g=h.alternate,d=h.stateNode;if(g!==null&&g===n)break;h.tag===5&&d!==null&&(h=d,s?(g=sl(r,o),g!=null&&u.unshift(hl(r,g,h))):s||(g=sl(r,o),g!=null&&u.push(hl(r,g,h)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var Jw=/\r\n?/g,e3=/\u0000|\uFFFD/g;function G0(e){return(typeof e=="string"?e:""+e).replace(Jw,`
`).replace(e3,"")}function tu(e,t,r){if(t=G0(t),G0(e)!==t&&r)throw Error(Se(425))}function Uu(){}var ph=null,gh=null;function mh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var yh=typeof setTimeout=="function"?setTimeout:void 0,t3=typeof clearTimeout=="function"?clearTimeout:void 0,q0=typeof Promise=="function"?Promise:void 0,r3=typeof queueMicrotask=="function"?queueMicrotask:typeof q0<"u"?function(e){return q0.resolve(null).then(e).catch(n3)}:yh;function n3(e){setTimeout(function(){throw e})}function Nf(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ll(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ll(t)}function ms(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function X0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var no=Math.random().toString(36).slice(2),wi="__reactFiber$"+no,dl="__reactProps$"+no,Ui="__reactContainer$"+no,vh="__reactEvents$"+no,i3="__reactListeners$"+no,s3="__reactHandles$"+no;function Vs(e){var t=e[wi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ui]||r[wi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=X0(e);e!==null;){if(r=e[wi])return r;e=X0(e)}return t}e=r,r=e.parentNode}return null}function Nl(e){return e=e[wi]||e[Ui],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ta(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function Sc(e){return e[dl]||null}var xh=[],Na=-1;function Ns(e){return{current:e}}function Jt(e){0>Na||(e.current=xh[Na],xh[Na]=null,Na--)}function Gt(e,t){Na++,xh[Na]=e.current,e.current=t}var Is={},Xr=Ns(Is),gn=Ns(!1),Xs=Is;function Ka(e,t){var r=e.type.contextTypes;if(!r)return Is;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function mn(e){return e=e.childContextTypes,e!=null}function Vu(){Jt(gn),Jt(Xr)}function Y0(e,t,r){if(Xr.current!==Is)throw Error(Se(168));Gt(Xr,t),Gt(gn,r)}function Xm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Se(108,$x(e)||"Unknown",s));return or({},r,n)}function $u(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Is,Xs=Xr.current,Gt(Xr,e),Gt(gn,gn.current),!0}function Z0(e,t,r){var n=e.stateNode;if(!n)throw Error(Se(169));r?(e=Xm(e,t,Xs),n.__reactInternalMemoizedMergedChildContext=e,Jt(gn),Jt(Xr),Gt(Xr,e)):Jt(gn),Gt(gn,r)}var Oi=null,Ac=!1,_f=!1;function Ym(e){Oi===null?Oi=[e]:Oi.push(e)}function a3(e){Ac=!0,Ym(e)}function _s(){if(!_f&&Oi!==null){_f=!0;var e=0,t=Ft;try{var r=Oi;for(Ft=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Oi=null,Ac=!1}catch(s){throw Oi!==null&&(Oi=Oi.slice(e+1)),Em(pd,_s),s}finally{Ft=t,_f=!1}}return null}var _a=[],Da=0,zu=null,Ku=0,Hn=[],Un=0,Ys=null,Fi=1,Pi="";function Bs(e,t){_a[Da++]=Ku,_a[Da++]=zu,zu=e,Ku=t}function Zm(e,t,r){Hn[Un++]=Fi,Hn[Un++]=Pi,Hn[Un++]=Ys,Ys=e;var n=Fi;e=Pi;var s=32-oi(n)-1;n&=~(1<<s),r+=1;var o=32-oi(t)+s;if(30<o){var u=s-s%5;o=(n&(1<<u)-1).toString(32),n>>=u,s-=u,Fi=1<<32-oi(t)+s|r<<s|n,Pi=o+e}else Fi=1<<o|r<<s|n,Pi=e}function Ad(e){e.return!==null&&(Bs(e,1),Zm(e,1,0))}function Cd(e){for(;e===zu;)zu=_a[--Da],_a[Da]=null,Ku=_a[--Da],_a[Da]=null;for(;e===Ys;)Ys=Hn[--Un],Hn[Un]=null,Pi=Hn[--Un],Hn[Un]=null,Fi=Hn[--Un],Hn[Un]=null}var Nn=null,Tn=null,rr=!1,si=null;function Qm(e,t){var r=Vn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Q0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nn=e,Tn=ms(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nn=e,Tn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ys!==null?{id:Fi,overflow:Pi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Vn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Nn=e,Tn=null,!0):!1;default:return!1}}function wh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Eh(e){if(rr){var t=Tn;if(t){var r=t;if(!Q0(e,t)){if(wh(e))throw Error(Se(418));t=ms(r.nextSibling);var n=Nn;t&&Q0(e,t)?Qm(n,r):(e.flags=e.flags&-4097|2,rr=!1,Nn=e)}}else{if(wh(e))throw Error(Se(418));e.flags=e.flags&-4097|2,rr=!1,Nn=e}}}function J0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nn=e}function ru(e){if(e!==Nn)return!1;if(!rr)return J0(e),rr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!mh(e.type,e.memoizedProps)),t&&(t=Tn)){if(wh(e))throw Jm(),Error(Se(418));for(;t;)Qm(e,t),t=ms(t.nextSibling)}if(J0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Tn=ms(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Tn=null}}else Tn=Nn?ms(e.stateNode.nextSibling):null;return!0}function Jm(){for(var e=Tn;e;)e=ms(e.nextSibling)}function Wa(){Tn=Nn=null,rr=!1}function Id(e){si===null?si=[e]:si.push(e)}var o3=Ki.ReactCurrentBatchConfig;function No(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Se(309));var n=r.stateNode}if(!n)throw Error(Se(147,e));var s=n,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var h=s.refs;u===null?delete h[o]:h[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(Se(284));if(!r._owner)throw Error(Se(290,e))}return e}function nu(e,t){throw e=Object.prototype.toString.call(t),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ep(e){var t=e._init;return t(e._payload)}function e2(e){function t(I,N){if(e){var F=I.deletions;F===null?(I.deletions=[N],I.flags|=16):F.push(N)}}function r(I,N){if(!e)return null;for(;N!==null;)t(I,N),N=N.sibling;return null}function n(I,N){for(I=new Map;N!==null;)N.key!==null?I.set(N.key,N):I.set(N.index,N),N=N.sibling;return I}function s(I,N){return I=ws(I,N),I.index=0,I.sibling=null,I}function o(I,N,F){return I.index=F,e?(F=I.alternate,F!==null?(F=F.index,F<N?(I.flags|=2,N):F):(I.flags|=2,N)):(I.flags|=1048576,N)}function u(I){return e&&I.alternate===null&&(I.flags|=2),I}function h(I,N,F,L){return N===null||N.tag!==6?(N=Bf(F,I.mode,L),N.return=I,N):(N=s(N,F),N.return=I,N)}function g(I,N,F,L){var H=F.type;return H===Aa?x(I,N,F.props.children,L,F.key):N!==null&&(N.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===ss&&ep(H)===N.type)?(L=s(N,F.props),L.ref=No(I,N,F),L.return=I,L):(L=bu(F.type,F.key,F.props,null,I.mode,L),L.ref=No(I,N,F),L.return=I,L)}function d(I,N,F,L){return N===null||N.tag!==4||N.stateNode.containerInfo!==F.containerInfo||N.stateNode.implementation!==F.implementation?(N=Lf(F,I.mode,L),N.return=I,N):(N=s(N,F.children||[]),N.return=I,N)}function x(I,N,F,L,H){return N===null||N.tag!==7?(N=qs(F,I.mode,L,H),N.return=I,N):(N=s(N,F),N.return=I,N)}function v(I,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return N=Bf(""+N,I.mode,F),N.return=I,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Wl:return F=bu(N.type,N.key,N.props,null,I.mode,F),F.ref=No(I,null,N),F.return=I,F;case Sa:return N=Lf(N,I.mode,F),N.return=I,N;case ss:var L=N._init;return v(I,L(N._payload),F)}if(Lo(N)||Ao(N))return N=qs(N,I.mode,F,null),N.return=I,N;nu(I,N)}return null}function y(I,N,F,L){var H=N!==null?N.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return H!==null?null:h(I,N,""+F,L);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Wl:return F.key===H?g(I,N,F,L):null;case Sa:return F.key===H?d(I,N,F,L):null;case ss:return H=F._init,y(I,N,H(F._payload),L)}if(Lo(F)||Ao(F))return H!==null?null:x(I,N,F,L,null);nu(I,F)}return null}function S(I,N,F,L,H){if(typeof L=="string"&&L!==""||typeof L=="number")return I=I.get(F)||null,h(N,I,""+L,H);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Wl:return I=I.get(L.key===null?F:L.key)||null,g(N,I,L,H);case Sa:return I=I.get(L.key===null?F:L.key)||null,d(N,I,L,H);case ss:var _=L._init;return S(I,N,F,_(L._payload),H)}if(Lo(L)||Ao(L))return I=I.get(F)||null,x(N,I,L,H,null);nu(N,L)}return null}function w(I,N,F,L){for(var H=null,_=null,R=N,P=N=0,D=null;R!==null&&P<F.length;P++){R.index>P?(D=R,R=null):D=R.sibling;var k=y(I,R,F[P],L);if(k===null){R===null&&(R=D);break}e&&R&&k.alternate===null&&t(I,R),N=o(k,N,P),_===null?H=k:_.sibling=k,_=k,R=D}if(P===F.length)return r(I,R),rr&&Bs(I,P),H;if(R===null){for(;P<F.length;P++)R=v(I,F[P],L),R!==null&&(N=o(R,N,P),_===null?H=R:_.sibling=R,_=R);return rr&&Bs(I,P),H}for(R=n(I,R);P<F.length;P++)D=S(R,I,P,F[P],L),D!==null&&(e&&D.alternate!==null&&R.delete(D.key===null?P:D.key),N=o(D,N,P),_===null?H=D:_.sibling=D,_=D);return e&&R.forEach(function(W){return t(I,W)}),rr&&Bs(I,P),H}function A(I,N,F,L){var H=Ao(F);if(typeof H!="function")throw Error(Se(150));if(F=H.call(F),F==null)throw Error(Se(151));for(var _=H=null,R=N,P=N=0,D=null,k=F.next();R!==null&&!k.done;P++,k=F.next()){R.index>P?(D=R,R=null):D=R.sibling;var W=y(I,R,k.value,L);if(W===null){R===null&&(R=D);break}e&&R&&W.alternate===null&&t(I,R),N=o(W,N,P),_===null?H=W:_.sibling=W,_=W,R=D}if(k.done)return r(I,R),rr&&Bs(I,P),H;if(R===null){for(;!k.done;P++,k=F.next())k=v(I,k.value,L),k!==null&&(N=o(k,N,P),_===null?H=k:_.sibling=k,_=k);return rr&&Bs(I,P),H}for(R=n(I,R);!k.done;P++,k=F.next())k=S(R,I,P,k.value,L),k!==null&&(e&&k.alternate!==null&&R.delete(k.key===null?P:k.key),N=o(k,N,P),_===null?H=k:_.sibling=k,_=k);return e&&R.forEach(function(K){return t(I,K)}),rr&&Bs(I,P),H}function b(I,N,F,L){if(typeof F=="object"&&F!==null&&F.type===Aa&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Wl:e:{for(var H=F.key,_=N;_!==null;){if(_.key===H){if(H=F.type,H===Aa){if(_.tag===7){r(I,_.sibling),N=s(_,F.props.children),N.return=I,I=N;break e}}else if(_.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===ss&&ep(H)===_.type){r(I,_.sibling),N=s(_,F.props),N.ref=No(I,_,F),N.return=I,I=N;break e}r(I,_);break}else t(I,_);_=_.sibling}F.type===Aa?(N=qs(F.props.children,I.mode,L,F.key),N.return=I,I=N):(L=bu(F.type,F.key,F.props,null,I.mode,L),L.ref=No(I,N,F),L.return=I,I=L)}return u(I);case Sa:e:{for(_=F.key;N!==null;){if(N.key===_)if(N.tag===4&&N.stateNode.containerInfo===F.containerInfo&&N.stateNode.implementation===F.implementation){r(I,N.sibling),N=s(N,F.children||[]),N.return=I,I=N;break e}else{r(I,N);break}else t(I,N);N=N.sibling}N=Lf(F,I.mode,L),N.return=I,I=N}return u(I);case ss:return _=F._init,b(I,N,_(F._payload),L)}if(Lo(F))return w(I,N,F,L);if(Ao(F))return A(I,N,F,L);nu(I,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,N!==null&&N.tag===6?(r(I,N.sibling),N=s(N,F),N.return=I,I=N):(r(I,N),N=Bf(F,I.mode,L),N.return=I,I=N),u(I)):r(I,N)}return b}var Ga=e2(!0),t2=e2(!1),Wu=Ns(null),Gu=null,Ra=null,bd=null;function Td(){bd=Ra=Gu=null}function Nd(e){var t=Wu.current;Jt(Wu),e._currentValue=t}function Sh(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ha(e,t){Gu=e,bd=Ra=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(pn=!0),e.firstContext=null)}function Kn(e){var t=e._currentValue;if(bd!==e)if(e={context:e,memoizedValue:t,next:null},Ra===null){if(Gu===null)throw Error(Se(308));Ra=e,Gu.dependencies={lanes:0,firstContext:e}}else Ra=Ra.next=e;return t}var $s=null;function _d(e){$s===null?$s=[e]:$s.push(e)}function r2(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,_d(t)):(r.next=s.next,s.next=r),t.interleaved=r,Vi(e,n)}function Vi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var as=!1;function Dd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function n2(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ys(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,At&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Vi(e,r)}return s=n.interleaved,s===null?(t.next=t,_d(n)):(t.next=s.next,s.next=t),n.interleaved=t,Vi(e,r)}function wu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gd(e,r)}}function tp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=u:o=o.next=u,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function qu(e,t,r,n){var s=e.updateQueue;as=!1;var o=s.firstBaseUpdate,u=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var g=h,d=g.next;g.next=null,u===null?o=d:u.next=d,u=g;var x=e.alternate;x!==null&&(x=x.updateQueue,h=x.lastBaseUpdate,h!==u&&(h===null?x.firstBaseUpdate=d:h.next=d,x.lastBaseUpdate=g))}if(o!==null){var v=s.baseState;u=0,x=d=g=null,h=o;do{var y=h.lane,S=h.eventTime;if((n&y)===y){x!==null&&(x=x.next={eventTime:S,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var w=e,A=h;switch(y=t,S=r,A.tag){case 1:if(w=A.payload,typeof w=="function"){v=w.call(S,v,y);break e}v=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=A.payload,y=typeof w=="function"?w.call(S,v,y):w,y==null)break e;v=or({},v,y);break e;case 2:as=!0}}h.callback!==null&&h.lane!==0&&(e.flags|=64,y=s.effects,y===null?s.effects=[h]:y.push(h))}else S={eventTime:S,lane:y,tag:h.tag,payload:h.payload,callback:h.callback,next:null},x===null?(d=x=S,g=v):x=x.next=S,u|=y;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;y=h,h=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(x===null&&(g=v),s.baseState=g,s.firstBaseUpdate=d,s.lastBaseUpdate=x,t=s.shared.interleaved,t!==null){s=t;do u|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Qs|=u,e.lanes=u,e.memoizedState=v}}function rp(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Se(191,s));s.call(n)}}}var _l={},Ii=Ns(_l),pl=Ns(_l),gl=Ns(_l);function zs(e){if(e===_l)throw Error(Se(174));return e}function Rd(e,t){switch(Gt(gl,t),Gt(pl,e),Gt(Ii,_l),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=rh(t,e)}Jt(Ii),Gt(Ii,t)}function qa(){Jt(Ii),Jt(pl),Jt(gl)}function i2(e){zs(gl.current);var t=zs(Ii.current),r=rh(t,e.type);t!==r&&(Gt(pl,e),Gt(Ii,r))}function Od(e){pl.current===e&&(Jt(Ii),Jt(pl))}var sr=Ns(0);function Xu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Df=[];function Fd(){for(var e=0;e<Df.length;e++)Df[e]._workInProgressVersionPrimary=null;Df.length=0}var Eu=Ki.ReactCurrentDispatcher,Rf=Ki.ReactCurrentBatchConfig,Zs=0,ar=null,br=null,Or=null,Yu=!1,qo=!1,ml=0,l3=0;function zr(){throw Error(Se(321))}function Pd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fi(e[r],t[r]))return!1;return!0}function Md(e,t,r,n,s,o){if(Zs=o,ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Eu.current=e===null||e.memoizedState===null?h3:d3,e=r(n,s),qo){o=0;do{if(qo=!1,ml=0,25<=o)throw Error(Se(301));o+=1,Or=br=null,t.updateQueue=null,Eu.current=p3,e=r(n,s)}while(qo)}if(Eu.current=Zu,t=br!==null&&br.next!==null,Zs=0,Or=br=ar=null,Yu=!1,t)throw Error(Se(300));return e}function Bd(){var e=ml!==0;return ml=0,e}function vi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?ar.memoizedState=Or=e:Or=Or.next=e,Or}function Wn(){if(br===null){var e=ar.alternate;e=e!==null?e.memoizedState:null}else e=br.next;var t=Or===null?ar.memoizedState:Or.next;if(t!==null)Or=t,br=e;else{if(e===null)throw Error(Se(310));br=e,e={memoizedState:br.memoizedState,baseState:br.baseState,baseQueue:br.baseQueue,queue:br.queue,next:null},Or===null?ar.memoizedState=Or=e:Or=Or.next=e}return Or}function yl(e,t){return typeof t=="function"?t(e):t}function Of(e){var t=Wn(),r=t.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=e;var n=br,s=n.baseQueue,o=r.pending;if(o!==null){if(s!==null){var u=s.next;s.next=o.next,o.next=u}n.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,n=n.baseState;var h=u=null,g=null,d=o;do{var x=d.lane;if((Zs&x)===x)g!==null&&(g=g.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var v={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};g===null?(h=g=v,u=n):g=g.next=v,ar.lanes|=x,Qs|=x}d=d.next}while(d!==null&&d!==o);g===null?u=n:g.next=h,fi(n,t.memoizedState)||(pn=!0),t.memoizedState=n,t.baseState=u,t.baseQueue=g,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do o=s.lane,ar.lanes|=o,Qs|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ff(e){var t=Wn(),r=t.queue;if(r===null)throw Error(Se(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var u=s=s.next;do o=e(o,u.action),u=u.next;while(u!==s);fi(o,t.memoizedState)||(pn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,n]}function s2(){}function a2(e,t){var r=ar,n=Wn(),s=t(),o=!fi(n.memoizedState,s);if(o&&(n.memoizedState=s,pn=!0),n=n.queue,Ld(u2.bind(null,r,n,e),[e]),n.getSnapshot!==t||o||Or!==null&&Or.memoizedState.tag&1){if(r.flags|=2048,vl(9,l2.bind(null,r,n,s,t),void 0,null),Pr===null)throw Error(Se(349));Zs&30||o2(r,t,s)}return s}function o2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ar.updateQueue,t===null?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function l2(e,t,r,n){t.value=r,t.getSnapshot=n,c2(t)&&f2(e)}function u2(e,t,r){return r(function(){c2(t)&&f2(e)})}function c2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fi(e,r)}catch{return!0}}function f2(e){var t=Vi(e,1);t!==null&&li(t,e,1,-1)}function np(e){var t=vi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yl,lastRenderedState:e},t.queue=e,e=e.dispatch=f3.bind(null,ar,e),[t.memoizedState,e]}function vl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ar.updateQueue,t===null?(t={lastEffect:null,stores:null},ar.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function h2(){return Wn().memoizedState}function Su(e,t,r,n){var s=vi();ar.flags|=e,s.memoizedState=vl(1|t,r,void 0,n===void 0?null:n)}function Cc(e,t,r,n){var s=Wn();n=n===void 0?null:n;var o=void 0;if(br!==null){var u=br.memoizedState;if(o=u.destroy,n!==null&&Pd(n,u.deps)){s.memoizedState=vl(t,r,o,n);return}}ar.flags|=e,s.memoizedState=vl(1|t,r,o,n)}function ip(e,t){return Su(8390656,8,e,t)}function Ld(e,t){return Cc(2048,8,e,t)}function d2(e,t){return Cc(4,2,e,t)}function p2(e,t){return Cc(4,4,e,t)}function g2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function m2(e,t,r){return r=r!=null?r.concat([e]):null,Cc(4,4,g2.bind(null,t,e),r)}function kd(){}function y2(e,t){var r=Wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Pd(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function v2(e,t){var r=Wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Pd(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function x2(e,t,r){return Zs&21?(fi(r,t)||(r=Cm(),ar.lanes|=r,Qs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,pn=!0),e.memoizedState=r)}function u3(e,t){var r=Ft;Ft=r!==0&&4>r?r:4,e(!0);var n=Rf.transition;Rf.transition={};try{e(!1),t()}finally{Ft=r,Rf.transition=n}}function w2(){return Wn().memoizedState}function c3(e,t,r){var n=xs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},E2(e))S2(t,r);else if(r=r2(e,t,r,n),r!==null){var s=tn();li(r,e,n,s),A2(r,t,n)}}function f3(e,t,r){var n=xs(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(E2(e))S2(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,h=o(u,r);if(s.hasEagerState=!0,s.eagerState=h,fi(h,u)){var g=t.interleaved;g===null?(s.next=s,_d(t)):(s.next=g.next,g.next=s),t.interleaved=s;return}}catch{}finally{}r=r2(e,t,s,n),r!==null&&(s=tn(),li(r,e,n,s),A2(r,t,n))}}function E2(e){var t=e.alternate;return e===ar||t!==null&&t===ar}function S2(e,t){qo=Yu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function A2(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gd(e,r)}}var Zu={readContext:Kn,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},h3={readContext:Kn,useCallback:function(e,t){return vi().memoizedState=[e,t===void 0?null:t],e},useContext:Kn,useEffect:ip,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Su(4194308,4,g2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Su(4194308,4,e,t)},useInsertionEffect:function(e,t){return Su(4,2,e,t)},useMemo:function(e,t){var r=vi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=vi();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=c3.bind(null,ar,e),[n.memoizedState,e]},useRef:function(e){var t=vi();return e={current:e},t.memoizedState=e},useState:np,useDebugValue:kd,useDeferredValue:function(e){return vi().memoizedState=e},useTransition:function(){var e=np(!1),t=e[0];return e=u3.bind(null,e[1]),vi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ar,s=vi();if(rr){if(r===void 0)throw Error(Se(407));r=r()}else{if(r=t(),Pr===null)throw Error(Se(349));Zs&30||o2(n,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,ip(u2.bind(null,n,o,e),[e]),n.flags|=2048,vl(9,l2.bind(null,n,o,r,t),void 0,null),r},useId:function(){var e=vi(),t=Pr.identifierPrefix;if(rr){var r=Pi,n=Fi;r=(n&~(1<<32-oi(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ml++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=l3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},d3={readContext:Kn,useCallback:y2,useContext:Kn,useEffect:Ld,useImperativeHandle:m2,useInsertionEffect:d2,useLayoutEffect:p2,useMemo:v2,useReducer:Of,useRef:h2,useState:function(){return Of(yl)},useDebugValue:kd,useDeferredValue:function(e){var t=Wn();return x2(t,br.memoizedState,e)},useTransition:function(){var e=Of(yl)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:s2,useSyncExternalStore:a2,useId:w2,unstable_isNewReconciler:!1},p3={readContext:Kn,useCallback:y2,useContext:Kn,useEffect:Ld,useImperativeHandle:m2,useInsertionEffect:d2,useLayoutEffect:p2,useMemo:v2,useReducer:Ff,useRef:h2,useState:function(){return Ff(yl)},useDebugValue:kd,useDeferredValue:function(e){var t=Wn();return br===null?t.memoizedState=e:x2(t,br.memoizedState,e)},useTransition:function(){var e=Ff(yl)[0],t=Wn().memoizedState;return[e,t]},useMutableSource:s2,useSyncExternalStore:a2,useId:w2,unstable_isNewReconciler:!1};function ti(e,t){if(e&&e.defaultProps){t=or({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ah(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:or({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ic={isMounted:function(e){return(e=e._reactInternals)?na(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tn(),s=xs(e),o=Bi(n,s);o.payload=t,r!=null&&(o.callback=r),t=ys(e,o,s),t!==null&&(li(t,e,s,n),wu(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tn(),s=xs(e),o=Bi(n,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ys(e,o,s),t!==null&&(li(t,e,s,n),wu(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tn(),n=xs(e),s=Bi(r,n);s.tag=2,t!=null&&(s.callback=t),t=ys(e,s,n),t!==null&&(li(t,e,n,r),wu(t,e,n))}};function sp(e,t,r,n,s,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,u):t.prototype&&t.prototype.isPureReactComponent?!cl(r,n)||!cl(s,o):!0}function C2(e,t,r){var n=!1,s=Is,o=t.contextType;return typeof o=="object"&&o!==null?o=Kn(o):(s=mn(t)?Xs:Xr.current,n=t.contextTypes,o=(n=n!=null)?Ka(e,s):Is),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ic,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function ap(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ic.enqueueReplaceState(t,t.state,null)}function Ch(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Dd(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Kn(o):(o=mn(t)?Xs:Xr.current,s.context=Ka(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Ah(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ic.enqueueReplaceState(s,s.state,null),qu(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xa(e,t){try{var r="",n=t;do r+=Vx(n),n=n.return;while(n);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Pf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ih(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var g3=typeof WeakMap=="function"?WeakMap:Map;function I2(e,t,r){r=Bi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ju||(Ju=!0,Mh=n),Ih(e,t)},r}function b2(e,t,r){r=Bi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Ih(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Ih(e,t),typeof n!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function op(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new g3;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=_3.bind(null,e,t,r),t.then(e,e))}function lp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function up(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bi(-1,1),t.tag=2,ys(r,t,1))),r.lanes|=1),e)}var m3=Ki.ReactCurrentOwner,pn=!1;function Qr(e,t,r,n){t.child=e===null?t2(t,null,r,n):Ga(t,e.child,r,n)}function cp(e,t,r,n,s){r=r.render;var o=t.ref;return Ha(t,s),n=Md(e,t,r,n,o,s),r=Bd(),e!==null&&!pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,$i(e,t,s)):(rr&&r&&Ad(t),t.flags|=1,Qr(e,t,n,s),t.child)}function fp(e,t,r,n,s){if(e===null){var o=r.type;return typeof o=="function"&&!Wd(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,T2(e,t,o,n,s)):(e=bu(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var u=o.memoizedProps;if(r=r.compare,r=r!==null?r:cl,r(u,n)&&e.ref===t.ref)return $i(e,t,s)}return t.flags|=1,e=ws(o,n),e.ref=t.ref,e.return=t,t.child=e}function T2(e,t,r,n,s){if(e!==null){var o=e.memoizedProps;if(cl(o,n)&&e.ref===t.ref)if(pn=!1,t.pendingProps=n=o,(e.lanes&s)!==0)e.flags&131072&&(pn=!0);else return t.lanes=e.lanes,$i(e,t,s)}return bh(e,t,r,n,s)}function N2(e,t,r){var n=t.pendingProps,s=n.children,o=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Gt(Fa,An),An|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Gt(Fa,An),An|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Gt(Fa,An),An|=n}else o!==null?(n=o.baseLanes|r,t.memoizedState=null):n=r,Gt(Fa,An),An|=n;return Qr(e,t,s,r),t.child}function _2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function bh(e,t,r,n,s){var o=mn(r)?Xs:Xr.current;return o=Ka(t,o),Ha(t,s),r=Md(e,t,r,n,o,s),n=Bd(),e!==null&&!pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,$i(e,t,s)):(rr&&n&&Ad(t),t.flags|=1,Qr(e,t,r,s),t.child)}function hp(e,t,r,n,s){if(mn(r)){var o=!0;$u(t)}else o=!1;if(Ha(t,s),t.stateNode===null)Au(e,t),C2(t,r,n),Ch(t,r,n,s),n=!0;else if(e===null){var u=t.stateNode,h=t.memoizedProps;u.props=h;var g=u.context,d=r.contextType;typeof d=="object"&&d!==null?d=Kn(d):(d=mn(r)?Xs:Xr.current,d=Ka(t,d));var x=r.getDerivedStateFromProps,v=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";v||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==n||g!==d)&&ap(t,u,n,d),as=!1;var y=t.memoizedState;u.state=y,qu(t,n,u,s),g=t.memoizedState,h!==n||y!==g||gn.current||as?(typeof x=="function"&&(Ah(t,r,x,n),g=t.memoizedState),(h=as||sp(t,r,h,n,y,g,d))?(v||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=g),u.props=n,u.state=g,u.context=d,n=h):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,n2(e,t),h=t.memoizedProps,d=t.type===t.elementType?h:ti(t.type,h),u.props=d,v=t.pendingProps,y=u.context,g=r.contextType,typeof g=="object"&&g!==null?g=Kn(g):(g=mn(r)?Xs:Xr.current,g=Ka(t,g));var S=r.getDerivedStateFromProps;(x=typeof S=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==v||y!==g)&&ap(t,u,n,g),as=!1,y=t.memoizedState,u.state=y,qu(t,n,u,s);var w=t.memoizedState;h!==v||y!==w||gn.current||as?(typeof S=="function"&&(Ah(t,r,S,n),w=t.memoizedState),(d=as||sp(t,r,d,n,y,w,g)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,w,g),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,w,g)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=w),u.props=n,u.state=w,u.context=g,n=d):(typeof u.componentDidUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),n=!1)}return Th(e,t,r,n,o,s)}function Th(e,t,r,n,s,o){_2(e,t);var u=(t.flags&128)!==0;if(!n&&!u)return s&&Z0(t,r,!1),$i(e,t,o);n=t.stateNode,m3.current=t;var h=u&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&u?(t.child=Ga(t,e.child,null,o),t.child=Ga(t,null,h,o)):Qr(e,t,h,o),t.memoizedState=n.state,s&&Z0(t,r,!0),t.child}function D2(e){var t=e.stateNode;t.pendingContext?Y0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y0(e,t.context,!1),Rd(e,t.containerInfo)}function dp(e,t,r,n,s){return Wa(),Id(s),t.flags|=256,Qr(e,t,r,n),t.child}var Nh={dehydrated:null,treeContext:null,retryLane:0};function _h(e){return{baseLanes:e,cachePool:null,transitions:null}}function R2(e,t,r){var n=t.pendingProps,s=sr.current,o=!1,u=(t.flags&128)!==0,h;if((h=u)||(h=e!==null&&e.memoizedState===null?!1:(s&2)!==0),h?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Gt(sr,s&1),e===null)return Eh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(u=n.children,e=n.fallback,o?(n=t.mode,o=t.child,u={mode:"hidden",children:u},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=Nc(u,n,0,null),e=qs(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=_h(r),t.memoizedState=Nh,e):jd(t,u));if(s=e.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return y3(e,t,u,n,h,s,r);if(o){o=n.fallback,u=t.mode,s=e.child,h=s.sibling;var g={mode:"hidden",children:n.children};return!(u&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=g,t.deletions=null):(n=ws(s,g),n.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=ws(h,o):(o=qs(o,u,r,null),o.flags|=2),o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,u=e.child.memoizedState,u=u===null?_h(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~r,t.memoizedState=Nh,n}return o=e.child,e=o.sibling,n=ws(o,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jd(e,t){return t=Nc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function iu(e,t,r,n){return n!==null&&Id(n),Ga(t,e.child,null,r),e=jd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function y3(e,t,r,n,s,o,u){if(r)return t.flags&256?(t.flags&=-257,n=Pf(Error(Se(422))),iu(e,t,u,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=n.fallback,s=t.mode,n=Nc({mode:"visible",children:n.children},s,0,null),o=qs(o,s,u,null),o.flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,t.mode&1&&Ga(t,e.child,null,u),t.child.memoizedState=_h(u),t.memoizedState=Nh,o);if(!(t.mode&1))return iu(e,t,u,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var h=n.dgst;return n=h,o=Error(Se(419)),n=Pf(o,n,void 0),iu(e,t,u,n)}if(h=(u&e.childLanes)!==0,pn||h){if(n=Pr,n!==null){switch(u&-u){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|u)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Vi(e,s),li(n,e,s,-1))}return Kd(),n=Pf(Error(Se(421))),iu(e,t,u,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=D3.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,Tn=ms(s.nextSibling),Nn=t,rr=!0,si=null,e!==null&&(Hn[Un++]=Fi,Hn[Un++]=Pi,Hn[Un++]=Ys,Fi=e.id,Pi=e.overflow,Ys=t),t=jd(t,n.children),t.flags|=4096,t)}function pp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Sh(e.return,t,r)}function Mf(e,t,r,n,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=s)}function O2(e,t,r){var n=t.pendingProps,s=n.revealOrder,o=n.tail;if(Qr(e,t,n.children,r),n=sr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pp(e,r,t);else if(e.tag===19)pp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Gt(sr,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Xu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Mf(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Xu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Mf(t,!0,r,null,o);break;case"together":Mf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Au(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $i(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Se(153));if(t.child!==null){for(e=t.child,r=ws(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ws(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function v3(e,t,r){switch(t.tag){case 3:D2(t),Wa();break;case 5:i2(t);break;case 1:mn(t.type)&&$u(t);break;case 4:Rd(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Gt(Wu,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Gt(sr,sr.current&1),t.flags|=128,null):r&t.child.childLanes?R2(e,t,r):(Gt(sr,sr.current&1),e=$i(e,t,r),e!==null?e.sibling:null);Gt(sr,sr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return O2(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Gt(sr,sr.current),n)break;return null;case 22:case 23:return t.lanes=0,N2(e,t,r)}return $i(e,t,r)}var F2,Dh,P2,M2;F2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dh=function(){};P2=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,zs(Ii.current);var o=null;switch(r){case"input":s=Qf(e,s),n=Qf(e,n),o=[];break;case"select":s=or({},s,{value:void 0}),n=or({},n,{value:void 0}),o=[];break;case"textarea":s=th(e,s),n=th(e,n),o=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Uu)}nh(r,n);var u;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var h=s[d];for(u in h)h.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(nl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in n){var g=n[d];if(h=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&g!==h&&(g!=null||h!=null))if(d==="style")if(h){for(u in h)!h.hasOwnProperty(u)||g&&g.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in g)g.hasOwnProperty(u)&&h[u]!==g[u]&&(r||(r={}),r[u]=g[u])}else r||(o||(o=[]),o.push(d,r)),r=g;else d==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(o=o||[]).push(d,g)):d==="children"?typeof g!="string"&&typeof g!="number"||(o=o||[]).push(d,""+g):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(nl.hasOwnProperty(d)?(g!=null&&d==="onScroll"&&Xt("scroll",e),o||h===g||(o=[])):(o=o||[]).push(d,g))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};M2=function(e,t,r,n){r!==n&&(t.flags|=4)};function _o(e,t){if(!rr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Kr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function x3(e,t,r){var n=t.pendingProps;switch(Cd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(t),null;case 1:return mn(t.type)&&Vu(),Kr(t),null;case 3:return n=t.stateNode,qa(),Jt(gn),Jt(Xr),Fd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ru(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,si!==null&&(kh(si),si=null))),Dh(e,t),Kr(t),null;case 5:Od(t);var s=zs(gl.current);if(r=t.type,e!==null&&t.stateNode!=null)P2(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Se(166));return Kr(t),null}if(e=zs(Ii.current),ru(t)){n=t.stateNode,r=t.type;var o=t.memoizedProps;switch(n[wi]=t,n[dl]=o,e=(t.mode&1)!==0,r){case"dialog":Xt("cancel",n),Xt("close",n);break;case"iframe":case"object":case"embed":Xt("load",n);break;case"video":case"audio":for(s=0;s<jo.length;s++)Xt(jo[s],n);break;case"source":Xt("error",n);break;case"img":case"image":case"link":Xt("error",n),Xt("load",n);break;case"details":Xt("toggle",n);break;case"input":A0(n,o),Xt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},Xt("invalid",n);break;case"textarea":I0(n,o),Xt("invalid",n)}nh(r,o),s=null;for(var u in o)if(o.hasOwnProperty(u)){var h=o[u];u==="children"?typeof h=="string"?n.textContent!==h&&(o.suppressHydrationWarning!==!0&&tu(n.textContent,h,e),s=["children",h]):typeof h=="number"&&n.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&tu(n.textContent,h,e),s=["children",""+h]):nl.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Xt("scroll",n)}switch(r){case"input":Gl(n),C0(n,o,!0);break;case"textarea":Gl(n),b0(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=Uu)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{u=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=um(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),r==="select"&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[wi]=t,e[dl]=n,F2(e,t,!1,!1),t.stateNode=e;e:{switch(u=ih(r,n),r){case"dialog":Xt("cancel",e),Xt("close",e),s=n;break;case"iframe":case"object":case"embed":Xt("load",e),s=n;break;case"video":case"audio":for(s=0;s<jo.length;s++)Xt(jo[s],e);s=n;break;case"source":Xt("error",e),s=n;break;case"img":case"image":case"link":Xt("error",e),Xt("load",e),s=n;break;case"details":Xt("toggle",e),s=n;break;case"input":A0(e,n),s=Qf(e,n),Xt("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=or({},n,{value:void 0}),Xt("invalid",e);break;case"textarea":I0(e,n),s=th(e,n),Xt("invalid",e);break;default:s=n}nh(r,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var g=h[o];o==="style"?hm(e,g):o==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&cm(e,g)):o==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&il(e,g):typeof g=="number"&&il(e,""+g):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(nl.hasOwnProperty(o)?g!=null&&o==="onScroll"&&Xt("scroll",e):g!=null&&ud(e,o,g,u))}switch(r){case"input":Gl(e),C0(e,n,!1);break;case"textarea":Gl(e),b0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Cs(n.value));break;case"select":e.multiple=!!n.multiple,o=n.value,o!=null?Ba(e,!!n.multiple,o,!1):n.defaultValue!=null&&Ba(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Uu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Kr(t),null;case 6:if(e&&t.stateNode!=null)M2(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Se(166));if(r=zs(gl.current),zs(Ii.current),ru(t)){if(n=t.stateNode,r=t.memoizedProps,n[wi]=t,(o=n.nodeValue!==r)&&(e=Nn,e!==null))switch(e.tag){case 3:tu(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&tu(n.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[wi]=t,t.stateNode=n}return Kr(t),null;case 13:if(Jt(sr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(rr&&Tn!==null&&t.mode&1&&!(t.flags&128))Jm(),Wa(),t.flags|=98560,o=!1;else if(o=ru(t),n!==null&&n.dehydrated!==null){if(e===null){if(!o)throw Error(Se(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Se(317));o[wi]=t}else Wa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Kr(t),o=!1}else si!==null&&(kh(si),si=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||sr.current&1?Nr===0&&(Nr=3):Kd())),t.updateQueue!==null&&(t.flags|=4),Kr(t),null);case 4:return qa(),Dh(e,t),e===null&&fl(t.stateNode.containerInfo),Kr(t),null;case 10:return Nd(t.type._context),Kr(t),null;case 17:return mn(t.type)&&Vu(),Kr(t),null;case 19:if(Jt(sr),o=t.memoizedState,o===null)return Kr(t),null;if(n=(t.flags&128)!==0,u=o.rendering,u===null)if(n)_o(o,!1);else{if(Nr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(u=Xu(e),u!==null){for(t.flags|=128,_o(o,!1),n=u.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)o=r,e=n,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Gt(sr,sr.current&1|2),t.child}e=e.sibling}o.tail!==null&&vr()>Ya&&(t.flags|=128,n=!0,_o(o,!1),t.lanes=4194304)}else{if(!n)if(e=Xu(u),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),_o(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!rr)return Kr(t),null}else 2*vr()-o.renderingStartTime>Ya&&r!==1073741824&&(t.flags|=128,n=!0,_o(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(r=o.last,r!==null?r.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=vr(),t.sibling=null,r=sr.current,Gt(sr,n?r&1|2:r&1),t):(Kr(t),null);case 22:case 23:return zd(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?An&1073741824&&(Kr(t),t.subtreeFlags&6&&(t.flags|=8192)):Kr(t),null;case 24:return null;case 25:return null}throw Error(Se(156,t.tag))}function w3(e,t){switch(Cd(t),t.tag){case 1:return mn(t.type)&&Vu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qa(),Jt(gn),Jt(Xr),Fd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Od(t),null;case 13:if(Jt(sr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Se(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Jt(sr),null;case 4:return qa(),null;case 10:return Nd(t.type._context),null;case 22:case 23:return zd(),null;case 24:return null;default:return null}}var su=!1,qr=!1,E3=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Oa(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){fr(e,t,n)}else r.current=null}function Rh(e,t,r){try{r()}catch(n){fr(e,t,n)}}var gp=!1;function S3(e,t){if(ph=ku,e=Hm(),Sd(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var u=0,h=-1,g=-1,d=0,x=0,v=e,y=null;t:for(;;){for(var S;v!==r||s!==0&&v.nodeType!==3||(h=u+s),v!==o||n!==0&&v.nodeType!==3||(g=u+n),v.nodeType===3&&(u+=v.nodeValue.length),(S=v.firstChild)!==null;)y=v,v=S;for(;;){if(v===e)break t;if(y===r&&++d===s&&(h=u),y===o&&++x===n&&(g=u),(S=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=S}r=h===-1||g===-1?null:{start:h,end:g}}else r=null}r=r||{start:0,end:0}}else r=null;for(gh={focusedElem:e,selectionRange:r},ku=!1,Be=t;Be!==null;)if(t=Be,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Be=e;else for(;Be!==null;){t=Be;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var A=w.memoizedProps,b=w.memoizedState,I=t.stateNode,N=I.getSnapshotBeforeUpdate(t.elementType===t.type?A:ti(t.type,A),b);I.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(L){fr(t,t.return,L)}if(e=t.sibling,e!==null){e.return=t.return,Be=e;break}Be=t.return}return w=gp,gp=!1,w}function Xo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Rh(t,r,o)}s=s.next}while(s!==n)}}function bc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Oh(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function B2(e){var t=e.alternate;t!==null&&(e.alternate=null,B2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wi],delete t[dl],delete t[vh],delete t[i3],delete t[s3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function L2(e){return e.tag===5||e.tag===3||e.tag===4}function mp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||L2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fh(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Uu));else if(n!==4&&(e=e.child,e!==null))for(Fh(e,t,r),e=e.sibling;e!==null;)Fh(e,t,r),e=e.sibling}function Ph(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ph(e,t,r),e=e.sibling;e!==null;)Ph(e,t,r),e=e.sibling}var jr=null,ri=!1;function es(e,t,r){for(r=r.child;r!==null;)k2(e,t,r),r=r.sibling}function k2(e,t,r){if(Ci&&typeof Ci.onCommitFiberUnmount=="function")try{Ci.onCommitFiberUnmount(vc,r)}catch{}switch(r.tag){case 5:qr||Oa(r,t);case 6:var n=jr,s=ri;jr=null,es(e,t,r),jr=n,ri=s,jr!==null&&(ri?(e=jr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):jr.removeChild(r.stateNode));break;case 18:jr!==null&&(ri?(e=jr,r=r.stateNode,e.nodeType===8?Nf(e.parentNode,r):e.nodeType===1&&Nf(e,r),ll(e)):Nf(jr,r.stateNode));break;case 4:n=jr,s=ri,jr=r.stateNode.containerInfo,ri=!0,es(e,t,r),jr=n,ri=s;break;case 0:case 11:case 14:case 15:if(!qr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var o=s,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&Rh(r,t,u),s=s.next}while(s!==n)}es(e,t,r);break;case 1:if(!qr&&(Oa(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(h){fr(r,t,h)}es(e,t,r);break;case 21:es(e,t,r);break;case 22:r.mode&1?(qr=(n=qr)||r.memoizedState!==null,es(e,t,r),qr=n):es(e,t,r);break;default:es(e,t,r)}}function yp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new E3),t.forEach(function(n){var s=R3.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Zn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var o=e,u=t,h=u;e:for(;h!==null;){switch(h.tag){case 5:jr=h.stateNode,ri=!1;break e;case 3:jr=h.stateNode.containerInfo,ri=!0;break e;case 4:jr=h.stateNode.containerInfo,ri=!0;break e}h=h.return}if(jr===null)throw Error(Se(160));k2(o,u,s),jr=null,ri=!1;var g=s.alternate;g!==null&&(g.return=null),s.return=null}catch(d){fr(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)j2(t,e),t=t.sibling}function j2(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zn(t,e),yi(e),n&4){try{Xo(3,e,e.return),bc(3,e)}catch(A){fr(e,e.return,A)}try{Xo(5,e,e.return)}catch(A){fr(e,e.return,A)}}break;case 1:Zn(t,e),yi(e),n&512&&r!==null&&Oa(r,r.return);break;case 5:if(Zn(t,e),yi(e),n&512&&r!==null&&Oa(r,r.return),e.flags&32){var s=e.stateNode;try{il(s,"")}catch(A){fr(e,e.return,A)}}if(n&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,u=r!==null?r.memoizedProps:o,h=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&om(s,o),ih(h,u);var d=ih(h,o);for(u=0;u<g.length;u+=2){var x=g[u],v=g[u+1];x==="style"?hm(s,v):x==="dangerouslySetInnerHTML"?cm(s,v):x==="children"?il(s,v):ud(s,x,v,d)}switch(h){case"input":Jf(s,o);break;case"textarea":lm(s,o);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var S=o.value;S!=null?Ba(s,!!o.multiple,S,!1):y!==!!o.multiple&&(o.defaultValue!=null?Ba(s,!!o.multiple,o.defaultValue,!0):Ba(s,!!o.multiple,o.multiple?[]:"",!1))}s[dl]=o}catch(A){fr(e,e.return,A)}}break;case 6:if(Zn(t,e),yi(e),n&4){if(e.stateNode===null)throw Error(Se(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(A){fr(e,e.return,A)}}break;case 3:if(Zn(t,e),yi(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ll(t.containerInfo)}catch(A){fr(e,e.return,A)}break;case 4:Zn(t,e),yi(e);break;case 13:Zn(t,e),yi(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Vd=vr())),n&4&&yp(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(qr=(d=qr)||x,Zn(t,e),qr=d):Zn(t,e),yi(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!x&&e.mode&1)for(Be=e,x=e.child;x!==null;){for(v=Be=x;Be!==null;){switch(y=Be,S=y.child,y.tag){case 0:case 11:case 14:case 15:Xo(4,y,y.return);break;case 1:Oa(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){n=y,r=y.return;try{t=n,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(A){fr(n,r,A)}}break;case 5:Oa(y,y.return);break;case 22:if(y.memoizedState!==null){xp(v);continue}}S!==null?(S.return=y,Be=S):xp(v)}x=x.sibling}e:for(x=null,v=e;;){if(v.tag===5){if(x===null){x=v;try{s=v.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=v.stateNode,g=v.memoizedProps.style,u=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=fm("display",u))}catch(A){fr(e,e.return,A)}}}else if(v.tag===6){if(x===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(A){fr(e,e.return,A)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;x===v&&(x=null),v=v.return}x===v&&(x=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Zn(t,e),yi(e),n&4&&yp(e);break;case 21:break;default:Zn(t,e),yi(e)}}function yi(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(L2(r)){var n=r;break e}r=r.return}throw Error(Se(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(il(s,""),n.flags&=-33);var o=mp(e);Ph(e,o,s);break;case 3:case 4:var u=n.stateNode.containerInfo,h=mp(e);Fh(e,h,u);break;default:throw Error(Se(161))}}catch(g){fr(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function A3(e,t,r){Be=e,H2(e)}function H2(e,t,r){for(var n=(e.mode&1)!==0;Be!==null;){var s=Be,o=s.child;if(s.tag===22&&n){var u=s.memoizedState!==null||su;if(!u){var h=s.alternate,g=h!==null&&h.memoizedState!==null||qr;h=su;var d=qr;if(su=u,(qr=g)&&!d)for(Be=s;Be!==null;)u=Be,g=u.child,u.tag===22&&u.memoizedState!==null?wp(s):g!==null?(g.return=u,Be=g):wp(s);for(;o!==null;)Be=o,H2(o),o=o.sibling;Be=s,su=h,qr=d}vp(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Be=o):vp(e)}}function vp(e){for(;Be!==null;){var t=Be;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qr||bc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:ti(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&rp(t,o,n);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}rp(t,u,r)}break;case 5:var h=t.stateNode;if(r===null&&t.flags&4){r=h;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&r.focus();break;case"img":g.src&&(r.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var v=x.dehydrated;v!==null&&ll(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}qr||t.flags&512&&Oh(t)}catch(y){fr(t,t.return,y)}}if(t===e){Be=null;break}if(r=t.sibling,r!==null){r.return=t.return,Be=r;break}Be=t.return}}function xp(e){for(;Be!==null;){var t=Be;if(t===e){Be=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Be=r;break}Be=t.return}}function wp(e){for(;Be!==null;){var t=Be;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{bc(4,t)}catch(g){fr(t,r,g)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(g){fr(t,s,g)}}var o=t.return;try{Oh(t)}catch(g){fr(t,o,g)}break;case 5:var u=t.return;try{Oh(t)}catch(g){fr(t,u,g)}}}catch(g){fr(t,t.return,g)}if(t===e){Be=null;break}var h=t.sibling;if(h!==null){h.return=t.return,Be=h;break}Be=t.return}}var C3=Math.ceil,Qu=Ki.ReactCurrentDispatcher,Hd=Ki.ReactCurrentOwner,zn=Ki.ReactCurrentBatchConfig,At=0,Pr=null,Er=null,Ur=0,An=0,Fa=Ns(0),Nr=0,xl=null,Qs=0,Tc=0,Ud=0,Yo=null,fn=null,Vd=0,Ya=1/0,Di=null,Ju=!1,Mh=null,vs=null,au=!1,cs=null,ec=0,Zo=0,Bh=null,Cu=-1,Iu=0;function tn(){return At&6?vr():Cu!==-1?Cu:Cu=vr()}function xs(e){return e.mode&1?At&2&&Ur!==0?Ur&-Ur:o3.transition!==null?(Iu===0&&(Iu=Cm()),Iu):(e=Ft,e!==0||(e=window.event,e=e===void 0?16:Rm(e.type)),e):1}function li(e,t,r,n){if(50<Zo)throw Zo=0,Bh=null,Error(Se(185));bl(e,r,n),(!(At&2)||e!==Pr)&&(e===Pr&&(!(At&2)&&(Tc|=r),Nr===4&&ls(e,Ur)),yn(e,n),r===1&&At===0&&!(t.mode&1)&&(Ya=vr()+500,Ac&&_s()))}function yn(e,t){var r=e.callbackNode;ow(e,t);var n=Lu(e,e===Pr?Ur:0);if(n===0)r!==null&&_0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&_0(r),t===1)e.tag===0?a3(Ep.bind(null,e)):Ym(Ep.bind(null,e)),r3(function(){!(At&6)&&_s()}),r=null;else{switch(Im(n)){case 1:r=pd;break;case 4:r=Sm;break;case 16:r=Bu;break;case 536870912:r=Am;break;default:r=Bu}r=q2(r,U2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function U2(e,t){if(Cu=-1,Iu=0,At&6)throw Error(Se(327));var r=e.callbackNode;if(Ua()&&e.callbackNode!==r)return null;var n=Lu(e,e===Pr?Ur:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=tc(e,n);else{t=n;var s=At;At|=2;var o=$2();(Pr!==e||Ur!==t)&&(Di=null,Ya=vr()+500,Gs(e,t));do try{T3();break}catch(h){V2(e,h)}while(!0);Td(),Qu.current=o,At=s,Er!==null?t=0:(Pr=null,Ur=0,t=Nr)}if(t!==0){if(t===2&&(s=uh(e),s!==0&&(n=s,t=Lh(e,s))),t===1)throw r=xl,Gs(e,0),ls(e,n),yn(e,vr()),r;if(t===6)ls(e,n);else{if(s=e.current.alternate,!(n&30)&&!I3(s)&&(t=tc(e,n),t===2&&(o=uh(e),o!==0&&(n=o,t=Lh(e,o))),t===1))throw r=xl,Gs(e,0),ls(e,n),yn(e,vr()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Se(345));case 2:Ls(e,fn,Di);break;case 3:if(ls(e,n),(n&130023424)===n&&(t=Vd+500-vr(),10<t)){if(Lu(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){tn(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=yh(Ls.bind(null,e,fn,Di),t);break}Ls(e,fn,Di);break;case 4:if(ls(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var u=31-oi(n);o=1<<u,u=t[u],u>s&&(s=u),n&=~o}if(n=s,n=vr()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*C3(n/1960))-n,10<n){e.timeoutHandle=yh(Ls.bind(null,e,fn,Di),n);break}Ls(e,fn,Di);break;case 5:Ls(e,fn,Di);break;default:throw Error(Se(329))}}}return yn(e,vr()),e.callbackNode===r?U2.bind(null,e):null}function Lh(e,t){var r=Yo;return e.current.memoizedState.isDehydrated&&(Gs(e,t).flags|=256),e=tc(e,t),e!==2&&(t=fn,fn=r,t!==null&&kh(t)),e}function kh(e){fn===null?fn=e:fn.push.apply(fn,e)}function I3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],o=s.getSnapshot;s=s.value;try{if(!fi(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ls(e,t){for(t&=~Ud,t&=~Tc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-oi(t),n=1<<r;e[r]=-1,t&=~n}}function Ep(e){if(At&6)throw Error(Se(327));Ua();var t=Lu(e,0);if(!(t&1))return yn(e,vr()),null;var r=tc(e,t);if(e.tag!==0&&r===2){var n=uh(e);n!==0&&(t=n,r=Lh(e,n))}if(r===1)throw r=xl,Gs(e,0),ls(e,t),yn(e,vr()),r;if(r===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ls(e,fn,Di),yn(e,vr()),null}function $d(e,t){var r=At;At|=1;try{return e(t)}finally{At=r,At===0&&(Ya=vr()+500,Ac&&_s())}}function Js(e){cs!==null&&cs.tag===0&&!(At&6)&&Ua();var t=At;At|=1;var r=zn.transition,n=Ft;try{if(zn.transition=null,Ft=1,e)return e()}finally{Ft=n,zn.transition=r,At=t,!(At&6)&&_s()}}function zd(){An=Fa.current,Jt(Fa)}function Gs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,t3(r)),Er!==null)for(r=Er.return;r!==null;){var n=r;switch(Cd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Vu();break;case 3:qa(),Jt(gn),Jt(Xr),Fd();break;case 5:Od(n);break;case 4:qa();break;case 13:Jt(sr);break;case 19:Jt(sr);break;case 10:Nd(n.type._context);break;case 22:case 23:zd()}r=r.return}if(Pr=e,Er=e=ws(e.current,null),Ur=An=t,Nr=0,xl=null,Ud=Tc=Qs=0,fn=Yo=null,$s!==null){for(t=0;t<$s.length;t++)if(r=$s[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,o=r.pending;if(o!==null){var u=o.next;o.next=s,n.next=u}r.pending=n}$s=null}return e}function V2(e,t){do{var r=Er;try{if(Td(),Eu.current=Zu,Yu){for(var n=ar.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Yu=!1}if(Zs=0,Or=br=ar=null,qo=!1,ml=0,Hd.current=null,r===null||r.return===null){Nr=1,xl=t,Er=null;break}e:{var o=e,u=r.return,h=r,g=t;if(t=Ur,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var d=g,x=h,v=x.tag;if(!(x.mode&1)&&(v===0||v===11||v===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var S=lp(u);if(S!==null){S.flags&=-257,up(S,u,h,o,t),S.mode&1&&op(o,d,t),t=S,g=d;var w=t.updateQueue;if(w===null){var A=new Set;A.add(g),t.updateQueue=A}else w.add(g);break e}else{if(!(t&1)){op(o,d,t),Kd();break e}g=Error(Se(426))}}else if(rr&&h.mode&1){var b=lp(u);if(b!==null){!(b.flags&65536)&&(b.flags|=256),up(b,u,h,o,t),Id(Xa(g,h));break e}}o=g=Xa(g,h),Nr!==4&&(Nr=2),Yo===null?Yo=[o]:Yo.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var I=I2(o,g,t);tp(o,I);break e;case 1:h=g;var N=o.type,F=o.stateNode;if(!(o.flags&128)&&(typeof N.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(vs===null||!vs.has(F)))){o.flags|=65536,t&=-t,o.lanes|=t;var L=b2(o,h,t);tp(o,L);break e}}o=o.return}while(o!==null)}K2(r)}catch(H){t=H,Er===r&&r!==null&&(Er=r=r.return);continue}break}while(!0)}function $2(){var e=Qu.current;return Qu.current=Zu,e===null?Zu:e}function Kd(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Pr===null||!(Qs&268435455)&&!(Tc&268435455)||ls(Pr,Ur)}function tc(e,t){var r=At;At|=2;var n=$2();(Pr!==e||Ur!==t)&&(Di=null,Gs(e,t));do try{b3();break}catch(s){V2(e,s)}while(!0);if(Td(),At=r,Qu.current=n,Er!==null)throw Error(Se(261));return Pr=null,Ur=0,Nr}function b3(){for(;Er!==null;)z2(Er)}function T3(){for(;Er!==null&&!Qx();)z2(Er)}function z2(e){var t=G2(e.alternate,e,An);e.memoizedProps=e.pendingProps,t===null?K2(e):Er=t,Hd.current=null}function K2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=w3(r,t),r!==null){r.flags&=32767,Er=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Nr=6,Er=null;return}}else if(r=x3(r,t,An),r!==null){Er=r;return}if(t=t.sibling,t!==null){Er=t;return}Er=t=e}while(t!==null);Nr===0&&(Nr=5)}function Ls(e,t,r){var n=Ft,s=zn.transition;try{zn.transition=null,Ft=1,N3(e,t,r,n)}finally{zn.transition=s,Ft=n}return null}function N3(e,t,r,n){do Ua();while(cs!==null);if(At&6)throw Error(Se(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(lw(e,o),e===Pr&&(Er=Pr=null,Ur=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||au||(au=!0,q2(Bu,function(){return Ua(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=zn.transition,zn.transition=null;var u=Ft;Ft=1;var h=At;At|=4,Hd.current=null,S3(e,r),j2(r,e),qw(gh),ku=!!ph,gh=ph=null,e.current=r,A3(r),Jx(),At=h,Ft=u,zn.transition=o}else e.current=r;if(au&&(au=!1,cs=e,ec=s),o=e.pendingLanes,o===0&&(vs=null),rw(r.stateNode),yn(e,vr()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ju)throw Ju=!1,e=Mh,Mh=null,e;return ec&1&&e.tag!==0&&Ua(),o=e.pendingLanes,o&1?e===Bh?Zo++:(Zo=0,Bh=e):Zo=0,_s(),null}function Ua(){if(cs!==null){var e=Im(ec),t=zn.transition,r=Ft;try{if(zn.transition=null,Ft=16>e?16:e,cs===null)var n=!1;else{if(e=cs,cs=null,ec=0,At&6)throw Error(Se(331));var s=At;for(At|=4,Be=e.current;Be!==null;){var o=Be,u=o.child;if(Be.flags&16){var h=o.deletions;if(h!==null){for(var g=0;g<h.length;g++){var d=h[g];for(Be=d;Be!==null;){var x=Be;switch(x.tag){case 0:case 11:case 15:Xo(8,x,o)}var v=x.child;if(v!==null)v.return=x,Be=v;else for(;Be!==null;){x=Be;var y=x.sibling,S=x.return;if(B2(x),x===d){Be=null;break}if(y!==null){y.return=S,Be=y;break}Be=S}}}var w=o.alternate;if(w!==null){var A=w.child;if(A!==null){w.child=null;do{var b=A.sibling;A.sibling=null,A=b}while(A!==null)}}Be=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,Be=u;else e:for(;Be!==null;){if(o=Be,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xo(9,o,o.return)}var I=o.sibling;if(I!==null){I.return=o.return,Be=I;break e}Be=o.return}}var N=e.current;for(Be=N;Be!==null;){u=Be;var F=u.child;if(u.subtreeFlags&2064&&F!==null)F.return=u,Be=F;else e:for(u=N;Be!==null;){if(h=Be,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:bc(9,h)}}catch(H){fr(h,h.return,H)}if(h===u){Be=null;break e}var L=h.sibling;if(L!==null){L.return=h.return,Be=L;break e}Be=h.return}}if(At=s,_s(),Ci&&typeof Ci.onPostCommitFiberRoot=="function")try{Ci.onPostCommitFiberRoot(vc,e)}catch{}n=!0}return n}finally{Ft=r,zn.transition=t}}return!1}function Sp(e,t,r){t=Xa(r,t),t=I2(e,t,1),e=ys(e,t,1),t=tn(),e!==null&&(bl(e,1,t),yn(e,t))}function fr(e,t,r){if(e.tag===3)Sp(e,e,r);else for(;t!==null;){if(t.tag===3){Sp(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(vs===null||!vs.has(n))){e=Xa(r,e),e=b2(t,e,1),t=ys(t,e,1),e=tn(),t!==null&&(bl(t,1,e),yn(t,e));break}}t=t.return}}function _3(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=tn(),e.pingedLanes|=e.suspendedLanes&r,Pr===e&&(Ur&r)===r&&(Nr===4||Nr===3&&(Ur&130023424)===Ur&&500>vr()-Vd?Gs(e,0):Ud|=r),yn(e,t)}function W2(e,t){t===0&&(e.mode&1?(t=Yl,Yl<<=1,!(Yl&130023424)&&(Yl=4194304)):t=1);var r=tn();e=Vi(e,t),e!==null&&(bl(e,t,r),yn(e,r))}function D3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),W2(e,r)}function R3(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Se(314))}n!==null&&n.delete(t),W2(e,r)}var G2;G2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||gn.current)pn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return pn=!1,v3(e,t,r);pn=!!(e.flags&131072)}else pn=!1,rr&&t.flags&1048576&&Zm(t,Ku,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Au(e,t),e=t.pendingProps;var s=Ka(t,Xr.current);Ha(t,r),s=Md(null,t,n,e,s,r);var o=Bd();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mn(n)?(o=!0,$u(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Dd(t),s.updater=Ic,t.stateNode=s,s._reactInternals=t,Ch(t,n,e,r),t=Th(null,t,n,!0,o,r)):(t.tag=0,rr&&o&&Ad(t),Qr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Au(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=F3(n),e=ti(n,e),s){case 0:t=bh(null,t,n,e,r);break e;case 1:t=hp(null,t,n,e,r);break e;case 11:t=cp(null,t,n,e,r);break e;case 14:t=fp(null,t,n,ti(n.type,e),r);break e}throw Error(Se(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ti(n,s),bh(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ti(n,s),hp(e,t,n,s,r);case 3:e:{if(D2(t),e===null)throw Error(Se(387));n=t.pendingProps,o=t.memoizedState,s=o.element,n2(e,t),qu(t,n,null,r);var u=t.memoizedState;if(n=u.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=Xa(Error(Se(423)),t),t=dp(e,t,n,r,s);break e}else if(n!==s){s=Xa(Error(Se(424)),t),t=dp(e,t,n,r,s);break e}else for(Tn=ms(t.stateNode.containerInfo.firstChild),Nn=t,rr=!0,si=null,r=t2(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Wa(),n===s){t=$i(e,t,r);break e}Qr(e,t,n,r)}t=t.child}return t;case 5:return i2(t),e===null&&Eh(t),n=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,u=s.children,mh(n,s)?u=null:o!==null&&mh(n,o)&&(t.flags|=32),_2(e,t),Qr(e,t,u,r),t.child;case 6:return e===null&&Eh(t),null;case 13:return R2(e,t,r);case 4:return Rd(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ga(t,null,n,r):Qr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ti(n,s),cp(e,t,n,s,r);case 7:return Qr(e,t,t.pendingProps,r),t.child;case 8:return Qr(e,t,t.pendingProps.children,r),t.child;case 12:return Qr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,o=t.memoizedProps,u=s.value,Gt(Wu,n._currentValue),n._currentValue=u,o!==null)if(fi(o.value,u)){if(o.children===s.children&&!gn.current){t=$i(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var h=o.dependencies;if(h!==null){u=o.child;for(var g=h.firstContext;g!==null;){if(g.context===n){if(o.tag===1){g=Bi(-1,r&-r),g.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?g.next=g:(g.next=x.next,x.next=g),d.pending=g}}o.lanes|=r,g=o.alternate,g!==null&&(g.lanes|=r),Sh(o.return,r,t),h.lanes|=r;break}g=g.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(Se(341));u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),Sh(u,r,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}Qr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ha(t,r),s=Kn(s),n=n(s),t.flags|=1,Qr(e,t,n,r),t.child;case 14:return n=t.type,s=ti(n,t.pendingProps),s=ti(n.type,s),fp(e,t,n,s,r);case 15:return T2(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:ti(n,s),Au(e,t),t.tag=1,mn(n)?(e=!0,$u(t)):e=!1,Ha(t,r),C2(t,n,s),Ch(t,n,s,r),Th(null,t,n,!0,e,r);case 19:return O2(e,t,r);case 22:return N2(e,t,r)}throw Error(Se(156,t.tag))};function q2(e,t){return Em(e,t)}function O3(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(e,t,r,n){return new O3(e,t,r,n)}function Wd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function F3(e){if(typeof e=="function")return Wd(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fd)return 11;if(e===hd)return 14}return 2}function ws(e,t){var r=e.alternate;return r===null?(r=Vn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function bu(e,t,r,n,s,o){var u=2;if(n=e,typeof e=="function")Wd(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case Aa:return qs(r.children,s,o,t);case cd:u=8,s|=8;break;case qf:return e=Vn(12,r,t,s|2),e.elementType=qf,e.lanes=o,e;case Xf:return e=Vn(13,r,t,s),e.elementType=Xf,e.lanes=o,e;case Yf:return e=Vn(19,r,t,s),e.elementType=Yf,e.lanes=o,e;case im:return Nc(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rm:u=10;break e;case nm:u=9;break e;case fd:u=11;break e;case hd:u=14;break e;case ss:u=16,n=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return t=Vn(u,r,t,s),t.elementType=e,t.type=n,t.lanes=o,t}function qs(e,t,r,n){return e=Vn(7,e,n,t),e.lanes=r,e}function Nc(e,t,r,n){return e=Vn(22,e,n,t),e.elementType=im,e.lanes=r,e.stateNode={isHidden:!1},e}function Bf(e,t,r){return e=Vn(6,e,null,t),e.lanes=r,e}function Lf(e,t,r){return t=Vn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function P3(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yf(0),this.expirationTimes=yf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yf(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Gd(e,t,r,n,s,o,u,h,g){return e=new P3(e,t,r,h,g),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Vn(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dd(o),e}function M3(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function X2(e){if(!e)return Is;e=e._reactInternals;e:{if(na(e)!==e||e.tag!==1)throw Error(Se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Se(171))}if(e.tag===1){var r=e.type;if(mn(r))return Xm(e,r,t)}return t}function Y2(e,t,r,n,s,o,u,h,g){return e=Gd(r,n,!0,e,s,o,u,h,g),e.context=X2(null),r=e.current,n=tn(),s=xs(r),o=Bi(n,s),o.callback=t??null,ys(r,o,s),e.current.lanes=s,bl(e,s,n),yn(e,n),e}function _c(e,t,r,n){var s=t.current,o=tn(),u=xs(s);return r=X2(r),t.context===null?t.context=r:t.pendingContext=r,t=Bi(o,u),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ys(s,t,u),e!==null&&(li(e,s,u,o),wu(e,s,u)),u}function rc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ap(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qd(e,t){Ap(e,t),(e=e.alternate)&&Ap(e,t)}function B3(){return null}var Z2=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xd(e){this._internalRoot=e}Dc.prototype.render=Xd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Se(409));_c(e,t,null,null)};Dc.prototype.unmount=Xd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Js(function(){_c(null,e,null,null)}),t[Ui]=null}};function Dc(e){this._internalRoot=e}Dc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<os.length&&t!==0&&t<os[r].priority;r++);os.splice(r,0,e),r===0&&Dm(e)}};function Yd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Rc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cp(){}function L3(e,t,r,n,s){if(s){if(typeof n=="function"){var o=n;n=function(){var d=rc(u);o.call(d)}}var u=Y2(t,n,e,0,null,!1,!1,"",Cp);return e._reactRootContainer=u,e[Ui]=u.current,fl(e.nodeType===8?e.parentNode:e),Js(),u}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var h=n;n=function(){var d=rc(g);h.call(d)}}var g=Gd(e,0,!1,null,null,!1,!1,"",Cp);return e._reactRootContainer=g,e[Ui]=g.current,fl(e.nodeType===8?e.parentNode:e),Js(function(){_c(t,g,r,n)}),g}function Oc(e,t,r,n,s){var o=r._reactRootContainer;if(o){var u=o;if(typeof s=="function"){var h=s;s=function(){var g=rc(u);h.call(g)}}_c(t,u,e,s)}else u=L3(r,t,e,s,n);return rc(u)}bm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ko(t.pendingLanes);r!==0&&(gd(t,r|1),yn(t,vr()),!(At&6)&&(Ya=vr()+500,_s()))}break;case 13:Js(function(){var n=Vi(e,1);if(n!==null){var s=tn();li(n,e,1,s)}}),qd(e,1)}};md=function(e){if(e.tag===13){var t=Vi(e,134217728);if(t!==null){var r=tn();li(t,e,134217728,r)}qd(e,134217728)}};Tm=function(e){if(e.tag===13){var t=xs(e),r=Vi(e,t);if(r!==null){var n=tn();li(r,e,t,n)}qd(e,t)}};Nm=function(){return Ft};_m=function(e,t){var r=Ft;try{return Ft=e,t()}finally{Ft=r}};ah=function(e,t,r){switch(t){case"input":if(Jf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Sc(n);if(!s)throw Error(Se(90));am(n),Jf(n,s)}}}break;case"textarea":lm(e,r);break;case"select":t=r.value,t!=null&&Ba(e,!!r.multiple,t,!1)}};gm=$d;mm=Js;var k3={usingClientEntryPoint:!1,Events:[Nl,Ta,Sc,dm,pm,$d]},Do={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j3={bundleType:Do.bundleType,version:Do.version,rendererPackageName:Do.rendererPackageName,rendererConfig:Do.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xm(e),e===null?null:e.stateNode},findFiberByHostInstance:Do.findFiberByHostInstance||B3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{vc=ou.inject(j3),Ci=ou}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k3;Dn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yd(t))throw Error(Se(200));return M3(e,t,null,r)};Dn.createRoot=function(e,t){if(!Yd(e))throw Error(Se(299));var r=!1,n="",s=Z2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Gd(e,1,!1,null,null,r,!1,n,s),e[Ui]=t.current,fl(e.nodeType===8?e.parentNode:e),new Xd(t)};Dn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=xm(t),e=e===null?null:e.stateNode,e};Dn.flushSync=function(e){return Js(e)};Dn.hydrate=function(e,t,r){if(!Rc(t))throw Error(Se(200));return Oc(null,e,t,!0,r)};Dn.hydrateRoot=function(e,t,r){if(!Yd(e))throw Error(Se(405));var n=r!=null&&r.hydratedSources||null,s=!1,o="",u=Z2;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=Y2(t,null,e,1,r??null,s,!1,o,u),e[Ui]=t.current,fl(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Dc(t)};Dn.render=function(e,t,r){if(!Rc(t))throw Error(Se(200));return Oc(null,e,t,!1,r)};Dn.unmountComponentAtNode=function(e){if(!Rc(e))throw Error(Se(40));return e._reactRootContainer?(Js(function(){Oc(null,null,e,!1,function(){e._reactRootContainer=null,e[Ui]=null})}),!0):!1};Dn.unstable_batchedUpdates=$d;Dn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Rc(r))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return Oc(e,t,r,!1,n)};Dn.version="18.3.1-next-f1338f8080-20240426";function Q2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q2)}catch(e){console.error(e)}}Q2(),Qg.exports=Dn;var Zd=Qg.exports;const H3=mc(Zd),U3=rd({__proto__:null,default:H3},[Zd]);var Ip=Zd;Wf.createRoot=Ip.createRoot,Wf.hydrateRoot=Ip.hydrateRoot;var Me;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Me||(Me={}));var bp=new Map([[Me.QR_CODE,"QR_CODE"],[Me.AZTEC,"AZTEC"],[Me.CODABAR,"CODABAR"],[Me.CODE_39,"CODE_39"],[Me.CODE_93,"CODE_93"],[Me.CODE_128,"CODE_128"],[Me.DATA_MATRIX,"DATA_MATRIX"],[Me.MAXICODE,"MAXICODE"],[Me.ITF,"ITF"],[Me.EAN_13,"EAN_13"],[Me.EAN_8,"EAN_8"],[Me.PDF_417,"PDF_417"],[Me.RSS_14,"RSS_14"],[Me.RSS_EXPANDED,"RSS_EXPANDED"],[Me.UPC_A,"UPC_A"],[Me.UPC_E,"UPC_E"],[Me.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Tp;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Tp||(Tp={}));function V3(e){return Object.values(Me).includes(e)}var bs;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(bs||(bs={}));var ni=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[bs.SCAN_TYPE_CAMERA,bs.SCAN_TYPE_FILE],e}(),J2=function(){function e(t,r){this.format=t,this.formatName=r}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!bp.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,bp.get(t))},e}(),Np=function(){function e(){}return e.createFromText=function(t){var r={text:t};return{decodedText:t,result:r}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),jh;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(jh||(jh={}));var ey=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:jh.UNKWOWN_ERROR}},e}(),ty=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,r){(this.verbose||r===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function xi(e){return typeof e>"u"||e===null}function $3(e,t,r){return e>r?r:e<t?t:e}var Pa=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Ot=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),_p=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),ry=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,r){if(typeof t!="object"){var n=typeof t;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var s=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(s),u=Object.keys(t),h=0,g=u;h<g.length;h++){var d=g[h];if(o.has(d))return r.logError("".concat(d," is not supported videoConstaints."),!0),!1}return!0},e}(),Hh={exports:{}};(function(e,t){(function(r,n){n(t)})(So,function(r){function n(M){return M==null}var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,i){M.__proto__=i}||function(M,i){for(var a in i)i.hasOwnProperty(a)&&(M[a]=i[a])};function o(M,i){s(M,i);function a(){this.constructor=M}M.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)}function u(M,i){var a=Object.setPrototypeOf;a?a(M,i):M.__proto__=i}function h(M,i){i===void 0&&(i=M.constructor);var a=Error.captureStackTrace;a&&a(M,i)}var g=function(M){o(i,M);function i(a){var l=this.constructor,c=M.call(this,a)||this;return Object.defineProperty(c,"name",{value:l.name,enumerable:!1}),u(c,l.prototype),h(c),c}return i}(Error);class d extends g{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}d.kind="Exception";class x extends d{}x.kind="ArgumentException";class v extends d{}v.kind="IllegalArgumentException";class y{constructor(i){if(this.binarizer=i,i===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,a){return this.binarizer.getBlackRow(i,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,a,l,c){const f=this.binarizer.getLuminanceSource().crop(i,a,l,c);return new y(this.binarizer.createBinarizer(f))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new y(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new y(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class S extends d{static getChecksumInstance(){return new S}}S.kind="ChecksumException";class w{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(i,a,l,c,f){for(;f--;)l[c++]=i[a++]}static currentTimeMillis(){return Date.now()}}class b extends d{}b.kind="IndexOutOfBoundsException";class I extends b{constructor(i=void 0,a=void 0){super(a),this.index=i,this.message=a}}I.kind="ArrayIndexOutOfBoundsException";class N{static fill(i,a){for(let l=0,c=i.length;l<c;l++)i[l]=a}static fillWithin(i,a,l,c){N.rangeCheck(i.length,a,l);for(let f=a;f<l;f++)i[f]=c}static rangeCheck(i,a,l){if(a>l)throw new v("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new I(a);if(l>i)throw new I(l)}static asList(...i){return i}static create(i,a,l){return Array.from({length:i}).map(f=>Array.from({length:a}).fill(l))}static createInt32Array(i,a,l){return Array.from({length:i}).map(f=>Int32Array.from({length:a}).fill(l))}static equals(i,a){if(!i||!a||!i.length||!a.length||i.length!==a.length)return!1;for(let l=0,c=i.length;l<c;l++)if(i[l]!==a[l])return!1;return!0}static hashCode(i){if(i===null)return 0;let a=1;for(const l of i)a=31*a+l;return a}static fillUint8Array(i,a){for(let l=0;l!==i.length;l++)i[l]=a}static copyOf(i,a){return i.slice(0,a)}static copyOfUint8Array(i,a){if(i.length<=a){const l=new Uint8Array(a);return l.set(i),l}return i.slice(0,a)}static copyOfRange(i,a,l){const c=l-a,f=new Int32Array(c);return A.arraycopy(i,a,f,0,c),f}static binarySearch(i,a,l){l===void 0&&(l=N.numberComparator);let c=0,f=i.length-1;for(;c<=f;){const p=f+c>>1,m=l(a,i[p]);if(m>0)c=p+1;else if(m<0)f=p-1;else return p}return-c-1}static numberComparator(i,a){return i-a}}class F{static numberOfTrailingZeros(i){let a;if(i===0)return 32;let l=31;return a=i<<16,a!==0&&(l-=16,i=a),a=i<<8,a!==0&&(l-=8,i=a),a=i<<4,a!==0&&(l-=4,i=a),a=i<<2,a!==0&&(l-=2,i=a),l-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let a=1;return i>>>16||(a+=16,i<<=16),i>>>24||(a+=8,i<<=8),i>>>28||(a+=4,i<<=4),i>>>30||(a+=2,i<<=2),a-=i>>>31,a}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,a){return Math.trunc(i/a)}static parseInt(i,a=void 0){return parseInt(i,a)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class L{constructor(i,a){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,a==null?this.bits=L.makeArray(i):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const a=L.makeArray(i);A.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const a=this.size;if(i>=a)return a;const l=this.bits;let c=Math.floor(i/32),f=l[c];f&=~((1<<(i&31))-1);const p=l.length;for(;f===0;){if(++c===p)return a;f=l[c]}const m=c*32+F.numberOfTrailingZeros(f);return m>a?a:m}getNextUnset(i){const a=this.size;if(i>=a)return a;const l=this.bits;let c=Math.floor(i/32),f=~l[c];f&=~((1<<(i&31))-1);const p=l.length;for(;f===0;){if(++c===p)return a;f=~l[c]}const m=c*32+F.numberOfTrailingZeros(f);return m>a?a:m}setBulk(i,a){this.bits[Math.floor(i/32)]=a}setRange(i,a){if(a<i||i<0||a>this.size)throw new v;if(a===i)return;a--;const l=Math.floor(i/32),c=Math.floor(a/32),f=this.bits;for(let p=l;p<=c;p++){const m=p>l?0:i&31,T=(2<<(p<c?31:a&31))-(1<<m);f[p]|=T}}clear(){const i=this.bits.length,a=this.bits;for(let l=0;l<i;l++)a[l]=0}isRange(i,a,l){if(a<i||i<0||a>this.size)throw new v;if(a===i)return!0;a--;const c=Math.floor(i/32),f=Math.floor(a/32),p=this.bits;for(let m=c;m<=f;m++){const C=m>c?0:i&31,O=(2<<(m<f?31:a&31))-(1<<C)&4294967295;if((p[m]&O)!==(l?O:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,a){if(a<0||a>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((i>>l-1&1)===1)}appendBitArray(i){const a=i.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(i.get(l))}xor(i){if(this.size!==i.size)throw new v("Sizes don't match");const a=this.bits;for(let l=0,c=a.length;l<c;l++)a[l]^=i.bits[l]}toBytes(i,a,l,c){for(let f=0;f<c;f++){let p=0;for(let m=0;m<8;m++)this.get(i)&&(p|=1<<7-m),i++;a[l+f]=p}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,c=this.bits;for(let f=0;f<l;f++){let p=c[f];p=p>>1&1431655765|(p&1431655765)<<1,p=p>>2&858993459|(p&858993459)<<2,p=p>>4&252645135|(p&252645135)<<4,p=p>>8&16711935|(p&16711935)<<8,p=p>>16&65535|(p&65535)<<16,i[a-f]=p}if(this.size!==l*32){const f=l*32-this.size;let p=i[0]>>>f;for(let m=1;m<l;m++){const C=i[m];p|=C<<32-f,i[m-1]=p,p=C>>>f}i[l-1]=p}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof L))return!1;const a=i;return this.size===a.size&&N.equals(this.bits,a.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let i="";for(let a=0,l=this.size;a<l;a++)a&7||(i+=" "),i+=this.get(a)?"X":".";return i}clone(){return new L(this.size,this.bits.slice())}}var H;(function(M){M[M.OTHER=0]="OTHER",M[M.PURE_BARCODE=1]="PURE_BARCODE",M[M.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",M[M.TRY_HARDER=3]="TRY_HARDER",M[M.CHARACTER_SET=4]="CHARACTER_SET",M[M.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",M[M.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",M[M.ASSUME_GS1=7]="ASSUME_GS1",M[M.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",M[M.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",M[M.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var _=H;class R extends d{static getFormatInstance(){return new R}}R.kind="FormatException";var P;(function(M){M[M.Cp437=0]="Cp437",M[M.ISO8859_1=1]="ISO8859_1",M[M.ISO8859_2=2]="ISO8859_2",M[M.ISO8859_3=3]="ISO8859_3",M[M.ISO8859_4=4]="ISO8859_4",M[M.ISO8859_5=5]="ISO8859_5",M[M.ISO8859_6=6]="ISO8859_6",M[M.ISO8859_7=7]="ISO8859_7",M[M.ISO8859_8=8]="ISO8859_8",M[M.ISO8859_9=9]="ISO8859_9",M[M.ISO8859_10=10]="ISO8859_10",M[M.ISO8859_11=11]="ISO8859_11",M[M.ISO8859_13=12]="ISO8859_13",M[M.ISO8859_14=13]="ISO8859_14",M[M.ISO8859_15=14]="ISO8859_15",M[M.ISO8859_16=15]="ISO8859_16",M[M.SJIS=16]="SJIS",M[M.Cp1250=17]="Cp1250",M[M.Cp1251=18]="Cp1251",M[M.Cp1252=19]="Cp1252",M[M.Cp1256=20]="Cp1256",M[M.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",M[M.UTF8=22]="UTF8",M[M.ASCII=23]="ASCII",M[M.Big5=24]="Big5",M[M.GB18030=25]="GB18030",M[M.EUC_KR=26]="EUC_KR"})(P||(P={}));class D{constructor(i,a,l,...c){this.valueIdentifier=i,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=c,D.VALUE_IDENTIFIER_TO_ECI.set(i,this),D.NAME_TO_ECI.set(l,this);const f=this.values;for(let p=0,m=f.length;p!==m;p++){const C=f[p];D.VALUES_TO_ECI.set(C,this)}for(const p of c)D.NAME_TO_ECI.set(p,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new R("incorect value");const a=D.VALUES_TO_ECI.get(i);if(a===void 0)throw new R("incorect value");return a}static getCharacterSetECIByName(i){const a=D.NAME_TO_ECI.get(i);if(a===void 0)throw new R("incorect value");return a}equals(i){if(!(i instanceof D))return!1;const a=i;return this.getName()===a.getName()}}D.VALUE_IDENTIFIER_TO_ECI=new Map,D.VALUES_TO_ECI=new Map,D.NAME_TO_ECI=new Map,D.Cp437=new D(P.Cp437,Int32Array.from([0,2]),"Cp437"),D.ISO8859_1=new D(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),D.ISO8859_2=new D(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),D.ISO8859_3=new D(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),D.ISO8859_4=new D(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),D.ISO8859_5=new D(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),D.ISO8859_6=new D(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),D.ISO8859_7=new D(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),D.ISO8859_8=new D(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),D.ISO8859_9=new D(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),D.ISO8859_10=new D(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),D.ISO8859_11=new D(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),D.ISO8859_13=new D(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),D.ISO8859_14=new D(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),D.ISO8859_15=new D(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),D.ISO8859_16=new D(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),D.SJIS=new D(P.SJIS,20,"SJIS","Shift_JIS"),D.Cp1250=new D(P.Cp1250,21,"Cp1250","windows-1250"),D.Cp1251=new D(P.Cp1251,22,"Cp1251","windows-1251"),D.Cp1252=new D(P.Cp1252,23,"Cp1252","windows-1252"),D.Cp1256=new D(P.Cp1256,24,"Cp1256","windows-1256"),D.UnicodeBigUnmarked=new D(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),D.UTF8=new D(P.UTF8,26,"UTF8","UTF-8"),D.ASCII=new D(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),D.Big5=new D(P.Big5,28,"Big5"),D.GB18030=new D(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),D.EUC_KR=new D(P.EUC_KR,30,"EUC_KR","EUC-KR");class k extends d{}k.kind="UnsupportedOperationException";class W{static decode(i,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(i,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(i,l):new TextDecoder(l).decode(i)}static shouldDecodeOnFallback(i){return!W.isBrowser()&&i==="ISO-8859-1"}static encode(i,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(i,l):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof D?i:D.getCharacterSetECIByName(i)}static decodeFallback(i,a){const l=this.encodingCharacterSet(a);if(W.isDecodeFallbackSupported(l)){let c="";for(let f=0,p=i.length;f<p;f++){let m=i[f].toString(16);m.length<2&&(m="0"+m),c+="%"+m}return decodeURIComponent(c)}if(l.equals(D.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new k(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(D.UTF8)||i.equals(D.ISO8859_1)||i.equals(D.ASCII)}static encodeFallback(i){const l=btoa(unescape(encodeURIComponent(i))).split(""),c=[];for(let f=0;f<l.length;f++)c.push(l[f].charCodeAt(0));return new Uint8Array(c)}}class K{static castAsNonUtf8Char(i,a=null){const l=a?a.getName():this.ISO88591;return W.decode(new Uint8Array([i]),l)}static guessEncoding(i,a){if(a!=null&&a.get(_.CHARACTER_SET)!==void 0)return a.get(_.CHARACTER_SET).toString();const l=i.length;let c=!0,f=!0,p=!0,m=0,C=0,T=0,O=0,B=0,j=0,z=0,X=0,Q=0,se=0,he=0;const Ae=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let Ce=0;Ce<l&&(c||f||p);Ce++){const xe=i[Ce]&255;p&&(m>0?xe&128?m--:p=!1:xe&128&&(xe&64?(m++,xe&32?(m++,xe&16?(m++,xe&8?p=!1:O++):T++):C++):p=!1)),c&&(xe>127&&xe<160?c=!1:xe>159&&(xe<192||xe===215||xe===247)&&he++),f&&(B>0?xe<64||xe===127||xe>252?f=!1:B--:xe===128||xe===160||xe>239?f=!1:xe>160&&xe<224?(j++,X=0,z++,z>Q&&(Q=z)):xe>127?(B++,z=0,X++,X>se&&(se=X)):(z=0,X=0))}return p&&m>0&&(p=!1),f&&B>0&&(f=!1),p&&(Ae||C+T+O>0)?K.UTF8:f&&(K.ASSUME_SHIFT_JIS||Q>=3||se>=3)?K.SHIFT_JIS:c&&f?Q===2&&j===2||he*10>=l?K.SHIFT_JIS:K.ISO88591:c?K.ISO88591:f?K.SHIFT_JIS:p?K.UTF8:K.PLATFORM_DEFAULT_ENCODING}static format(i,...a){let l=-1;function c(p,m,C,T,O,B){if(p==="%%")return"%";if(a[++l]===void 0)return;p=T?parseInt(T.substr(1)):void 0;let j=O?parseInt(O.substr(1)):void 0,z;switch(B){case"s":z=a[l];break;case"c":z=a[l][0];break;case"f":z=parseFloat(a[l]).toFixed(p);break;case"p":z=parseFloat(a[l]).toPrecision(p);break;case"e":z=parseFloat(a[l]).toExponential(p);break;case"x":z=parseInt(a[l]).toString(j||16);break;case"d":z=parseFloat(parseInt(a[l],j||10).toPrecision(p)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(j);let X=parseInt(C),Q=C&&C[0]+""=="0"?"0":" ";for(;z.length<X;)z=m!==void 0?z+Q:Q+z;return z}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,c)}static getBytes(i,a){return W.encode(i,a)}static getCharCode(i,a=0){return i.charCodeAt(a)}static getCharAt(i){return String.fromCharCode(i)}}K.SHIFT_JIS=D.SJIS.getName(),K.GB2312="GB2312",K.ISO88591=D.ISO8859_1.getName(),K.EUC_JP="EUC_JP",K.UTF8=D.UTF8.getName(),K.PLATFORM_DEFAULT_ENCODING=K.UTF8,K.ASSUME_SHIFT_JIS=!1;class ie{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=K.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,a,l){for(let c=a;a<a+l;c++)this.append(i[c]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+1)}substring(i,a){return this.value.substring(i,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,a){this.value=this.value.substr(0,i)+a+this.value.substr(i+a.length)}}class G{constructor(i,a,l,c){if(this.width=i,this.height=a,this.rowSize=l,this.bits=c,a==null&&(a=i),this.height=a,i<1||a<1)throw new v("Both dimensions must be greater than 0");l==null&&(l=Math.floor((i+31)/32)),this.rowSize=l,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const a=i.length,l=i[0].length,c=new G(l,a);for(let f=0;f<a;f++){const p=i[f];for(let m=0;m<l;m++)p[m]&&c.set(m,f)}return c}static parseFromString(i,a,l){if(i===null)throw new v("stringRepresentation cannot be null");const c=new Array(i.length);let f=0,p=0,m=-1,C=0,T=0;for(;T<i.length;)if(i.charAt(T)===`
`||i.charAt(T)==="\r"){if(f>p){if(m===-1)m=f-p;else if(f-p!==m)throw new v("row lengths do not match");p=f,C++}T++}else if(i.substring(T,T+a.length)===a)T+=a.length,c[f]=!0,f++;else if(i.substring(T,T+l.length)===l)T+=l.length,c[f]=!1,f++;else throw new v("illegal character encountered: "+i.substring(T));if(f>p){if(m===-1)m=f-p;else if(f-p!==m)throw new v("row lengths do not match");C++}const O=new G(m,C);for(let B=0;B<f;B++)c[B]&&O.set(Math.floor(B%m),Math.floor(B/m));return O}get(i,a){const l=a*this.rowSize+Math.floor(i/32);return(this.bits[l]>>>(i&31)&1)!==0}set(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]|=1<<(i&31)&4294967295}unset(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]&=~(1<<(i&31)&4294967295)}flip(i,a){const l=a*this.rowSize+Math.floor(i/32);this.bits[l]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new v("input matrix dimensions do not match");const a=new L(Math.floor(this.width/32)+1),l=this.rowSize,c=this.bits;for(let f=0,p=this.height;f<p;f++){const m=f*l,C=i.getRow(f,a).getBitArray();for(let T=0;T<l;T++)c[m+T]^=C[T]}}clear(){const i=this.bits,a=i.length;for(let l=0;l<a;l++)i[l]=0}setRegion(i,a,l,c){if(a<0||i<0)throw new v("Left and top must be nonnegative");if(c<1||l<1)throw new v("Height and width must be at least 1");const f=i+l,p=a+c;if(p>this.height||f>this.width)throw new v("The region must fit inside the matrix");const m=this.rowSize,C=this.bits;for(let T=a;T<p;T++){const O=T*m;for(let B=i;B<f;B++)C[O+Math.floor(B/32)]|=1<<(B&31)&4294967295}}getRow(i,a){a==null||a.getSize()<this.width?a=new L(this.width):a.clear();const l=this.rowSize,c=this.bits,f=i*l;for(let p=0;p<l;p++)a.setBulk(p*32,c[f+p]);return a}setRow(i,a){A.arraycopy(a.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),a=this.getHeight();let l=new L(i),c=new L(i);for(let f=0,p=Math.floor((a+1)/2);f<p;f++)l=this.getRow(f,l),c=this.getRow(a-1-f,c),l.reverse(),c.reverse(),this.setRow(f,c),this.setRow(a-1-f,l)}getEnclosingRectangle(){const i=this.width,a=this.height,l=this.rowSize,c=this.bits;let f=i,p=a,m=-1,C=-1;for(let T=0;T<a;T++)for(let O=0;O<l;O++){const B=c[T*l+O];if(B!==0){if(T<p&&(p=T),T>C&&(C=T),O*32<f){let j=0;for(;!(B<<31-j&4294967295);)j++;O*32+j<f&&(f=O*32+j)}if(O*32+31>m){let j=31;for(;!(B>>>j);)j--;O*32+j>m&&(m=O*32+j)}}}return m<f||C<p?null:Int32Array.from([f,p,m-f+1,C-p+1])}getTopLeftOnBit(){const i=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const c=l/i;let f=l%i*32;const p=a[l];let m=0;for(;!(p<<31-m&4294967295);)m++;return f+=m,Int32Array.from([f,c])}getBottomRightOnBit(){const i=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const c=Math.floor(l/i);let f=Math.floor(l%i)*32;const p=a[l];let m=31;for(;!(p>>>m);)m--;return f+=m,Int32Array.from([f,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof G))return!1;const a=i;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&N.equals(this.bits,a.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+N.hashCode(this.bits),i}toString(i="X ",a="  ",l=`
`){return this.buildToString(i,a,l)}buildToString(i,a,l){let c=new ie;for(let f=0,p=this.height;f<p;f++){for(let m=0,C=this.width;m<C;m++)c.append(this.get(m,f)?i:a);c.append(l)}return c.toString()}clone(){return new G(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends d{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class ce extends w{constructor(i){super(i),this.luminances=ce.EMPTY,this.buckets=new Int32Array(ce.LUMINANCE_BUCKETS)}getBlackRow(i,a){const l=this.getLuminanceSource(),c=l.getWidth();a==null||a.getSize()<c?a=new L(c):a.clear(),this.initArrays(c);const f=l.getRow(i,this.luminances),p=this.buckets;for(let C=0;C<c;C++)p[(f[C]&255)>>ce.LUMINANCE_SHIFT]++;const m=ce.estimateBlackPoint(p);if(c<3)for(let C=0;C<c;C++)(f[C]&255)<m&&a.set(C);else{let C=f[0]&255,T=f[1]&255;for(let O=1;O<c-1;O++){const B=f[O+1]&255;(T*4-C-B)/2<m&&a.set(O),C=T,T=B}}return a}getBlackMatrix(){const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight(),c=new G(a,l);this.initArrays(a);const f=this.buckets;for(let C=1;C<5;C++){const T=Math.floor(l*C/5),O=i.getRow(T,this.luminances),B=Math.floor(a*4/5);for(let j=Math.floor(a/5);j<B;j++){const z=O[j]&255;f[z>>ce.LUMINANCE_SHIFT]++}}const p=ce.estimateBlackPoint(f),m=i.getMatrix();for(let C=0;C<l;C++){const T=C*a;for(let O=0;O<a;O++)(m[T+O]&255)<p&&c.set(O,C)}return c}createBinarizer(i){return new ce(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const a=this.buckets;for(let l=0;l<ce.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(i){const a=i.length;let l=0,c=0,f=0;for(let O=0;O<a;O++)i[O]>f&&(c=O,f=i[O]),i[O]>l&&(l=i[O]);let p=0,m=0;for(let O=0;O<a;O++){const B=O-c,j=i[O]*B*B;j>m&&(p=O,m=j)}if(c>p){const O=c;c=p,p=O}if(p-c<=a/16)throw new V;let C=p-1,T=-1;for(let O=p-1;O>c;O--){const B=O-c,j=B*B*(p-O)*(l-i[O]);j>T&&(C=O,T=j)}return C<<ce.LUMINANCE_SHIFT}}ce.LUMINANCE_BITS=5,ce.LUMINANCE_SHIFT=8-ce.LUMINANCE_BITS,ce.LUMINANCE_BUCKETS=1<<ce.LUMINANCE_BITS,ce.EMPTY=Uint8ClampedArray.from([0]);class te extends ce{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),a=i.getWidth(),l=i.getHeight();if(a>=te.MINIMUM_DIMENSION&&l>=te.MINIMUM_DIMENSION){const c=i.getMatrix();let f=a>>te.BLOCK_SIZE_POWER;a&te.BLOCK_SIZE_MASK&&f++;let p=l>>te.BLOCK_SIZE_POWER;l&te.BLOCK_SIZE_MASK&&p++;const m=te.calculateBlackPoints(c,f,p,a,l),C=new G(a,l);te.calculateThresholdForBlock(c,f,p,a,l,m,C),this.matrix=C}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new te(i)}static calculateThresholdForBlock(i,a,l,c,f,p,m){const C=f-te.BLOCK_SIZE,T=c-te.BLOCK_SIZE;for(let O=0;O<l;O++){let B=O<<te.BLOCK_SIZE_POWER;B>C&&(B=C);const j=te.cap(O,2,l-3);for(let z=0;z<a;z++){let X=z<<te.BLOCK_SIZE_POWER;X>T&&(X=T);const Q=te.cap(z,2,a-3);let se=0;for(let Ae=-2;Ae<=2;Ae++){const Ce=p[j+Ae];se+=Ce[Q-2]+Ce[Q-1]+Ce[Q]+Ce[Q+1]+Ce[Q+2]}const he=se/25;te.thresholdBlock(i,X,B,he,c,m)}}}static cap(i,a,l){return i<a?a:i>l?l:i}static thresholdBlock(i,a,l,c,f,p){for(let m=0,C=l*f+a;m<te.BLOCK_SIZE;m++,C+=f)for(let T=0;T<te.BLOCK_SIZE;T++)(i[C+T]&255)<=c&&p.set(a+T,l+m)}static calculateBlackPoints(i,a,l,c,f){const p=f-te.BLOCK_SIZE,m=c-te.BLOCK_SIZE,C=new Array(l);for(let T=0;T<l;T++){C[T]=new Int32Array(a);let O=T<<te.BLOCK_SIZE_POWER;O>p&&(O=p);for(let B=0;B<a;B++){let j=B<<te.BLOCK_SIZE_POWER;j>m&&(j=m);let z=0,X=255,Q=0;for(let he=0,Ae=O*c+j;he<te.BLOCK_SIZE;he++,Ae+=c){for(let Ce=0;Ce<te.BLOCK_SIZE;Ce++){const xe=i[Ae+Ce]&255;z+=xe,xe<X&&(X=xe),xe>Q&&(Q=xe)}if(Q-X>te.MIN_DYNAMIC_RANGE)for(he++,Ae+=c;he<te.BLOCK_SIZE;he++,Ae+=c)for(let Ce=0;Ce<te.BLOCK_SIZE;Ce++)z+=i[Ae+Ce]&255}let se=z>>te.BLOCK_SIZE_POWER*2;if(Q-X<=te.MIN_DYNAMIC_RANGE&&(se=X/2,T>0&&B>0)){const he=(C[T-1][B]+2*C[T][B-1]+C[T-1][B-1])/4;X<he&&(se=he)}C[T][B]=se}}return C}}te.BLOCK_SIZE_POWER=3,te.BLOCK_SIZE=1<<te.BLOCK_SIZE_POWER,te.BLOCK_SIZE_MASK=te.BLOCK_SIZE-1,te.MINIMUM_DIMENSION=te.BLOCK_SIZE*5,te.MIN_DYNAMIC_RANGE=24;class Ee{constructor(i,a){this.width=i,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,a,l,c){throw new k("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new k("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new k("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let a=new ie;for(let l=0;l<this.height;l++){const c=this.getRow(l,i);for(let f=0;f<this.width;f++){const p=c[f]&255;let m;p<64?m="#":p<128?m="+":p<192?m=".":m=" ",a.append(m)}a.append(`
`)}return a.toString()}}class be extends Ee{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,a){const l=this.delegate.getRow(i,a),c=this.getWidth();for(let f=0;f<c;f++)l[f]=255-(l[f]&255);return l}getMatrix(){const i=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let c=0;c<a;c++)l[c]=255-(i[c]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(i,a,l,c){return new be(this.delegate.crop(i,a,l,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new be(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new be(this.delegate.rotateCounterClockwise45())}}class oe extends Ee{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=oe.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const a=i.getContext("2d").getImageData(0,0,i.width,i.height);return oe.toGrayscaleBuffer(a.data,i.width,i.height)}static toGrayscaleBuffer(i,a,l){const c=new Uint8ClampedArray(a*l);for(let f=0,p=0,m=i.length;f<m;f+=4,p++){let C;if(i[f+3]===0)C=255;else{const O=i[f],B=i[f+1],j=i[f+2];C=306*O+601*B+117*j+512>>10}c[p]=C}return c}getRow(i,a){if(i<0||i>=this.getHeight())throw new v("Requested row is outside the image: "+i);const l=this.getWidth(),c=i*l;return a===null?a=this.buffer.slice(c,c+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(c,c+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,a,l,c){return super.crop(i,a,l,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const a=this.getTempCanvasElement(),l=a.getContext("2d"),c=i*oe.DEGREE_TO_RADIANS,f=this.canvas.width,p=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(c))*f+Math.abs(Math.sin(c))*p),C=Math.ceil(Math.abs(Math.sin(c))*f+Math.abs(Math.cos(c))*p);return a.width=m,a.height=C,l.translate(m/2,C/2),l.rotate(c),l.drawImage(this.canvas,f/-2,p/-2),this.buffer=oe.makeBufferFromCanvasImageData(a),this}invert(){return new be(this)}}oe.DEGREE_TO_RADIANS=Math.PI/180;class Y{constructor(i,a,l){this.deviceId=i,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var le=(globalThis||So||self||window||void 0)&&(globalThis||So||self||window||void 0).__awaiter||function(M,i,a,l){function c(f){return f instanceof a?f:new a(function(p){p(f)})}return new(a||(a=Promise))(function(f,p){function m(O){try{T(l.next(O))}catch(B){p(B)}}function C(O){try{T(l.throw(O))}catch(B){p(B)}}function T(O){O.done?f(O.value):c(O.value).then(m,C)}T((l=l.apply(M,i||[])).next())})};class ne{constructor(i,a=500,l){this.reader=i,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return le(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of i){const c=l.kind==="video"?"videoinput":l.kind;if(c!=="videoinput")continue;const f=l.deviceId||l.id,p=l.label||`Video device ${a.length+1}`,m=l.groupId,C={deviceId:f,label:p,kind:c,groupId:m};a.push(C)}return a})}getVideoInputDevices(){return le(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new Y(a.deviceId,a.label))})}findDeviceById(i){return le(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===i):null})}decodeFromInputVideoDevice(i,a){return le(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,a)})}decodeOnceFromVideoDevice(i,a){return le(this,void 0,void 0,function*(){this.reset();let l;i?l={deviceId:{exact:i}}:l={facingMode:"environment"};const c={video:l};return yield this.decodeOnceFromConstraints(c,a)})}decodeOnceFromConstraints(i,a){return le(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(i,a){return le(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(i,a,l){return le(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,a,l)})}decodeFromVideoDevice(i,a,l){return le(this,void 0,void 0,function*(){let c;i?c={deviceId:{exact:i}}:c={facingMode:"environment"};const f={video:c};return yield this.decodeFromConstraints(f,a,l)})}decodeFromConstraints(i,a,l){return le(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(c,a,l)})}decodeFromStream(i,a,l){return le(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(i,a);return yield this.decodeContinuously(c,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,a){return le(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,i),this.videoElement=l,this.stream=i,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(i){return new Promise((a,l)=>this.playVideoOnLoad(i,()=>a()))}playVideoOnLoad(i,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",a),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return le(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,a){const l=document.getElementById(i);if(!l)throw new x(`element with id '${i}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new x(`element with id '${i}' must be an ${a} element`);return l}decodeFromImage(i,a){if(!i&&!a)throw new x("either imageElement with a src set or an url must be provided");return a&&!i?this.decodeFromImageUrl(a):this.decodeFromImageElement(i)}decodeFromVideo(i,a){if(!i&&!a)throw new x("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,a,l){if(i===void 0&&a===void 0)throw new x("Either an element with a src set or an URL must be provided");return a&&!i?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(i,l)}decodeFromImageElement(i){if(!i)throw new x("An image element must be provided.");this.reset();const a=this.prepareImageElement(i);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(i){const a=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(i,a){const l=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(i){if(!i)throw new x("A video element must be provided.");this.reset();const a=this.prepareVideoElement(i);return this.videoElement=a,a}decodeFromImageUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=i,l}decodeFromVideoUrl(i){if(!i)throw new x("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=i,l}decodeFromVideoUrlContinuously(i,a){if(!i)throw new x("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(l,a);return l.src=i,c}_decodeOnLoadImage(i){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(a,l),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return le(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,a){return le(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,a)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let a;return typeof i>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(a=i),a}prepareVideoElement(i){let a;return!i&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof i=="string"&&(a=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(a=i),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(i,a=!0,l=!0){this._stopAsyncDecode=!1;const c=(f,p)=>{if(this._stopAsyncDecode){p(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(i);f(m)}catch(m){const C=a&&m instanceof V,O=(m instanceof S||m instanceof R)&&l;if(C||O)return setTimeout(c,this._timeBetweenDecodingAttempts,f,p);p(m)}};return new Promise((f,p)=>c(f,p))}decodeContinuously(i,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(i);a(c,null),setTimeout(l,this.timeBetweenScansMillis)}catch(c){a(null,c);const f=c instanceof S||c instanceof R,p=c instanceof V;(f||p)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(i){const a=this.createBinaryBitmap(i);return this.decodeBitmap(a)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,a,l){a||(a={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(i,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(i,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const a=this.getCaptureCanvas(i),l=new oe(a),c=new te(l);return new y(c)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const a=this.createCaptureCanvas(i);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,c;return typeof i<"u"&&(i instanceof HTMLVideoElement?(l=i.videoWidth,c=i.videoHeight):i instanceof HTMLImageElement&&(l=i.naturalWidth||i.width,c=i.naturalHeight||i.height)),a.style.width=l+"px",a.style.height=c+"px",a.width=l,a.height=c,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,a){try{i.srcObject=a}catch{i.src=URL.createObjectURL(a)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(i,a,l=a==null?0:8*a.length,c,f,p=A.currentTimeMillis()){this.text=i,this.rawBytes=a,this.numBits=l,this.resultPoints=c,this.format=f,this.timestamp=p,this.text=i,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=c,this.format=f,this.resultMetadata=null,p==null?this.timestamp=A.currentTimeMillis():this.timestamp=p}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,a)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const a=this.resultPoints;if(a===null)this.resultPoints=i;else if(i!==null&&i.length>0){const l=new Array(a.length+i.length);A.arraycopy(a,0,l,0,a.length),A.arraycopy(i,0,l,a.length,i.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var q;(function(M){M[M.AZTEC=0]="AZTEC",M[M.CODABAR=1]="CODABAR",M[M.CODE_39=2]="CODE_39",M[M.CODE_93=3]="CODE_93",M[M.CODE_128=4]="CODE_128",M[M.DATA_MATRIX=5]="DATA_MATRIX",M[M.EAN_8=6]="EAN_8",M[M.EAN_13=7]="EAN_13",M[M.ITF=8]="ITF",M[M.MAXICODE=9]="MAXICODE",M[M.PDF_417=10]="PDF_417",M[M.QR_CODE=11]="QR_CODE",M[M.RSS_14=12]="RSS_14",M[M.RSS_EXPANDED=13]="RSS_EXPANDED",M[M.UPC_A=14]="UPC_A",M[M.UPC_E=15]="UPC_E",M[M.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(q||(q={}));var J=q,ve;(function(M){M[M.OTHER=0]="OTHER",M[M.ORIENTATION=1]="ORIENTATION",M[M.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",M[M.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",M[M.ISSUE_NUMBER=4]="ISSUE_NUMBER",M[M.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",M[M.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",M[M.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",M[M.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",M[M.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",M[M.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ve||(ve={}));var ye=ve;class ke{constructor(i,a,l,c,f=-1,p=-1){this.rawBytes=i,this.text=a,this.byteSegments=l,this.ecLevel=c,this.structuredAppendSequenceNumber=f,this.structuredAppendParity=p,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Le{exp(i){return this.expTable[i]}log(i){if(i===0)throw new v;return this.logTable[i]}static addOrSubtract(i,a){return i^a}}class Ye{constructor(i,a){if(a.length===0)throw new v;this.field=i;const l=a.length;if(l>1&&a[0]===0){let c=1;for(;c<l&&a[c]===0;)c++;c===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-c),A.arraycopy(a,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(i===1){l=0;for(let p=0,m=a.length;p!==m;p++){const C=a[p];l=Le.addOrSubtract(l,C)}return l}l=a[0];const c=a.length,f=this.field;for(let p=1;p<c;p++)l=Le.addOrSubtract(f.multiply(i,l),a[p]);return l}addOrSubtract(i){if(!this.field.equals(i.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){const p=a;a=l,l=p}let c=new Int32Array(l.length);const f=l.length-a.length;A.arraycopy(l,0,c,0,f);for(let p=f;p<l.length;p++)c[p]=Le.addOrSubtract(a[p-f],l[p]);return new Ye(this.field,c)}multiply(i){if(!this.field.equals(i.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,c=i.coefficients,f=c.length,p=new Int32Array(l+f-1),m=this.field;for(let C=0;C<l;C++){const T=a[C];for(let O=0;O<f;O++)p[C+O]=Le.addOrSubtract(p[C+O],m.multiply(T,c[O]))}return new Ye(m,p)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const a=this.coefficients.length,l=this.field,c=new Int32Array(a),f=this.coefficients;for(let p=0;p<a;p++)c[p]=l.multiply(f[p],i);return new Ye(l,c)}multiplyByMonomial(i,a){if(i<0)throw new v;if(a===0)return this.field.getZero();const l=this.coefficients,c=l.length,f=new Int32Array(c+i),p=this.field;for(let m=0;m<c;m++)f[m]=p.multiply(l[m],a);return new Ye(p,f)}divide(i){if(!this.field.equals(i.field))throw new v("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new v("Divide by 0");const a=this.field;let l=a.getZero(),c=this;const f=i.getCoefficient(i.getDegree()),p=a.inverse(f);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const m=c.getDegree()-i.getDegree(),C=a.multiply(c.getCoefficient(c.getDegree()),p),T=i.multiplyByMonomial(m,C),O=a.buildMonomial(m,C);l=l.addOrSubtract(O),c=c.addOrSubtract(T)}return[l,c]}toString(){let i="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(i+=" - ",l=-l):i.length>0&&(i+=" + "),a===0||l!==1){const c=this.field.log(l);c===0?i+="1":c===1?i+="a":(i+="a^",i+=c)}a!==0&&(a===1?i+="x":(i+="x^",i+=a))}}return i}}class Ze extends d{}Ze.kind="ArithmeticException";class tt extends Le{constructor(i,a,l){super(),this.primitive=i,this.size=a,this.generatorBase=l;const c=new Int32Array(a);let f=1;for(let m=0;m<a;m++)c[m]=f,f*=2,f>=a&&(f^=i,f&=a-1);this.expTable=c;const p=new Int32Array(a);for(let m=0;m<a-1;m++)p[c[m]]=m;this.logTable=p,this.zero=new Ye(this,Int32Array.from([0])),this.one=new Ye(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new v;if(a===0)return this.zero;const l=new Int32Array(i+1);return l[0]=a,new Ye(this,l)}inverse(i){if(i===0)throw new Ze;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}tt.AZTEC_DATA_12=new tt(4201,4096,1),tt.AZTEC_DATA_10=new tt(1033,1024,1),tt.AZTEC_DATA_6=new tt(67,64,1),tt.AZTEC_PARAM=new tt(19,16,1),tt.QR_CODE_FIELD_256=new tt(285,256,0),tt.DATA_MATRIX_FIELD_256=new tt(301,256,1),tt.AZTEC_DATA_8=tt.DATA_MATRIX_FIELD_256,tt.MAXICODE_FIELD_64=tt.AZTEC_DATA_6;class dr extends d{}dr.kind="ReedSolomonException";class Pt extends d{}Pt.kind="IllegalStateException";class bt{constructor(i){this.field=i}decode(i,a){const l=this.field,c=new Ye(l,i),f=new Int32Array(a);let p=!0;for(let z=0;z<a;z++){const X=c.evaluateAt(l.exp(z+l.getGeneratorBase()));f[f.length-1-z]=X,X!==0&&(p=!1)}if(p)return;const m=new Ye(l,f),C=this.runEuclideanAlgorithm(l.buildMonomial(a,1),m,a),T=C[0],O=C[1],B=this.findErrorLocations(T),j=this.findErrorMagnitudes(O,B);for(let z=0;z<B.length;z++){const X=i.length-1-l.log(B[z]);if(X<0)throw new dr("Bad error location");i[X]=tt.addOrSubtract(i[X],j[z])}}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){const z=i;i=a,a=z}const c=this.field;let f=i,p=a,m=c.getZero(),C=c.getOne();for(;p.getDegree()>=(l/2|0);){let z=f,X=m;if(f=p,m=C,f.isZero())throw new dr("r_{i-1} was zero");p=z;let Q=c.getZero();const se=f.getCoefficient(f.getDegree()),he=c.inverse(se);for(;p.getDegree()>=f.getDegree()&&!p.isZero();){const Ae=p.getDegree()-f.getDegree(),Ce=c.multiply(p.getCoefficient(p.getDegree()),he);Q=Q.addOrSubtract(c.buildMonomial(Ae,Ce)),p=p.addOrSubtract(f.multiplyByMonomial(Ae,Ce))}if(C=Q.multiply(m).addOrSubtract(X),p.getDegree()>=f.getDegree())throw new Pt("Division algorithm failed to reduce polynomial?")}const T=C.getCoefficient(0);if(T===0)throw new dr("sigmaTilde(0) was zero");const O=c.inverse(T),B=C.multiplyScalar(O),j=p.multiplyScalar(O);return[B,j]}findErrorLocations(i){const a=i.getDegree();if(a===1)return Int32Array.from([i.getCoefficient(1)]);const l=new Int32Array(a);let c=0;const f=this.field;for(let p=1;p<f.getSize()&&c<a;p++)i.evaluateAt(p)===0&&(l[c]=f.inverse(p),c++);if(c!==a)throw new dr("Error locator degree does not match number of roots");return l}findErrorMagnitudes(i,a){const l=a.length,c=new Int32Array(l),f=this.field;for(let p=0;p<l;p++){const m=f.inverse(a[p]);let C=1;for(let T=0;T<l;T++)if(p!==T){const O=f.multiply(a[T],m),B=O&1?O&-2:O|1;C=f.multiply(C,B)}c[p]=f.multiply(i.evaluateAt(m),f.inverse(C)),f.getGeneratorBase()!==0&&(c[p]=f.multiply(c[p],m))}return c}}var Ht;(function(M){M[M.UPPER=0]="UPPER",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.DIGIT=3]="DIGIT",M[M.PUNCT=4]="PUNCT",M[M.BINARY=5]="BINARY"})(Ht||(Ht={}));class ot{decode(i){this.ddata=i;let a=i.getBits(),l=this.extractBits(a),c=this.correctBits(l),f=ot.convertBoolArrayToByteArray(c),p=ot.getEncodedData(c),m=new ke(f,p,null,null);return m.setNumBits(c.length),m}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let a=i.length,l=Ht.UPPER,c=Ht.UPPER,f="",p=0;for(;p<a;)if(c===Ht.BINARY){if(a-p<5)break;let m=ot.readCode(i,p,5);if(p+=5,m===0){if(a-p<11)break;m=ot.readCode(i,p,11)+31,p+=11}for(let C=0;C<m;C++){if(a-p<8){p=a;break}const T=ot.readCode(i,p,8);f+=K.castAsNonUtf8Char(T),p+=8}c=l}else{let m=c===Ht.DIGIT?4:5;if(a-p<m)break;let C=ot.readCode(i,p,m);p+=m;let T=ot.getCharacter(c,C);T.startsWith("CTRL_")?(l=c,c=ot.getTable(T.charAt(5)),T.charAt(6)==="L"&&(l=c)):(f+=T,c=l)}return f}static getTable(i){switch(i){case"L":return Ht.LOWER;case"P":return Ht.PUNCT;case"M":return Ht.MIXED;case"D":return Ht.DIGIT;case"B":return Ht.BINARY;case"U":default:return Ht.UPPER}}static getCharacter(i,a){switch(i){case Ht.UPPER:return ot.UPPER_TABLE[a];case Ht.LOWER:return ot.LOWER_TABLE[a];case Ht.MIXED:return ot.MIXED_TABLE[a];case Ht.PUNCT:return ot.PUNCT_TABLE[a];case Ht.DIGIT:return ot.DIGIT_TABLE[a];default:throw new Pt("Bad table")}}correctBits(i){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=tt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=tt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=tt.AZTEC_DATA_10):(l=12,a=tt.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),f=i.length/l;if(f<c)throw new R;let p=i.length%l,m=new Int32Array(f);for(let j=0;j<f;j++,p+=l)m[j]=ot.readCode(i,p,l);try{new bt(a).decode(m,f-c)}catch(j){throw new R(j)}let C=(1<<l)-1,T=0;for(let j=0;j<c;j++){let z=m[j];if(z===0||z===C)throw new R;(z===1||z===C-1)&&T++}let O=new Array(c*l-T),B=0;for(let j=0;j<c;j++){let z=m[j];if(z===1||z===C-1)O.fill(z>1,B,B+l-1),B+=l-1;else for(let X=l-1;X>=0;--X)O[B++]=(z&1<<X)!==0}return O}extractBits(i){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),c=(a?11:14)+l*4,f=new Int32Array(c),p=new Array(this.totalBitsInLayer(l,a));if(a)for(let m=0;m<f.length;m++)f[m]=m;else{let m=c+1+2*F.truncDivision(F.truncDivision(c,2)-1,15),C=c/2,T=F.truncDivision(m,2);for(let O=0;O<C;O++){let B=O+F.truncDivision(O,15);f[C-O-1]=T-B-1,f[C+O]=T+B+1}}for(let m=0,C=0;m<l;m++){let T=(l-m)*4+(a?9:12),O=m*2,B=c-1-O;for(let j=0;j<T;j++){let z=j*2;for(let X=0;X<2;X++)p[C+z+X]=i.get(f[O+X],f[O+j]),p[C+2*T+z+X]=i.get(f[O+j],f[B-X]),p[C+4*T+z+X]=i.get(f[B-X],f[B-j]),p[C+6*T+z+X]=i.get(f[B-j],f[O+X])}C+=T*8}return p}static readCode(i,a,l){let c=0;for(let f=a;f<a+l;f++)c<<=1,i[f]&&(c|=1);return c}static readByte(i,a){let l=i.length-a;return l>=8?ot.readCode(i,a,8):ot.readCode(i,a,l)<<8-l}static convertBoolArrayToByteArray(i){let a=new Uint8Array((i.length+7)/8);for(let l=0;l<a.length;l++)a[l]=ot.readByte(i,8*l);return a}totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}ot.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ot.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ot.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ot.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ot.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class st{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,a,l,c){const f=i-l,p=a-c;return Math.sqrt(f*f+p*p)}static sum(i){let a=0;for(let l=0,c=i.length;l!==c;l++){const f=i[l];a+=f}return a}}class pr{static floatToIntBits(i){return i}}pr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Oe{constructor(i,a){this.x=i,this.y=a}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Oe){const a=i;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*pr.floatToIntBits(this.x)+pr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const a=this.distance(i[0],i[1]),l=this.distance(i[1],i[2]),c=this.distance(i[0],i[2]);let f,p,m;if(l>=a&&l>=c?(p=i[0],f=i[1],m=i[2]):c>=l&&c>=a?(p=i[1],f=i[0],m=i[2]):(p=i[2],f=i[0],m=i[1]),this.crossProductZ(f,p,m)<0){const C=f;f=m,m=C}i[0]=f,i[1]=p,i[2]=m}static distance(i,a){return st.distance(i.x,i.y,a.x,a.y)}static crossProductZ(i,a,l){const c=a.x,f=a.y;return(l.x-c)*(i.y-f)-(l.y-f)*(i.x-c)}}class On{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Gn extends On{constructor(i,a,l,c,f){super(i,a),this.compact=l,this.nbDatablocks=c,this.nbLayers=f}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class it{constructor(i,a,l,c){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),a==null&&(a=it.INIT_SIZE),l==null&&(l=i.getWidth()/2|0),c==null&&(c=i.getHeight()/2|0);const f=a/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=c-f,this.downInit=c+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let i=this.leftInit,a=this.rightInit,l=this.upInit,c=this.downInit,f=!1,p=!0,m=!1,C=!1,T=!1,O=!1,B=!1;const j=this.width,z=this.height;for(;p;){p=!1;let X=!0;for(;(X||!C)&&a<j;)X=this.containsBlackPoint(l,c,a,!1),X?(a++,p=!0,C=!0):C||a++;if(a>=j){f=!0;break}let Q=!0;for(;(Q||!T)&&c<z;)Q=this.containsBlackPoint(i,a,c,!0),Q?(c++,p=!0,T=!0):T||c++;if(c>=z){f=!0;break}let se=!0;for(;(se||!O)&&i>=0;)se=this.containsBlackPoint(l,c,i,!1),se?(i--,p=!0,O=!0):O||i--;if(i<0){f=!0;break}let he=!0;for(;(he||!B)&&l>=0;)he=this.containsBlackPoint(i,a,l,!0),he?(l--,p=!0,B=!0):B||l--;if(l<0){f=!0;break}p&&(m=!0)}if(!f&&m){const X=a-i;let Q=null;for(let Ce=1;Q===null&&Ce<X;Ce++)Q=this.getBlackPointOnSegment(i,c-Ce,i+Ce,c);if(Q==null)throw new V;let se=null;for(let Ce=1;se===null&&Ce<X;Ce++)se=this.getBlackPointOnSegment(i,l+Ce,i+Ce,l);if(se==null)throw new V;let he=null;for(let Ce=1;he===null&&Ce<X;Ce++)he=this.getBlackPointOnSegment(a,l+Ce,a-Ce,l);if(he==null)throw new V;let Ae=null;for(let Ce=1;Ae===null&&Ce<X;Ce++)Ae=this.getBlackPointOnSegment(a,c-Ce,a-Ce,c);if(Ae==null)throw new V;return this.centerEdges(Ae,Q,he,se)}else throw new V}getBlackPointOnSegment(i,a,l,c){const f=st.round(st.distance(i,a,l,c)),p=(l-i)/f,m=(c-a)/f,C=this.image;for(let T=0;T<f;T++){const O=st.round(i+T*p),B=st.round(a+T*m);if(C.get(O,B))return new Oe(O,B)}return null}centerEdges(i,a,l,c){const f=i.getX(),p=i.getY(),m=a.getX(),C=a.getY(),T=l.getX(),O=l.getY(),B=c.getX(),j=c.getY(),z=it.CORR;return f<this.width/2?[new Oe(B-z,j+z),new Oe(m+z,C+z),new Oe(T-z,O-z),new Oe(f+z,p-z)]:[new Oe(B+z,j+z),new Oe(m+z,C-z),new Oe(T-z,O+z),new Oe(f-z,p-z)]}containsBlackPoint(i,a,l,c){const f=this.image;if(c){for(let p=i;p<=a;p++)if(f.get(p,l))return!0}else for(let p=i;p<=a;p++)if(f.get(l,p))return!0;return!1}}it.INIT_SIZE=10,it.CORR=1;class er{static checkAndNudgePoints(i,a){const l=i.getWidth(),c=i.getHeight();let f=!0;for(let p=0;p<a.length&&f;p+=2){const m=Math.floor(a[p]),C=Math.floor(a[p+1]);if(m<-1||m>l||C<-1||C>c)throw new V;f=!1,m===-1?(a[p]=0,f=!0):m===l&&(a[p]=l-1,f=!0),C===-1?(a[p+1]=0,f=!0):C===c&&(a[p+1]=c-1,f=!0)}f=!0;for(let p=a.length-2;p>=0&&f;p-=2){const m=Math.floor(a[p]),C=Math.floor(a[p+1]);if(m<-1||m>l||C<-1||C>c)throw new V;f=!1,m===-1?(a[p]=0,f=!0):m===l&&(a[p]=l-1,f=!0),C===-1?(a[p+1]=0,f=!0):C===c&&(a[p+1]=c-1,f=!0)}}}class Ge{constructor(i,a,l,c,f,p,m,C,T){this.a11=i,this.a21=a,this.a31=l,this.a12=c,this.a22=f,this.a32=p,this.a13=m,this.a23=C,this.a33=T}static quadrilateralToQuadrilateral(i,a,l,c,f,p,m,C,T,O,B,j,z,X,Q,se){const he=Ge.quadrilateralToSquare(i,a,l,c,f,p,m,C);return Ge.squareToQuadrilateral(T,O,B,j,z,X,Q,se).times(he)}transformPoints(i){const a=i.length,l=this.a11,c=this.a12,f=this.a13,p=this.a21,m=this.a22,C=this.a23,T=this.a31,O=this.a32,B=this.a33;for(let j=0;j<a;j+=2){const z=i[j],X=i[j+1],Q=f*z+C*X+B;i[j]=(l*z+p*X+T)/Q,i[j+1]=(c*z+m*X+O)/Q}}transformPointsWithValues(i,a){const l=this.a11,c=this.a12,f=this.a13,p=this.a21,m=this.a22,C=this.a23,T=this.a31,O=this.a32,B=this.a33,j=i.length;for(let z=0;z<j;z++){const X=i[z],Q=a[z],se=f*X+C*Q+B;i[z]=(l*X+p*Q+T)/se,a[z]=(c*X+m*Q+O)/se}}static squareToQuadrilateral(i,a,l,c,f,p,m,C){const T=i-l+f-m,O=a-c+p-C;if(T===0&&O===0)return new Ge(l-i,f-l,i,c-a,p-c,a,0,0,1);{const B=l-f,j=m-f,z=c-p,X=C-p,Q=B*X-j*z,se=(T*X-j*O)/Q,he=(B*O-T*z)/Q;return new Ge(l-i+se*l,m-i+he*m,i,c-a+se*c,C-a+he*C,a,se,he,1)}}static quadrilateralToSquare(i,a,l,c,f,p,m,C){return Ge.squareToQuadrilateral(i,a,l,c,f,p,m,C).buildAdjoint()}buildAdjoint(){return new Ge(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Ge(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class Sr extends er{sampleGrid(i,a,l,c,f,p,m,C,T,O,B,j,z,X,Q,se,he,Ae,Ce){const xe=Ge.quadrilateralToQuadrilateral(c,f,p,m,C,T,O,B,j,z,X,Q,se,he,Ae,Ce);return this.sampleGridWithTransform(i,a,l,xe)}sampleGridWithTransform(i,a,l,c){if(a<=0||l<=0)throw new V;const f=new G(a,l),p=new Float32Array(2*a);for(let m=0;m<l;m++){const C=p.length,T=m+.5;for(let O=0;O<C;O+=2)p[O]=O/2+.5,p[O+1]=T;c.transformPoints(p),er.checkAndNudgePoints(i,p);try{for(let O=0;O<C;O+=2)i.get(Math.floor(p[O]),Math.floor(p[O+1]))&&f.set(O/2,m)}catch{throw new V}}return f}}class xr{static setGridSampler(i){xr.gridSampler=i}static getInstance(){return xr.gridSampler}}xr.gridSampler=new Sr;class Mt{constructor(i,a){this.x=i,this.y=a}toResultPoint(){return new Oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Rs{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(i){let p=l[0];l[0]=l[2],l[2]=p}this.extractParameters(l);let c=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),f=this.getMatrixCornerPoints(l);return new Gn(c,f,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new V;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(i[0],i[1],a),this.sampleLine(i[1],i[2],a),this.sampleLine(i[2],i[3],a),this.sampleLine(i[3],i[0],a)]);this.shift=this.getRotation(l,a);let c=0;for(let p=0;p<4;p++){let m=l[(this.shift+p)%4];this.compact?(c<<=7,c+=m>>1&127):(c<<=10,c+=(m>>2&992)+(m>>1&31))}let f=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(f>>6)+1,this.nbDataBlocks=(f&63)+1):(this.nbLayers=(f>>11)+1,this.nbDataBlocks=(f&2047)+1)}getRotation(i,a){let l=0;i.forEach((c,f,p)=>{let m=(c>>a-2<<1)+(c&1);l=(l<<3)+m}),l=((l&1)<<11)+(l>>1);for(let c=0;c<4;c++)if(F.bitCount(l^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new V}getCorrectedParameterData(i,a){let l,c;a?(l=7,c=2):(l=10,c=4);let f=l-c,p=new Int32Array(l);for(let C=l-1;C>=0;--C)p[C]=i&15,i>>=4;try{new bt(tt.AZTEC_PARAM).decode(p,f)}catch{throw new V}let m=0;for(let C=0;C<c;C++)m=(m<<4)+p[C];return m}getBullsEyeCorners(i){let a=i,l=i,c=i,f=i,p=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let B=this.getFirstDifferent(a,p,1,-1),j=this.getFirstDifferent(l,p,1,1),z=this.getFirstDifferent(c,p,-1,1),X=this.getFirstDifferent(f,p,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(X,B)*this.nbCenterLayers/(this.distancePoint(f,a)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(B,j,z,X))break}a=B,l=j,c=z,f=X,p=!p}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let m=new Oe(a.getX()+.5,a.getY()-.5),C=new Oe(l.getX()+.5,l.getY()+.5),T=new Oe(c.getX()-.5,c.getY()+.5),O=new Oe(f.getX()-.5,f.getY()-.5);return this.expandSquare([m,C,T,O],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,a,l,c;try{let m=new it(this.image).detect();i=m[0],a=m[1],l=m[2],c=m[3]}catch{let C=this.image.getWidth()/2,T=this.image.getHeight()/2;i=this.getFirstDifferent(new Mt(C+7,T-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Mt(C+7,T+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Mt(C-7,T+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Mt(C-7,T-7),!1,-1,-1).toResultPoint()}let f=st.round((i.getX()+c.getX()+a.getX()+l.getX())/4),p=st.round((i.getY()+c.getY()+a.getY()+l.getY())/4);try{let m=new it(this.image,15,f,p).detect();i=m[0],a=m[1],l=m[2],c=m[3]}catch{i=this.getFirstDifferent(new Mt(f+7,p-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Mt(f+7,p+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Mt(f-7,p+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Mt(f-7,p-7),!1,-1,-1).toResultPoint()}return f=st.round((i.getX()+c.getX()+a.getX()+l.getX())/4),p=st.round((i.getY()+c.getY()+a.getY()+l.getY())/4),new Mt(f,p)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,a,l,c,f){let p=xr.getInstance(),m=this.getDimension(),C=m/2-this.nbCenterLayers,T=m/2+this.nbCenterLayers;return p.sampleGrid(i,m,m,C,C,T,C,T,T,C,T,a.getX(),a.getY(),l.getX(),l.getY(),c.getX(),c.getY(),f.getX(),f.getY())}sampleLine(i,a,l){let c=0,f=this.distanceResultPoint(i,a),p=f/l,m=i.getX(),C=i.getY(),T=p*(a.getX()-i.getX())/f,O=p*(a.getY()-i.getY())/f;for(let B=0;B<l;B++)this.image.get(st.round(m+B*T),st.round(C+B*O))&&(c|=1<<l-B-1);return c}isWhiteOrBlackRectangle(i,a,l,c){let f=3;i=new Mt(i.getX()-f,i.getY()+f),a=new Mt(a.getX()-f,a.getY()-f),l=new Mt(l.getX()+f,l.getY()-f),c=new Mt(c.getX()+f,c.getY()+f);let p=this.getColor(c,i);if(p===0)return!1;let m=this.getColor(i,a);return m!==p||(m=this.getColor(a,l),m!==p)?!1:(m=this.getColor(l,c),m===p)}getColor(i,a){let l=this.distancePoint(i,a),c=(a.getX()-i.getX())/l,f=(a.getY()-i.getY())/l,p=0,m=i.getX(),C=i.getY(),T=this.image.get(i.getX(),i.getY()),O=Math.ceil(l);for(let j=0;j<O;j++)m+=c,C+=f,this.image.get(st.round(m),st.round(C))!==T&&p++;let B=p/l;return B>.1&&B<.9?0:B<=.1===T?1:-1}getFirstDifferent(i,a,l,c){let f=i.getX()+l,p=i.getY()+c;for(;this.isValid(f,p)&&this.image.get(f,p)===a;)f+=l,p+=c;for(f-=l,p-=c;this.isValid(f,p)&&this.image.get(f,p)===a;)f+=l;for(f-=l;this.isValid(f,p)&&this.image.get(f,p)===a;)p+=c;return p-=c,new Mt(f,p)}expandSquare(i,a,l){let c=l/(2*a),f=i[0].getX()-i[2].getX(),p=i[0].getY()-i[2].getY(),m=(i[0].getX()+i[2].getX())/2,C=(i[0].getY()+i[2].getY())/2,T=new Oe(m+c*f,C+c*p),O=new Oe(m-c*f,C-c*p);f=i[1].getX()-i[3].getX(),p=i[1].getY()-i[3].getY(),m=(i[1].getX()+i[3].getX())/2,C=(i[1].getY()+i[3].getY())/2;let B=new Oe(m+c*f,C+c*p),j=new Oe(m-c*f,C-c*p);return[T,B,O,j]}isValid(i,a){return i>=0&&i<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(i){let a=st.round(i.getX()),l=st.round(i.getY());return this.isValid(a,l)}distancePoint(i,a){return st.distance(i.getX(),i.getY(),a.getX(),a.getY())}distanceResultPoint(i,a){return st.distance(i.getX(),i.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Ni{decode(i,a=null){let l=null,c=new Rs(i.getBlackMatrix()),f=null,p=null;try{let O=c.detectMirror(!1);f=O.getPoints(),this.reportFoundResultPoints(a,f),p=new ot().decode(O)}catch(O){l=O}if(p==null)try{let O=c.detectMirror(!0);f=O.getPoints(),this.reportFoundResultPoints(a,f),p=new ot().decode(O)}catch(O){throw l??O}let m=new U(p.getText(),p.getRawBytes(),p.getNumBits(),f,J.AZTEC,A.currentTimeMillis()),C=p.getByteSegments();C!=null&&m.putMetadata(ye.BYTE_SEGMENTS,C);let T=p.getECLevel();return T!=null&&m.putMetadata(ye.ERROR_CORRECTION_LEVEL,T),m}reportFoundResultPoints(i,a){if(i!=null){let l=i.get(_.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((c,f,p)=>{l.foundPossibleResultPoint(c)})}}reset(){}}class Qc extends ne{constructor(i=500){super(new Ni,i)}}class Dt{decode(i,a){try{return this.doDecode(i,a)}catch{if(a&&a.get(_.TRY_HARDER)===!0&&i.isRotateSupported()){const f=i.rotateCounterClockwise(),p=this.doDecode(f,a),m=p.getResultMetadata();let C=270;m!==null&&m.get(ye.ORIENTATION)===!0&&(C=C+m.get(ye.ORIENTATION)%360),p.putMetadata(ye.ORIENTATION,C);const T=p.getResultPoints();if(T!==null){const O=f.getHeight();for(let B=0;B<T.length;B++)T[B]=new Oe(O-T[B].getY()-1,T[B].getX())}return p}else throw new V}}reset(){}doDecode(i,a){const l=i.getWidth(),c=i.getHeight();let f=new L(l);const p=a&&a.get(_.TRY_HARDER)===!0,m=Math.max(1,c>>(p?8:5));let C;p?C=c:C=15;const T=Math.trunc(c/2);for(let O=0;O<C;O++){const B=Math.trunc((O+1)/2),j=(O&1)===0,z=T+m*(j?B:-B);if(z<0||z>=c)break;try{f=i.getBlackRow(z,f)}catch{continue}for(let X=0;X<2;X++){if(X===1&&(f.reverse(),a&&a.get(_.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;a.forEach((se,he)=>Q.set(he,se)),Q.delete(_.NEED_RESULT_POINT_CALLBACK),a=Q}try{const Q=this.decodeRow(z,f,a);if(X===1){Q.putMetadata(ye.ORIENTATION,180);const se=Q.getResultPoints();se!==null&&(se[0]=new Oe(l-se[0].getX()-1,se[0].getY()),se[1]=new Oe(l-se[1].getX()-1,se[1].getY()))}return Q}catch{}}}throw new V}static recordPattern(i,a,l){const c=l.length;for(let T=0;T<c;T++)l[T]=0;const f=i.getSize();if(a>=f)throw new V;let p=!i.get(a),m=0,C=a;for(;C<f;){if(i.get(C)!==p)l[m]++;else{if(++m===c)break;l[m]=1,p=!p}C++}if(!(m===c||m===c-1&&C===f))throw new V}static recordPatternInReverse(i,a,l){let c=l.length,f=i.get(a);for(;a>0&&c>=0;)i.get(--a)!==f&&(c--,f=!f);if(c>=0)throw new V;Dt.recordPattern(i,a+1,l)}static patternMatchVariance(i,a,l){const c=i.length;let f=0,p=0;for(let T=0;T<c;T++)f+=i[T],p+=a[T];if(f<p)return Number.POSITIVE_INFINITY;const m=f/p;l*=m;let C=0;for(let T=0;T<c;T++){const O=i[T],B=a[T]*m,j=O>B?O-B:B-O;if(j>l)return Number.POSITIVE_INFINITY;C+=j}return C/f}}class Ne extends Dt{static findStartPattern(i){const a=i.getSize(),l=i.getNextSet(0);let c=0,f=Int32Array.from([0,0,0,0,0,0]),p=l,m=!1;const C=6;for(let T=l;T<a;T++)if(i.get(T)!==m)f[c]++;else{if(c===C-1){let O=Ne.MAX_AVG_VARIANCE,B=-1;for(let j=Ne.CODE_START_A;j<=Ne.CODE_START_C;j++){const z=Dt.patternMatchVariance(f,Ne.CODE_PATTERNS[j],Ne.MAX_INDIVIDUAL_VARIANCE);z<O&&(O=z,B=j)}if(B>=0&&i.isRange(Math.max(0,p-(T-p)/2),p,!1))return Int32Array.from([p,T,B]);p+=f[0]+f[1],f=f.slice(2,f.length-1),f[c-1]=0,f[c]=0,c--}else c++;f[c]=1,m=!m}throw new V}static decodeCode(i,a,l){Dt.recordPattern(i,l,a);let c=Ne.MAX_AVG_VARIANCE,f=-1;for(let p=0;p<Ne.CODE_PATTERNS.length;p++){const m=Ne.CODE_PATTERNS[p],C=this.patternMatchVariance(a,m,Ne.MAX_INDIVIDUAL_VARIANCE);C<c&&(c=C,f=p)}if(f>=0)return f;throw new V}decodeRow(i,a,l){const c=l&&l.get(_.ASSUME_GS1)===!0,f=Ne.findStartPattern(a),p=f[2];let m=0;const C=new Uint8Array(20);C[m++]=p;let T;switch(p){case Ne.CODE_START_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:T=Ne.CODE_CODE_C;break;default:throw new R}let O=!1,B=!1,j="",z=f[0],X=f[1];const Q=Int32Array.from([0,0,0,0,0,0]);let se=0,he=0,Ae=p,Ce=0,xe=!0,vt=!1,at=!1;for(;!O;){const pa=B;switch(B=!1,se=he,he=Ne.decodeCode(a,Q,X),C[m++]=he,he!==Ne.CODE_STOP&&(xe=!0),he!==Ne.CODE_STOP&&(Ce++,Ae+=Ce*he),z=X,X+=Q.reduce((fx,hx)=>fx+hx,0),he){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new R}switch(T){case Ne.CODE_CODE_A:if(he<64)at===vt?j+=String.fromCharCode(32+he):j+=String.fromCharCode(32+he+128),at=!1;else if(he<96)at===vt?j+=String.fromCharCode(he-64):j+=String.fromCharCode(he+64),at=!1;else switch(he!==Ne.CODE_STOP&&(xe=!1),he){case Ne.CODE_FNC_1:c&&(j.length===0?j+="]C1":j+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!vt&&at?(vt=!0,at=!1):vt&&at?(vt=!1,at=!1):at=!0;break;case Ne.CODE_SHIFT:B=!0,T=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:T=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:O=!0;break}break;case Ne.CODE_CODE_B:if(he<96)at===vt?j+=String.fromCharCode(32+he):j+=String.fromCharCode(32+he+128),at=!1;else switch(he!==Ne.CODE_STOP&&(xe=!1),he){case Ne.CODE_FNC_1:c&&(j.length===0?j+="]C1":j+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!vt&&at?(vt=!0,at=!1):vt&&at?(vt=!1,at=!1):at=!0;break;case Ne.CODE_SHIFT:B=!0,T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:T=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:O=!0;break}break;case Ne.CODE_CODE_C:if(he<100)he<10&&(j+="0"),j+=he;else switch(he!==Ne.CODE_STOP&&(xe=!1),he){case Ne.CODE_FNC_1:c&&(j.length===0?j+="]C1":j+="");break;case Ne.CODE_CODE_A:T=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:T=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:O=!0;break}break}pa&&(T=T===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const on=X-z;if(X=a.getNextUnset(X),!a.isRange(X,Math.min(a.getSize(),X+(X-z)/2),!1))throw new V;if(Ae-=Ce*se,Ae%103!==se)throw new S;const Yn=j.length;if(Yn===0)throw new V;Yn>0&&xe&&(T===Ne.CODE_CODE_C?j=j.substring(0,Yn-2):j=j.substring(0,Yn-1));const ln=(f[1]+f[0])/2,$t=z+on/2,Lr=C.length,wn=new Uint8Array(Lr);for(let pa=0;pa<Lr;pa++)wn[pa]=C[pa];const da=[new Oe(ln,i),new Oe($t,i)];return new U(j,wn,0,da,J.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class lr extends Dt{constructor(i=!1,a=!1){super(),this.usingCheckDigit=i,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,a,l){let c=this.counters;c.fill(0),this.decodeRowResult="";let f=lr.findAsteriskPattern(a,c),p=a.getNextSet(f[1]),m=a.getSize(),C,T;do{lr.recordPattern(a,p,c);let Q=lr.toNarrowWidePattern(c);if(Q<0)throw new V;C=lr.patternToChar(Q),this.decodeRowResult+=C,T=p;for(let se of c)p+=se;p=a.getNextSet(p)}while(C!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let O=0;for(let Q of c)O+=Q;let B=p-T-O;if(p!==m&&B*2<O)throw new V;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,se=0;for(let he=0;he<Q;he++)se+=lr.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(he));if(this.decodeRowResult.charAt(Q)!==lr.ALPHABET_STRING.charAt(se%43))throw new S;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new V;let j;this.extendedMode?j=lr.decodeExtended(this.decodeRowResult):j=this.decodeRowResult;let z=(f[1]+f[0])/2,X=T+O/2;return new U(j,null,0,[new Oe(z,i),new Oe(X,i)],J.CODE_39,new Date().getTime())}static findAsteriskPattern(i,a){let l=i.getSize(),c=i.getNextSet(0),f=0,p=c,m=!1,C=a.length;for(let T=c;T<l;T++)if(i.get(T)!==m)a[f]++;else{if(f===C-1){if(this.toNarrowWidePattern(a)===lr.ASTERISK_ENCODING&&i.isRange(Math.max(0,p-Math.floor((T-p)/2)),p,!1))return[p,T];p+=a[0]+a[1],a.copyWithin(0,2,2+f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,m=!m}throw new V}static toNarrowWidePattern(i){let a=i.length,l=0,c;do{let f=2147483647;for(let C of i)C<f&&C>l&&(f=C);l=f,c=0;let p=0,m=0;for(let C=0;C<a;C++){let T=i[C];T>l&&(m|=1<<a-1-C,c++,p+=T)}if(c===3){for(let C=0;C<a&&c>0;C++){let T=i[C];if(T>l&&(c--,T*2>=p))return-1}return m}}while(c>3);return-1}static patternToChar(i){for(let a=0;a<lr.CHARACTER_ENCODINGS.length;a++)if(lr.CHARACTER_ENCODINGS[a]===i)return lr.ALPHABET_STRING.charAt(a);if(i===lr.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(i){let a=i.length,l="";for(let c=0;c<a;c++){let f=i.charAt(c);if(f==="+"||f==="$"||f==="%"||f==="/"){let p=i.charAt(c+1),m="\0";switch(f){case"+":if(p>="A"&&p<="Z")m=String.fromCharCode(p.charCodeAt(0)+32);else throw new R;break;case"$":if(p>="A"&&p<="Z")m=String.fromCharCode(p.charCodeAt(0)-64);else throw new R;break;case"%":if(p>="A"&&p<="E")m=String.fromCharCode(p.charCodeAt(0)-38);else if(p>="F"&&p<="J")m=String.fromCharCode(p.charCodeAt(0)-11);else if(p>="K"&&p<="O")m=String.fromCharCode(p.charCodeAt(0)+16);else if(p>="P"&&p<="T")m=String.fromCharCode(p.charCodeAt(0)+43);else if(p==="U")m="\0";else if(p==="V")m="@";else if(p==="W")m="`";else if(p==="X"||p==="Y"||p==="Z")m="";else throw new R;break;case"/":if(p>="A"&&p<="O")m=String.fromCharCode(p.charCodeAt(0)-32);else if(p==="Z")m=":";else throw new R;break}l+=m,c++}else l+=f}return l}}lr.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",lr.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],lr.ASTERISK_ENCODING=148;class Tt extends Dt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,a,l){let c=this.decodeStart(a),f=this.decodeEnd(a),p=new ie;Tt.decodeMiddle(a,c[1],f[0],p);let m=p.toString(),C=null;l!=null&&(C=l.get(_.ALLOWED_LENGTHS)),C==null&&(C=Tt.DEFAULT_ALLOWED_LENGTHS);let T=m.length,O=!1,B=0;for(let X of C){if(T===X){O=!0;break}X>B&&(B=X)}if(!O&&T>B&&(O=!0),!O)throw new R;const j=[new Oe(c[1],i),new Oe(f[0],i)];return new U(m,null,0,j,J.ITF,new Date().getTime())}static decodeMiddle(i,a,l,c){let f=new Int32Array(10),p=new Int32Array(5),m=new Int32Array(5);for(f.fill(0),p.fill(0),m.fill(0);a<l;){Dt.recordPattern(i,a,f);for(let T=0;T<5;T++){let O=2*T;p[T]=f[O],m[T]=f[O+1]}let C=Tt.decodeDigit(p);c.append(C.toString()),C=this.decodeDigit(m),c.append(C.toString()),f.forEach(function(T){a+=T})}}decodeStart(i){let a=Tt.skipWhiteSpace(i),l=Tt.findGuardPattern(i,a,Tt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(i,l[0]),l}validateQuietZone(i,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let c=a-1;l>0&&c>=0&&!i.get(c);c--)l--;if(l!==0)throw new V}static skipWhiteSpace(i){const a=i.getSize(),l=i.getNextSet(0);if(l===a)throw new V;return l}decodeEnd(i){i.reverse();try{let a=Tt.skipWhiteSpace(i),l;try{l=Tt.findGuardPattern(i,a,Tt.END_PATTERN_REVERSED[0])}catch(f){f instanceof V&&(l=Tt.findGuardPattern(i,a,Tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,l[0]);let c=l[0];return l[0]=i.getSize()-l[1],l[1]=i.getSize()-c,l}finally{i.reverse()}}static findGuardPattern(i,a,l){let c=l.length,f=new Int32Array(c),p=i.getSize(),m=!1,C=0,T=a;f.fill(0);for(let O=a;O<p;O++)if(i.get(O)!==m)f[C]++;else{if(C===c-1){if(Dt.patternMatchVariance(f,l,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return[T,O];T+=f[0]+f[1],A.arraycopy(f,2,f,0,C-1),f[C-1]=0,f[C]=0,C--}else C++;f[C]=1,m=!m}throw new V}static decodeDigit(i){let a=Tt.MAX_AVG_VARIANCE,l=-1,c=Tt.PATTERNS.length;for(let f=0;f<c;f++){let p=Tt.PATTERNS[f],m=Dt.patternMatchVariance(i,p,Tt.MAX_INDIVIDUAL_VARIANCE);m<a?(a=m,l=f):m===a&&(l=-1)}if(l>=0)return l%10;throw new V}}Tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Tt.MAX_AVG_VARIANCE=.38,Tt.MAX_INDIVIDUAL_VARIANCE=.5,Tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Tt.START_PATTERN=Int32Array.from([1,1,1,1]),Tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class tr extends Dt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let a=!1,l,c=0,f=Int32Array.from([0,0,0]);for(;!a;){f=Int32Array.from([0,0,0]),l=tr.findGuardPattern(i,c,!1,this.START_END_PATTERN,f);let p=l[0];c=l[1];let m=p-(c-p);m>=0&&(a=i.isRange(m,p,!1))}return l}static checkChecksum(i){return tr.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return tr.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let c=a-1;c>=0;c-=2){let f=i.charAt(c).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}l*=3;for(let c=a-2;c>=0;c-=2){let f=i.charAt(c).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}return(1e3-l)%10}static decodeEnd(i,a){return tr.findGuardPattern(i,a,!1,tr.START_END_PATTERN,new Int32Array(tr.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,a,l,c){return this.findGuardPattern(i,a,l,c,new Int32Array(c.length))}static findGuardPattern(i,a,l,c,f){let p=i.getSize();a=l?i.getNextUnset(a):i.getNextSet(a);let m=0,C=a,T=c.length,O=l;for(let B=a;B<p;B++)if(i.get(B)!==O)f[m]++;else{if(m===T-1){if(Dt.patternMatchVariance(f,c,tr.MAX_INDIVIDUAL_VARIANCE)<tr.MAX_AVG_VARIANCE)return Int32Array.from([C,B]);C+=f[0]+f[1];let j=f.slice(2,f.length-1);for(let z=0;z<m-1;z++)f[z]=j[z];f[m-1]=0,f[m]=0,m--}else m++;f[m]=1,O=!O}throw new V}static decodeDigit(i,a,l,c){this.recordPattern(i,l,a);let f=this.MAX_AVG_VARIANCE,p=-1,m=c.length;for(let C=0;C<m;C++){let T=c[C],O=Dt.patternMatchVariance(a,T,tr.MAX_INDIVIDUAL_VARIANCE);O<f&&(f=O,p=C)}if(p>=0)return p;throw new V}}tr.MAX_AVG_VARIANCE=.48,tr.MAX_INDIVIDUAL_VARIANCE=.7,tr.START_END_PATTERN=Int32Array.from([1,1,1]),tr.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),tr.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),tr.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Gi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let c=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,c),p=c.toString(),m=Gi.parseExtensionString(p),C=[new Oe((l[0]+l[1])/2,i),new Oe(f,i)],T=new U(p,null,0,C,J.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&T.putAllMetadata(m),T}decodeMiddle(i,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=i.getSize(),p=a[1],m=0;for(let T=0;T<5&&p<f;T++){let O=tr.decodeDigit(i,c,p,tr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+O%10);for(let B of c)p+=B;O>=10&&(m|=1<<4-T),T!==4&&(p=i.getNextSet(p),p=i.getNextUnset(p))}if(l.length!==5)throw new V;let C=this.determineCheckDigit(m);if(Gi.extensionChecksum(l.toString())!==C)throw new V;return p}static extensionChecksum(i){let a=i.length,l=0;for(let c=a-2;c>=0;c-=2)l+=i.charAt(c).charCodeAt(0)-48;l*=3;for(let c=a-1;c>=0;c-=2)l+=i.charAt(c).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(i){for(let a=0;a<10;a++)if(i===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new V}static parseExtensionString(i){if(i.length!==5)return null;let a=Gi.parseExtension5String(i);return a==null?null:new Map([[ye.SUGGESTED_PRICE,a]])}static parseExtension5String(i){let a;switch(i.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(i.substring(1)),c=(l/100).toString(),f=l%100,p=f<10?"0"+f:f.toString();return a+c+"."+p}}class qi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,a,l){let c=this.decodeRowStringBuffer,f=this.decodeMiddle(a,l,c),p=c.toString(),m=qi.parseExtensionString(p),C=[new Oe((l[0]+l[1])/2,i),new Oe(f,i)],T=new U(p,null,0,C,J.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&T.putAllMetadata(m),T}decodeMiddle(i,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=i.getSize(),p=a[1],m=0;for(let C=0;C<2&&p<f;C++){let T=tr.decodeDigit(i,c,p,tr.L_AND_G_PATTERNS);l+=String.fromCharCode(48+T%10);for(let O of c)p+=O;T>=10&&(m|=1<<1-C),C!==1&&(p=i.getNextSet(p),p=i.getNextUnset(p))}if(l.length!==2)throw new V;if(parseInt(l.toString())%4!==m)throw new V;return p}static parseExtensionString(i){return i.length!==2?null:new Map([[ye.ISSUE_NUMBER,parseInt(i)]])}}class fo{static decodeRow(i,a,l){let c=tr.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Gi().decodeRow(i,a,c)}catch{return new qi().decodeRow(i,a,c)}}}fo.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class xt extends tr{constructor(){super(),this.decodeRowStringBuffer="",xt.L_AND_G_PATTERNS=xt.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let a=xt.L_PATTERNS[i-10],l=new Int32Array(a.length);for(let c=0;c<a.length;c++)l[c]=a[a.length-c-1];xt.L_AND_G_PATTERNS[i]=l}}decodeRow(i,a,l){let c=xt.findStartGuardPattern(a),f=l==null?null:l.get(_.NEED_RESULT_POINT_CALLBACK);if(f!=null){const xe=new Oe((c[0]+c[1])/2,i);f.foundPossibleResultPoint(xe)}let p=this.decodeMiddle(a,c,this.decodeRowStringBuffer),m=p.rowOffset,C=p.resultString;if(f!=null){const xe=new Oe(m,i);f.foundPossibleResultPoint(xe)}let T=this.decodeEnd(a,m);if(f!=null){const xe=new Oe((T[0]+T[1])/2,i);f.foundPossibleResultPoint(xe)}let O=T[1],B=O+(O-T[0]);if(B>=a.getSize()||!a.isRange(O,B,!1))throw new V;let j=C.toString();if(j.length<8)throw new R;if(!xt.checkChecksum(j))throw new S;let z=(c[1]+c[0])/2,X=(T[1]+T[0])/2,Q=this.getBarcodeFormat(),se=[new Oe(z,i),new Oe(X,i)],he=new U(j,null,0,se,Q,new Date().getTime()),Ae=0;try{let xe=fo.decodeRow(i,a,T[1]);he.putMetadata(ye.UPC_EAN_EXTENSION,xe.getText()),he.putAllMetadata(xe.getResultMetadata()),he.addResultPoints(xe.getResultPoints()),Ae=xe.getText().length}catch{}let Ce=l==null?null:l.get(_.ALLOWED_EAN_EXTENSIONS);if(Ce!=null){let xe=!1;for(let vt in Ce)if(Ae.toString()===vt){xe=!0;break}if(!xe)throw new V}return he}decodeEnd(i,a){return xt.findGuardPattern(i,a,!1,xt.START_END_PATTERN,new Int32Array(xt.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return xt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let a=i.length;if(a===0)return!1;let l=parseInt(i.charAt(a-1),10);return xt.getStandardUPCEANChecksum(i.substring(0,a-1))===l}static getStandardUPCEANChecksum(i){let a=i.length,l=0;for(let c=a-1;c>=0;c-=2){let f=i.charAt(c).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}l*=3;for(let c=a-2;c>=0;c-=2){let f=i.charAt(c).charCodeAt(0)-48;if(f<0||f>9)throw new R;l+=f}return(1e3-l)%10}}class Fn extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=i.getSize(),p=a[1],m=0;for(let T=0;T<6&&p<f;T++){let O=xt.decodeDigit(i,c,p,xt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+O%10);for(let B of c)p+=B;O>=10&&(m|=1<<5-T)}l=Fn.determineFirstDigit(l,m),p=xt.findGuardPattern(i,p,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let T=0;T<6&&p<f;T++){let O=xt.decodeDigit(i,c,p,xt.L_PATTERNS);l+=String.fromCharCode(48+O);for(let B of c)p+=B}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return J.EAN_13}static determineFirstDigit(i,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return i=String.fromCharCode(48+l)+i,i;throw new V}}Fn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class oa extends xt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,a,l){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=i.getSize(),p=a[1];for(let C=0;C<4&&p<f;C++){let T=xt.decodeDigit(i,c,p,xt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let O of c)p+=O}p=xt.findGuardPattern(i,p,!0,xt.MIDDLE_PATTERN,new Int32Array(xt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<4&&p<f;C++){let T=xt.decodeDigit(i,c,p,xt.L_PATTERNS);l+=String.fromCharCode(48+T);for(let O of c)p+=O}return{rowOffset:p,resultString:l}}getBarcodeFormat(){return J.EAN_8}}class kl extends xt{constructor(){super(...arguments),this.ean13Reader=new Fn}getBarcodeFormat(){return J.UPC_A}decode(i,a){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,a,l))}decodeMiddle(i,a,l){return this.ean13Reader.decodeMiddle(i,a,l)}maybeReturnResult(i){let a=i.getText();if(a.charAt(0)==="0"){let l=new U(a.substring(1),null,null,i.getResultPoints(),J.UPC_A);return i.getResultMetadata()!=null&&l.putAllMetadata(i.getResultMetadata()),l}else throw new V}reset(){this.ean13Reader.reset()}}class sn extends xt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,a,l){const c=this.decodeMiddleCounters.map(T=>T);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const f=i.getSize();let p=a[1],m=0;for(let T=0;T<6&&p<f;T++){const O=sn.decodeDigit(i,c,p,sn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+O%10);for(let B of c)p+=B;O>=10&&(m|=1<<5-T)}let C=sn.determineNumSysAndCheckDigit(l,m);return{rowOffset:p,resultString:C}}decodeEnd(i,a){return sn.findGuardPatternWithoutCounters(i,a,!0,sn.MIDDLE_END_PATTERN)}checkChecksum(i){return xt.checkChecksum(sn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,a){for(let l=0;l<=1;l++)for(let c=0;c<10;c++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][c]){let f=String.fromCharCode(48+l),p=String.fromCharCode(48+c);return f+i+p}throw V.getNotFoundInstance()}getBarcodeFormat(){return J.UPC_E}static convertUPCEtoUPCA(i){const a=i.slice(1,7).split("").map(f=>f.charCodeAt(0)),l=new ie;l.append(i.charAt(0));let c=a[5];switch(c){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(c),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(c);break}return i.length>=8&&l.append(i.charAt(7)),l.toString()}}sn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),sn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ho extends Dt{constructor(i){super();let a=i==null?null:i.get(_.POSSIBLE_FORMATS),l=[];n(a)?(l.push(new Fn),l.push(new kl),l.push(new oa),l.push(new sn)):(a.indexOf(J.EAN_13)>-1&&l.push(new Fn),a.indexOf(J.UPC_A)>-1&&l.push(new kl),a.indexOf(J.EAN_8)>-1&&l.push(new oa),a.indexOf(J.UPC_E)>-1&&l.push(new sn)),this.readers=l}decodeRow(i,a,l){for(let c of this.readers)try{const f=c.decodeRow(i,a,l),p=f.getBarcodeFormat()===J.EAN_13&&f.getText().charAt(0)==="0",m=l==null?null:l.get(_.POSSIBLE_FORMATS),C=m==null||m.includes(J.UPC_A);if(p&&C){const T=f.getRawBytes(),O=new U(f.getText().substring(1),T,T?T.length:null,f.getResultPoints(),J.UPC_A);return O.putAllMetadata(f.getResultMetadata()),O}return f}catch{}throw new V}reset(){for(let i of this.readers)i.reset()}}class Ar extends Dt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,a){for(let l=0;l<a.length;l++)if(Dt.patternMatchVariance(i,a[l],Ar.MAX_INDIVIDUAL_VARIANCE)<Ar.MAX_AVG_VARIANCE)return l;throw new V}static count(i){return st.sum(new Int32Array(i))}static increment(i,a){let l=0,c=a[0];for(let f=1;f<i.length;f++)a[f]>c&&(c=a[f],l=f);i[l]++}static decrement(i,a){let l=0,c=a[0];for(let f=1;f<i.length;f++)a[f]<c&&(c=a[f],l=f);i[l]--}static isFinderPattern(i){let a=i[0]+i[1],l=a+i[2]+i[3],c=a/l;if(c>=Ar.MIN_FINDER_PATTERN_RATIO&&c<=Ar.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,p=Number.MIN_SAFE_INTEGER;for(let m of i)m>p&&(p=m),m<f&&(f=m);return p<10*f}return!1}}Ar.MAX_AVG_VARIANCE=.2,Ar.MAX_INDIVIDUAL_VARIANCE=.45,Ar.MIN_FINDER_PATTERN_RATIO=9.5/12,Ar.MAX_FINDER_PATTERN_RATIO=12.5/14;class hi{constructor(i,a){this.value=i,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof hi))return!1;const a=i;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class _i{constructor(i,a,l,c,f){this.value=i,this.startEnd=a,this.value=i,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Oe(l,f)),this.resultPoints.push(new Oe(c,f))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof _i))return!1;const a=i;return this.value===a.value}hashCode(){return this.value}}class Pn{constructor(){}static getRSSvalue(i,a,l){let c=0;for(let C of i)c+=C;let f=0,p=0,m=i.length;for(let C=0;C<m-1;C++){let T;for(T=1,p|=1<<C;T<i[C];T++,p&=~(1<<C)){let O=Pn.combins(c-T-1,m-C-2);if(l&&p===0&&c-T-(m-C-1)>=m-C-1&&(O-=Pn.combins(c-T-(m-C),m-C-2)),m-C-1>1){let B=0;for(let j=c-T-(m-C-2);j>a;j--)B+=Pn.combins(c-T-j-1,m-C-3);O-=B*(m-1-C)}else c-T>a&&O--;f+=O}c-=T}return f}static combins(i,a){let l,c;i-a>a?(c=a,l=i-a):(c=i-a,l=a);let f=1,p=1;for(let m=i;m>l;m--)f*=m,p<=c&&(f/=p,p++);for(;p<=c;)f/=p,p++;return f}}class Jc{static buildBitArray(i){let a=i.length*2-1;i[i.length-1].getRightChar()==null&&(a-=1);let l=12*a,c=new L(l),f=0,m=i[0].getRightChar().getValue();for(let C=11;C>=0;--C)m&1<<C&&c.set(f),f++;for(let C=1;C<i.length;++C){let T=i[C],O=T.getLeftChar().getValue();for(let B=11;B>=0;--B)O&1<<B&&c.set(f),f++;if(T.getRightChar()!=null){let B=T.getRightChar().getValue();for(let j=11;j>=0;--j)B&1<<j&&c.set(f),f++}}return c}}class Z{constructor(i,a){a?this.decodedInformation=null:(this.finished=i,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class re{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class ue extends re{constructor(i,a){super(i),this.value=a}getValue(){return this.value}isFNC1(){return this.value===ue.FNC1}}ue.FNC1="$";class ge extends re{constructor(i,a,l){super(i),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class De extends re{constructor(i,a,l){if(super(i),a<0||a>10||l<0||l>10)throw new R;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===De.FNC1}isSecondDigitFNC1(){return this.secondDigit===De.FNC1}isAnyFNC1(){return this.firstDigit===De.FNC1||this.secondDigit===De.FNC1}}De.FNC1=10;class de{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new V;let a=i.substring(0,2);for(let f of de.TWO_DIGIT_DATA_LENGTH)if(f[0]===a)return f[1]===de.VARIABLE_LENGTH?de.processVariableAI(2,f[2],i):de.processFixedAI(2,f[1],i);if(i.length<3)throw new V;let l=i.substring(0,3);for(let f of de.THREE_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===de.VARIABLE_LENGTH?de.processVariableAI(3,f[2],i):de.processFixedAI(3,f[1],i);for(let f of de.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(f[0]===l)return f[1]===de.VARIABLE_LENGTH?de.processVariableAI(4,f[2],i):de.processFixedAI(4,f[1],i);if(i.length<4)throw new V;let c=i.substring(0,4);for(let f of de.FOUR_DIGIT_DATA_LENGTH)if(f[0]===c)return f[1]===de.VARIABLE_LENGTH?de.processVariableAI(4,f[2],i):de.processFixedAI(4,f[1],i);throw new V}static processFixedAI(i,a,l){if(l.length<i)throw new V;let c=l.substring(0,i);if(l.length<i+a)throw new V;let f=l.substring(i,i+a),p=l.substring(i+a),m="("+c+")"+f,C=de.parseFieldsInGeneralPurpose(p);return C==null?m:m+C}static processVariableAI(i,a,l){let c=l.substring(0,i),f;l.length<i+a?f=l.length:f=i+a;let p=l.substring(i,f),m=l.substring(f),C="("+c+")"+p,T=de.parseFieldsInGeneralPurpose(m);return T==null?C:C+T}}de.VARIABLE_LENGTH=[],de.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",de.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",de.VARIABLE_LENGTH,20],["22",de.VARIABLE_LENGTH,29],["30",de.VARIABLE_LENGTH,8],["37",de.VARIABLE_LENGTH,8],["90",de.VARIABLE_LENGTH,30],["91",de.VARIABLE_LENGTH,30],["92",de.VARIABLE_LENGTH,30],["93",de.VARIABLE_LENGTH,30],["94",de.VARIABLE_LENGTH,30],["95",de.VARIABLE_LENGTH,30],["96",de.VARIABLE_LENGTH,30],["97",de.VARIABLE_LENGTH,3],["98",de.VARIABLE_LENGTH,30],["99",de.VARIABLE_LENGTH,30]],de.THREE_DIGIT_DATA_LENGTH=[["240",de.VARIABLE_LENGTH,30],["241",de.VARIABLE_LENGTH,30],["242",de.VARIABLE_LENGTH,6],["250",de.VARIABLE_LENGTH,30],["251",de.VARIABLE_LENGTH,30],["253",de.VARIABLE_LENGTH,17],["254",de.VARIABLE_LENGTH,20],["400",de.VARIABLE_LENGTH,30],["401",de.VARIABLE_LENGTH,30],["402",17],["403",de.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",de.VARIABLE_LENGTH,20],["421",de.VARIABLE_LENGTH,15],["422",3],["423",de.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],de.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",de.VARIABLE_LENGTH,15],["391",de.VARIABLE_LENGTH,18],["392",de.VARIABLE_LENGTH,15],["393",de.VARIABLE_LENGTH,18],["703",de.VARIABLE_LENGTH,30]],de.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",de.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",de.VARIABLE_LENGTH,20],["8003",de.VARIABLE_LENGTH,30],["8004",de.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",de.VARIABLE_LENGTH,30],["8008",de.VARIABLE_LENGTH,12],["8018",18],["8020",de.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",de.VARIABLE_LENGTH,70],["8200",de.VARIABLE_LENGTH,70]];class ze{constructor(i){this.buffer=new ie,this.information=i}decodeAllCodes(i,a){let l=a,c=null;do{let f=this.decodeGeneralPurposeField(l,c),p=de.parseFieldsInGeneralPurpose(f.getNewString());if(p!=null&&i.append(p),f.isRemaining()?c=""+f.getRemainingValue():c=null,l===f.getNewPosition())break;l=f.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let a=i;a<i+3;++a)if(this.information.get(a))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let f=this.extractNumericValueFromBitArray(i,4);return f===0?new De(this.information.getSize(),De.FNC1,De.FNC1):new De(this.information.getSize(),f-1,De.FNC1)}let a=this.extractNumericValueFromBitArray(i,7),l=(a-8)/11,c=(a-8)%11;return new De(i+7,l,c)}extractNumericValueFromBitArray(i,a){return ze.extractNumericValueFromBitArray(this.information,i,a)}static extractNumericValueFromBitArray(i,a,l){let c=0;for(let f=0;f<l;++f)i.get(a+f)&&(c|=1<<l-f-1);return c}decodeGeneralPurposeField(i,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(i);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ge(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ge(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),i=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),i=a.isFinished()):(a=this.parseNumericBlock(),i=a.isFinished()),!(l!==this.current.getPosition())&&!i)break}while(!i);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let a;return i.isSecondDigitFNC1()?a=new ge(this.current.getPosition(),this.buffer.toString()):a=new ge(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Z(!0,a)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let a=new ge(this.current.getPosition(),this.buffer.toString());return new Z(!0,a)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Z(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new ge(this.current.getPosition(),this.buffer.toString());return new Z(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Z(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let a=new ge(this.current.getPosition(),this.buffer.toString());return new Z(!0,a)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Z(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<116)return!0;if(i+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,8);return c>=232&&c<253}decodeIsoIec646(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new ue(i+5,ue.FNC1);if(a>=5&&a<15)return new ue(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,7);if(l>=64&&l<90)return new ue(i+7,""+(l+1));if(l>=90&&l<116)return new ue(i+7,""+(l+7));let c=this.extractNumericValueFromBitArray(i,8),f;switch(c){case 232:f="!";break;case 233:f='"';break;case 234:f="%";break;case 235:f="&";break;case 236:f="'";break;case 237:f="(";break;case 238:f=")";break;case 239:f="*";break;case 240:f="+";break;case 241:f=",";break;case 242:f="-";break;case 243:f=".";break;case 244:f="/";break;case 245:f=":";break;case 246:f=";";break;case 247:f="<";break;case 248:f="=";break;case 249:f=">";break;case 250:f="?";break;case 251:f="_";break;case 252:f=" ";break;default:throw new R}return new ue(i+8,f)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(i,5);if(a>=5&&a<16)return!0;if(i+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,6);return l>=16&&l<63}decodeAlphanumeric(i){let a=this.extractNumericValueFromBitArray(i,5);if(a===15)return new ue(i+5,ue.FNC1);if(a>=5&&a<15)return new ue(i+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(i,6);if(l>=32&&l<58)return new ue(i+6,""+(l+33));let c;switch(l){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Pt("Decoding invalid alphanumeric value: "+l)}return new ue(i+6,c)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<5&&a+i<this.information.getSize();++a)if(a===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+a))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let a=i;a<i+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let a=0;a<4&&a+i<this.information.getSize();++a)if(this.information.get(i+a))return!1;return!0}}class _e{constructor(i){this.information=i,this.generalDecoder=new ze(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ve extends _e{constructor(i){super(i)}encodeCompressedGtin(i,a){i.append("(01)");let l=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,a,l)}encodeCompressedGtinWithoutAI(i,a,l){for(let c=0;c<4;++c){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*c,10);f/100===0&&i.append("0"),f/10===0&&i.append("0"),i.append(f)}Ve.appendCheckDigit(i,l)}static appendCheckDigit(i,a){let l=0;for(let c=0;c<13;c++){let f=i.charAt(c+a).charCodeAt(0)-48;l+=c&1?f:3*f}l=10-l%10,l===10&&(l=0),i.append(l)}}Ve.GTIN_SIZE=40;class je extends Ve{constructor(i){super(i)}parseInformation(){let i=new ie;i.append("(01)");let a=i.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(je.HEADER_SIZE,4);return i.append(l),this.encodeCompressedGtinWithoutAI(i,je.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(i,je.HEADER_SIZE+44)}}je.HEADER_SIZE=4;class Ue extends _e{constructor(i){super(i)}parseInformation(){let i=new ie;return this.getGeneralDecoder().decodeAllCodes(i,Ue.HEADER_SIZE)}}Ue.HEADER_SIZE=5;class Et extends Ve{constructor(i){super(i)}encodeCompressedWeight(i,a,l){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(i,c);let f=this.checkWeight(c),p=1e5;for(let m=0;m<5;++m)f/p===0&&i.append("0"),p/=10;i.append(f)}}class ut extends Et{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=ut.HEADER_SIZE+Et.GTIN_SIZE+ut.WEIGHT_SIZE)throw new V;let i=new ie;return this.encodeCompressedGtin(i,ut.HEADER_SIZE),this.encodeCompressedWeight(i,ut.HEADER_SIZE+Et.GTIN_SIZE,ut.WEIGHT_SIZE),i.toString()}}ut.HEADER_SIZE=5,ut.WEIGHT_SIZE=15;class Rt extends ut{constructor(i){super(i)}addWeightCode(i,a){i.append("(3103)")}checkWeight(i){return i}}class Ct extends ut{constructor(i){super(i)}addWeightCode(i,a){a<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class Bt extends Ve{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<Bt.HEADER_SIZE+Ve.GTIN_SIZE)throw new V;let i=new ie;this.encodeCompressedGtin(i,Bt.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Bt.HEADER_SIZE+Ve.GTIN_SIZE,Bt.LAST_DIGIT_SIZE);i.append("(392"),i.append(a),i.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Bt.HEADER_SIZE+Ve.GTIN_SIZE+Bt.LAST_DIGIT_SIZE,null);return i.append(l.getNewString()),i.toString()}}Bt.HEADER_SIZE=8,Bt.LAST_DIGIT_SIZE=2;class yt extends Ve{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<yt.HEADER_SIZE+Ve.GTIN_SIZE)throw new V;let i=new ie;this.encodeCompressedGtin(i,yt.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(yt.HEADER_SIZE+Ve.GTIN_SIZE,yt.LAST_DIGIT_SIZE);i.append("(393"),i.append(a),i.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(yt.HEADER_SIZE+Ve.GTIN_SIZE+yt.LAST_DIGIT_SIZE,yt.FIRST_THREE_DIGITS_SIZE);l/100==0&&i.append("0"),l/10==0&&i.append("0"),i.append(l);let c=this.getGeneralDecoder().decodeGeneralPurposeField(yt.HEADER_SIZE+Ve.GTIN_SIZE+yt.LAST_DIGIT_SIZE+yt.FIRST_THREE_DIGITS_SIZE,null);return i.append(c.getNewString()),i.toString()}}yt.HEADER_SIZE=8,yt.LAST_DIGIT_SIZE=2,yt.FIRST_THREE_DIGITS_SIZE=10;class Nt extends Et{constructor(i,a,l){super(i),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE+Nt.DATE_SIZE)throw new V;let i=new ie;return this.encodeCompressedGtin(i,Nt.HEADER_SIZE),this.encodeCompressedWeight(i,Nt.HEADER_SIZE+Nt.GTIN_SIZE,Nt.WEIGHT_SIZE),this.encodeCompressedDate(i,Nt.HEADER_SIZE+Nt.GTIN_SIZE+Nt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Nt.DATE_SIZE);if(l==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let c=l%32;l/=32;let f=l%12+1;l/=12;let p=l;p/10==0&&i.append("0"),i.append(p),f/10==0&&i.append("0"),i.append(f),c/10==0&&i.append("0"),i.append(c)}addWeightCode(i,a){i.append("("),i.append(this.firstAIdigits),i.append(a/1e5),i.append(")")}checkWeight(i){return i%1e5}}Nt.HEADER_SIZE=8,Nt.WEIGHT_SIZE=20,Nt.DATE_SIZE=16;function qn(M){try{if(M.get(1))return new je(M);if(!M.get(2))return new Ue(M);switch(ze.extractNumericValueFromBitArray(M,1,4)){case 4:return new Rt(M);case 5:return new Ct(M)}switch(ze.extractNumericValueFromBitArray(M,1,5)){case 12:return new Bt(M);case 13:return new yt(M)}switch(ze.extractNumericValueFromBitArray(M,1,7)){case 56:return new Nt(M,"310","11");case 57:return new Nt(M,"320","11");case 58:return new Nt(M,"310","13");case 59:return new Nt(M,"320","13");case 60:return new Nt(M,"310","15");case 61:return new Nt(M,"320","15");case 62:return new Nt(M,"310","17");case 63:return new Nt(M,"320","17")}}catch(i){throw console.log(i),new Pt("unknown decoder: "+M)}}class Yr{constructor(i,a,l,c){this.leftchar=i,this.rightchar=a,this.finderpattern=l,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,a){return i instanceof Yr?Yr.equalsOrNull(i.leftchar,a.leftchar)&&Yr.equalsOrNull(i.rightchar,a.rightchar)&&Yr.equalsOrNull(i.finderpattern,a.finderpattern):!1}static equalsOrNull(i,a){return i===null?a===null:Yr.equals(i,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class di{constructor(i,a,l){this.pairs=i,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,a){return i instanceof di?this.checkEqualitity(i,a)&&i.wasReversed===a.wasReversed:!1}checkEqualitity(i,a){if(!i||!a)return;let l;return i.forEach((c,f)=>{a.forEach(p=>{c.getLeftChar().getValue()===p.getLeftChar().getValue()&&c.getRightChar().getValue()===p.getRightChar().getValue()&&c.getFinderPatter().getValue()===p.getFinderPatter().getValue()&&(l=!0)})}),l}}class me extends Ar{constructor(i){super(...arguments),this.pairs=new Array(me.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,a,l){this.pairs.length=0,this.startFromEven=!1;try{return me.constructResult(this.decodeRow2pairs(i,a))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,me.constructResult(this.decodeRow2pairs(i,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,i))}catch(f){if(f instanceof V){if(!this.pairs.length)throw new V;l=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(i,!1),c){let f=this.checkRowsBoolean(!1);if(f!=null||(f=this.checkRowsBoolean(!0),f!=null))return f}throw new V}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return i&&(this.rows=this.rows.reverse()),a}checkRows(i,a){for(let l=a;l<this.rows.length;l++){let c=this.rows[l];this.pairs.length=0;for(let p of i)this.pairs.push(p.getPairs());if(this.pairs.push(c.getPairs()),!me.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let f=new Array(i);f.push(c);try{return this.checkRows(f,l+1)}catch(p){this.verbose&&console.log(p)}}throw new V}static isValidSequence(i){for(let a of me.FINDER_PATTERN_SEQUENCES){if(i.length>a.length)continue;let l=!0;for(let c=0;c<i.length;c++)if(i[c].getFinderPattern().getValue()!=a[c]){l=!1;break}if(l)return!0}return!1}storeRow(i,a){let l=0,c=!1,f=!1;for(;l<this.rows.length;){let p=this.rows[l];if(p.getRowNumber()>i){f=p.isEquivalent(this.pairs);break}c=p.isEquivalent(this.pairs),l++}f||c||me.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new di(this.pairs,i,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,a){for(let l of a)if(l.getPairs().length!==i.length){for(let c of l.getPairs())for(let f of i)if(Yr.equals(c,f))break}}static isPartialRow(i,a){for(let l of a){let c=!0;for(let f of i){let p=!1;for(let m of l.getPairs())if(f.equals(m)){p=!0;break}if(!p){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(i){let a=Jc.buildBitArray(i),c=qn(a).parseInformation(),f=i[0].getFinderPattern().getResultPoints(),p=i[i.length-1].getFinderPattern().getResultPoints(),m=[f[0],f[1],p[0],p[1]];return new U(c,null,null,m,J.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),a=i.getLeftChar(),l=i.getRightChar();if(l==null)return!1;let c=l.getChecksumPortion(),f=2;for(let m=1;m<this.pairs.size();++m){let C=this.pairs.get(m);c+=C.getLeftChar().getChecksumPortion(),f++;let T=C.getRightChar();T!=null&&(c+=T.getChecksumPortion(),f++)}return c%=211,211*(f-4)+c==a.getValue()}static getNextSecondBar(i,a){let l;return i.get(a)?(l=i.getNextUnset(a),l=i.getNextSet(l)):(l=i.getNextSet(a),l=i.getNextUnset(l)),l}retrieveNextPair(i,a,l){let c=a.length%2==0;this.startFromEven&&(c=!c);let f,p=!0,m=-1;do this.findNextPair(i,a,m),f=this.parseFoundFinderPattern(i,l,c),f==null?m=me.getNextSecondBar(i,this.startEnd[0]):p=!1;while(p);let C=this.decodeDataCharacter(i,f,c,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new V;let T;try{T=this.decodeDataCharacter(i,f,c,!1)}catch(O){T=null,this.verbose&&console.log(O)}return new Yr(C,T,f,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,a,l){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let f=i.getSize(),p;l>=0?p=l:this.isEmptyPair(a)?p=0:p=a[a.length-1].getFinderPattern().getStartEnd()[1];let m=a.length%2!=0;this.startFromEven&&(m=!m);let C=!1;for(;p<f&&(C=!i.get(p),!!C);)p++;let T=0,O=p;for(let B=p;B<f;B++)if(i.get(B)!=C)c[T]++;else{if(T==3){if(m&&me.reverseCounters(c),me.isFinderPattern(c)){this.startEnd[0]=O,this.startEnd[1]=B;return}m&&me.reverseCounters(c),O+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,T--}else T++;c[T]=1,C=!C}throw new V}static reverseCounters(i){let a=i.length;for(let l=0;l<a/2;++l){let c=i[l];i[l]=i[a-l-1],i[a-l-1]=c}}parseFoundFinderPattern(i,a,l){let c,f,p;if(l){let T=this.startEnd[0]-1;for(;T>=0&&!i.get(T);)T--;T++,c=this.startEnd[0]-T,f=T,p=this.startEnd[1]}else f=this.startEnd[0],p=i.getNextUnset(this.startEnd[1]+1),c=p-this.startEnd[1];let m=this.getDecodeFinderCounters();A.arraycopy(m,0,m,1,m.length-1),m[0]=c;let C;try{C=this.parseFinderValue(m,me.FINDER_PATTERNS)}catch{return null}return new _i(C,[f,p],f,p,a)}decodeDataCharacter(i,a,l,c){let f=this.getDataCharacterCounters();for(let $t=0;$t<f.length;$t++)f[$t]=0;if(c)me.recordPatternInReverse(i,a.getStartEnd()[0],f);else{me.recordPattern(i,a.getStartEnd()[1],f);for(let $t=0,Lr=f.length-1;$t<Lr;$t++,Lr--){let wn=f[$t];f[$t]=f[Lr],f[Lr]=wn}}let p=17,m=st.sum(new Int32Array(f))/p,C=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(m-C)/C>.3)throw new V;let T=this.getOddCounts(),O=this.getEvenCounts(),B=this.getOddRoundingErrors(),j=this.getEvenRoundingErrors();for(let $t=0;$t<f.length;$t++){let Lr=1*f[$t]/m,wn=Lr+.5;if(wn<1){if(Lr<.3)throw new V;wn=1}else if(wn>8){if(Lr>8.7)throw new V;wn=8}let da=$t/2;$t&1?(O[da]=wn,j[da]=Lr-wn):(T[da]=wn,B[da]=Lr-wn)}this.adjustOddEvenCounts(p);let z=4*a.getValue()+(l?0:2)+(c?0:1)-1,X=0,Q=0;for(let $t=T.length-1;$t>=0;$t--){if(me.isNotA1left(a,l,c)){let Lr=me.WEIGHTS[z][2*$t];Q+=T[$t]*Lr}X+=T[$t]}let se=0;for(let $t=O.length-1;$t>=0;$t--)if(me.isNotA1left(a,l,c)){let Lr=me.WEIGHTS[z][2*$t+1];se+=O[$t]*Lr}let he=Q+se;if(X&1||X>13||X<4)throw new V;let Ae=(13-X)/2,Ce=me.SYMBOL_WIDEST[Ae],xe=9-Ce,vt=Pn.getRSSvalue(T,Ce,!0),at=Pn.getRSSvalue(O,xe,!1),on=me.EVEN_TOTAL_SUBSET[Ae],Yn=me.GSUM[Ae],ln=vt*on+at+Yn;return new hi(ln,he)}static isNotA1left(i,a,l){return!(i.getValue()==0&&a&&l)}adjustOddEvenCounts(i){let a=st.sum(new Int32Array(this.getOddCounts())),l=st.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1;a>13?f=!0:a<4&&(c=!0);let p=!1,m=!1;l>13?m=!0:l<4&&(p=!0);let C=a+l-i,T=(a&1)==1,O=(l&1)==0;if(C==1)if(T){if(O)throw new V;f=!0}else{if(!O)throw new V;m=!0}else if(C==-1)if(T){if(O)throw new V;c=!0}else{if(!O)throw new V;p=!0}else if(C==0){if(T){if(!O)throw new V;a<l?(c=!0,m=!0):(f=!0,p=!0)}else if(O)throw new V}else throw new V;if(c){if(f)throw new V;me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(m)throw new V;me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}me.SYMBOL_WIDEST=[7,5,4,3,1],me.EVEN_TOTAL_SUBSET=[4,20,52,104,204],me.GSUM=[0,348,1388,2948,3988],me.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],me.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],me.FINDER_PAT_A=0,me.FINDER_PAT_B=1,me.FINDER_PAT_C=2,me.FINDER_PAT_D=3,me.FINDER_PAT_E=4,me.FINDER_PAT_F=5,me.FINDER_PATTERN_SEQUENCES=[[me.FINDER_PAT_A,me.FINDER_PAT_A],[me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B],[me.FINDER_PAT_A,me.FINDER_PAT_C,me.FINDER_PAT_B,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_C],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_E,me.FINDER_PAT_B,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F],[me.FINDER_PAT_A,me.FINDER_PAT_A,me.FINDER_PAT_B,me.FINDER_PAT_B,me.FINDER_PAT_C,me.FINDER_PAT_D,me.FINDER_PAT_D,me.FINDER_PAT_E,me.FINDER_PAT_E,me.FINDER_PAT_F,me.FINDER_PAT_F]],me.MAX_PAIRS=11;class Mn extends hi{constructor(i,a,l){super(i,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ut extends Ar{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,a,l){const c=this.decodePair(a,!1,i,l);Ut.addOrTally(this.possibleLeftPairs,c),a.reverse();let f=this.decodePair(a,!0,i,l);Ut.addOrTally(this.possibleRightPairs,f),a.reverse();for(let p of this.possibleLeftPairs)if(p.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Ut.checkChecksum(p,m))return Ut.constructResult(p,m)}throw new V}static addOrTally(i,a){if(a==null)return;let l=!1;for(let c of i)if(c.getValue()===a.getValue()){c.incrementCount(),l=!0;break}l||i.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,a){let l=4537077*i.getValue()+a.getValue(),c=new String(l).toString(),f=new ie;for(let T=13-c.length;T>0;T--)f.append("0");f.append(c);let p=0;for(let T=0;T<13;T++){let O=f.charAt(T).charCodeAt(0)-48;p+=T&1?O:3*O}p=10-p%10,p===10&&(p=0),f.append(p.toString());let m=i.getFinderPattern().getResultPoints(),C=a.getFinderPattern().getResultPoints();return new U(f.toString(),null,0,[m[0],m[1],C[0],C[1]],J.RSS_14,new Date().getTime())}static checkChecksum(i,a){let l=(i.getChecksumPortion()+16*a.getChecksumPortion())%79,c=9*i.getFinderPattern().getValue()+a.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,l===c}decodePair(i,a,l,c){try{let f=this.findFinderPattern(i,a),p=this.parseFoundFinderPattern(i,l,a,f),m=c==null?null:c.get(_.NEED_RESULT_POINT_CALLBACK);if(m!=null){let O=(f[0]+f[1])/2;a&&(O=i.getSize()-1-O),m.foundPossibleResultPoint(new Oe(O,l))}let C=this.decodeDataCharacter(i,p,!0),T=this.decodeDataCharacter(i,p,!1);return new Mn(1597*C.getValue()+T.getValue(),C.getChecksumPortion()+4*T.getChecksumPortion(),p)}catch{return null}}decodeDataCharacter(i,a,l){let c=this.getDataCharacterCounters();for(let se=0;se<c.length;se++)c[se]=0;if(l)Dt.recordPatternInReverse(i,a.getStartEnd()[0],c);else{Dt.recordPattern(i,a.getStartEnd()[1]+1,c);for(let se=0,he=c.length-1;se<he;se++,he--){let Ae=c[se];c[se]=c[he],c[he]=Ae}}let f=l?16:15,p=st.sum(new Int32Array(c))/f,m=this.getOddCounts(),C=this.getEvenCounts(),T=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let se=0;se<c.length;se++){let he=c[se]/p,Ae=Math.floor(he+.5);Ae<1?Ae=1:Ae>8&&(Ae=8);let Ce=Math.floor(se/2);se&1?(C[Ce]=Ae,O[Ce]=he-Ae):(m[Ce]=Ae,T[Ce]=he-Ae)}this.adjustOddEvenCounts(l,f);let B=0,j=0;for(let se=m.length-1;se>=0;se--)j*=9,j+=m[se],B+=m[se];let z=0,X=0;for(let se=C.length-1;se>=0;se--)z*=9,z+=C[se],X+=C[se];let Q=j+3*z;if(l){if(B&1||B>12||B<4)throw new V;let se=(12-B)/2,he=Ut.OUTSIDE_ODD_WIDEST[se],Ae=9-he,Ce=Pn.getRSSvalue(m,he,!1),xe=Pn.getRSSvalue(C,Ae,!0),vt=Ut.OUTSIDE_EVEN_TOTAL_SUBSET[se],at=Ut.OUTSIDE_GSUM[se];return new hi(Ce*vt+xe+at,Q)}else{if(X&1||X>10||X<4)throw new V;let se=(10-X)/2,he=Ut.INSIDE_ODD_WIDEST[se],Ae=9-he,Ce=Pn.getRSSvalue(m,he,!0),xe=Pn.getRSSvalue(C,Ae,!1),vt=Ut.INSIDE_ODD_TOTAL_SUBSET[se],at=Ut.INSIDE_GSUM[se];return new hi(xe*vt+Ce+at,Q)}}findFinderPattern(i,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let c=i.getSize(),f=!1,p=0;for(;p<c&&(f=!i.get(p),a!==f);)p++;let m=0,C=p;for(let T=p;T<c;T++)if(i.get(T)!==f)l[m]++;else{if(m===3){if(Ar.isFinderPattern(l))return[C,T];C+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,m--}else m++;l[m]=1,f=!f}throw new V}parseFoundFinderPattern(i,a,l,c){let f=i.get(c[0]),p=c[0]-1;for(;p>=0&&f!==i.get(p);)p--;p++;const m=c[0]-p,C=this.getDecodeFinderCounters(),T=new Int32Array(C.length);A.arraycopy(C,0,T,1,C.length-1),T[0]=m;const O=this.parseFinderValue(T,Ut.FINDER_PATTERNS);let B=p,j=c[1];return l&&(B=i.getSize()-1-B,j=i.getSize()-1-j),new _i(O,[p,c[1]],B,j,a)}adjustOddEvenCounts(i,a){let l=st.sum(new Int32Array(this.getOddCounts())),c=st.sum(new Int32Array(this.getEvenCounts())),f=!1,p=!1,m=!1,C=!1;i?(l>12?p=!0:l<4&&(f=!0),c>12?C=!0:c<4&&(m=!0)):(l>11?p=!0:l<5&&(f=!0),c>10?C=!0:c<4&&(m=!0));let T=l+c-a,O=(l&1)===(i?1:0),B=(c&1)===1;if(T===1)if(O){if(B)throw new V;p=!0}else{if(!B)throw new V;C=!0}else if(T===-1)if(O){if(B)throw new V;f=!0}else{if(!B)throw new V;m=!0}else if(T===0){if(O){if(!B)throw new V;l<c?(f=!0,C=!0):(p=!0,m=!0)}else if(B)throw new V}else throw new V;if(f){if(p)throw new V;Ar.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&Ar.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(C)throw new V;Ar.increment(this.getEvenCounts(),this.getOddRoundingErrors())}C&&Ar.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ut.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ut.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ut.OUTSIDE_GSUM=[0,161,961,2015,2715],Ut.INSIDE_GSUM=[0,336,1036,1516],Ut.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ut.INSIDE_ODD_WIDEST=[2,4,6,8],Ut.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Xn extends Dt{constructor(i,a){super(),this.readers=[],this.verbose=a===!0;const l=i?i.get(_.POSSIBLE_FORMATS):null,c=i&&i.get(_.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(J.EAN_13)||l.includes(J.UPC_A)||l.includes(J.EAN_8)||l.includes(J.UPC_E))&&this.readers.push(new ho(i)),l.includes(J.CODE_39)&&this.readers.push(new lr(c)),l.includes(J.CODE_128)&&this.readers.push(new Ne),l.includes(J.ITF)&&this.readers.push(new Tt),l.includes(J.RSS_14)&&this.readers.push(new Ut),l.includes(J.RSS_EXPANDED)&&this.readers.push(new me(this.verbose))):(this.readers.push(new ho(i)),this.readers.push(new lr),this.readers.push(new ho(i)),this.readers.push(new Ne),this.readers.push(new Tt),this.readers.push(new Ut),this.readers.push(new me(this.verbose)))}decodeRow(i,a,l){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(i,a,l)}catch{}throw new V}reset(){this.readers.forEach(i=>i.reset())}}class la extends ne{constructor(i=500,a){super(new Xn(a),i,a)}}class Fe{constructor(i,a,l){this.ecCodewords=i,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ke{constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Je{constructor(i,a,l,c,f,p){this.versionNumber=i,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=f,this.ecBlocks=p;let m=0;const C=p.getECCodewords(),T=p.getECBlocks();for(let O of T)m+=O.getCount()*(O.getDataCodewords()+C);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,a){if(i&1||a&1)throw new R;for(let l of Je.VERSIONS)if(l.symbolSizeRows===i&&l.symbolSizeColumns===a)return l;throw new R}toString(){return""+this.versionNumber}static buildVersions(){return[new Je(1,10,10,8,8,new Fe(5,new Ke(1,3))),new Je(2,12,12,10,10,new Fe(7,new Ke(1,5))),new Je(3,14,14,12,12,new Fe(10,new Ke(1,8))),new Je(4,16,16,14,14,new Fe(12,new Ke(1,12))),new Je(5,18,18,16,16,new Fe(14,new Ke(1,18))),new Je(6,20,20,18,18,new Fe(18,new Ke(1,22))),new Je(7,22,22,20,20,new Fe(20,new Ke(1,30))),new Je(8,24,24,22,22,new Fe(24,new Ke(1,36))),new Je(9,26,26,24,24,new Fe(28,new Ke(1,44))),new Je(10,32,32,14,14,new Fe(36,new Ke(1,62))),new Je(11,36,36,16,16,new Fe(42,new Ke(1,86))),new Je(12,40,40,18,18,new Fe(48,new Ke(1,114))),new Je(13,44,44,20,20,new Fe(56,new Ke(1,144))),new Je(14,48,48,22,22,new Fe(68,new Ke(1,174))),new Je(15,52,52,24,24,new Fe(42,new Ke(2,102))),new Je(16,64,64,14,14,new Fe(56,new Ke(2,140))),new Je(17,72,72,16,16,new Fe(36,new Ke(4,92))),new Je(18,80,80,18,18,new Fe(48,new Ke(4,114))),new Je(19,88,88,20,20,new Fe(56,new Ke(4,144))),new Je(20,96,96,22,22,new Fe(68,new Ke(4,174))),new Je(21,104,104,24,24,new Fe(56,new Ke(6,136))),new Je(22,120,120,18,18,new Fe(68,new Ke(6,175))),new Je(23,132,132,20,20,new Fe(62,new Ke(8,163))),new Je(24,144,144,22,22,new Fe(62,new Ke(8,156),new Ke(2,155))),new Je(25,8,18,6,16,new Fe(7,new Ke(1,5))),new Je(26,8,32,6,14,new Fe(11,new Ke(1,10))),new Je(27,12,26,10,24,new Fe(14,new Ke(1,16))),new Je(28,12,36,10,16,new Fe(18,new Ke(1,22))),new Je(29,16,36,14,16,new Fe(24,new Ke(1,32))),new Je(30,16,48,14,22,new Fe(28,new Ke(1,49)))]}}Je.VERSIONS=Je.buildVersions();class Lt{constructor(i){const a=i.getHeight();if(a<8||a>144||a&1)throw new R;this.version=Lt.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new G(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const a=i.getHeight(),l=i.getWidth();return Je.getVersionForDimensions(a,l)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,c=0;const f=this.mappingBitMatrix.getHeight(),p=this.mappingBitMatrix.getWidth();let m=!1,C=!1,T=!1,O=!1;do if(l===f&&c===0&&!m)i[a++]=this.readCorner1(f,p)&255,l-=2,c+=2,m=!0;else if(l===f-2&&c===0&&p&3&&!C)i[a++]=this.readCorner2(f,p)&255,l-=2,c+=2,C=!0;else if(l===f+4&&c===2&&!(p&7)&&!T)i[a++]=this.readCorner3(f,p)&255,l-=2,c+=2,T=!0;else if(l===f-2&&c===0&&(p&7)===4&&!O)i[a++]=this.readCorner4(f,p)&255,l-=2,c+=2,O=!0;else{do l<f&&c>=0&&!this.readMappingMatrix.get(c,l)&&(i[a++]=this.readUtah(l,c,f,p)&255),l-=2,c+=2;while(l>=0&&c<p);l+=1,c+=3;do l>=0&&c<p&&!this.readMappingMatrix.get(c,l)&&(i[a++]=this.readUtah(l,c,f,p)&255),l+=2,c-=2;while(l<f&&c>=0);l+=3,c+=1}while(l<f||c<p);if(a!==this.version.getTotalCodewords())throw new R;return i}readModule(i,a,l,c){return i<0&&(i+=l,a+=4-(l+4&7)),a<0&&(a+=c,i+=4-(c+4&7)),this.readMappingMatrix.set(a,i),this.mappingBitMatrix.get(a,i)}readUtah(i,a,l,c){let f=0;return this.readModule(i-2,a-2,l,c)&&(f|=1),f<<=1,this.readModule(i-2,a-1,l,c)&&(f|=1),f<<=1,this.readModule(i-1,a-2,l,c)&&(f|=1),f<<=1,this.readModule(i-1,a-1,l,c)&&(f|=1),f<<=1,this.readModule(i-1,a,l,c)&&(f|=1),f<<=1,this.readModule(i,a-2,l,c)&&(f|=1),f<<=1,this.readModule(i,a-1,l,c)&&(f|=1),f<<=1,this.readModule(i,a,l,c)&&(f|=1),f}readCorner1(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,1,i,a)&&(l|=1),l<<=1,this.readModule(i-1,2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}readCorner2(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-4,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner3(i,a){let l=0;return this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(0,a-3,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-3,i,a)&&(l|=1),l<<=1,this.readModule(1,a-2,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l}readCorner4(i,a){let l=0;return this.readModule(i-3,0,i,a)&&(l|=1),l<<=1,this.readModule(i-2,0,i,a)&&(l|=1),l<<=1,this.readModule(i-1,0,i,a)&&(l|=1),l<<=1,this.readModule(0,a-2,i,a)&&(l|=1),l<<=1,this.readModule(0,a-1,i,a)&&(l|=1),l<<=1,this.readModule(1,a-1,i,a)&&(l|=1),l<<=1,this.readModule(2,a-1,i,a)&&(l|=1),l<<=1,this.readModule(3,a-1,i,a)&&(l|=1),l}extractDataRegion(i){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(i.getHeight()!==a)throw new v("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),f=this.version.getDataRegionSizeColumns(),p=a/c|0,m=l/f|0,C=p*c,T=m*f,O=new G(T,C);for(let B=0;B<p;++B){const j=B*c;for(let z=0;z<m;++z){const X=z*f;for(let Q=0;Q<c;++Q){const se=B*(c+2)+1+Q,he=j+Q;for(let Ae=0;Ae<f;++Ae){const Ce=z*(f+2)+1+Ae;if(i.get(Ce,se)){const xe=X+Ae;O.set(xe,he)}}}}}return O}}class xn{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a){const l=a.getECBlocks();let c=0;const f=l.getECBlocks();for(let Q of f)c+=Q.getCount();const p=new Array(c);let m=0;for(let Q of f)for(let se=0;se<Q.getCount();se++){const he=Q.getDataCodewords(),Ae=l.getECCodewords()+he;p[m++]=new xn(he,new Uint8Array(Ae))}const T=p[0].codewords.length-l.getECCodewords(),O=T-1;let B=0;for(let Q=0;Q<O;Q++)for(let se=0;se<m;se++)p[se].codewords[Q]=i[B++];const j=a.getVersionNumber()===24,z=j?8:m;for(let Q=0;Q<z;Q++)p[Q].codewords[T-1]=i[B++];const X=p[0].codewords.length;for(let Q=T;Q<X;Q++)for(let se=0;se<m;se++){const he=j?(se+8)%m:se,Ae=j&&he>7?Q-1:Q;p[he].codewords[Ae]=i[B++]}if(B!==i.length)throw new v;return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ua{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new v(""+i);let a=0,l=this.bitOffset,c=this.byteOffset;const f=this.bytes;if(l>0){const p=8-l,m=i<p?i:p,C=p-m,T=255>>8-m<<C;a=(f[c]&T)>>C,i-=m,l+=m,l===8&&(l=0,c++)}if(i>0){for(;i>=8;)a=a<<8|f[c]&255,c++,i-=8;if(i>0){const p=8-i,m=255>>p<<p;a=a<<i|(f[c]&m)>>p,l+=i}}return this.bitOffset=l,this.byteOffset=c,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var gr;(function(M){M[M.PAD_ENCODE=0]="PAD_ENCODE",M[M.ASCII_ENCODE=1]="ASCII_ENCODE",M[M.C40_ENCODE=2]="C40_ENCODE",M[M.TEXT_ENCODE=3]="TEXT_ENCODE",M[M.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",M[M.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",M[M.BASE256_ENCODE=6]="BASE256_ENCODE"})(gr||(gr={}));class Xi{static decode(i){const a=new ua(i),l=new ie,c=new ie,f=new Array;let p=gr.ASCII_ENCODE;do if(p===gr.ASCII_ENCODE)p=this.decodeAsciiSegment(a,l,c);else{switch(p){case gr.C40_ENCODE:this.decodeC40Segment(a,l);break;case gr.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case gr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case gr.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case gr.BASE256_ENCODE:this.decodeBase256Segment(a,l,f);break;default:throw new R}p=gr.ASCII_ENCODE}while(p!==gr.PAD_ENCODE&&a.available()>0);return c.length()>0&&l.append(c.toString()),new ke(i,l.toString(),f.length===0?null:f,null)}static decodeAsciiSegment(i,a,l){let c=!1;do{let f=i.readBits(8);if(f===0)throw new R;if(f<=128)return c&&(f+=128),a.append(String.fromCharCode(f-1)),gr.ASCII_ENCODE;if(f===129)return gr.PAD_ENCODE;if(f<=229){const p=f-130;p<10&&a.append("0"),a.append(""+p)}else switch(f){case 230:return gr.C40_ENCODE;case 231:return gr.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return gr.ANSIX12_ENCODE;case 239:return gr.TEXT_ENCODE;case 240:return gr.EDIFACT_ENCODE;case 241:break;default:if(f!==254||i.available()!==0)throw new R;break}}while(i.available()>0);return gr.ASCII_ENCODE}static decodeC40Segment(i,a){let l=!1;const c=[];let f=0;do{if(i.available()===8)return;const p=i.readBits(8);if(p===254)return;this.parseTwoBytes(p,i.readBits(8),c);for(let m=0;m<3;m++){const C=c[m];switch(f){case 0:if(C<3)f=C+1;else if(C<this.C40_BASIC_SET_CHARS.length){const T=this.C40_BASIC_SET_CHARS[C];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else throw new R;break;case 1:l?(a.append(String.fromCharCode(C+128)),l=!1):a.append(String.fromCharCode(C)),f=0;break;case 2:if(C<this.C40_SHIFT2_SET_CHARS.length){const T=this.C40_SHIFT2_SET_CHARS[C];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else switch(C){case 27:a.append("");break;case 30:l=!0;break;default:throw new R}f=0;break;case 3:l?(a.append(String.fromCharCode(C+224)),l=!1):a.append(String.fromCharCode(C+96)),f=0;break;default:throw new R}}}while(i.available()>0)}static decodeTextSegment(i,a){let l=!1,c=[],f=0;do{if(i.available()===8)return;const p=i.readBits(8);if(p===254)return;this.parseTwoBytes(p,i.readBits(8),c);for(let m=0;m<3;m++){const C=c[m];switch(f){case 0:if(C<3)f=C+1;else if(C<this.TEXT_BASIC_SET_CHARS.length){const T=this.TEXT_BASIC_SET_CHARS[C];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else throw new R;break;case 1:l?(a.append(String.fromCharCode(C+128)),l=!1):a.append(String.fromCharCode(C)),f=0;break;case 2:if(C<this.TEXT_SHIFT2_SET_CHARS.length){const T=this.TEXT_SHIFT2_SET_CHARS[C];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T)}else switch(C){case 27:a.append("");break;case 30:l=!0;break;default:throw new R}f=0;break;case 3:if(C<this.TEXT_SHIFT3_SET_CHARS.length){const T=this.TEXT_SHIFT3_SET_CHARS[C];l?(a.append(String.fromCharCode(T.charCodeAt(0)+128)),l=!1):a.append(T),f=0}else throw new R;break;default:throw new R}}}while(i.available()>0)}static decodeAnsiX12Segment(i,a){const l=[];do{if(i.available()===8)return;const c=i.readBits(8);if(c===254)return;this.parseTwoBytes(c,i.readBits(8),l);for(let f=0;f<3;f++){const p=l[f];switch(p){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(p<14)a.append(String.fromCharCode(p+44));else if(p<40)a.append(String.fromCharCode(p+51));else throw new R;break}}}while(i.available()>0)}static parseTwoBytes(i,a,l){let c=(i<<8)+a-1,f=Math.floor(c/1600);l[0]=f,c-=f*1600,f=Math.floor(c/40),l[1]=f,l[2]=c-f*40}static decodeEdifactSegment(i,a){do{if(i.available()<=16)return;for(let l=0;l<4;l++){let c=i.readBits(6);if(c===31){const f=8-i.getBitOffset();f!==8&&i.readBits(f);return}c&32||(c|=64),a.append(String.fromCharCode(c))}}while(i.available()>0)}static decodeBase256Segment(i,a,l){let c=1+i.getByteOffset();const f=this.unrandomize255State(i.readBits(8),c++);let p;if(f===0?p=i.available()/8|0:f<250?p=f:p=250*(f-249)+this.unrandomize255State(i.readBits(8),c++),p<0)throw new R;const m=new Uint8Array(p);for(let C=0;C<p;C++){if(i.available()<8)throw new R;m[C]=this.unrandomize255State(i.readBits(8),c++)}l.push(m);try{a.append(W.decode(m,K.ISO88591))}catch(C){throw new Pt("Platform does not support required encoding: "+C.message)}}static unrandomize255State(i,a){const l=149*a%255+1,c=i-l;return c>=0?c:c+256}}Xi.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Xi.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Xi.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Xi.TEXT_SHIFT2_SET_CHARS=Xi.C40_SHIFT2_SET_CHARS,Xi.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Vv{constructor(){this.rsDecoder=new bt(tt.DATA_MATRIX_FIELD_256)}decode(i){const a=new Lt(i),l=a.getVersion(),c=a.readCodewords(),f=xn.getDataBlocks(c,l);let p=0;for(let T of f)p+=T.getNumDataCodewords();const m=new Uint8Array(p),C=f.length;for(let T=0;T<C;T++){const O=f[T],B=O.getCodewords(),j=O.getNumDataCodewords();this.correctErrors(B,j);for(let z=0;z<j;z++)m[z*C+T]=B[z]}return Xi.decode(m)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new S}for(let c=0;c<a;c++)i[c]=l[c]}}class mr{constructor(i){this.image=i,this.rectangleDetector=new it(this.image)}detect(){const i=this.rectangleDetector.detect();let a=this.detectSolid1(i);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new V;a=this.shiftToModuleCenter(a);const l=a[0],c=a[1],f=a[2],p=a[3];let m=this.transitionsBetween(l,p)+1,C=this.transitionsBetween(f,p)+1;(m&1)===1&&(m+=1),(C&1)===1&&(C+=1),4*m<7*C&&4*C<7*m&&(m=C=Math.max(m,C));let T=mr.sampleGrid(this.image,l,c,f,p,m,C);return new On(T,[l,c,f,p])}static shiftPoint(i,a,l){let c=(a.getX()-i.getX())/(l+1),f=(a.getY()-i.getY())/(l+1);return new Oe(i.getX()+c,i.getY()+f)}static moveAway(i,a,l){let c=i.getX(),f=i.getY();return c<a?c-=1:c+=1,f<l?f-=1:f+=1,new Oe(c,f)}detectSolid1(i){let a=i[0],l=i[1],c=i[3],f=i[2],p=this.transitionsBetween(a,l),m=this.transitionsBetween(l,c),C=this.transitionsBetween(c,f),T=this.transitionsBetween(f,a),O=p,B=[f,a,l,c];return O>m&&(O=m,B[0]=a,B[1]=l,B[2]=c,B[3]=f),O>C&&(O=C,B[0]=l,B[1]=c,B[2]=f,B[3]=a),O>T&&(B[0]=c,B[1]=f,B[2]=a,B[3]=l),B}detectSolid2(i){let a=i[0],l=i[1],c=i[2],f=i[3],p=this.transitionsBetween(a,f),m=mr.shiftPoint(l,c,(p+1)*4),C=mr.shiftPoint(c,l,(p+1)*4),T=this.transitionsBetween(m,a),O=this.transitionsBetween(C,f);return T<O?(i[0]=a,i[1]=l,i[2]=c,i[3]=f):(i[0]=l,i[1]=c,i[2]=f,i[3]=a),i}correctTopRight(i){let a=i[0],l=i[1],c=i[2],f=i[3],p=this.transitionsBetween(a,f),m=this.transitionsBetween(l,f),C=mr.shiftPoint(a,l,(m+1)*4),T=mr.shiftPoint(c,l,(p+1)*4);p=this.transitionsBetween(C,f),m=this.transitionsBetween(T,f);let O=new Oe(f.getX()+(c.getX()-l.getX())/(p+1),f.getY()+(c.getY()-l.getY())/(p+1)),B=new Oe(f.getX()+(a.getX()-l.getX())/(m+1),f.getY()+(a.getY()-l.getY())/(m+1));if(!this.isValid(O))return this.isValid(B)?B:null;if(!this.isValid(B))return O;let j=this.transitionsBetween(C,O)+this.transitionsBetween(T,O),z=this.transitionsBetween(C,B)+this.transitionsBetween(T,B);return j>z?O:B}shiftToModuleCenter(i){let a=i[0],l=i[1],c=i[2],f=i[3],p=this.transitionsBetween(a,f)+1,m=this.transitionsBetween(c,f)+1,C=mr.shiftPoint(a,l,m*4),T=mr.shiftPoint(c,l,p*4);p=this.transitionsBetween(C,f)+1,m=this.transitionsBetween(T,f)+1,(p&1)===1&&(p+=1),(m&1)===1&&(m+=1);let O=(a.getX()+l.getX()+c.getX()+f.getX())/4,B=(a.getY()+l.getY()+c.getY()+f.getY())/4;a=mr.moveAway(a,O,B),l=mr.moveAway(l,O,B),c=mr.moveAway(c,O,B),f=mr.moveAway(f,O,B);let j,z;return C=mr.shiftPoint(a,l,m*4),C=mr.shiftPoint(C,f,p*4),j=mr.shiftPoint(l,a,m*4),j=mr.shiftPoint(j,c,p*4),T=mr.shiftPoint(c,f,m*4),T=mr.shiftPoint(T,l,p*4),z=mr.shiftPoint(f,c,m*4),z=mr.shiftPoint(z,a,p*4),[C,j,T,z]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,a,l,c,f,p,m){return xr.getInstance().sampleGrid(i,p,m,.5,.5,p-.5,.5,p-.5,m-.5,.5,m-.5,a.getX(),a.getY(),f.getX(),f.getY(),c.getX(),c.getY(),l.getX(),l.getY())}transitionsBetween(i,a){let l=Math.trunc(i.getX()),c=Math.trunc(i.getY()),f=Math.trunc(a.getX()),p=Math.trunc(a.getY()),m=Math.abs(p-c)>Math.abs(f-l);if(m){let Q=l;l=c,c=Q,Q=f,f=p,p=Q}let C=Math.abs(f-l),T=Math.abs(p-c),O=-C/2,B=c<p?1:-1,j=l<f?1:-1,z=0,X=this.image.get(m?c:l,m?l:c);for(let Q=l,se=c;Q!==f;Q+=j){let he=this.image.get(m?se:Q,m?Q:se);if(he!==X&&(z++,X=he),O+=T,O>0){if(se===p)break;se+=B,O-=C}}return z}}class Yi{constructor(){this.decoder=new Vv}decode(i,a=null){let l,c;if(a!=null&&a.has(_.PURE_BARCODE)){const T=Yi.extractPureBits(i.getBlackMatrix());l=this.decoder.decode(T),c=Yi.NO_POINTS}else{const T=new mr(i.getBlackMatrix()).detect();l=this.decoder.decode(T.getBits()),c=T.getPoints()}const f=l.getRawBytes(),p=new U(l.getText(),f,8*f.length,c,J.DATA_MATRIX,A.currentTimeMillis()),m=l.getByteSegments();m!=null&&p.putMetadata(ye.BYTE_SEGMENTS,m);const C=l.getECLevel();return C!=null&&p.putMetadata(ye.ERROR_CORRECTION_LEVEL,C),p}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a==null||l==null)throw new V;const c=this.moduleSize(a,i);let f=a[1];const p=l[1];let m=a[0];const T=(l[0]-m+1)/c,O=(p-f+1)/c;if(T<=0||O<=0)throw new V;const B=c/2;f+=B,m+=B;const j=new G(T,O);for(let z=0;z<O;z++){const X=f+z*c;for(let Q=0;Q<T;Q++)i.get(m+Q*c,X)&&j.set(Q,z)}return j}static moduleSize(i,a){const l=a.getWidth();let c=i[0];const f=i[1];for(;c<l&&a.get(c,f);)c++;if(c===l)throw new V;const p=c-i[0];if(p===0)throw new V;return p}}Yi.NO_POINTS=[];class $v extends ne{constructor(i=500){super(new Yi,i)}}var ca;(function(M){M[M.L=0]="L",M[M.M=1]="M",M[M.Q=2]="Q",M[M.H=3]="H"})(ca||(ca={}));class Kt{constructor(i,a,l){this.value=i,this.stringValue=a,this.bits=l,Kt.FOR_BITS.set(l,this),Kt.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return Kt.L;case"M":return Kt.M;case"Q":return Kt.Q;case"H":return Kt.H;default:throw new x(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof Kt))return!1;const a=i;return this.value===a.value}static forBits(i){if(i<0||i>=Kt.FOR_BITS.size)throw new v;return Kt.FOR_BITS.get(i)}}Kt.FOR_BITS=new Map,Kt.FOR_VALUE=new Map,Kt.L=new Kt(ca.L,"L",1),Kt.M=new Kt(ca.M,"M",0),Kt.Q=new Kt(ca.Q,"Q",3),Kt.H=new Kt(ca.H,"H",2);class $r{constructor(i){this.errorCorrectionLevel=Kt.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,a){return F.bitCount(i^a)}static decodeFormatInformation(i,a){const l=$r.doDecodeFormatInformation(i,a);return l!==null?l:$r.doDecodeFormatInformation(i^$r.FORMAT_INFO_MASK_QR,a^$r.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,a){let l=Number.MAX_SAFE_INTEGER,c=0;for(const f of $r.FORMAT_INFO_DECODE_LOOKUP){const p=f[0];if(p===i||p===a)return new $r(f[1]);let m=$r.numBitsDiffering(i,p);m<l&&(c=f[1],l=m),i!==a&&(m=$r.numBitsDiffering(a,p),m<l&&(c=f[1],l=m))}return l<=3?new $r(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof $r))return!1;const a=i;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}$r.FORMAT_INFO_MASK_QR=21522,$r.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ae{constructor(i,...a){this.ecCodewordsPerBlock=i,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const a=this.ecBlocks;for(const l of a)i+=l.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ${constructor(i,a){this.count=i,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(i,a,...l){this.versionNumber=i,this.alignmentPatternCenters=a,this.ecBlocks=l;let c=0;const f=l[0].getECCodewordsPerBlock(),p=l[0].getECBlocks();for(const m of p)c+=m.getCount()*(m.getDataCodewords()+f);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new R;try{return this.getVersionForNumber((i-17)/4)}catch{throw new R}}static getVersionForNumber(i){if(i<1||i>40)throw new v;return $e.VERSIONS[i-1]}static decodeVersionInformation(i){let a=Number.MAX_SAFE_INTEGER,l=0;for(let c=0;c<$e.VERSION_DECODE_INFO.length;c++){const f=$e.VERSION_DECODE_INFO[c];if(f===i)return $e.getVersionForNumber(c+7);const p=$r.numBitsDiffering(i,f);p<a&&(l=c+7,a=p)}return a<=3?$e.getVersionForNumber(l):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),a=new G(i);a.setRegion(0,0,9,9),a.setRegion(i-8,0,8,9),a.setRegion(0,i-8,9,8);const l=this.alignmentPatternCenters.length;for(let c=0;c<l;c++){const f=this.alignmentPatternCenters[c]-2;for(let p=0;p<l;p++)c===0&&(p===0||p===l-1)||c===l-1&&p===0||a.setRegion(this.alignmentPatternCenters[p]-2,f,5,5)}return a.setRegion(6,9,1,i-17),a.setRegion(9,6,i-17,1),this.versionNumber>6&&(a.setRegion(i-11,0,3,6),a.setRegion(0,i-11,6,3)),a}toString(){return""+this.versionNumber}}$e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),$e.VERSIONS=[new $e(1,new Int32Array(0),new ae(7,new $(1,19)),new ae(10,new $(1,16)),new ae(13,new $(1,13)),new ae(17,new $(1,9))),new $e(2,Int32Array.from([6,18]),new ae(10,new $(1,34)),new ae(16,new $(1,28)),new ae(22,new $(1,22)),new ae(28,new $(1,16))),new $e(3,Int32Array.from([6,22]),new ae(15,new $(1,55)),new ae(26,new $(1,44)),new ae(18,new $(2,17)),new ae(22,new $(2,13))),new $e(4,Int32Array.from([6,26]),new ae(20,new $(1,80)),new ae(18,new $(2,32)),new ae(26,new $(2,24)),new ae(16,new $(4,9))),new $e(5,Int32Array.from([6,30]),new ae(26,new $(1,108)),new ae(24,new $(2,43)),new ae(18,new $(2,15),new $(2,16)),new ae(22,new $(2,11),new $(2,12))),new $e(6,Int32Array.from([6,34]),new ae(18,new $(2,68)),new ae(16,new $(4,27)),new ae(24,new $(4,19)),new ae(28,new $(4,15))),new $e(7,Int32Array.from([6,22,38]),new ae(20,new $(2,78)),new ae(18,new $(4,31)),new ae(18,new $(2,14),new $(4,15)),new ae(26,new $(4,13),new $(1,14))),new $e(8,Int32Array.from([6,24,42]),new ae(24,new $(2,97)),new ae(22,new $(2,38),new $(2,39)),new ae(22,new $(4,18),new $(2,19)),new ae(26,new $(4,14),new $(2,15))),new $e(9,Int32Array.from([6,26,46]),new ae(30,new $(2,116)),new ae(22,new $(3,36),new $(2,37)),new ae(20,new $(4,16),new $(4,17)),new ae(24,new $(4,12),new $(4,13))),new $e(10,Int32Array.from([6,28,50]),new ae(18,new $(2,68),new $(2,69)),new ae(26,new $(4,43),new $(1,44)),new ae(24,new $(6,19),new $(2,20)),new ae(28,new $(6,15),new $(2,16))),new $e(11,Int32Array.from([6,30,54]),new ae(20,new $(4,81)),new ae(30,new $(1,50),new $(4,51)),new ae(28,new $(4,22),new $(4,23)),new ae(24,new $(3,12),new $(8,13))),new $e(12,Int32Array.from([6,32,58]),new ae(24,new $(2,92),new $(2,93)),new ae(22,new $(6,36),new $(2,37)),new ae(26,new $(4,20),new $(6,21)),new ae(28,new $(7,14),new $(4,15))),new $e(13,Int32Array.from([6,34,62]),new ae(26,new $(4,107)),new ae(22,new $(8,37),new $(1,38)),new ae(24,new $(8,20),new $(4,21)),new ae(22,new $(12,11),new $(4,12))),new $e(14,Int32Array.from([6,26,46,66]),new ae(30,new $(3,115),new $(1,116)),new ae(24,new $(4,40),new $(5,41)),new ae(20,new $(11,16),new $(5,17)),new ae(24,new $(11,12),new $(5,13))),new $e(15,Int32Array.from([6,26,48,70]),new ae(22,new $(5,87),new $(1,88)),new ae(24,new $(5,41),new $(5,42)),new ae(30,new $(5,24),new $(7,25)),new ae(24,new $(11,12),new $(7,13))),new $e(16,Int32Array.from([6,26,50,74]),new ae(24,new $(5,98),new $(1,99)),new ae(28,new $(7,45),new $(3,46)),new ae(24,new $(15,19),new $(2,20)),new ae(30,new $(3,15),new $(13,16))),new $e(17,Int32Array.from([6,30,54,78]),new ae(28,new $(1,107),new $(5,108)),new ae(28,new $(10,46),new $(1,47)),new ae(28,new $(1,22),new $(15,23)),new ae(28,new $(2,14),new $(17,15))),new $e(18,Int32Array.from([6,30,56,82]),new ae(30,new $(5,120),new $(1,121)),new ae(26,new $(9,43),new $(4,44)),new ae(28,new $(17,22),new $(1,23)),new ae(28,new $(2,14),new $(19,15))),new $e(19,Int32Array.from([6,30,58,86]),new ae(28,new $(3,113),new $(4,114)),new ae(26,new $(3,44),new $(11,45)),new ae(26,new $(17,21),new $(4,22)),new ae(26,new $(9,13),new $(16,14))),new $e(20,Int32Array.from([6,34,62,90]),new ae(28,new $(3,107),new $(5,108)),new ae(26,new $(3,41),new $(13,42)),new ae(30,new $(15,24),new $(5,25)),new ae(28,new $(15,15),new $(10,16))),new $e(21,Int32Array.from([6,28,50,72,94]),new ae(28,new $(4,116),new $(4,117)),new ae(26,new $(17,42)),new ae(28,new $(17,22),new $(6,23)),new ae(30,new $(19,16),new $(6,17))),new $e(22,Int32Array.from([6,26,50,74,98]),new ae(28,new $(2,111),new $(7,112)),new ae(28,new $(17,46)),new ae(30,new $(7,24),new $(16,25)),new ae(24,new $(34,13))),new $e(23,Int32Array.from([6,30,54,78,102]),new ae(30,new $(4,121),new $(5,122)),new ae(28,new $(4,47),new $(14,48)),new ae(30,new $(11,24),new $(14,25)),new ae(30,new $(16,15),new $(14,16))),new $e(24,Int32Array.from([6,28,54,80,106]),new ae(30,new $(6,117),new $(4,118)),new ae(28,new $(6,45),new $(14,46)),new ae(30,new $(11,24),new $(16,25)),new ae(30,new $(30,16),new $(2,17))),new $e(25,Int32Array.from([6,32,58,84,110]),new ae(26,new $(8,106),new $(4,107)),new ae(28,new $(8,47),new $(13,48)),new ae(30,new $(7,24),new $(22,25)),new ae(30,new $(22,15),new $(13,16))),new $e(26,Int32Array.from([6,30,58,86,114]),new ae(28,new $(10,114),new $(2,115)),new ae(28,new $(19,46),new $(4,47)),new ae(28,new $(28,22),new $(6,23)),new ae(30,new $(33,16),new $(4,17))),new $e(27,Int32Array.from([6,34,62,90,118]),new ae(30,new $(8,122),new $(4,123)),new ae(28,new $(22,45),new $(3,46)),new ae(30,new $(8,23),new $(26,24)),new ae(30,new $(12,15),new $(28,16))),new $e(28,Int32Array.from([6,26,50,74,98,122]),new ae(30,new $(3,117),new $(10,118)),new ae(28,new $(3,45),new $(23,46)),new ae(30,new $(4,24),new $(31,25)),new ae(30,new $(11,15),new $(31,16))),new $e(29,Int32Array.from([6,30,54,78,102,126]),new ae(30,new $(7,116),new $(7,117)),new ae(28,new $(21,45),new $(7,46)),new ae(30,new $(1,23),new $(37,24)),new ae(30,new $(19,15),new $(26,16))),new $e(30,Int32Array.from([6,26,52,78,104,130]),new ae(30,new $(5,115),new $(10,116)),new ae(28,new $(19,47),new $(10,48)),new ae(30,new $(15,24),new $(25,25)),new ae(30,new $(23,15),new $(25,16))),new $e(31,Int32Array.from([6,30,56,82,108,134]),new ae(30,new $(13,115),new $(3,116)),new ae(28,new $(2,46),new $(29,47)),new ae(30,new $(42,24),new $(1,25)),new ae(30,new $(23,15),new $(28,16))),new $e(32,Int32Array.from([6,34,60,86,112,138]),new ae(30,new $(17,115)),new ae(28,new $(10,46),new $(23,47)),new ae(30,new $(10,24),new $(35,25)),new ae(30,new $(19,15),new $(35,16))),new $e(33,Int32Array.from([6,30,58,86,114,142]),new ae(30,new $(17,115),new $(1,116)),new ae(28,new $(14,46),new $(21,47)),new ae(30,new $(29,24),new $(19,25)),new ae(30,new $(11,15),new $(46,16))),new $e(34,Int32Array.from([6,34,62,90,118,146]),new ae(30,new $(13,115),new $(6,116)),new ae(28,new $(14,46),new $(23,47)),new ae(30,new $(44,24),new $(7,25)),new ae(30,new $(59,16),new $(1,17))),new $e(35,Int32Array.from([6,30,54,78,102,126,150]),new ae(30,new $(12,121),new $(7,122)),new ae(28,new $(12,47),new $(26,48)),new ae(30,new $(39,24),new $(14,25)),new ae(30,new $(22,15),new $(41,16))),new $e(36,Int32Array.from([6,24,50,76,102,128,154]),new ae(30,new $(6,121),new $(14,122)),new ae(28,new $(6,47),new $(34,48)),new ae(30,new $(46,24),new $(10,25)),new ae(30,new $(2,15),new $(64,16))),new $e(37,Int32Array.from([6,28,54,80,106,132,158]),new ae(30,new $(17,122),new $(4,123)),new ae(28,new $(29,46),new $(14,47)),new ae(30,new $(49,24),new $(10,25)),new ae(30,new $(24,15),new $(46,16))),new $e(38,Int32Array.from([6,32,58,84,110,136,162]),new ae(30,new $(4,122),new $(18,123)),new ae(28,new $(13,46),new $(32,47)),new ae(30,new $(48,24),new $(14,25)),new ae(30,new $(42,15),new $(32,16))),new $e(39,Int32Array.from([6,26,54,82,110,138,166]),new ae(30,new $(20,117),new $(4,118)),new ae(28,new $(40,47),new $(7,48)),new ae(30,new $(43,24),new $(22,25)),new ae(30,new $(10,15),new $(67,16))),new $e(40,Int32Array.from([6,30,58,86,114,142,170]),new ae(30,new $(19,118),new $(6,119)),new ae(28,new $(18,47),new $(31,48)),new ae(30,new $(34,24),new $(34,25)),new ae(30,new $(20,15),new $(61,16)))];var Dr;(function(M){M[M.DATA_MASK_000=0]="DATA_MASK_000",M[M.DATA_MASK_001=1]="DATA_MASK_001",M[M.DATA_MASK_010=2]="DATA_MASK_010",M[M.DATA_MASK_011=3]="DATA_MASK_011",M[M.DATA_MASK_100=4]="DATA_MASK_100",M[M.DATA_MASK_101=5]="DATA_MASK_101",M[M.DATA_MASK_110=6]="DATA_MASK_110",M[M.DATA_MASK_111=7]="DATA_MASK_111"})(Dr||(Dr={}));class Bn{constructor(i,a){this.value=i,this.isMasked=a}unmaskBitMatrix(i,a){for(let l=0;l<a;l++)for(let c=0;c<a;c++)this.isMasked(l,c)&&i.flip(c,l)}}Bn.values=new Map([[Dr.DATA_MASK_000,new Bn(Dr.DATA_MASK_000,(M,i)=>(M+i&1)===0)],[Dr.DATA_MASK_001,new Bn(Dr.DATA_MASK_001,(M,i)=>(M&1)===0)],[Dr.DATA_MASK_010,new Bn(Dr.DATA_MASK_010,(M,i)=>i%3===0)],[Dr.DATA_MASK_011,new Bn(Dr.DATA_MASK_011,(M,i)=>(M+i)%3===0)],[Dr.DATA_MASK_100,new Bn(Dr.DATA_MASK_100,(M,i)=>(Math.floor(M/2)+Math.floor(i/3)&1)===0)],[Dr.DATA_MASK_101,new Bn(Dr.DATA_MASK_101,(M,i)=>M*i%6===0)],[Dr.DATA_MASK_110,new Bn(Dr.DATA_MASK_110,(M,i)=>M*i%6<3)],[Dr.DATA_MASK_111,new Bn(Dr.DATA_MASK_111,(M,i)=>(M+i+M*i%3&1)===0)]]);class zv{constructor(i){const a=i.getHeight();if(a<21||(a&3)!==1)throw new R;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let f=0;f<6;f++)i=this.copyBit(f,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let f=5;f>=0;f--)i=this.copyBit(8,f,i);const a=this.bitMatrix.getHeight();let l=0;const c=a-7;for(let f=a-1;f>=c;f--)l=this.copyBit(8,f,l);for(let f=a-8;f<a;f++)l=this.copyBit(f,8,l);if(this.parsedFormatInfo=$r.decodeFormatInformation(i,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new R}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),a=Math.floor((i-17)/4);if(a<=6)return $e.getVersionForNumber(a);let l=0;const c=i-11;for(let p=5;p>=0;p--)for(let m=i-9;m>=c;m--)l=this.copyBit(m,p,l);let f=$e.decodeVersionInformation(l);if(f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;l=0;for(let p=5;p>=0;p--)for(let m=i-9;m>=c;m--)l=this.copyBit(p,m,l);if(f=$e.decodeVersionInformation(l),f!==null&&f.getDimensionForVersion()===i)return this.parsedVersion=f,f;throw new R}copyBit(i,a,l){return(this.isMirror?this.bitMatrix.get(a,i):this.bitMatrix.get(i,a))?l<<1|1:l<<1}readCodewords(){const i=this.readFormatInformation(),a=this.readVersion(),l=Bn.values.get(i.getDataMask()),c=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,c);const f=a.buildFunctionPattern();let p=!0;const m=new Uint8Array(a.getTotalCodewords());let C=0,T=0,O=0;for(let B=c-1;B>0;B-=2){B===6&&B--;for(let j=0;j<c;j++){const z=p?c-1-j:j;for(let X=0;X<2;X++)f.get(B-X,z)||(O++,T<<=1,this.bitMatrix.get(B-X,z)&&(T|=1),O===8&&(m[C++]=T,O=0,T=0))}p=!p}if(C!==a.getTotalCodewords())throw new R;return m}remask(){if(this.parsedFormatInfo===null)return;const i=Bn.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let a=0,l=i.getWidth();a<l;a++)for(let c=a+1,f=i.getHeight();c<f;c++)i.get(a,c)!==i.get(c,a)&&(i.flip(c,a),i.flip(a,c))}}class ef{constructor(i,a){this.numDataCodewords=i,this.codewords=a}static getDataBlocks(i,a,l){if(i.length!==a.getTotalCodewords())throw new v;const c=a.getECBlocksForLevel(l);let f=0;const p=c.getECBlocks();for(const X of p)f+=X.getCount();const m=new Array(f);let C=0;for(const X of p)for(let Q=0;Q<X.getCount();Q++){const se=X.getDataCodewords(),he=c.getECCodewordsPerBlock()+se;m[C++]=new ef(se,new Uint8Array(he))}const T=m[0].codewords.length;let O=m.length-1;for(;O>=0&&m[O].codewords.length!==T;)O--;O++;const B=T-c.getECCodewordsPerBlock();let j=0;for(let X=0;X<B;X++)for(let Q=0;Q<C;Q++)m[Q].codewords[X]=i[j++];for(let X=O;X<C;X++)m[X].codewords[B]=i[j++];const z=m[0].codewords.length;for(let X=B;X<z;X++)for(let Q=0;Q<C;Q++){const se=Q<O?X:X+1;m[Q].codewords[se]=i[j++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ln;(function(M){M[M.TERMINATOR=0]="TERMINATOR",M[M.NUMERIC=1]="NUMERIC",M[M.ALPHANUMERIC=2]="ALPHANUMERIC",M[M.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",M[M.BYTE=4]="BYTE",M[M.ECI=5]="ECI",M[M.KANJI=6]="KANJI",M[M.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",M[M.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",M[M.HANZI=9]="HANZI"})(Ln||(Ln={}));class We{constructor(i,a,l,c){this.value=i,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=c,We.FOR_BITS.set(c,this),We.FOR_VALUE.set(i,this)}static forBits(i){const a=We.FOR_BITS.get(i);if(a===void 0)throw new v;return a}getCharacterCountBits(i){const a=i.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof We))return!1;const a=i;return this.value===a.value}toString(){return this.stringValue}}We.FOR_BITS=new Map,We.FOR_VALUE=new Map,We.TERMINATOR=new We(Ln.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),We.NUMERIC=new We(Ln.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),We.ALPHANUMERIC=new We(Ln.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),We.STRUCTURED_APPEND=new We(Ln.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),We.BYTE=new We(Ln.BYTE,"BYTE",Int32Array.from([8,16,16]),4),We.ECI=new We(Ln.ECI,"ECI",Int32Array.from([0,0,0]),7),We.KANJI=new We(Ln.KANJI,"KANJI",Int32Array.from([8,10,12]),8),We.FNC1_FIRST_POSITION=new We(Ln.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),We.FNC1_SECOND_POSITION=new We(Ln.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),We.HANZI=new We(Ln.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class nr{static decode(i,a,l,c){const f=new ua(i);let p=new ie;const m=new Array;let C=-1,T=-1;try{let O=null,B=!1,j;do{if(f.available()<4)j=We.TERMINATOR;else{const z=f.readBits(4);j=We.forBits(z)}switch(j){case We.TERMINATOR:break;case We.FNC1_FIRST_POSITION:case We.FNC1_SECOND_POSITION:B=!0;break;case We.STRUCTURED_APPEND:if(f.available()<16)throw new R;C=f.readBits(8),T=f.readBits(8);break;case We.ECI:const z=nr.parseECIValue(f);if(O=D.getCharacterSetECIByValue(z),O===null)throw new R;break;case We.HANZI:const X=f.readBits(4),Q=f.readBits(j.getCharacterCountBits(a));X===nr.GB2312_SUBSET&&nr.decodeHanziSegment(f,p,Q);break;default:const se=f.readBits(j.getCharacterCountBits(a));switch(j){case We.NUMERIC:nr.decodeNumericSegment(f,p,se);break;case We.ALPHANUMERIC:nr.decodeAlphanumericSegment(f,p,se,B);break;case We.BYTE:nr.decodeByteSegment(f,p,se,O,m,c);break;case We.KANJI:nr.decodeKanjiSegment(f,p,se);break;default:throw new R}break}}while(j!==We.TERMINATOR)}catch{throw new R}return new ke(i,p.toString(),m.length===0?null:m,l===null?null:l.toString(),C,T)}static decodeHanziSegment(i,a,l){if(l*13>i.available())throw new R;const c=new Uint8Array(2*l);let f=0;for(;l>0;){const p=i.readBits(13);let m=p/96<<8&4294967295|p%96;m<959?m+=41377:m+=42657,c[f]=m>>8&255,c[f+1]=m&255,f+=2,l--}try{a.append(W.decode(c,K.GB2312))}catch(p){throw new R(p)}}static decodeKanjiSegment(i,a,l){if(l*13>i.available())throw new R;const c=new Uint8Array(2*l);let f=0;for(;l>0;){const p=i.readBits(13);let m=p/192<<8&4294967295|p%192;m<7936?m+=33088:m+=49472,c[f]=m>>8,c[f+1]=m,f+=2,l--}try{a.append(W.decode(c,K.SHIFT_JIS))}catch(p){throw new R(p)}}static decodeByteSegment(i,a,l,c,f,p){if(8*l>i.available())throw new R;const m=new Uint8Array(l);for(let T=0;T<l;T++)m[T]=i.readBits(8);let C;c===null?C=K.guessEncoding(m,p):C=c.getName();try{a.append(W.decode(m,C))}catch(T){throw new R(T)}f.push(m)}static toAlphaNumericChar(i){if(i>=nr.ALPHANUMERIC_CHARS.length)throw new R;return nr.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,a,l,c){const f=a.length();for(;l>1;){if(i.available()<11)throw new R;const p=i.readBits(11);a.append(nr.toAlphaNumericChar(Math.floor(p/45))),a.append(nr.toAlphaNumericChar(p%45)),l-=2}if(l===1){if(i.available()<6)throw new R;a.append(nr.toAlphaNumericChar(i.readBits(6)))}if(c)for(let p=f;p<a.length();p++)a.charAt(p)==="%"&&(p<a.length()-1&&a.charAt(p+1)==="%"?a.deleteCharAt(p+1):a.setCharAt(p,""))}static decodeNumericSegment(i,a,l){for(;l>=3;){if(i.available()<10)throw new R;const c=i.readBits(10);if(c>=1e3)throw new R;a.append(nr.toAlphaNumericChar(Math.floor(c/100))),a.append(nr.toAlphaNumericChar(Math.floor(c/10)%10)),a.append(nr.toAlphaNumericChar(c%10)),l-=3}if(l===2){if(i.available()<7)throw new R;const c=i.readBits(7);if(c>=100)throw new R;a.append(nr.toAlphaNumericChar(Math.floor(c/10))),a.append(nr.toAlphaNumericChar(c%10))}else if(l===1){if(i.available()<4)throw new R;const c=i.readBits(4);if(c>=10)throw new R;a.append(nr.toAlphaNumericChar(c))}}static parseECIValue(i){const a=i.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const l=i.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=i.readBits(16);return(a&31)<<16&4294967295|l}throw new R}}nr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",nr.GB2312_SUBSET=1;class i0{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const a=i[0];i[0]=i[2],i[2]=a}}class Kv{constructor(){this.rsDecoder=new bt(tt.QR_CODE_FIELD_256)}decodeBooleanArray(i,a){return this.decodeBitMatrix(G.parseFromBooleanArray(i),a)}decodeBitMatrix(i,a){const l=new zv(i);let c=null;try{return this.decodeBitMatrixParser(l,a)}catch(f){c=f}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const f=this.decodeBitMatrixParser(l,a);return f.setOther(new i0(!0)),f}catch(f){throw c!==null?c:f}}decodeBitMatrixParser(i,a){const l=i.readVersion(),c=i.readFormatInformation().getErrorCorrectionLevel(),f=i.readCodewords(),p=ef.getDataBlocks(f,l,c);let m=0;for(const O of p)m+=O.getNumDataCodewords();const C=new Uint8Array(m);let T=0;for(const O of p){const B=O.getCodewords(),j=O.getNumDataCodewords();this.correctErrors(B,j);for(let z=0;z<j;z++)C[T++]=B[z]}return nr.decode(C,l,c,a)}correctErrors(i,a){const l=new Int32Array(i);try{this.rsDecoder.decode(l,i.length-a)}catch{throw new S}for(let c=0;c<a;c++)i[c]=l[c]}}class tf extends Oe{constructor(i,a,l){super(i,a),this.estimatedModuleSize=l}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const c=(this.getX()+a)/2,f=(this.getY()+i)/2,p=(this.estimatedModuleSize+l)/2;return new tf(c,f,p)}}class jl{constructor(i,a,l,c,f,p,m){this.image=i,this.startX=a,this.startY=l,this.width=c,this.height=f,this.moduleSize=p,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,a=this.height,l=this.width,c=i+l,f=this.startY+a/2,p=new Int32Array(3),m=this.image;for(let C=0;C<a;C++){const T=f+(C&1?-Math.floor((C+1)/2):Math.floor((C+1)/2));p[0]=0,p[1]=0,p[2]=0;let O=i;for(;O<c&&!m.get(O,T);)O++;let B=0;for(;O<c;){if(m.get(O,T))if(B===1)p[1]++;else if(B===2){if(this.foundPatternCross(p)){const j=this.handlePossibleCenter(p,T,O);if(j!==null)return j}p[0]=p[2],p[1]=1,p[2]=0,B=1}else p[++B]++;else B===1&&B++,p[B]++;O++}if(this.foundPatternCross(p)){const j=this.handlePossibleCenter(p,T,c);if(j!==null)return j}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(i,a){return a-i[2]-i[1]/2}foundPatternCross(i){const a=this.moduleSize,l=a/2;for(let c=0;c<3;c++)if(Math.abs(a-i[c])>=l)return!1;return!0}crossCheckVertical(i,a,l,c){const f=this.image,p=f.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let C=i;for(;C>=0&&f.get(a,C)&&m[1]<=l;)m[1]++,C--;if(C<0||m[1]>l)return NaN;for(;C>=0&&!f.get(a,C)&&m[0]<=l;)m[0]++,C--;if(m[0]>l)return NaN;for(C=i+1;C<p&&f.get(a,C)&&m[1]<=l;)m[1]++,C++;if(C===p||m[1]>l)return NaN;for(;C<p&&!f.get(a,C)&&m[2]<=l;)m[2]++,C++;if(m[2]>l)return NaN;const T=m[0]+m[1]+m[2];return 5*Math.abs(T-c)>=2*c?NaN:this.foundPatternCross(m)?jl.centerFromEnd(m,C):NaN}handlePossibleCenter(i,a,l){const c=i[0]+i[1]+i[2],f=jl.centerFromEnd(i,l),p=this.crossCheckVertical(a,f,2*i[1],c);if(!isNaN(p)){const m=(i[0]+i[1]+i[2])/3;for(const T of this.possibleCenters)if(T.aboutEquals(m,p,f))return T.combineEstimate(p,f,m);const C=new tf(f,p,m);this.possibleCenters.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return null}}class rf extends Oe{constructor(i,a,l,c){super(i,a),this.estimatedModuleSize=l,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,a,l){if(Math.abs(a-this.getY())<=i&&Math.abs(l-this.getX())<=i){const c=Math.abs(i-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(i,a,l){const c=this.count+1,f=(this.count*this.getX()+a)/c,p=(this.count*this.getY()+i)/c,m=(this.count*this.estimatedModuleSize+l)/c;return new rf(f,p,m,c)}}class Wv{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Rr{constructor(i,a){this.image=i,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const a=i!=null&&i.get(_.TRY_HARDER)!==void 0,l=i!=null&&i.get(_.PURE_BARCODE)!==void 0,c=this.image,f=c.getHeight(),p=c.getWidth();let m=Math.floor(3*f/(4*Rr.MAX_MODULES));(m<Rr.MIN_SKIP||a)&&(m=Rr.MIN_SKIP);let C=!1;const T=new Int32Array(5);for(let B=m-1;B<f&&!C;B+=m){T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0;let j=0;for(let z=0;z<p;z++)if(c.get(z,B))(j&1)===1&&j++,T[j]++;else if(j&1)T[j]++;else if(j===4)if(Rr.foundPatternCross(T)){if(this.handlePossibleCenter(T,B,z,l)===!0)if(m=2,this.hasSkipped===!0)C=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>T[2]&&(B+=Q-T[2]-m,z=p-1)}else{T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,j=3;continue}j=0,T[0]=0,T[1]=0,T[2]=0,T[3]=0,T[4]=0}else T[0]=T[2],T[1]=T[3],T[2]=T[4],T[3]=1,T[4]=0,j=3;else T[++j]++;Rr.foundPatternCross(T)&&this.handlePossibleCenter(T,B,p,l)===!0&&(m=T[0],this.hasSkipped&&(C=this.haveMultiplyConfirmedCenters()))}const O=this.selectBestPatterns();return Oe.orderBestPatterns(O),new Wv(O)}static centerFromEnd(i,a){return a-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let a=0;for(let f=0;f<5;f++){const p=i[f];if(p===0)return!1;a+=p}if(a<7)return!1;const l=a/7,c=l/2;return Math.abs(l-i[0])<c&&Math.abs(l-i[1])<c&&Math.abs(3*l-i[2])<3*c&&Math.abs(l-i[3])<c&&Math.abs(l-i[4])<c}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,a,l,c){const f=this.getCrossCheckStateCount();let p=0;const m=this.image;for(;i>=p&&a>=p&&m.get(a-p,i-p);)f[2]++,p++;if(i<p||a<p)return!1;for(;i>=p&&a>=p&&!m.get(a-p,i-p)&&f[1]<=l;)f[1]++,p++;if(i<p||a<p||f[1]>l)return!1;for(;i>=p&&a>=p&&m.get(a-p,i-p)&&f[0]<=l;)f[0]++,p++;if(f[0]>l)return!1;const C=m.getHeight(),T=m.getWidth();for(p=1;i+p<C&&a+p<T&&m.get(a+p,i+p);)f[2]++,p++;if(i+p>=C||a+p>=T)return!1;for(;i+p<C&&a+p<T&&!m.get(a+p,i+p)&&f[3]<l;)f[3]++,p++;if(i+p>=C||a+p>=T||f[3]>=l)return!1;for(;i+p<C&&a+p<T&&m.get(a+p,i+p)&&f[4]<l;)f[4]++,p++;if(f[4]>=l)return!1;const O=f[0]+f[1]+f[2]+f[3]+f[4];return Math.abs(O-c)<2*c&&Rr.foundPatternCross(f)}crossCheckVertical(i,a,l,c){const f=this.image,p=f.getHeight(),m=this.getCrossCheckStateCount();let C=i;for(;C>=0&&f.get(a,C);)m[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(a,C)&&m[1]<=l;)m[1]++,C--;if(C<0||m[1]>l)return NaN;for(;C>=0&&f.get(a,C)&&m[0]<=l;)m[0]++,C--;if(m[0]>l)return NaN;for(C=i+1;C<p&&f.get(a,C);)m[2]++,C++;if(C===p)return NaN;for(;C<p&&!f.get(a,C)&&m[3]<l;)m[3]++,C++;if(C===p||m[3]>=l)return NaN;for(;C<p&&f.get(a,C)&&m[4]<l;)m[4]++,C++;if(m[4]>=l)return NaN;const T=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(T-c)>=2*c?NaN:Rr.foundPatternCross(m)?Rr.centerFromEnd(m,C):NaN}crossCheckHorizontal(i,a,l,c){const f=this.image,p=f.getWidth(),m=this.getCrossCheckStateCount();let C=i;for(;C>=0&&f.get(C,a);)m[2]++,C--;if(C<0)return NaN;for(;C>=0&&!f.get(C,a)&&m[1]<=l;)m[1]++,C--;if(C<0||m[1]>l)return NaN;for(;C>=0&&f.get(C,a)&&m[0]<=l;)m[0]++,C--;if(m[0]>l)return NaN;for(C=i+1;C<p&&f.get(C,a);)m[2]++,C++;if(C===p)return NaN;for(;C<p&&!f.get(C,a)&&m[3]<l;)m[3]++,C++;if(C===p||m[3]>=l)return NaN;for(;C<p&&f.get(C,a)&&m[4]<l;)m[4]++,C++;if(m[4]>=l)return NaN;const T=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(T-c)>=c?NaN:Rr.foundPatternCross(m)?Rr.centerFromEnd(m,C):NaN}handlePossibleCenter(i,a,l,c){const f=i[0]+i[1]+i[2]+i[3]+i[4];let p=Rr.centerFromEnd(i,l),m=this.crossCheckVertical(a,Math.floor(p),i[2],f);if(!isNaN(m)&&(p=this.crossCheckHorizontal(Math.floor(p),Math.floor(m),i[2],f),!isNaN(p)&&(!c||this.crossCheckDiagonal(Math.floor(m),Math.floor(p),i[2],f)))){const C=f/7;let T=!1;const O=this.possibleCenters;for(let B=0,j=O.length;B<j;B++){const z=O[B];if(z.aboutEquals(C,m,p)){O[B]=z.combineEstimate(m,p,C),T=!0;break}}if(!T){const B=new rf(p,m,C);O.push(B),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(B)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=Rr.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,a=0;const l=this.possibleCenters.length;for(const p of this.possibleCenters)p.getCount()>=Rr.CENTER_QUORUM&&(i++,a+=p.getEstimatedModuleSize());if(i<3)return!1;const c=a/l;let f=0;for(const p of this.possibleCenters)f+=Math.abs(p.getEstimatedModuleSize()-c);return f<=.05*a}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new V;const a=this.possibleCenters;let l;if(i>3){let c=0,f=0;for(const C of this.possibleCenters){const T=C.getEstimatedModuleSize();c+=T,f+=T*T}l=c/i;let p=Math.sqrt(f/i-l*l);a.sort((C,T)=>{const O=Math.abs(T.getEstimatedModuleSize()-l),B=Math.abs(C.getEstimatedModuleSize()-l);return O<B?-1:O>B?1:0});const m=Math.max(.2*l,p);for(let C=0;C<a.length&&a.length>3;C++){const T=a[C];Math.abs(T.getEstimatedModuleSize()-l)>m&&(a.splice(C,1),C--)}}if(a.length>3){let c=0;for(const f of a)c+=f.getEstimatedModuleSize();l=c/a.length,a.sort((f,p)=>{if(p.getCount()===f.getCount()){const m=Math.abs(p.getEstimatedModuleSize()-l),C=Math.abs(f.getEstimatedModuleSize()-l);return m<C?1:m>C?-1:0}else return p.getCount()-f.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}Rr.CENTER_QUORUM=2,Rr.MIN_SKIP=3,Rr.MAX_MODULES=57;class po{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(_.NEED_RESULT_POINT_CALLBACK);const l=new Rr(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(l)}processFinderPatternInfo(i){const a=i.getTopLeft(),l=i.getTopRight(),c=i.getBottomLeft(),f=this.calculateModuleSize(a,l,c);if(f<1)throw new V("No pattern found in proccess finder.");const p=po.computeDimension(a,l,c,f),m=$e.getProvisionalVersionForDimension(p),C=m.getDimensionForVersion()-7;let T=null;if(m.getAlignmentPatternCenters().length>0){const z=l.getX()-a.getX()+c.getX(),X=l.getY()-a.getY()+c.getY(),Q=1-3/C,se=Math.floor(a.getX()+Q*(z-a.getX())),he=Math.floor(a.getY()+Q*(X-a.getY()));for(let Ae=4;Ae<=16;Ae<<=1)try{T=this.findAlignmentInRegion(f,se,he,Ae);break}catch(Ce){if(!(Ce instanceof V))throw Ce}}const O=po.createTransform(a,l,c,T,p),B=po.sampleGrid(this.image,O,p);let j;return T===null?j=[c,a,l]:j=[c,a,l,T],new On(B,j)}static createTransform(i,a,l,c,f){const p=f-3.5;let m,C,T,O;return c!==null?(m=c.getX(),C=c.getY(),T=p-3,O=T):(m=a.getX()-i.getX()+l.getX(),C=a.getY()-i.getY()+l.getY(),T=p,O=p),Ge.quadrilateralToQuadrilateral(3.5,3.5,p,3.5,T,O,3.5,p,i.getX(),i.getY(),a.getX(),a.getY(),m,C,l.getX(),l.getY())}static sampleGrid(i,a,l){return xr.getInstance().sampleGridWithTransform(i,l,l,a)}static computeDimension(i,a,l,c){const f=st.round(Oe.distance(i,a)/c),p=st.round(Oe.distance(i,l)/c);let m=Math.floor((f+p)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new V("Dimensions could be not found.")}return m}calculateModuleSize(i,a,l){return(this.calculateModuleSizeOneWay(i,a)+this.calculateModuleSizeOneWay(i,l))/2}calculateModuleSizeOneWay(i,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(a.getX()),Math.floor(a.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(l)?c/7:isNaN(c)?l/7:(l+c)/14}sizeOfBlackWhiteBlackRunBothWays(i,a,l,c){let f=this.sizeOfBlackWhiteBlackRun(i,a,l,c),p=1,m=i-(l-i);m<0?(p=i/(i-m),m=0):m>=this.image.getWidth()&&(p=(this.image.getWidth()-1-i)/(m-i),m=this.image.getWidth()-1);let C=Math.floor(a-(c-a)*p);return p=1,C<0?(p=a/(a-C),C=0):C>=this.image.getHeight()&&(p=(this.image.getHeight()-1-a)/(C-a),C=this.image.getHeight()-1),m=Math.floor(i+(m-i)*p),f+=this.sizeOfBlackWhiteBlackRun(i,a,m,C),f-1}sizeOfBlackWhiteBlackRun(i,a,l,c){const f=Math.abs(c-a)>Math.abs(l-i);if(f){let z=i;i=a,a=z,z=l,l=c,c=z}const p=Math.abs(l-i),m=Math.abs(c-a);let C=-p/2;const T=i<l?1:-1,O=a<c?1:-1;let B=0;const j=l+T;for(let z=i,X=a;z!==j;z+=T){const Q=f?X:z,se=f?z:X;if(B===1===this.image.get(Q,se)){if(B===2)return st.distance(z,X,i,a);B++}if(C+=m,C>0){if(X===c)break;X+=O,C-=p}}return B===2?st.distance(l+T,c,i,a):NaN}findAlignmentInRegion(i,a,l,c){const f=Math.floor(c*i),p=Math.max(0,a-f),m=Math.min(this.image.getWidth()-1,a+f);if(m-p<i*3)throw new V("Alignment top exceeds estimated module size.");const C=Math.max(0,l-f),T=Math.min(this.image.getHeight()-1,l+f);if(T-C<i*3)throw new V("Alignment bottom exceeds estimated module size.");return new jl(this.image,p,C,m-p,T-C,i,this.resultPointCallback).find()}}class Zi{constructor(){this.decoder=new Kv}getDecoder(){return this.decoder}decode(i,a){let l,c;if(a!=null&&a.get(_.PURE_BARCODE)!==void 0){const C=Zi.extractPureBits(i.getBlackMatrix());l=this.decoder.decodeBitMatrix(C,a),c=Zi.NO_POINTS}else{const C=new po(i.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(C.getBits(),a),c=C.getPoints()}l.getOther()instanceof i0&&l.getOther().applyMirroredCorrection(c);const f=new U(l.getText(),l.getRawBytes(),void 0,c,J.QR_CODE,void 0),p=l.getByteSegments();p!==null&&f.putMetadata(ye.BYTE_SEGMENTS,p);const m=l.getECLevel();return m!==null&&f.putMetadata(ye.ERROR_CORRECTION_LEVEL,m),l.hasStructuredAppend()&&(f.putMetadata(ye.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),f.putMetadata(ye.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),f}reset(){}static extractPureBits(i){const a=i.getTopLeftOnBit(),l=i.getBottomRightOnBit();if(a===null||l===null)throw new V;const c=this.moduleSize(a,i);let f=a[1],p=l[1],m=a[0],C=l[0];if(m>=C||f>=p)throw new V;if(p-f!==C-m&&(C=m+(p-f),C>=i.getWidth()))throw new V;const T=Math.round((C-m+1)/c),O=Math.round((p-f+1)/c);if(T<=0||O<=0)throw new V;if(O!==T)throw new V;const B=Math.floor(c/2);f+=B,m+=B;const j=m+Math.floor((T-1)*c)-C;if(j>0){if(j>B)throw new V;m-=j}const z=f+Math.floor((O-1)*c)-p;if(z>0){if(z>B)throw new V;f-=z}const X=new G(T,O);for(let Q=0;Q<O;Q++){const se=f+Math.floor(Q*c);for(let he=0;he<T;he++)i.get(m+Math.floor(he*c),se)&&X.set(he,Q)}return X}static moduleSize(i,a){const l=a.getHeight(),c=a.getWidth();let f=i[0],p=i[1],m=!0,C=0;for(;f<c&&p<l;){if(m!==a.get(f,p)){if(++C===5)break;m=!m}f++,p++}if(f===c||p===l)throw new V;return(f-i[0])/7}}Zi.NO_POINTS=new Array;class et{PDF417Common(){}static getBitCountSum(i){return st.sum(i)}static toIntArray(i){if(i==null||!i.length)return et.EMPTY_INT_ARRAY;const a=new Int32Array(i.length);let l=0;for(const c of i)a[l++]=c;return a}static getCodeword(i){const a=N.binarySearch(et.SYMBOL_TABLE,i&262143);return a<0?-1:(et.CODEWORD_TABLE[a]-1)%et.NUMBER_OF_CODEWORDS}}et.NUMBER_OF_CODEWORDS=929,et.MAX_CODEWORDS_IN_BARCODE=et.NUMBER_OF_CODEWORDS-1,et.MIN_ROWS_IN_BARCODE=3,et.MAX_ROWS_IN_BARCODE=90,et.MODULES_IN_CODEWORD=17,et.MODULES_IN_STOP_PATTERN=18,et.BARS_IN_MODULE=8,et.EMPTY_INT_ARRAY=new Int32Array([]),et.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),et.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Gv{constructor(i,a){this.bits=i,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class ct{static detectMultiple(i,a,l){let c=i.getBlackMatrix(),f=ct.detect(l,c);return f.length||(c=c.clone(),c.rotate180(),f=ct.detect(l,c)),new Gv(c,f)}static detect(i,a){const l=new Array;let c=0,f=0,p=!1;for(;c<a.getHeight();){const m=ct.findVertices(a,c,f);if(m[0]==null&&m[3]==null){if(!p)break;p=!1,f=0;for(const C of l)C[1]!=null&&(c=Math.trunc(Math.max(c,C[1].getY()))),C[3]!=null&&(c=Math.max(c,Math.trunc(C[3].getY())));c+=ct.ROW_STEP;continue}if(p=!0,l.push(m),!i)break;m[2]!=null?(f=Math.trunc(m[2].getX()),c=Math.trunc(m[2].getY())):(f=Math.trunc(m[4].getX()),c=Math.trunc(m[4].getY()))}return l}static findVertices(i,a,l){const c=i.getHeight(),f=i.getWidth(),p=new Array(8);return ct.copyToResult(p,ct.findRowsWithPattern(i,c,f,a,l,ct.START_PATTERN),ct.INDEXES_START_PATTERN),p[4]!=null&&(l=Math.trunc(p[4].getX()),a=Math.trunc(p[4].getY())),ct.copyToResult(p,ct.findRowsWithPattern(i,c,f,a,l,ct.STOP_PATTERN),ct.INDEXES_STOP_PATTERN),p}static copyToResult(i,a,l){for(let c=0;c<l.length;c++)i[l[c]]=a[c]}static findRowsWithPattern(i,a,l,c,f,p){const m=new Array(4);let C=!1;const T=new Int32Array(p.length);for(;c<a;c+=ct.ROW_STEP){let B=ct.findGuardPattern(i,f,c,l,!1,p,T);if(B!=null){for(;c>0;){const j=ct.findGuardPattern(i,f,--c,l,!1,p,T);if(j!=null)B=j;else{c++;break}}m[0]=new Oe(B[0],c),m[1]=new Oe(B[1],c),C=!0;break}}let O=c+1;if(C){let B=0,j=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;O<a;O++){const z=ct.findGuardPattern(i,j[0],O,l,!1,p,T);if(z!=null&&Math.abs(j[0]-z[0])<ct.MAX_PATTERN_DRIFT&&Math.abs(j[1]-z[1])<ct.MAX_PATTERN_DRIFT)j=z,B=0;else{if(B>ct.SKIPPED_ROW_COUNT_MAX)break;B++}}O-=B+1,m[2]=new Oe(j[0],O),m[3]=new Oe(j[1],O)}return O-c<ct.BARCODE_MIN_HEIGHT&&N.fill(m,null),m}static findGuardPattern(i,a,l,c,f,p,m){N.fillWithin(m,0,m.length,0);let C=a,T=0;for(;i.get(C,l)&&C>0&&T++<ct.MAX_PIXEL_DRIFT;)C--;let O=C,B=0,j=p.length;for(let z=f;O<c;O++)if(i.get(O,l)!==z)m[B]++;else{if(B===j-1){if(ct.patternMatchVariance(m,p,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE)return new Int32Array([C,O]);C+=m[0]+m[1],A.arraycopy(m,2,m,0,B-1),m[B-1]=0,m[B]=0,B--}else B++;m[B]=1,z=!z}return B===j-1&&ct.patternMatchVariance(m,p,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE?new Int32Array([C,O-1]):null}static patternMatchVariance(i,a,l){let c=i.length,f=0,p=0;for(let T=0;T<c;T++)f+=i[T],p+=a[T];if(f<p)return 1/0;let m=f/p;l*=m;let C=0;for(let T=0;T<c;T++){let O=i[T],B=a[T]*m,j=O>B?O-B:B-O;if(j>l)return 1/0;C+=j}return C/f}}ct.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ct.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ct.MAX_AVG_VARIANCE=.42,ct.MAX_INDIVIDUAL_VARIANCE=.8,ct.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ct.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ct.MAX_PIXEL_DRIFT=3,ct.MAX_PATTERN_DRIFT=5,ct.SKIPPED_ROW_COUNT_MAX=25,ct.ROW_STEP=5,ct.BARCODE_MIN_HEIGHT=10;class Mr{constructor(i,a){if(a.length===0)throw new v;this.field=i;let l=a.length;if(l>1&&a[0]===0){let c=1;for(;c<l&&a[c]===0;)c++;c===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-c),A.arraycopy(a,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let c=0;for(let f of this.coefficients)c=this.field.add(c,f);return c}let a=this.coefficients[0],l=this.coefficients.length;for(let c=1;c<l;c++)a=this.field.add(this.field.multiply(i,a),this.coefficients[c]);return a}add(i){if(!this.field.equals(i.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let a=this.coefficients,l=i.coefficients;if(a.length>l.length){let p=a;a=l,l=p}let c=new Int32Array(l.length),f=l.length-a.length;A.arraycopy(l,0,c,0,f);for(let p=f;p<l.length;p++)c[p]=this.field.add(a[p-f],l[p]);return new Mr(this.field,c)}subtract(i){if(!this.field.equals(i.field))throw new v("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Mr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Mr(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,c=i.coefficients,f=c.length,p=new Int32Array(l+f-1);for(let m=0;m<l;m++){let C=a[m];for(let T=0;T<f;T++)p[m+T]=this.field.add(p[m+T],this.field.multiply(C,c[T]))}return new Mr(this.field,p)}negative(){let i=this.coefficients.length,a=new Int32Array(i);for(let l=0;l<i;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new Mr(this.field,a)}multiplyScalar(i){if(i===0)return new Mr(this.field,new Int32Array([0]));if(i===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let c=0;c<a;c++)l[c]=this.field.multiply(this.coefficients[c],i);return new Mr(this.field,l)}multiplyByMonomial(i,a){if(i<0)throw new v;if(a===0)return new Mr(this.field,new Int32Array([0]));let l=this.coefficients.length,c=new Int32Array(l+i);for(let f=0;f<l;f++)c[f]=this.field.multiply(this.coefficients[f],a);return new Mr(this.field,c)}toString(){let i=new ie;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(i.append(" - "),l=-l):i.length()>0&&i.append(" + "),(a===0||l!==1)&&i.append(l),a!==0&&(a===1?i.append("x"):(i.append("x^"),i.append(a))))}return i.toString()}}class qv{add(i,a){return(i+a)%this.modulus}subtract(i,a){return(this.modulus+i-a)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new v;return this.logTable[i]}inverse(i){if(i===0)throw new Ze;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,a){return i===0||a===0?0:this.expTable[(this.logTable[i]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class nf extends qv{constructor(i,a){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let l=1;for(let c=0;c<i;c++)this.expTable[c]=l,l=l*a%i;for(let c=0;c<i-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Mr(this,new Int32Array([0])),this.one=new Mr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,a){if(i<0)throw new v;if(a===0)return this.zero;let l=new Int32Array(i+1);return l[0]=a,new Mr(this,l)}}nf.PDF417_GF=new nf(et.NUMBER_OF_CODEWORDS,3);class s0{constructor(){this.field=nf.PDF417_GF}decode(i,a,l){let c=new Mr(this.field,i),f=new Int32Array(a),p=!1;for(let X=a;X>0;X--){let Q=c.evaluateAt(this.field.exp(X));f[a-X]=Q,Q!==0&&(p=!0)}if(!p)return 0;let m=this.field.getOne();if(l!=null)for(const X of l){let Q=this.field.exp(i.length-1-X),se=new Mr(this.field,new Int32Array([this.field.subtract(0,Q),1]));m=m.multiply(se)}let C=new Mr(this.field,f),T=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),C,a),O=T[0],B=T[1],j=this.findErrorLocations(O),z=this.findErrorMagnitudes(B,O,j);for(let X=0;X<j.length;X++){let Q=i.length-1-this.field.log(j[X]);if(Q<0)throw S.getChecksumInstance();i[Q]=this.field.subtract(i[Q],z[X])}return j.length}runEuclideanAlgorithm(i,a,l){if(i.getDegree()<a.getDegree()){let j=i;i=a,a=j}let c=i,f=a,p=this.field.getZero(),m=this.field.getOne();for(;f.getDegree()>=Math.round(l/2);){let j=c,z=p;if(c=f,p=m,c.isZero())throw S.getChecksumInstance();f=j;let X=this.field.getZero(),Q=c.getCoefficient(c.getDegree()),se=this.field.inverse(Q);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){let he=f.getDegree()-c.getDegree(),Ae=this.field.multiply(f.getCoefficient(f.getDegree()),se);X=X.add(this.field.buildMonomial(he,Ae)),f=f.subtract(c.multiplyByMonomial(he,Ae))}m=X.multiply(p).subtract(z).negative()}let C=m.getCoefficient(0);if(C===0)throw S.getChecksumInstance();let T=this.field.inverse(C),O=m.multiply(T),B=f.multiply(T);return[O,B]}findErrorLocations(i){let a=i.getDegree(),l=new Int32Array(a),c=0;for(let f=1;f<this.field.getSize()&&c<a;f++)i.evaluateAt(f)===0&&(l[c]=this.field.inverse(f),c++);if(c!==a)throw S.getChecksumInstance();return l}findErrorMagnitudes(i,a,l){let c=a.getDegree(),f=new Int32Array(c);for(let T=1;T<=c;T++)f[c-T]=this.field.multiply(T,a.getCoefficient(T));let p=new Mr(this.field,f),m=l.length,C=new Int32Array(m);for(let T=0;T<m;T++){let O=this.field.inverse(l[T]),B=this.field.subtract(0,i.evaluateAt(O)),j=this.field.inverse(p.evaluateAt(O));C[T]=this.field.multiply(B,j)}return C}}class Os{constructor(i,a,l,c,f){i instanceof Os?this.constructor_2(i):this.constructor_1(i,a,l,c,f)}constructor_1(i,a,l,c,f){const p=a==null||l==null,m=c==null||f==null;if(p&&m)throw new V;p?(a=new Oe(0,c.getY()),l=new Oe(0,f.getY())):m&&(c=new Oe(i.getWidth()-1,a.getY()),f=new Oe(i.getWidth()-1,l.getY())),this.image=i,this.topLeft=a,this.bottomLeft=l,this.topRight=c,this.bottomRight=f,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(c.getX(),f.getX())),this.minY=Math.trunc(Math.min(a.getY(),c.getY())),this.maxY=Math.trunc(Math.max(l.getY(),f.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,a){return i==null?a:a==null?i:new Os(i.image,i.topLeft,i.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(i,a,l){let c=this.topLeft,f=this.bottomLeft,p=this.topRight,m=this.bottomRight;if(i>0){let C=l?this.topLeft:this.topRight,T=Math.trunc(C.getY()-i);T<0&&(T=0);let O=new Oe(C.getX(),T);l?c=O:p=O}if(a>0){let C=l?this.bottomLeft:this.bottomRight,T=Math.trunc(C.getY()+a);T>=this.image.getHeight()&&(T=this.image.getHeight()-1);let O=new Oe(C.getX(),T);l?f=O:m=O}return new Os(this.image,c,f,p,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Xv{constructor(i,a,l,c){this.columnCount=i,this.errorCorrectionLevel=c,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class go{constructor(){this.buffer=""}static form(i,a){let l=-1;function c(p,m,C,T,O,B){if(p==="%%")return"%";if(a[++l]===void 0)return;p=T?parseInt(T.substr(1)):void 0;let j=O?parseInt(O.substr(1)):void 0,z;switch(B){case"s":z=a[l];break;case"c":z=a[l][0];break;case"f":z=parseFloat(a[l]).toFixed(p);break;case"p":z=parseFloat(a[l]).toPrecision(p);break;case"e":z=parseFloat(a[l]).toExponential(p);break;case"x":z=parseInt(a[l]).toString(j||16);break;case"d":z=parseFloat(parseInt(a[l],j||10).toPrecision(p)).toFixed(0);break}z=typeof z=="object"?JSON.stringify(z):(+z).toString(j);let X=parseInt(C),Q=C&&C[0]+""=="0"?"0":" ";for(;z.length<X;)z=m!==void 0?z+Q:Q+z;return z}let f=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(f,c)}format(i,...a){this.buffer+=go.form(i,a)}toString(){return this.buffer}}class mo{constructor(i){this.boundingBox=new Os(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let a=this.getCodeword(i);if(a!=null)return a;for(let l=1;l<mo.MAX_NEARBY_DISTANCE;l++){let c=this.imageRowToCodewordIndex(i)-l;if(c>=0&&(a=this.codewords[c],a!=null)||(c=this.imageRowToCodewordIndex(i)+l,c<this.codewords.length&&(a=this.codewords[c],a!=null)))return a}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,a){this.codewords[this.imageRowToCodewordIndex(i)]=a}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new go;let a=0;for(const l of this.codewords){if(l==null){i.format("%3d:    |   %n",a++);continue}i.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return i.toString()}}mo.MAX_NEARBY_DISTANCE=5;class yo{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let a=this.values.get(i);a==null&&(a=0),a++,this.values.set(i,a)}getValue(){let i=-1,a=new Array;for(const[l,c]of this.values.entries()){const f={getKey:()=>l,getValue:()=>c};f.getValue()>i?(i=f.getValue(),a=[],a.push(f.getKey())):f.getValue()===i&&a.push(f.getKey())}return et.toIntArray(a)}getConfidence(i){return this.values.get(i)}}class a0 extends mo{constructor(i,a){super(i),this._isLeft=a}setRowNumbers(){for(let i of this.getCodewords())i!=null&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,i);let l=this.getBoundingBox(),c=this._isLeft?l.getTopLeft():l.getTopRight(),f=this._isLeft?l.getBottomLeft():l.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.imageRowToCodewordIndex(Math.trunc(f.getY())),C=-1,T=1,O=0;for(let B=p;B<m;B++){if(a[B]==null)continue;let j=a[B],z=j.getRowNumber()-C;if(z===0)O++;else if(z===1)T=Math.max(T,O),O=1,C=j.getRowNumber();else if(z<0||j.getRowNumber()>=i.getRowCount()||z>B)a[B]=null;else{let X;T>2?X=(T-2)*z:X=z;let Q=X>=B;for(let se=1;se<=X&&!Q;se++)Q=a[B-se]!=null;Q?a[B]=null:(C=j.getRowNumber(),O=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let a=new Int32Array(i.getRowCount());for(let l of this.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=a.length)continue;a[c]++}return a}adjustIncompleteIndicatorColumnRowNumbers(i){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),c=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),m=this.getCodewords(),C=-1;for(let T=f;T<p;T++){if(m[T]==null)continue;let O=m[T];O.setRowNumberAsRowIndicatorColumn();let B=O.getRowNumber()-C;B===0||(B===1?C=O.getRowNumber():O.getRowNumber()>=i.getRowCount()?m[T]=null:C=O.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),a=new yo,l=new yo,c=new yo,f=new yo;for(let m of i){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let C=m.getValue()%30,T=m.getRowNumber();switch(this._isLeft||(T+=2),T%3){case 0:l.setValue(C*3+1);break;case 1:f.setValue(C/3),c.setValue(C%3);break;case 2:a.setValue(C+1);break}}if(a.getValue().length===0||l.getValue().length===0||c.getValue().length===0||f.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+c.getValue()[0]<et.MIN_ROWS_IN_BARCODE||l.getValue()[0]+c.getValue()[0]>et.MAX_ROWS_IN_BARCODE)return null;let p=new Xv(a.getValue()[0],l.getValue()[0],c.getValue()[0],f.getValue()[0]);return this.removeIncorrectCodewords(i,p),p}removeIncorrectCodewords(i,a){for(let l=0;l<i.length;l++){let c=i[l];if(i[l]==null)continue;let f=c.getValue()%30,p=c.getRowNumber();if(p>a.getRowCount()){i[l]=null;continue}switch(this._isLeft||(p+=2),p%3){case 0:f*3+1!==a.getRowCountUpperPart()&&(i[l]=null);break;case 1:(Math.trunc(f/3)!==a.getErrorCorrectionLevel()||f%3!==a.getRowCountLowerPart())&&(i[l]=null);break;case 2:f+1!==a.getColumnCount()&&(i[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class vo{constructor(i,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=et.MAX_CODEWORDS_IN_BARCODE,a;do a=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i!=null&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let c=0;c<l.length;c++)l[c]!=null&&(l[c].hasValidRowNumber()||this.adjustRowNumbers(a,c,l))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<i.length;l++)if(i[l]!=null&&a[l]!=null&&i[l].getRowNumber()===a[l].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let f=this.detectionResultColumns[c].getCodewords()[l];f!=null&&(f.setRowNumber(i[l].getRowNumber()),f.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let c=a[l].getRowNumber(),f=0;for(let p=this.barcodeColumnCount+1;p>0&&f<this.ADJUST_ROW_NUMBER_SKIP;p--){let m=this.detectionResultColumns[p].getCodewords()[l];m!=null&&(f=vo.adjustRowNumberIfValid(c,f,m),m.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let c=a[l].getRowNumber(),f=0;for(let p=1;p<this.barcodeColumnCount+1&&f<this.ADJUST_ROW_NUMBER_SKIP;p++){let m=this.detectionResultColumns[p].getCodewords()[l];m!=null&&(f=vo.adjustRowNumberIfValid(c,f,m),m.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(i)?(l.setRowNumber(i),a=0):++a),a}adjustRowNumbers(i,a,l){if(!this.detectionResultColumns[i-1])return;let c=l[a],f=this.detectionResultColumns[i-1].getCodewords(),p=f;this.detectionResultColumns[i+1]!=null&&(p=this.detectionResultColumns[i+1].getCodewords());let m=new Array(14);m[2]=f[a],m[3]=p[a],a>0&&(m[0]=l[a-1],m[4]=f[a-1],m[5]=p[a-1]),a>1&&(m[8]=l[a-2],m[10]=f[a-2],m[11]=p[a-2]),a<l.length-1&&(m[1]=l[a+1],m[6]=f[a+1],m[7]=p[a+1]),a<l.length-2&&(m[9]=l[a+2],m[12]=f[a+2],m[13]=p[a+2]);for(let C of m)if(vo.adjustRowNumber(c,C))return}static adjustRowNumber(i,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===i.getBucket()?(i.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,a){this.detectionResultColumns[i]=a}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new go;for(let l=0;l<i.getCodewords().length;l++){a.format("CW %3d:",l);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){a.format("    |   ");continue}let f=this.detectionResultColumns[c].getCodewords()[l];if(f==null){a.format("    |   ");continue}a.format(" %3d|%3d",f.getRowNumber(),f.getValue())}a.format("%n")}return a.toString()}}class xo{constructor(i,a,l,c){this.rowNumber=xo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==xo.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}xo.BARCODE_ROW_UNKNOWN=-1;class an{static initialize(){for(let i=0;i<et.SYMBOL_TABLE.length;i++){let a=et.SYMBOL_TABLE[i],l=a&1;for(let c=0;c<et.BARS_IN_MODULE;c++){let f=0;for(;(a&1)===l;)f+=1,a>>=1;l=a&1,an.RATIOS_TABLE[i]||(an.RATIOS_TABLE[i]=new Array(et.BARS_IN_MODULE)),an.RATIOS_TABLE[i][et.BARS_IN_MODULE-c-1]=Math.fround(f/et.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let a=an.getDecodedCodewordValue(an.sampleBitCounts(i));return a!==-1?a:an.getClosestDecodedValue(i)}static sampleBitCounts(i){let a=st.sum(i),l=new Int32Array(et.BARS_IN_MODULE),c=0,f=0;for(let p=0;p<et.MODULES_IN_CODEWORD;p++){let m=a/(2*et.MODULES_IN_CODEWORD)+p*a/et.MODULES_IN_CODEWORD;f+i[c]<=m&&(f+=i[c],c++),l[c]++}return l}static getDecodedCodewordValue(i){let a=an.getBitValue(i);return et.getCodeword(a)===-1?-1:a}static getBitValue(i){let a=0;for(let l=0;l<i.length;l++)for(let c=0;c<i[l];c++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(i){let a=st.sum(i),l=new Array(et.BARS_IN_MODULE);if(a>1)for(let p=0;p<l.length;p++)l[p]=Math.fround(i[p]/a);let c=pr.MAX_VALUE,f=-1;this.bSymbolTableReady||an.initialize();for(let p=0;p<an.RATIOS_TABLE.length;p++){let m=0,C=an.RATIOS_TABLE[p];for(let T=0;T<et.BARS_IN_MODULE;T++){let O=Math.fround(C[T]-l[T]);if(m+=Math.fround(O*O),m>=c)break}m<c&&(c=m,f=et.SYMBOL_TABLE[p])}return f}}an.bSymbolTableReady=!1,an.RATIOS_TABLE=new Array(et.SYMBOL_TABLE.length).map(M=>new Array(et.BARS_IN_MODULE));class o0{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class l0{static parseLong(i,a=void 0){return parseInt(i,a)}}class u0 extends d{}u0.kind="NullPointerException";class Yv{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,a,l){if(i==null)throw new u0;if(a<0||a>i.length||l<0||a+l>i.length||a+l<0)throw new b;if(l===0)return;for(let c=0;c<l;c++)this.write(i[a+c])}flush(){}close(){}}class Zv extends d{}class Qv extends Yv{constructor(i=32){if(super(),this.count=0,i<0)throw new v("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let l=this.buf.length<<1;if(l-i<0&&(l=i),l<0){if(i<0)throw new Zv;l=F.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,l)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,a,l){if(a<0||a>i.length||l<0||a+l-i.length>0)throw new b;this.ensureCapacity(this.count+l),A.arraycopy(i,a,this.buf,this.count,l),this.count+=l}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var kt;(function(M){M[M.ALPHA=0]="ALPHA",M[M.LOWER=1]="LOWER",M[M.MIXED=2]="MIXED",M[M.PUNCT=3]="PUNCT",M[M.ALPHA_SHIFT=4]="ALPHA_SHIFT",M[M.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(kt||(kt={}));function c0(){if(typeof window<"u")return window.BigInt||null;if(typeof So<"u")return So.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Hl;function Qi(M){if(typeof Hl>"u"&&(Hl=c0()),Hl===null)throw new Error("BigInt is not supported!");return Hl(M)}function Jv(){let M=[];M[0]=Qi(1);let i=Qi(900);M[1]=i;for(let a=2;a<16;a++)M[a]=M[a-1]*i;return M}class fe{static decode(i,a){let l=new ie(""),c=D.ISO8859_1;l.enableDecoding(c);let f=1,p=i[f++],m=new o0;for(;f<i[0];){switch(p){case fe.TEXT_COMPACTION_MODE_LATCH:f=fe.textCompaction(i,f,l);break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:f=fe.byteCompaction(p,i,c,f,l);break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(i[f++]);break;case fe.NUMERIC_COMPACTION_MODE_LATCH:f=fe.numericCompaction(i,f,l);break;case fe.ECI_CHARSET:D.getCharacterSetECIByValue(i[f++]);break;case fe.ECI_GENERAL_PURPOSE:f+=2;break;case fe.ECI_USER_DEFINED:f++;break;case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:f=fe.decodeMacroBlock(i,f,m);break;case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:throw new R;default:f--,f=fe.textCompaction(i,f,l);break}if(f<i.length)p=i[f++];else throw R.getFormatInstance()}if(l.length()===0)throw R.getFormatInstance();let C=new ke(null,l.toString(),null,a);return C.setOther(m),C}static decodeMacroBlock(i,a,l){if(a+fe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw R.getFormatInstance();let c=new Int32Array(fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<fe.NUMBER_OF_SEQUENCE_CODEWORDS;m++,a++)c[m]=i[a];l.setSegmentIndex(F.parseInt(fe.decodeBase900toBase10(c,fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let f=new ie;a=fe.textCompaction(i,a,f),l.setFileId(f.toString());let p=-1;for(i[a]===fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(p=a+1);a<i[0];)switch(i[a]){case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,i[a]){case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new ie;a=fe.textCompaction(i,a+1,m),l.setFileName(m.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let C=new ie;a=fe.textCompaction(i,a+1,C),l.setSender(C.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let T=new ie;a=fe.textCompaction(i,a+1,T),l.setAddressee(T.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let O=new ie;a=fe.numericCompaction(i,a+1,O),l.setSegmentCount(F.parseInt(O.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let B=new ie;a=fe.numericCompaction(i,a+1,B),l.setTimestamp(l0.parseLong(B.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let j=new ie;a=fe.numericCompaction(i,a+1,j),l.setChecksum(F.parseInt(j.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let z=new ie;a=fe.numericCompaction(i,a+1,z),l.setFileSize(l0.parseLong(z.toString()));break;default:throw R.getFormatInstance()}break;case fe.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw R.getFormatInstance()}if(p!==-1){let m=a-p;l.isLastSegment()&&m--,l.setOptionalData(N.copyOfRange(i,p,p+m))}return a}static textCompaction(i,a,l){let c=new Int32Array((i[0]-a)*2),f=new Int32Array((i[0]-a)*2),p=0,m=!1;for(;a<i[0]&&!m;){let C=i[a++];if(C<fe.TEXT_COMPACTION_MODE_LATCH)c[p]=C/30,c[p+1]=C%30,p+=2;else switch(C){case fe.TEXT_COMPACTION_MODE_LATCH:c[p++]=fe.TEXT_COMPACTION_MODE_LATCH;break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:a--,m=!0;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[p]=fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,C=i[a++],f[p]=C,p++;break}}return fe.decodeTextCompaction(c,f,p,l),a}static decodeTextCompaction(i,a,l,c){let f=kt.ALPHA,p=kt.ALPHA,m=0;for(;m<l;){let C=i[m],T="";switch(f){case kt.ALPHA:if(C<26)T=String.fromCharCode(65+C);else switch(C){case 26:T=" ";break;case fe.LL:f=kt.LOWER;break;case fe.ML:f=kt.MIXED;break;case fe.PS:p=f,f=kt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=kt.ALPHA;break}break;case kt.LOWER:if(C<26)T=String.fromCharCode(97+C);else switch(C){case 26:T=" ";break;case fe.AS:p=f,f=kt.ALPHA_SHIFT;break;case fe.ML:f=kt.MIXED;break;case fe.PS:p=f,f=kt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=kt.ALPHA;break}break;case kt.MIXED:if(C<fe.PL)T=fe.MIXED_CHARS[C];else switch(C){case fe.PL:f=kt.PUNCT;break;case 26:T=" ";break;case fe.LL:f=kt.LOWER;break;case fe.AL:f=kt.ALPHA;break;case fe.PS:p=f,f=kt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=kt.ALPHA;break}break;case kt.PUNCT:if(C<fe.PAL)T=fe.PUNCT_CHARS[C];else switch(C){case fe.PAL:f=kt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=kt.ALPHA;break}break;case kt.ALPHA_SHIFT:if(f=p,C<26)T=String.fromCharCode(65+C);else switch(C){case 26:T=" ";break;case fe.TEXT_COMPACTION_MODE_LATCH:f=kt.ALPHA;break}break;case kt.PUNCT_SHIFT:if(f=p,C<fe.PAL)T=fe.PUNCT_CHARS[C];else switch(C){case fe.PAL:f=kt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(a[m]);break;case fe.TEXT_COMPACTION_MODE_LATCH:f=kt.ALPHA;break}break}T!==""&&c.append(T),m++}}static byteCompaction(i,a,l,c,f){let p=new Qv,m=0,C=0,T=!1;switch(i){case fe.BYTE_COMPACTION_MODE_LATCH:let O=new Int32Array(6),B=a[c++];for(;c<a[0]&&!T;)switch(O[m++]=B,C=900*C+B,B=a[c++],B){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:c--,T=!0;break;default:if(m%5===0&&m>0){for(let j=0;j<6;++j)p.write(Number(Qi(C)>>Qi(8*(5-j))));C=0,m=0}break}c===a[0]&&B<fe.TEXT_COMPACTION_MODE_LATCH&&(O[m++]=B);for(let j=0;j<m;j++)p.write(O[j]);break;case fe.BYTE_COMPACTION_MODE_LATCH_6:for(;c<a[0]&&!T;){let j=a[c++];if(j<fe.TEXT_COMPACTION_MODE_LATCH)m++,C=900*C+j;else switch(j){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:c--,T=!0;break}if(m%5===0&&m>0){for(let z=0;z<6;++z)p.write(Number(Qi(C)>>Qi(8*(5-z))));C=0,m=0}}break}return f.append(W.decode(p.toByteArray(),l)),c}static numericCompaction(i,a,l){let c=0,f=!1,p=new Int32Array(fe.MAX_NUMERIC_CODEWORDS);for(;a<i[0]&&!f;){let m=i[a++];if(a===i[0]&&(f=!0),m<fe.TEXT_COMPACTION_MODE_LATCH)p[c]=m,c++;else switch(m){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:a--,f=!0;break}(c%fe.MAX_NUMERIC_CODEWORDS===0||m===fe.NUMERIC_COMPACTION_MODE_LATCH||f)&&c>0&&(l.append(fe.decodeBase900toBase10(p,c)),c=0)}return a}static decodeBase900toBase10(i,a){let l=Qi(0);for(let f=0;f<a;f++)l+=fe.EXP900[a-f-1]*Qi(i[f]);let c=l.toString();if(c.charAt(0)!=="1")throw new R;return c.substring(1)}}fe.TEXT_COMPACTION_MODE_LATCH=900,fe.BYTE_COMPACTION_MODE_LATCH=901,fe.NUMERIC_COMPACTION_MODE_LATCH=902,fe.BYTE_COMPACTION_MODE_LATCH_6=924,fe.ECI_USER_DEFINED=925,fe.ECI_GENERAL_PURPOSE=926,fe.ECI_CHARSET=927,fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fe.MACRO_PDF417_TERMINATOR=922,fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fe.MAX_NUMERIC_CODEWORDS=15,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fe.PL=25,fe.LL=27,fe.AS=27,fe.ML=28,fe.AL=28,fe.PS=29,fe.PAL=29,fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",fe.EXP900=c0()?Jv():[],fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ft{constructor(){}static decode(i,a,l,c,f,p,m){let C=new Os(i,a,l,c,f),T=null,O=null,B;for(let X=!0;;X=!1){if(a!=null&&(T=ft.getRowIndicatorColumn(i,C,a,!0,p,m)),c!=null&&(O=ft.getRowIndicatorColumn(i,C,c,!1,p,m)),B=ft.merge(T,O),B==null)throw V.getNotFoundInstance();let Q=B.getBoundingBox();if(X&&Q!=null&&(Q.getMinY()<C.getMinY()||Q.getMaxY()>C.getMaxY()))C=Q;else break}B.setBoundingBox(C);let j=B.getBarcodeColumnCount()+1;B.setDetectionResultColumn(0,T),B.setDetectionResultColumn(j,O);let z=T!=null;for(let X=1;X<=j;X++){let Q=z?X:j-X;if(B.getDetectionResultColumn(Q)!==void 0)continue;let se;Q===0||Q===j?se=new a0(C,Q===0):se=new mo(C),B.setDetectionResultColumn(Q,se);let he=-1,Ae=he;for(let Ce=C.getMinY();Ce<=C.getMaxY();Ce++){if(he=ft.getStartColumn(B,Q,Ce,z),he<0||he>C.getMaxX()){if(Ae===-1)continue;he=Ae}let xe=ft.detectCodeword(i,C.getMinX(),C.getMaxX(),z,he,Ce,p,m);xe!=null&&(se.setCodeword(Ce,xe),Ae=he,p=Math.min(p,xe.getWidth()),m=Math.max(m,xe.getWidth()))}}return ft.createDecoderResult(B)}static merge(i,a){if(i==null&&a==null)return null;let l=ft.getBarcodeMetadata(i,a);if(l==null)return null;let c=Os.merge(ft.adjustBoundingBox(i),ft.adjustBoundingBox(a));return new vo(l,c)}static adjustBoundingBox(i){if(i==null)return null;let a=i.getRowHeights();if(a==null)return null;let l=ft.getMax(a),c=0;for(let m of a)if(c+=l-m,m>0)break;let f=i.getCodewords();for(let m=0;c>0&&f[m]==null;m++)c--;let p=0;for(let m=a.length-1;m>=0&&(p+=l-a[m],!(a[m]>0));m--);for(let m=f.length-1;p>0&&f[m]==null;m--)p--;return i.getBoundingBox().addMissingRows(c,p,i.isLeft())}static getMax(i){let a=-1;for(let l of i)a=Math.max(a,l);return a}static getBarcodeMetadata(i,a){let l;if(i==null||(l=i.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let c;return a==null||(c=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==c.getColumnCount()&&l.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&l.getRowCount()!==c.getRowCount()?null:l}static getRowIndicatorColumn(i,a,l,c,f,p){let m=new a0(a,c);for(let C=0;C<2;C++){let T=C===0?1:-1,O=Math.trunc(Math.trunc(l.getX()));for(let B=Math.trunc(Math.trunc(l.getY()));B<=a.getMaxY()&&B>=a.getMinY();B+=T){let j=ft.detectCodeword(i,0,i.getWidth(),c,O,B,f,p);j!=null&&(m.setCodeword(B,j),c?O=j.getStartX():O=j.getEndX())}}return m}static adjustCodewordCount(i,a){let l=a[0][1],c=l.getValue(),f=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ft.getNumberOfECCodeWords(i.getBarcodeECLevel());if(c.length===0){if(f<1||f>et.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();l.setValue(f)}else c[0]!==f&&l.setValue(f)}static createDecoderResult(i){let a=ft.createBarcodeMatrix(i);ft.adjustCodewordCount(i,a);let l=new Array,c=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),f=[],p=new Array;for(let C=0;C<i.getBarcodeRowCount();C++)for(let T=0;T<i.getBarcodeColumnCount();T++){let O=a[C][T+1].getValue(),B=C*i.getBarcodeColumnCount()+T;O.length===0?l.push(B):O.length===1?c[B]=O[0]:(p.push(B),f.push(O))}let m=new Array(f.length);for(let C=0;C<m.length;C++)m[C]=f[C];return ft.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),c,et.toIntArray(l),et.toIntArray(p),m)}static createDecoderResultFromAmbiguousValues(i,a,l,c,f){let p=new Int32Array(c.length),m=100;for(;m-- >0;){for(let C=0;C<p.length;C++)a[c[C]]=f[C][p[C]];try{return ft.decodeCodewords(a,i,l)}catch(C){if(!(C instanceof S))throw C}if(p.length===0)throw S.getChecksumInstance();for(let C=0;C<p.length;C++)if(p[C]<f[C].length-1){p[C]++;break}else if(p[C]=0,C===p.length-1)throw S.getChecksumInstance()}throw S.getChecksumInstance()}static createBarcodeMatrix(i){let a=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let c=0;c<a.length;c++)for(let f=0;f<a[c].length;f++)a[c][f]=new yo;let l=0;for(let c of i.getDetectionResultColumns()){if(c!=null){for(let f of c.getCodewords())if(f!=null){let p=f.getRowNumber();if(p>=0){if(p>=a.length)continue;a[p][l].setValue(f.getValue())}}}l++}return a}static isValidBarcodeColumn(i,a){return a>=0&&a<=i.getBarcodeColumnCount()+1}static getStartColumn(i,a,l,c){let f=c?1:-1,p=null;if(ft.isValidBarcodeColumn(i,a-f)&&(p=i.getDetectionResultColumn(a-f).getCodeword(l)),p!=null)return c?p.getEndX():p.getStartX();if(p=i.getDetectionResultColumn(a).getCodewordNearby(l),p!=null)return c?p.getStartX():p.getEndX();if(ft.isValidBarcodeColumn(i,a-f)&&(p=i.getDetectionResultColumn(a-f).getCodewordNearby(l)),p!=null)return c?p.getEndX():p.getStartX();let m=0;for(;ft.isValidBarcodeColumn(i,a-f);){a-=f;for(let C of i.getDetectionResultColumn(a).getCodewords())if(C!=null)return(c?C.getEndX():C.getStartX())+f*m*(C.getEndX()-C.getStartX());m++}return c?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,a,l,c,f,p,m,C){f=ft.adjustCodewordStartColumn(i,a,l,c,f,p);let T=ft.getModuleBitCount(i,a,l,c,f,p);if(T==null)return null;let O,B=st.sum(T);if(c)O=f+B;else{for(let X=0;X<T.length/2;X++){let Q=T[X];T[X]=T[T.length-1-X],T[T.length-1-X]=Q}O=f,f=O-B}if(!ft.checkCodewordSkew(B,m,C))return null;let j=an.getDecodedValue(T),z=et.getCodeword(j);return z===-1?null:new xo(f,O,ft.getCodewordBucketNumber(j),z)}static getModuleBitCount(i,a,l,c,f,p){let m=f,C=new Int32Array(8),T=0,O=c?1:-1,B=c;for(;(c?m<l:m>=a)&&T<C.length;)i.get(m,p)===B?(C[T]++,m+=O):(T++,B=!B);return T===C.length||m===(c?l:a)&&T===C.length-1?C:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,a,l,c,f,p){let m=f,C=c?-1:1;for(let T=0;T<2;T++){for(;(c?m>=a:m<l)&&c===i.get(m,p);){if(Math.abs(f-m)>ft.CODEWORD_SKEW_SIZE)return f;m+=C}C=-C,c=!c}return m}static checkCodewordSkew(i,a,l){return a-ft.CODEWORD_SKEW_SIZE<=i&&i<=l+ft.CODEWORD_SKEW_SIZE}static decodeCodewords(i,a,l){if(i.length===0)throw R.getFormatInstance();let c=1<<a+1,f=ft.correctErrors(i,l,c);ft.verifyCodewordCount(i,c);let p=fe.decode(i,""+a);return p.setErrorsCorrected(f),p.setErasures(l.length),p}static correctErrors(i,a,l){if(a!=null&&a.length>l/2+ft.MAX_ERRORS||l<0||l>ft.MAX_EC_CODEWORDS)throw S.getChecksumInstance();return ft.errorCorrection.decode(i,l,a)}static verifyCodewordCount(i,a){if(i.length<4)throw R.getFormatInstance();let l=i[0];if(l>i.length)throw R.getFormatInstance();if(l===0)if(a<i.length)i[0]=i.length-a;else throw R.getFormatInstance()}static getBitCountForCodeword(i){let a=new Int32Array(8),l=0,c=a.length-1;for(;!((i&1)!==l&&(l=i&1,c--,c<0));)a[c]++,i>>=1;return a}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ft.getCodewordBucketNumber(ft.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let a=new go;for(let l=0;l<i.length;l++){a.format("Row %2d: ",l);for(let c=0;c<i[l].length;c++){let f=i[l][c];f.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",f.getValue()[0],f.getConfidence(f.getValue()[0]))}a.format("%n")}return a.toString()}}ft.CODEWORD_SKEW_SIZE=2,ft.MAX_ERRORS=3,ft.MAX_EC_CODEWORDS=512,ft.errorCorrection=new s0;class Br{decode(i,a=null){let l=Br.decode(i,a,!1);if(l==null||l.length===0||l[0]==null)throw V.getNotFoundInstance();return l[0]}decodeMultiple(i,a=null){try{return Br.decode(i,a,!0)}catch(l){throw l instanceof R||l instanceof S?V.getNotFoundInstance():l}}static decode(i,a,l){const c=new Array,f=ct.detectMultiple(i,a,l);for(const p of f.getPoints()){const m=ft.decode(f.getBits(),p[4],p[5],p[6],p[7],Br.getMinCodewordWidth(p),Br.getMaxCodewordWidth(p)),C=new U(m.getText(),m.getRawBytes(),void 0,p,J.PDF_417);C.putMetadata(ye.ERROR_CORRECTION_LEVEL,m.getECLevel());const T=m.getOther();T!=null&&C.putMetadata(ye.PDF417_EXTRA_METADATA,T),c.push(C)}return c.map(p=>p)}static getMaxWidth(i,a){return i==null||a==null?0:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMinWidth(i,a){return i==null||a==null?F.MAX_VALUE:Math.trunc(Math.abs(i.getX()-a.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Br.getMaxWidth(i[0],i[4]),Br.getMaxWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.max(Br.getMaxWidth(i[1],i[5]),Br.getMaxWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Br.getMinWidth(i[0],i[4]),Br.getMinWidth(i[6],i[2])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN),Math.min(Br.getMinWidth(i[1],i[5]),Br.getMinWidth(i[7],i[3])*et.MODULES_IN_CODEWORD/et.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ul extends d{}Ul.kind="ReaderException";class f0{constructor(i,a){this.verbose=i===!0,a&&this.setHints(a)}decode(i,a){return a&&this.setHints(a),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const a=!n(i)&&i.get(_.TRY_HARDER)===!0,l=n(i)?null:i.get(_.POSSIBLE_FORMATS),c=new Array;if(!n(l)){const f=l.some(p=>p===J.UPC_A||p===J.UPC_E||p===J.EAN_13||p===J.EAN_8||p===J.CODABAR||p===J.CODE_39||p===J.CODE_93||p===J.CODE_128||p===J.ITF||p===J.RSS_14||p===J.RSS_EXPANDED);f&&!a&&c.push(new Xn(i,this.verbose)),l.includes(J.QR_CODE)&&c.push(new Zi),l.includes(J.DATA_MATRIX)&&c.push(new Yi),l.includes(J.AZTEC)&&c.push(new Ni),l.includes(J.PDF_417)&&c.push(new Br),f&&a&&c.push(new Xn(i,this.verbose))}c.length===0&&(a||c.push(new Xn(i,this.verbose)),c.push(new Zi),c.push(new Yi),c.push(new Ni),c.push(new Br),a&&c.push(new Xn(i,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Ul("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(i,this.hints)}catch(l){if(l instanceof Ul)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class ex extends ne{constructor(i=null,a=500){const l=new f0;l.setHints(i),super(l,a)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class tx extends ne{constructor(i=500){super(new Br,i)}}class rx extends ne{constructor(i=500){super(new Zi,i)}}var sf;(function(M){M[M.ERROR_CORRECTION=0]="ERROR_CORRECTION",M[M.CHARACTER_SET=1]="CHARACTER_SET",M[M.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",M[M.MIN_SIZE=3]="MIN_SIZE",M[M.MAX_SIZE=4]="MAX_SIZE",M[M.MARGIN=5]="MARGIN",M[M.PDF417_COMPACT=6]="PDF417_COMPACT",M[M.PDF417_COMPACTION=7]="PDF417_COMPACTION",M[M.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",M[M.AZTEC_LAYERS=9]="AZTEC_LAYERS",M[M.QR_VERSION=10]="QR_VERSION"})(sf||(sf={}));var Cr=sf;class af{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Ye(i,Int32Array.from([1])))}buildGenerator(i){const a=this.cachedGenerators;if(i>=a.length){let l=a[a.length-1];const c=this.field;for(let f=a.length;f<=i;f++){const p=l.multiply(new Ye(c,Int32Array.from([1,c.exp(f-1+c.getGeneratorBase())])));a.push(p),l=p}}return a[i]}encode(i,a){if(a===0)throw new v("No error correction bytes");const l=i.length-a;if(l<=0)throw new v("No data bytes provided");const c=this.buildGenerator(a),f=new Int32Array(l);A.arraycopy(i,0,f,0,l);let p=new Ye(this.field,f);p=p.multiplyByMonomial(a,1);const C=p.divide(c)[1].getCoefficients(),T=a-C.length;for(let O=0;O<T;O++)i[l+O]=0;A.arraycopy(C,0,i,l+T,C.length)}}class ur{constructor(){}static applyMaskPenaltyRule1(i){return ur.applyMaskPenaltyRule1Internal(i,!0)+ur.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let a=0;const l=i.getArray(),c=i.getWidth(),f=i.getHeight();for(let p=0;p<f-1;p++){const m=l[p];for(let C=0;C<c-1;C++){const T=m[C];T===m[C+1]&&T===l[p+1][C]&&T===l[p+1][C+1]&&a++}}return ur.N2*a}static applyMaskPenaltyRule3(i){let a=0;const l=i.getArray(),c=i.getWidth(),f=i.getHeight();for(let p=0;p<f;p++)for(let m=0;m<c;m++){const C=l[p];m+6<c&&C[m]===1&&C[m+1]===0&&C[m+2]===1&&C[m+3]===1&&C[m+4]===1&&C[m+5]===0&&C[m+6]===1&&(ur.isWhiteHorizontal(C,m-4,m)||ur.isWhiteHorizontal(C,m+7,m+11))&&a++,p+6<f&&l[p][m]===1&&l[p+1][m]===0&&l[p+2][m]===1&&l[p+3][m]===1&&l[p+4][m]===1&&l[p+5][m]===0&&l[p+6][m]===1&&(ur.isWhiteVertical(l,m,p-4,p)||ur.isWhiteVertical(l,m,p+7,p+11))&&a++}return a*ur.N3}static isWhiteHorizontal(i,a,l){a=Math.max(a,0),l=Math.min(l,i.length);for(let c=a;c<l;c++)if(i[c]===1)return!1;return!0}static isWhiteVertical(i,a,l,c){l=Math.max(l,0),c=Math.min(c,i.length);for(let f=l;f<c;f++)if(i[f][a]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let a=0;const l=i.getArray(),c=i.getWidth(),f=i.getHeight();for(let C=0;C<f;C++){const T=l[C];for(let O=0;O<c;O++)T[O]===1&&a++}const p=i.getHeight()*i.getWidth();return Math.floor(Math.abs(a*2-p)*10/p)*ur.N4}static getDataMaskBit(i,a,l){let c,f;switch(i){case 0:c=l+a&1;break;case 1:c=l&1;break;case 2:c=a%3;break;case 3:c=(l+a)%3;break;case 4:c=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:f=l*a,c=(f&1)+f%3;break;case 6:f=l*a,c=(f&1)+f%3&1;break;case 7:f=l*a,c=f%3+(l+a&1)&1;break;default:throw new v("Invalid mask pattern: "+i)}return c===0}static applyMaskPenaltyRule1Internal(i,a){let l=0;const c=a?i.getHeight():i.getWidth(),f=a?i.getWidth():i.getHeight(),p=i.getArray();for(let m=0;m<c;m++){let C=0,T=-1;for(let O=0;O<f;O++){const B=a?p[m][O]:p[O][m];B===T?C++:(C>=5&&(l+=ur.N1+(C-5)),C=1,T=B)}C>=5&&(l+=ur.N1+(C-5))}return l}}ur.N1=3,ur.N2=3,ur.N3=40,ur.N4=10;class Vl{constructor(i,a){this.width=i,this.height=a;const l=new Array(a);for(let c=0;c!==a;c++)l[c]=new Uint8Array(i);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(i,a){return this.bytes[a][i]}getArray(){return this.bytes}setNumber(i,a,l){this.bytes[a][i]=l}setBoolean(i,a,l){this.bytes[a][i]=l?1:0}clear(i){for(const a of this.bytes)N.fill(a,i)}equals(i){if(!(i instanceof Vl))return!1;const a=i;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,c=this.height;l<c;++l){const f=this.bytes[l],p=a.bytes[l];for(let m=0,C=this.width;m<C;++m)if(f[m]!==p[m])return!1}return!0}toString(){const i=new ie;for(let a=0,l=this.height;a<l;++a){const c=this.bytes[a];for(let f=0,p=this.width;f<p;++f)switch(c[f]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class Fs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new ie;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<Fs.NUM_MASK_PATTERNS}}Fs.NUM_MASK_PATTERNS=8;class Vt extends d{}Vt.kind="WriterException";class Xe{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,a,l,c,f){Xe.clearMatrix(f),Xe.embedBasicPatterns(l,f),Xe.embedTypeInfo(a,c,f),Xe.maybeEmbedVersionInfo(l,f),Xe.embedDataBits(i,c,f)}static embedBasicPatterns(i,a){Xe.embedPositionDetectionPatternsAndSeparators(a),Xe.embedDarkDotAtLeftBottomCorner(a),Xe.maybeEmbedPositionAdjustmentPatterns(i,a),Xe.embedTimingPatterns(a)}static embedTypeInfo(i,a,l){const c=new L;Xe.makeTypeInfoBits(i,a,c);for(let f=0,p=c.getSize();f<p;++f){const m=c.get(c.getSize()-1-f),C=Xe.TYPE_INFO_COORDINATES[f],T=C[0],O=C[1];if(l.setBoolean(T,O,m),f<8){const B=l.getWidth()-f-1;l.setBoolean(B,8,m)}else{const j=l.getHeight()-7+(f-8);l.setBoolean(8,j,m)}}}static maybeEmbedVersionInfo(i,a){if(i.getVersionNumber()<7)return;const l=new L;Xe.makeVersionInfoBits(i,l);let c=6*3-1;for(let f=0;f<6;++f)for(let p=0;p<3;++p){const m=l.get(c);c--,a.setBoolean(f,a.getHeight()-11+p,m),a.setBoolean(a.getHeight()-11+p,f,m)}}static embedDataBits(i,a,l){let c=0,f=-1,p=l.getWidth()-1,m=l.getHeight()-1;for(;p>0;){for(p===6&&(p-=1);m>=0&&m<l.getHeight();){for(let C=0;C<2;++C){const T=p-C;if(!Xe.isEmpty(l.get(T,m)))continue;let O;c<i.getSize()?(O=i.get(c),++c):O=!1,a!==255&&ur.getDataMaskBit(a,T,m)&&(O=!O),l.setBoolean(T,m,O)}m+=f}f=-f,m+=f,p-=2}if(c!==i.getSize())throw new Vt("Not all bits consumed: "+c+"/"+i.getSize())}static findMSBSet(i){return 32-F.numberOfLeadingZeros(i)}static calculateBCHCode(i,a){if(a===0)throw new v("0 polynomial");const l=Xe.findMSBSet(a);for(i<<=l-1;Xe.findMSBSet(i)>=l;)i^=a<<Xe.findMSBSet(i)-l;return i}static makeTypeInfoBits(i,a,l){if(!Fs.isValidMaskPattern(a))throw new Vt("Invalid mask pattern");const c=i.getBits()<<3|a;l.appendBits(c,5);const f=Xe.calculateBCHCode(c,Xe.TYPE_INFO_POLY);l.appendBits(f,10);const p=new L;if(p.appendBits(Xe.TYPE_INFO_MASK_PATTERN,15),l.xor(p),l.getSize()!==15)throw new Vt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(i,a){a.appendBits(i.getVersionNumber(),6);const l=Xe.calculateBCHCode(i.getVersionNumber(),Xe.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Vt("should not happen but we got: "+a.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let a=8;a<i.getWidth()-8;++a){const l=(a+1)%2;Xe.isEmpty(i.get(a,6))&&i.setNumber(a,6,l),Xe.isEmpty(i.get(6,a))&&i.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Vt;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,a,l){for(let c=0;c<8;++c){if(!Xe.isEmpty(l.get(i+c,a)))throw new Vt;l.setNumber(i+c,a,0)}}static embedVerticalSeparationPattern(i,a,l){for(let c=0;c<7;++c){if(!Xe.isEmpty(l.get(i,a+c)))throw new Vt;l.setNumber(i,a+c,0)}}static embedPositionAdjustmentPattern(i,a,l){for(let c=0;c<5;++c){const f=Xe.POSITION_ADJUSTMENT_PATTERN[c];for(let p=0;p<5;++p)l.setNumber(i+p,a+c,f[p])}}static embedPositionDetectionPattern(i,a,l){for(let c=0;c<7;++c){const f=Xe.POSITION_DETECTION_PATTERN[c];for(let p=0;p<7;++p)l.setNumber(i+p,a+c,f[p])}}static embedPositionDetectionPatternsAndSeparators(i){const a=Xe.POSITION_DETECTION_PATTERN[0].length;Xe.embedPositionDetectionPattern(0,0,i),Xe.embedPositionDetectionPattern(i.getWidth()-a,0,i),Xe.embedPositionDetectionPattern(0,i.getWidth()-a,i);const l=8;Xe.embedHorizontalSeparationPattern(0,l-1,i),Xe.embedHorizontalSeparationPattern(i.getWidth()-l,l-1,i),Xe.embedHorizontalSeparationPattern(0,i.getWidth()-l,i);const c=7;Xe.embedVerticalSeparationPattern(c,0,i),Xe.embedVerticalSeparationPattern(i.getHeight()-c-1,0,i),Xe.embedVerticalSeparationPattern(c,i.getHeight()-c,i)}static maybeEmbedPositionAdjustmentPatterns(i,a){if(i.getVersionNumber()<2)return;const l=i.getVersionNumber()-1,c=Xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let f=0,p=c.length;f!==p;f++){const m=c[f];if(m>=0)for(let C=0;C!==p;C++){const T=c[C];T>=0&&Xe.isEmpty(a.get(T,m))&&Xe.embedPositionAdjustmentPattern(T-2,m-2,a)}}}}Xe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Xe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Xe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Xe.VERSION_INFO_POLY=7973,Xe.TYPE_INFO_POLY=1335,Xe.TYPE_INFO_MASK_PATTERN=21522;class nx{constructor(i,a){this.dataBytes=i,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class qt{constructor(){}static calculateMaskPenalty(i){return ur.applyMaskPenaltyRule1(i)+ur.applyMaskPenaltyRule2(i)+ur.applyMaskPenaltyRule3(i)+ur.applyMaskPenaltyRule4(i)}static encode(i,a,l=null){let c=qt.DEFAULT_BYTE_MODE_ENCODING;const f=l!==null&&l.get(Cr.CHARACTER_SET)!==void 0;f&&(c=l.get(Cr.CHARACTER_SET).toString());const p=this.chooseMode(i,c),m=new L;if(p===We.BYTE&&(f||qt.DEFAULT_BYTE_MODE_ENCODING!==c)){const Ce=D.getCharacterSetECIByName(c);Ce!==void 0&&this.appendECI(Ce,m)}this.appendModeInfo(p,m);const C=new L;this.appendBytes(i,p,C,c);let T;if(l!==null&&l.get(Cr.QR_VERSION)!==void 0){const Ce=Number.parseInt(l.get(Cr.QR_VERSION).toString(),10);T=$e.getVersionForNumber(Ce);const xe=this.calculateBitsNeeded(p,m,C,T);if(!this.willFit(xe,T,a))throw new Vt("Data too big for requested version")}else T=this.recommendVersion(a,p,m,C);const O=new L;O.appendBitArray(m);const B=p===We.BYTE?C.getSizeInBytes():i.length;this.appendLengthInfo(B,T,p,O),O.appendBitArray(C);const j=T.getECBlocksForLevel(a),z=T.getTotalCodewords()-j.getTotalECCodewords();this.terminateBits(z,O);const X=this.interleaveWithECBytes(O,T.getTotalCodewords(),z,j.getNumBlocks()),Q=new Fs;Q.setECLevel(a),Q.setMode(p),Q.setVersion(T);const se=T.getDimensionForVersion(),he=new Vl(se,se),Ae=this.chooseMaskPattern(X,a,T,he);return Q.setMaskPattern(Ae),Xe.buildMatrix(X,a,T,Ae,he),Q.setMatrix(he),Q}static recommendVersion(i,a,l,c){const f=this.calculateBitsNeeded(a,l,c,$e.getVersionForNumber(1)),p=this.chooseVersion(f,i),m=this.calculateBitsNeeded(a,l,c,p);return this.chooseVersion(m,i)}static calculateBitsNeeded(i,a,l,c){return a.getSize()+i.getCharacterCountBits(c)+l.getSize()}static getAlphanumericCode(i){return i<qt.ALPHANUMERIC_TABLE.length?qt.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,a=null){if(D.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(i))return We.KANJI;let l=!1,c=!1;for(let f=0,p=i.length;f<p;++f){const m=i.charAt(f);if(qt.isDigit(m))l=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)c=!0;else return We.BYTE}return c?We.ALPHANUMERIC:l?We.NUMERIC:We.BYTE}static isOnlyDoubleByteKanji(i){let a;try{a=W.encode(i,D.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let c=0;c<l;c+=2){const f=a[c]&255;if((f<129||f>159)&&(f<224||f>235))return!1}return!0}static chooseMaskPattern(i,a,l,c){let f=Number.MAX_SAFE_INTEGER,p=-1;for(let m=0;m<Fs.NUM_MASK_PATTERNS;m++){Xe.buildMatrix(i,a,l,m,c);let C=this.calculateMaskPenalty(c);C<f&&(f=C,p=m)}return p}static chooseVersion(i,a){for(let l=1;l<=40;l++){const c=$e.getVersionForNumber(l);if(qt.willFit(i,c,a))return c}throw new Vt("Data too big")}static willFit(i,a,l){const c=a.getTotalCodewords(),p=a.getECBlocksForLevel(l).getTotalECCodewords(),m=c-p,C=(i+7)/8;return m>=C}static terminateBits(i,a){const l=i*8;if(a.getSize()>l)throw new Vt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let p=0;p<4&&a.getSize()<l;++p)a.appendBit(!1);const c=a.getSize()&7;if(c>0)for(let p=c;p<8;p++)a.appendBit(!1);const f=i-a.getSizeInBytes();for(let p=0;p<f;++p)a.appendBits(p&1?17:236,8);if(a.getSize()!==l)throw new Vt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,a,l,c,f,p){if(c>=l)throw new Vt("Block ID too large");const m=i%l,C=l-m,T=Math.floor(i/l),O=T+1,B=Math.floor(a/l),j=B+1,z=T-B,X=O-j;if(z!==X)throw new Vt("EC bytes mismatch");if(l!==C+m)throw new Vt("RS blocks mismatch");if(i!==(B+z)*C+(j+X)*m)throw new Vt("Total bytes mismatch");c<C?(f[0]=B,p[0]=z):(f[0]=j,p[0]=X)}static interleaveWithECBytes(i,a,l,c){if(i.getSizeInBytes()!==l)throw new Vt("Number of bits and data bytes does not match");let f=0,p=0,m=0;const C=new Array;for(let O=0;O<c;++O){const B=new Int32Array(1),j=new Int32Array(1);qt.getNumDataBytesAndNumECBytesForBlockID(a,l,c,O,B,j);const z=B[0],X=new Uint8Array(z);i.toBytes(8*f,X,0,z);const Q=qt.generateECBytes(X,j[0]);C.push(new nx(X,Q)),p=Math.max(p,z),m=Math.max(m,Q.length),f+=B[0]}if(l!==f)throw new Vt("Data bytes does not match offset");const T=new L;for(let O=0;O<p;++O)for(const B of C){const j=B.getDataBytes();O<j.length&&T.appendBits(j[O],8)}for(let O=0;O<m;++O)for(const B of C){const j=B.getErrorCorrectionBytes();O<j.length&&T.appendBits(j[O],8)}if(a!==T.getSizeInBytes())throw new Vt("Interleaving error: "+a+" and "+T.getSizeInBytes()+" differ.");return T}static generateECBytes(i,a){const l=i.length,c=new Int32Array(l+a);for(let p=0;p<l;p++)c[p]=i[p]&255;new af(tt.QR_CODE_FIELD_256).encode(c,a);const f=new Uint8Array(a);for(let p=0;p<a;p++)f[p]=c[l+p];return f}static appendModeInfo(i,a){a.appendBits(i.getBits(),4)}static appendLengthInfo(i,a,l,c){const f=l.getCharacterCountBits(a);if(i>=1<<f)throw new Vt(i+" is bigger than "+((1<<f)-1));c.appendBits(i,f)}static appendBytes(i,a,l,c){switch(a){case We.NUMERIC:qt.appendNumericBytes(i,l);break;case We.ALPHANUMERIC:qt.appendAlphanumericBytes(i,l);break;case We.BYTE:qt.append8BitBytes(i,l,c);break;case We.KANJI:qt.appendKanjiBytes(i,l);break;default:throw new Vt("Invalid mode: "+a)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const a=qt.getDigit(i);return a>=0&&a<=9}static appendNumericBytes(i,a){const l=i.length;let c=0;for(;c<l;){const f=qt.getDigit(i.charAt(c));if(c+2<l){const p=qt.getDigit(i.charAt(c+1)),m=qt.getDigit(i.charAt(c+2));a.appendBits(f*100+p*10+m,10),c+=3}else if(c+1<l){const p=qt.getDigit(i.charAt(c+1));a.appendBits(f*10+p,7),c+=2}else a.appendBits(f,4),c++}}static appendAlphanumericBytes(i,a){const l=i.length;let c=0;for(;c<l;){const f=qt.getAlphanumericCode(i.charCodeAt(c));if(f===-1)throw new Vt;if(c+1<l){const p=qt.getAlphanumericCode(i.charCodeAt(c+1));if(p===-1)throw new Vt;a.appendBits(f*45+p,11),c+=2}else a.appendBits(f,6),c++}}static append8BitBytes(i,a,l){let c;try{c=W.encode(i,l)}catch(f){throw new Vt(f)}for(let f=0,p=c.length;f!==p;f++){const m=c[f];a.appendBits(m,8)}}static appendKanjiBytes(i,a){let l;try{l=W.encode(i,D.SJIS)}catch(f){throw new Vt(f)}const c=l.length;for(let f=0;f<c;f+=2){const p=l[f]&255,m=l[f+1]&255,C=p<<8&4294967295|m;let T=-1;if(C>=33088&&C<=40956?T=C-33088:C>=57408&&C<=60351&&(T=C-49472),T===-1)throw new Vt("Invalid byte sequence");const O=(T>>8)*192+(T&255);a.appendBits(O,13)}}static appendECI(i,a){a.appendBits(We.ECI.getBits(),4),a.appendBits(i.getValue(),8)}}qt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),qt.DEFAULT_BYTE_MODE_ENCODING=D.UTF8.getName();class Ps{write(i,a,l,c=null){if(i.length===0)throw new v("Found empty contents");if(a<0||l<0)throw new v("Requested dimensions are too small: "+a+"x"+l);let f=Kt.L,p=Ps.QUIET_ZONE_SIZE;c!==null&&(c.get(Cr.ERROR_CORRECTION)!==void 0&&(f=Kt.fromString(c.get(Cr.ERROR_CORRECTION).toString())),c.get(Cr.MARGIN)!==void 0&&(p=Number.parseInt(c.get(Cr.MARGIN).toString(),10)));const m=qt.encode(i,f,c);return this.renderResult(m,a,l,p)}writeToDom(i,a,l,c,f=null){typeof i=="string"&&(i=document.querySelector(i));const p=this.write(a,l,c,f);i&&i.appendChild(p)}renderResult(i,a,l,c){const f=i.getMatrix();if(f===null)throw new Pt;const p=f.getWidth(),m=f.getHeight(),C=p+c*2,T=m+c*2,O=Math.max(a,C),B=Math.max(l,T),j=Math.min(Math.floor(O/C),Math.floor(B/T)),z=Math.floor((O-p*j)/2),X=Math.floor((B-m*j)/2),Q=this.createSVGElement(O,B);for(let se=0,he=X;se<m;se++,he+=j)for(let Ae=0,Ce=z;Ae<p;Ae++,Ce+=j)if(f.get(Ae,se)===1){const xe=this.createSvgRectElement(Ce,he,j,j);Q.appendChild(xe)}return Q}createSVGElement(i,a){const l=document.createElementNS(Ps.SVG_NS,"svg");return l.setAttributeNS(null,"height",i.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(i,a,l,c){const f=document.createElementNS(Ps.SVG_NS,"rect");return f.setAttributeNS(null,"x",i.toString()),f.setAttributeNS(null,"y",a.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",c.toString()),f.setAttributeNS(null,"fill","#000000"),f}}Ps.QUIET_ZONE_SIZE=4,Ps.SVG_NS="http://www.w3.org/2000/svg";class fa{encode(i,a,l,c,f){if(i.length===0)throw new v("Found empty contents");if(a!==J.QR_CODE)throw new v("Can only encode QR_CODE, but got "+a);if(l<0||c<0)throw new v(`Requested dimensions are too small: ${l}x${c}`);let p=Kt.L,m=fa.QUIET_ZONE_SIZE;f!==null&&(f.get(Cr.ERROR_CORRECTION)!==void 0&&(p=Kt.fromString(f.get(Cr.ERROR_CORRECTION).toString())),f.get(Cr.MARGIN)!==void 0&&(m=Number.parseInt(f.get(Cr.MARGIN).toString(),10)));const C=qt.encode(i,p,f);return fa.renderResult(C,l,c,m)}static renderResult(i,a,l,c){const f=i.getMatrix();if(f===null)throw new Pt;const p=f.getWidth(),m=f.getHeight(),C=p+c*2,T=m+c*2,O=Math.max(a,C),B=Math.max(l,T),j=Math.min(Math.floor(O/C),Math.floor(B/T)),z=Math.floor((O-p*j)/2),X=Math.floor((B-m*j)/2),Q=new G(O,B);for(let se=0,he=X;se<m;se++,he+=j)for(let Ae=0,Ce=z;Ae<p;Ae++,Ce+=j)f.get(Ae,se)===1&&Q.setRegion(Ce,he,j,j);return Q}}fa.QUIET_ZONE_SIZE=4;class ix{encode(i,a,l,c,f){let p;switch(a){case J.QR_CODE:p=new fa;break;default:throw new v("No encoder available for format "+a)}return p.encode(i,a,l,c,f)}}class pi extends Ee{constructor(i,a,l,c,f,p,m,C){if(super(p,m),this.yuvData=i,this.dataWidth=a,this.dataHeight=l,this.left=c,this.top=f,c+p>a||f+m>l)throw new v("Crop rectangle does not fit within image data.");C&&this.reverseHorizontal(p,m)}getRow(i,a){if(i<0||i>=this.getHeight())throw new v("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const c=(i+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,c,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=i*a,c=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return A.arraycopy(this.yuvData,f,c,0,l),c;for(let p=0;p<a;p++){const m=p*i;A.arraycopy(this.yuvData,f,c,m,i),f+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,a,l,c){return new pi(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+a,l,c,!1)}renderThumbnail(){const i=this.getWidth()/pi.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/pi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(i*a),c=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let p=0;p<a;p++){const m=p*i;for(let C=0;C<i;C++){const T=c[f+C*pi.THUMBNAIL_SCALE_FACTOR]&255;l[m+C]=4278190080|T*65793}f+=this.dataWidth*pi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/pi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/pi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,a){const l=this.yuvData;for(let c=0,f=this.top*this.dataWidth+this.left;c<a;c++,f+=this.dataWidth){const p=f+i/2;for(let m=f,C=f+i-1;m<p;m++,C--){const T=l[m];l[m]=l[C],l[C]=T}}}invert(){return new be(this)}}pi.THUMBNAIL_SCALE_FACTOR=2;class of extends Ee{constructor(i,a,l,c,f,p,m){if(super(a,l),this.dataWidth=c,this.dataHeight=f,this.left=p,this.top=m,i.BYTES_PER_ELEMENT===4){const C=a*l,T=new Uint8ClampedArray(C);for(let O=0;O<C;O++){const B=i[O],j=B>>16&255,z=B>>7&510,X=B&255;T[O]=(j+z+X)/4&255}this.luminances=T}else this.luminances=i;if(c===void 0&&(this.dataWidth=a),f===void 0&&(this.dataHeight=l),p===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(i,a){if(i<0||i>=this.getHeight())throw new v("Requested row is outside the image: "+i);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const c=(i+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,c,a,0,l),a}getMatrix(){const i=this.getWidth(),a=this.getHeight();if(i===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=i*a,c=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return A.arraycopy(this.luminances,f,c,0,l),c;for(let p=0;p<a;p++){const m=p*i;A.arraycopy(this.luminances,f,c,m,i),f+=this.dataWidth}return c}isCropSupported(){return!0}crop(i,a,l,c){return new of(this.luminances,l,c,this.dataWidth,this.dataHeight,this.left+i,this.top+a)}invert(){return new be(this)}}class h0 extends D{static forName(i){return this.getCharacterSetECIByName(i)}}class lf{}lf.ISO_8859_1=D.ISO8859_1;class d0{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class p0{static singletonList(i){return[i]}static min(i,a){return i.sort(a)[0]}}class sx{constructor(i){this.previous=i}getPrevious(){return this.previous}}class ha extends sx{constructor(i,a,l){super(i),this.value=a,this.bitCount=l}appendTo(i,a){i.appendBits(this.value,this.bitCount)}add(i,a){return new ha(this,i,a)}addBinaryShift(i,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ha(this,i,a)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+F.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class uf extends ha{constructor(i,a,l){super(i,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(i,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):l===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(i,a){return new uf(this,i,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ax(M,i,a){return new uf(M,i,a)}function wo(M,i,a){return new ha(M,i,a)}const ox=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ji=0,$l=1,kn=2,g0=3,gi=4,lx=new ha(null,0,0),cf=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ux(M){for(let i of M)N.fill(i,-1);return M[Ji][gi]=0,M[$l][gi]=0,M[$l][Ji]=28,M[g0][gi]=0,M[kn][gi]=0,M[kn][Ji]=15,M}const m0=ux(N.createInt32Array(6,6));class mi{constructor(i,a,l,c){this.token=i,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,a){let l=this.bitCount,c=this.token;if(i!==this.mode){let p=cf[this.mode][i];c=wo(c,p&65535,p>>16),l+=p>>16}let f=i===kn?4:5;return c=wo(c,a,f),new mi(c,i,0,l+f)}shiftAndAppend(i,a){let l=this.token,c=this.mode===kn?4:5;return l=wo(l,m0[this.mode][i],c),l=wo(l,a,5),new mi(l,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(i){let a=this.token,l=this.mode,c=this.bitCount;if(this.mode===gi||this.mode===kn){let m=cf[l][Ji];a=wo(a,m&65535,m>>16),c+=m>>16,l=Ji}let f=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,p=new mi(a,l,this.binaryShiftByteCount+1,c+f);return p.binaryShiftByteCount===2078&&(p=p.endBinaryShift(i+1)),p}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=ax(a,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new mi(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let a=this.bitCount+(cf[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?a+=mi.calculateBinaryShiftCost(i)-mi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(a+=10),a<=i.bitCount}toBitArray(i){let a=[];for(let c=this.endBinaryShift(i.length).token;c!==null;c=c.getPrevious())a.unshift(c);let l=new L;for(const c of a)c.appendTo(l,i);return l}toString(){return K.format("%s bits=%d bytes=%d",ox[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}mi.INITIAL_STATE=new mi(lx,Ji,0,0);function cx(M){const i=K.getCharCode(" "),a=K.getCharCode("."),l=K.getCharCode(",");M[Ji][i]=1;const c=K.getCharCode("Z"),f=K.getCharCode("A");for(let j=f;j<=c;j++)M[Ji][j]=j-f+2;M[$l][i]=1;const p=K.getCharCode("z"),m=K.getCharCode("a");for(let j=m;j<=p;j++)M[$l][j]=j-m+2;M[kn][i]=1;const C=K.getCharCode("9"),T=K.getCharCode("0");for(let j=T;j<=C;j++)M[kn][j]=j-T+2;M[kn][l]=12,M[kn][a]=13;const O=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let j=0;j<O.length;j++)M[g0][K.getCharCode(O[j])]=j;const B=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let j=0;j<B.length;j++)K.getCharCode(B[j])>0&&(M[gi][K.getCharCode(B[j])]=j);return M}const ff=cx(N.createInt32Array(5,256));class Eo{constructor(i){this.text=i}encode(){const i=K.getCharCode(" "),a=K.getCharCode(`
`);let l=p0.singletonList(mi.INITIAL_STATE);for(let f=0;f<this.text.length;f++){let p,m=f+1<this.text.length?this.text[f+1]:0;switch(this.text[f]){case K.getCharCode("\r"):p=m===a?2:0;break;case K.getCharCode("."):p=m===i?3:0;break;case K.getCharCode(","):p=m===i?4:0;break;case K.getCharCode(":"):p=m===i?5:0;break;default:p=0}p>0?(l=Eo.updateStateListForPair(l,f,p),f++):l=this.updateStateListForChar(l,f)}return p0.min(l,(f,p)=>f.getBitCount()-p.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,a){const l=[];for(let c of i)this.updateStateForChar(c,a,l);return Eo.simplifyStates(l)}updateStateForChar(i,a,l){let c=this.text[a]&255,f=ff[i.getMode()][c]>0,p=null;for(let m=0;m<=gi;m++){let C=ff[m][c];if(C>0){if(p==null&&(p=i.endBinaryShift(a)),!f||m===i.getMode()||m===kn){const T=p.latchAndAppend(m,C);l.push(T)}if(!f&&m0[i.getMode()][m]>=0){const T=p.shiftAndAppend(m,C);l.push(T)}}}if(i.getBinaryShiftByteCount()>0||ff[i.getMode()][c]===0){let m=i.addBinaryShiftChar(a);l.push(m)}}static updateStateListForPair(i,a,l){const c=[];for(let f of i)this.updateStateForPair(f,a,l,c);return this.simplifyStates(c)}static updateStateForPair(i,a,l,c){let f=i.endBinaryShift(a);if(c.push(f.latchAndAppend(gi,l)),i.getMode()!==gi&&c.push(f.shiftAndAppend(gi,l)),l===3||l===4){let p=f.latchAndAppend(kn,16-l).latchAndAppend(kn,1);c.push(p)}if(i.getBinaryShiftByteCount()>0){let p=i.addBinaryShiftChar(a).addBinaryShiftChar(a+1);c.push(p)}}static simplifyStates(i){let a=[];for(const l of i){let c=!0;for(const f of a){if(f.isBetterThanOrEqualTo(l)){c=!1;break}l.isBetterThanOrEqualTo(f)&&(a=a.filter(p=>p!==f))}c&&a.push(l)}return a}}class St{constructor(){}static encodeBytes(i){return St.encode(i,St.DEFAULT_EC_PERCENT,St.DEFAULT_AZTEC_LAYERS)}static encode(i,a,l){let c=new Eo(i).encode(),f=F.truncDivision(c.getSize()*a,100)+11,p=c.getSize()+f,m,C,T,O,B;if(l!==St.DEFAULT_AZTEC_LAYERS){if(m=l<0,C=Math.abs(l),C>(m?St.MAX_NB_BITS_COMPACT:St.MAX_NB_BITS))throw new v(K.format("Illegal value %s for layers",l));T=St.totalBitsInLayer(C,m),O=St.WORD_SIZE[C];let xe=T-T%O;if(B=St.stuffBits(c,O),B.getSize()+f>xe)throw new v("Data to large for user specified layer");if(m&&B.getSize()>O*64)throw new v("Data to large for user specified layer")}else{O=0,B=null;for(let xe=0;;xe++){if(xe>St.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(m=xe<=3,C=m?xe+1:xe,T=St.totalBitsInLayer(C,m),p>T)continue;(B==null||O!==St.WORD_SIZE[C])&&(O=St.WORD_SIZE[C],B=St.stuffBits(c,O));let vt=T-T%O;if(!(m&&B.getSize()>O*64)&&B.getSize()+f<=vt)break}}let j=St.generateCheckWords(B,T,O),z=B.getSize()/O,X=St.generateModeMessage(m,C,z),Q=(m?11:14)+C*4,se=new Int32Array(Q),he;if(m){he=Q;for(let xe=0;xe<se.length;xe++)se[xe]=xe}else{he=Q+1+2*F.truncDivision(F.truncDivision(Q,2)-1,15);let xe=F.truncDivision(Q,2),vt=F.truncDivision(he,2);for(let at=0;at<xe;at++){let on=at+F.truncDivision(at,15);se[xe-at-1]=vt-on-1,se[xe+at]=vt+on+1}}let Ae=new G(he);for(let xe=0,vt=0;xe<C;xe++){let at=(C-xe)*4+(m?9:12);for(let on=0;on<at;on++){let Yn=on*2;for(let ln=0;ln<2;ln++)j.get(vt+Yn+ln)&&Ae.set(se[xe*2+ln],se[xe*2+on]),j.get(vt+at*2+Yn+ln)&&Ae.set(se[xe*2+on],se[Q-1-xe*2-ln]),j.get(vt+at*4+Yn+ln)&&Ae.set(se[Q-1-xe*2-ln],se[Q-1-xe*2-on]),j.get(vt+at*6+Yn+ln)&&Ae.set(se[Q-1-xe*2-on],se[xe*2+ln])}vt+=at*8}if(St.drawModeMessage(Ae,m,he,X),m)St.drawBullsEye(Ae,F.truncDivision(he,2),5);else{St.drawBullsEye(Ae,F.truncDivision(he,2),7);for(let xe=0,vt=0;xe<F.truncDivision(Q,2)-1;xe+=15,vt+=16)for(let at=F.truncDivision(he,2)&1;at<he;at+=2)Ae.set(F.truncDivision(he,2)-vt,at),Ae.set(F.truncDivision(he,2)+vt,at),Ae.set(at,F.truncDivision(he,2)-vt),Ae.set(at,F.truncDivision(he,2)+vt)}let Ce=new d0;return Ce.setCompact(m),Ce.setSize(he),Ce.setLayers(C),Ce.setCodeWords(z),Ce.setMatrix(Ae),Ce}static drawBullsEye(i,a,l){for(let c=0;c<l;c+=2)for(let f=a-c;f<=a+c;f++)i.set(f,a-c),i.set(f,a+c),i.set(a-c,f),i.set(a+c,f);i.set(a-l,a-l),i.set(a-l+1,a-l),i.set(a-l,a-l+1),i.set(a+l,a-l),i.set(a+l,a-l+1),i.set(a+l,a+l-1)}static generateModeMessage(i,a,l){let c=new L;return i?(c.appendBits(a-1,2),c.appendBits(l-1,6),c=St.generateCheckWords(c,28,4)):(c.appendBits(a-1,5),c.appendBits(l-1,11),c=St.generateCheckWords(c,40,4)),c}static drawModeMessage(i,a,l,c){let f=F.truncDivision(l,2);if(a)for(let p=0;p<7;p++){let m=f-3+p;c.get(p)&&i.set(m,f-5),c.get(p+7)&&i.set(f+5,m),c.get(20-p)&&i.set(m,f+5),c.get(27-p)&&i.set(f-5,m)}else for(let p=0;p<10;p++){let m=f-5+p+F.truncDivision(p,5);c.get(p)&&i.set(m,f-7),c.get(p+10)&&i.set(f+7,m),c.get(29-p)&&i.set(m,f+7),c.get(39-p)&&i.set(f-7,m)}}static generateCheckWords(i,a,l){let c=i.getSize()/l,f=new af(St.getGF(l)),p=F.truncDivision(a,l),m=St.bitsToWords(i,l,p);f.encode(m,p-c);let C=a%l,T=new L;T.appendBits(0,C);for(const O of Array.from(m))T.appendBits(O,l);return T}static bitsToWords(i,a,l){let c=new Int32Array(l),f,p;for(f=0,p=i.getSize()/a;f<p;f++){let m=0;for(let C=0;C<a;C++)m|=i.get(f*a+C)?1<<a-C-1:0;c[f]=m}return c}static getGF(i){switch(i){case 4:return tt.AZTEC_PARAM;case 6:return tt.AZTEC_DATA_6;case 8:return tt.AZTEC_DATA_8;case 10:return tt.AZTEC_DATA_10;case 12:return tt.AZTEC_DATA_12;default:throw new v("Unsupported word size "+i)}}static stuffBits(i,a){let l=new L,c=i.getSize(),f=(1<<a)-2;for(let p=0;p<c;p+=a){let m=0;for(let C=0;C<a;C++)(p+C>=c||i.get(p+C))&&(m|=1<<a-1-C);(m&f)===f?(l.appendBits(m&f,a),p--):m&f?l.appendBits(m,a):(l.appendBits(m|1,a),p--)}return l}static totalBitsInLayer(i,a){return((a?88:112)+16*i)*i}}St.DEFAULT_EC_PERCENT=33,St.DEFAULT_AZTEC_LAYERS=0,St.MAX_NB_BITS=32,St.MAX_NB_BITS_COMPACT=4,St.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zl{encode(i,a,l,c){return this.encodeWithHints(i,a,l,c,null)}encodeWithHints(i,a,l,c,f){let p=lf.ISO_8859_1,m=St.DEFAULT_EC_PERCENT,C=St.DEFAULT_AZTEC_LAYERS;return f!=null&&(f.has(Cr.CHARACTER_SET)&&(p=h0.forName(f.get(Cr.CHARACTER_SET).toString())),f.has(Cr.ERROR_CORRECTION)&&(m=F.parseInt(f.get(Cr.ERROR_CORRECTION).toString())),f.has(Cr.AZTEC_LAYERS)&&(C=F.parseInt(f.get(Cr.AZTEC_LAYERS).toString()))),zl.encodeLayers(i,a,l,c,p,m,C)}static encodeLayers(i,a,l,c,f,p,m){if(a!==J.AZTEC)throw new v("Can only encode AZTEC, but got "+a);let C=St.encode(K.getBytes(i,f),p,m);return zl.renderResult(C,l,c)}static renderResult(i,a,l){let c=i.getMatrix();if(c==null)throw new Pt;let f=c.getWidth(),p=c.getHeight(),m=Math.max(a,f),C=Math.max(l,p),T=Math.min(m/f,C/p),O=(m-f*T)/2,B=(C-p*T)/2,j=new G(m,C);for(let z=0,X=B;z<p;z++,X+=T)for(let Q=0,se=O;Q<f;Q++,se+=T)c.get(Q,z)&&j.setRegion(se,X,T,T);return j}}r.AbstractExpandedDecoder=_e,r.ArgumentException=x,r.ArithmeticException=Ze,r.AztecCode=d0,r.AztecCodeReader=Ni,r.AztecCodeWriter=zl,r.AztecDecoder=ot,r.AztecDetector=Rs,r.AztecDetectorResult=Gn,r.AztecEncoder=St,r.AztecHighLevelEncoder=Eo,r.AztecPoint=Mt,r.BarcodeFormat=J,r.Binarizer=w,r.BinaryBitmap=y,r.BitArray=L,r.BitMatrix=G,r.BitSource=ua,r.BrowserAztecCodeReader=Qc,r.BrowserBarcodeReader=la,r.BrowserCodeReader=ne,r.BrowserDatamatrixCodeReader=$v,r.BrowserMultiFormatReader=ex,r.BrowserPDF417Reader=tx,r.BrowserQRCodeReader=rx,r.BrowserQRCodeSvgWriter=Ps,r.CharacterSetECI=D,r.ChecksumException=S,r.Code128Reader=Ne,r.Code39Reader=lr,r.DataMatrixDecodedBitStreamParser=Xi,r.DataMatrixReader=Yi,r.DecodeHintType=_,r.DecoderResult=ke,r.DefaultGridSampler=Sr,r.DetectorResult=On,r.EAN13Reader=Fn,r.EncodeHintType=Cr,r.Exception=d,r.FormatException=R,r.GenericGF=tt,r.GenericGFPoly=Ye,r.GlobalHistogramBinarizer=ce,r.GridSampler=er,r.GridSamplerInstance=xr,r.HTMLCanvasElementLuminanceSource=oe,r.HybridBinarizer=te,r.ITFReader=Tt,r.IllegalArgumentException=v,r.IllegalStateException=Pt,r.InvertedLuminanceSource=be,r.LuminanceSource=Ee,r.MathUtils=st,r.MultiFormatOneDReader=Xn,r.MultiFormatReader=f0,r.MultiFormatWriter=ix,r.NotFoundException=V,r.OneDReader=Dt,r.PDF417DecodedBitStreamParser=fe,r.PDF417DecoderErrorCorrection=s0,r.PDF417Reader=Br,r.PDF417ResultMetadata=o0,r.PerspectiveTransform=Ge,r.PlanarYUVLuminanceSource=pi,r.QRCodeByteMatrix=Vl,r.QRCodeDataMask=Bn,r.QRCodeDecodedBitStreamParser=nr,r.QRCodeDecoderErrorCorrectionLevel=Kt,r.QRCodeDecoderFormatInformation=$r,r.QRCodeEncoder=qt,r.QRCodeEncoderQRCode=Fs,r.QRCodeMaskUtil=ur,r.QRCodeMatrixUtil=Xe,r.QRCodeMode=We,r.QRCodeReader=Zi,r.QRCodeVersion=$e,r.QRCodeWriter=fa,r.RGBLuminanceSource=of,r.RSS14Reader=Ut,r.RSSExpandedReader=me,r.ReaderException=Ul,r.ReedSolomonDecoder=bt,r.ReedSolomonEncoder=af,r.ReedSolomonException=dr,r.Result=U,r.ResultMetadataType=ye,r.ResultPoint=Oe,r.StringUtils=K,r.UnsupportedOperationException=k,r.VideoInputDevice=Y,r.WhiteRectangleDetector=it,r.WriterException=Vt,r.ZXingArrays=N,r.ZXingCharset=h0,r.ZXingInteger=F,r.ZXingStandardCharsets=lf,r.ZXingStringBuilder=ie,r.ZXingStringEncoding=W,r.ZXingSystem=A,r.createAbstractExpandedDecoder=qn,Object.defineProperty(r,"__esModule",{value:!0})})})(Hh,Hh.exports);var Yt=Hh.exports;const z3=mc(Yt),K3=rd({__proto__:null,default:z3},[Yt]);var Dp=function(){function e(t,r,n){if(this.formatMap=new Map([[Me.QR_CODE,Yt.BarcodeFormat.QR_CODE],[Me.AZTEC,Yt.BarcodeFormat.AZTEC],[Me.CODABAR,Yt.BarcodeFormat.CODABAR],[Me.CODE_39,Yt.BarcodeFormat.CODE_39],[Me.CODE_93,Yt.BarcodeFormat.CODE_93],[Me.CODE_128,Yt.BarcodeFormat.CODE_128],[Me.DATA_MATRIX,Yt.BarcodeFormat.DATA_MATRIX],[Me.MAXICODE,Yt.BarcodeFormat.MAXICODE],[Me.ITF,Yt.BarcodeFormat.ITF],[Me.EAN_13,Yt.BarcodeFormat.EAN_13],[Me.EAN_8,Yt.BarcodeFormat.EAN_8],[Me.PDF_417,Yt.BarcodeFormat.PDF_417],[Me.RSS_14,Yt.BarcodeFormat.RSS_14],[Me.RSS_EXPANDED,Yt.BarcodeFormat.RSS_EXPANDED],[Me.UPC_A,Yt.BarcodeFormat.UPC_A],[Me.UPC_E,Yt.BarcodeFormat.UPC_E],[Me.UPC_EAN_EXTENSION,Yt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!K3)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var s=this.createZXingFormats(t),o=new Map;o.set(Yt.DecodeHintType.POSSIBLE_FORMATS,s),o.set(Yt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return e.prototype.decodeAsync=function(t){var r=this;return new Promise(function(n,s){try{n(r.decode(t))}catch(o){s(o)}})},e.prototype.decode=function(t){var r=new Yt.MultiFormatReader(this.verbose,this.hints),n=new Yt.HTMLCanvasElementLuminanceSource(t),s=new Yt.BinaryBitmap(new Yt.HybridBinarizer(n)),o=r.decode(s);return{text:o.text,format:J2.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,s){t.set(r,n)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var r=[],n=0,s=t;n<s.length;n++){var o=s[n];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return r},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),W3=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function h(x){try{d(n.next(x))}catch(v){u(v)}}function g(x){try{d(n.throw(x))}catch(v){u(v)}}function d(x){x.done?o(x.value):s(x.value).then(h,g)}d((n=n.apply(e,t||[])).next())})},G3=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(x){return g([d,x])}}function g(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(x){d=[6,x],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Rp=function(){function e(t,r,n){if(this.formatMap=new Map([[Me.QR_CODE,"qr_code"],[Me.AZTEC,"aztec"],[Me.CODABAR,"codabar"],[Me.CODE_39,"code_39"],[Me.CODE_93,"code_93"],[Me.CODE_128,"code_128"],[Me.DATA_MATRIX,"data_matrix"],[Me.ITF,"itf"],[Me.EAN_13,"ean_13"],[Me.EAN_8,"ean_8"],[Me.PDF_417,"pdf417"],[Me.UPC_A,"upc_a"],[Me.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var s=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(s),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return W3(this,void 0,void 0,function(){var r,n;return G3(this,function(s){switch(s.label){case 0:return[4,this.detector.detect(t)];case 1:if(r=s.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:J2.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var r=null,n=0,s=0,o=t;s<o.length;s++){var u=o[s],h=u.boundingBox.width*u.boundingBox.height;h>n&&(n=h,r=u)}if(!r)throw"No largest barcode found";return r},e.prototype.createBarcodeDetectorFormats=function(t){for(var r=[],n=0,s=t;n<s.length;n++){var o=s[n];this.formatMap.has(o)?r.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(r,n,s){t.set(r,n)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Op=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function h(x){try{d(n.next(x))}catch(v){u(v)}}function g(x){try{d(n.throw(x))}catch(v){u(v)}}function d(x){x.done?o(x.value):s(x.value).then(h,g)}d((n=n.apply(e,t||[])).next())})},Fp=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(x){return g([d,x])}}function g(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(x){d=[6,x],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},q3=function(){function e(t,r,n,s){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&Rp.isSupported()?(this.primaryDecoder=new Rp(t,n,s),this.secondaryDecoder=new Dp(t,n,s)):this.primaryDecoder=new Dp(t,n,s)}return e.prototype.decodeAsync=function(t){return Op(this,void 0,void 0,function(){var r;return Fp(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Op(this,void 0,void 0,function(){var r,n;return Fp(this,function(s){switch(s.label){case 0:r=performance.now(),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,s.sent()];case 3:if(n=s.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var r=performance.now()-t;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,r=0,n=this.executionResults;r<n.length;r++){var s=n[r];t+=s}var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Qd=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nc=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function h(x){try{d(n.next(x))}catch(v){u(v)}}function g(x){try{d(n.throw(x))}catch(v){u(v)}}function d(x){x.done?o(x.value):s(x.value).then(h,g)}d((n=n.apply(e,t||[])).next())})},ic=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(x){return g([d,x])}}function g(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(x){d=[6,x],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ny=function(){function e(t,r){this.name=t,this.track=r}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var r={};r[this.name]=t;var n={advanced:[r]};return this.track.applyConstraints(n)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var r=t[this.name];return r}return null},e}(),X3=function(e){Qd(t,e);function t(r,n){return e.call(this,r,n)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(r){var n={};n[this.name]=r;var s={advanced:[n]};return this.track.applyConstraints(s)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(ny),Y3=function(e){Qd(t,e);function t(r){return e.call(this,"zoom",r)||this}return t}(X3),Z3=function(e){Qd(t,e);function t(r){return e.call(this,"torch",r)||this}return t}(ny),Q3=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new Y3(this.track)},e.prototype.torchFeature=function(){return new Z3(this.track)},e}(),J3=function(){function e(t,r,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var r=document.createElement("video");return r.style.width="".concat(t,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=t.surface.clientWidth,s=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,s),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,s){return nc(this,void 0,void 0,function(){var o,u;return ic(this,function(h){switch(h.label){case 0:return o=new e(t,r,s),n.aspectRatio?(u={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(u)]):[3,2];case 1:h.sent(),h.label=2;case 2:return o.setupSurface(),[2,o]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var r=this,n=function(){setTimeout(t,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return nc(this,void 0,void 0,function(){return ic(this,function(r){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(r,n){var s=t.mediaStream.getVideoTracks(),o=s.length,u=0;t.mediaStream.getVideoTracks().forEach(function(h){t.mediaStream.removeTrack(h),h.stop(),++u,u>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),r())})})},e.prototype.getCapabilities=function(){return new Q3(this.getFirstTrackOrFail())},e}(),eE=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,r,n){return nc(this,void 0,void 0,function(){return ic(this,function(s){return[2,J3.create(t,this.mediaStream,r,n)]})})},e.create=function(t){return nc(this,void 0,void 0,function(){var r,n;return ic(this,function(s){switch(s.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=s.sent(),[2,new e(n)]}})})},e}(),Pp=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function h(x){try{d(n.next(x))}catch(v){u(v)}}function g(x){try{d(n.throw(x))}catch(v){u(v)}}function d(x){x.done?o(x.value):s(x.value).then(h,g)}d((n=n.apply(e,t||[])).next())})},Mp=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(x){return g([d,x])}}function g(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(x){d=[6,x],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},tE=function(){function e(){}return e.failIfNotSupported=function(){return Pp(this,void 0,void 0,function(){return Mp(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return Pp(this,void 0,void 0,function(){return Mp(this,function(r){return[2,eE.create(t)]})})},e}(),rE=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function h(x){try{d(n.next(x))}catch(v){u(v)}}function g(x){try{d(n.throw(x))}catch(v){u(v)}}function d(x){x.done?o(x.value):s(x.value).then(h,g)}d((n=n.apply(e,t||[])).next())})},nE=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(x){return g([d,x])}}function g(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(x){d=[6,x],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},iE=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Pa.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Pa.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return rE(this,void 0,void 0,function(){var t,r,n,s,o,u,h;return nE(this,function(g){switch(g.label){case 0:return t=function(d){for(var x=d.getVideoTracks(),v=0,y=x;v<y.length;v++){var S=y[v];S.enabled=!1,S.stop(),d.removeTrack(S)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=g.sent(),s=[],o=0,u=n;o<u.length;o++)h=u[o],h.kind==="videoinput"&&s.push({id:h.deviceId,label:h.label});return t(r),[2,s]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,r){var n=function(o){for(var u=[],h=0,g=o;h<g.length;h++){var d=g[h];d.kind==="video"&&u.push({id:d.id,label:d.label})}t(u)},s=MediaStreamTrack;s.getSources(n)})},e}(),cr;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(cr||(cr={}));var sE=function(){function e(){this.state=cr.NOT_STARTED,this.onGoingTransactionNewState=cr.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===cr.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=cr.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===cr.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=cr.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==cr.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case cr.UNKNOWN:throw"Transition from unknown is not allowed";case cr.NOT_STARTED:this.failIfNewStateIs(t,[cr.PAUSED]);break;case cr.SCANNING:break;case cr.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,r){for(var n=0,s=r;n<s.length;n++){var o=s[n];if(t===o)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),aE=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===cr.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==cr.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===cr.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===cr.PAUSED},e}(),oE=function(){function e(){}return e.create=function(){return new aE(new sE)},e}(),lE=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),En=function(e){lE(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(ni),uE=function(){function e(t,r){this.logger=r,this.fps=En.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=En.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ry.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!xi(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),Bp=function(){function e(t,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new ty(this.verbose),this.qrcode=new q3(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=oE.create()}return e.prototype.start=function(t,r,n,s){var o=this;if(!t)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var u;s?u=s:u=this.verbose?this.logger.log:function(){};var h=uE.create(r,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var d=g,x=document.getElementById(this.elementId);x.clientWidth?x.clientWidth:En.DEFAULT_WIDTH,x.style.position="relative",this.shouldScan=!0,this.element=x;var v=this,y=this.stateManagerProxy.startTransition(cr.SCANNING);return new Promise(function(S,w){var A=d?h.videoConstraints:v.createVideoConstraints(t);if(!A){y.cancel(),w("videoConstraints should be defined");return}var b={};(!d||h.aspectRatio)&&(b.aspectRatio=h.aspectRatio);var I={onRenderSurfaceReady:function(N,F){v.setupUi(N,F,h),v.isScanning=!0,v.foreverScan(h,n,u)}};tE.failIfNotSupported().then(function(N){N.create(A).then(function(F){return F.render(o.element,b,I).then(function(L){v.renderedCamera=L,y.execute(),S(null)}).catch(function(L){y.cancel(),w(L)})}).catch(function(F){y.cancel(),w(Pa.errorGettingUserMedia(F))})}).catch(function(N){y.cancel(),w(Pa.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(cr.PAUSED),this.showPausedState(),(xi(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,r=function(){t.stateManagerProxy.directTransition(cr.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(cr.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var o=document.getElementById(En.SHADED_REGION_ELEMENT_ID);o&&t.element.removeChild(o)}},s=this;return this.renderedCamera.close().then(function(){return s.renderedCamera=null,s.element&&(s.element.removeChild(s.canvasElement),s.canvasElement=null),n(),s.qrRegion&&(s.qrRegion=null),s.context&&(s.context=null),r.execute(),s.hidePausedState(),s.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,r){return this.scanFileV2(t,r).then(function(n){return n.decodedText})},e.prototype.scanFileV2=function(t,r){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(xi(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(s,o){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var u=new Image;u.onload=function(){var h=u.width,g=u.height,d=document.getElementById(n.elementId),x=d.clientWidth?d.clientWidth:En.DEFAULT_WIDTH,v=Math.max(d.clientHeight?d.clientHeight:g,En.FILE_SCAN_MIN_HEIGHT),y=n.computeCanvasDrawConfig(h,g,x,v);if(r){var S=n.createCanvasElement(x,v,"qr-canvas-visible");S.style.display="inline-block",d.appendChild(S);var w=S.getContext("2d");if(!w)throw"Unable to get 2d context from canvas";w.canvas.width=x,w.canvas.height=v,w.drawImage(u,0,0,h,g,y.x,y.y,y.width,y.height)}var A=En.FILE_SCAN_HIDDEN_CANVAS_PADDING,b=Math.max(u.width,y.width),I=Math.max(u.height,y.height),N=b+2*A,F=I+2*A,L=n.createCanvasElement(N,F);d.appendChild(L);var H=L.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=N,H.canvas.height=F,H.drawImage(u,0,0,h,g,A,A,b,I);try{n.qrcode.decodeRobustlyAsync(L).then(function(_){s(Np.createFromQrcodeResult(_))}).catch(o)}catch(_){o("QR code parse error, error = ".concat(_))}},u.onerror=o,u.onabort=o,u.onstalled=o,u.onsuspend=o,u.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return iE.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!ry.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var r=[Me.QR_CODE,Me.AZTEC,Me.CODABAR,Me.CODE_39,Me.CODE_93,Me.CODE_128,Me.DATA_MATRIX,Me.MAXICODE,Me.ITF,Me.EAN_13,Me.EAN_8,Me.PDF_417,Me.RSS_14,Me.RSS_EXPANDED,Me.UPC_A,Me.UPC_E,Me.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return r;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],s=0,o=t.formatsToSupport;s<o.length;s++){var u=o[s];V3(u)?n.push(u):this.logger.warn("Invalid format: ".concat(u," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(xi(t))return!0;if(!xi(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(xi(t.experimentalFeatures))return!0;var r=t.experimentalFeatures;return xi(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,r,n){var s=this,o=n.qrbox;this.validateQrboxConfig(o);var u=this.toQrdimensions(t,r,o),h=function(d){if(d<En.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(En.MIN_QR_BOX_SIZE,"px.")},g=function(d){return d>t&&(s.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),d=t),d};h(u.width),h(u.height),u.width=g(u.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(t,r)}catch(s){throw new Error("qrbox config was passed as a function but it failed with unknown error"+s)}return n},e.prototype.setupUi=function(t,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,r,n);var s=xi(n.qrbox)?{width:t,height:r}:n.qrbox;this.validateQrboxConfig(s);var o=this.toQrdimensions(t,r,s);o.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var u=n.isShadedBoxEnabled()&&o.height<=r,h={x:0,y:0,width:t,height:r},g=u?this.getShadedRegionBounds(t,r,o):h,d=this.createCanvasElement(g.width,g.height),x={willReadFrequently:!0},v=d.getContext("2d",x);v.canvas.width=g.width,v.canvas.height=g.height,this.element.append(d),u&&this.possiblyInsertShadingElement(this.element,t,r,o),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=v,this.canvasElement=d},e.prototype.createScannerPausedUiElement=function(t){var r=document.createElement("div");r.innerText=Pa.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",t.appendChild(r),this.scannerPausedUiElement=r},e.prototype.scanContext=function(t,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(s){return t(s.text,Np.createFromQrcodeResult(s)),n.possiblyUpdateShaders(!0),!0}).catch(function(s){n.possiblyUpdateShaders(!1);var o=Pa.codeParseError(s);return r(o,ey.createFrom(o)),!1})},e.prototype.foreverScan=function(t,r,n){var s=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),u=o.videoWidth/o.clientWidth,h=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*u,d=this.qrRegion.height*h,x=this.qrRegion.x*u,v=this.qrRegion.y*h;this.context.drawImage(o,x,v,g,d,0,0,this.qrRegion.width,this.qrRegion.height);var y=function(){s.foreverScanTimeout=setTimeout(function(){s.foreverScan(t,r,n)},s.getTimeoutFps(t.fps))};this.scanContext(r,n).then(function(S){!S&&t.disableFlip!==!0?(s.context.translate(s.context.canvas.width,0),s.context.scale(-1,1),s.scanContext(r,n).finally(function(){y()})):y()}).catch(function(S){s.logger.logError("Error happend while scanning context",S),y()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var r="facingMode",n="deviceId",s={user:!0,environment:!0},o="exact",u=function(w){if(w in s)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(w,"'")},h=Object.keys(t);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(t)[0];if(g!==r&&g!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(g===r){var d=t.facingMode;if(typeof d=="string"){if(u(d))return{facingMode:d}}else if(typeof d=="object")if(o in d){if(u(d["".concat(o)]))return{facingMode:{exact:d["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var x=typeof d;throw"Invalid type of 'facingMode' = ".concat(x)}}else{var v=t.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(o in v)return{deviceId:{exact:v["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var y=typeof v;throw"Invalid type of 'deviceId' = ".concat(y)}}}var S=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(S)},e.prototype.computeCanvasDrawConfig=function(t,r,n,s){if(t<=n&&r<=s){var o=(n-t)/2,u=(s-r)/2;return{x:o,y:u,width:t,height:r}}else{var h=t,g=r;return t>n&&(r=n/t*r,t=n),r>s&&(t=s/r*t,r=s),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(t,"X").concat(r,".")),this.computeCanvasDrawConfig(t,r,n,s)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=t?En.BORDER_SHADER_MATCH_COLOR:En.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,r,n){var s=t,o=r,u=document.createElement("canvas");return u.style.width="".concat(s,"px"),u.style.height="".concat(o,"px"),u.style.display="none",u.id=xi(n)?"qr-canvas":n,u},e.prototype.getShadedRegionBounds=function(t,r,n){if(n.width>t||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},e.prototype.possiblyInsertShadingElement=function(t,r,n,s){if(!(r-s.width<1||n-s.height<1)){var o=document.createElement("div");o.style.position="absolute";var u=(r-s.width)/2,h=(n-s.height)/2;if(o.style.borderLeft="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(u,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(En.SHADED_REGION_ELEMENT_ID),r-s.width<11||n-s.height<11)this.hasBorderShaders=!1;else{var g=5,d=40;this.insertShaderBorders(o,d,g,-g,null,0,!0),this.insertShaderBorders(o,d,g,-g,null,0,!1),this.insertShaderBorders(o,d,g,null,-g,0,!0),this.insertShaderBorders(o,d,g,null,-g,0,!1),this.insertShaderBorders(o,g,d+g,-g,null,-g,!0),this.insertShaderBorders(o,g,d+g,null,-g,-g,!0),this.insertShaderBorders(o,g,d+g,-g,null,-g,!1),this.insertShaderBorders(o,g,d+g,null,-g,-g,!1),this.hasBorderShaders=!0}t.append(o)}},e.prototype.insertShaderBorders=function(t,r,n,s,o,u,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=En.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(r,"px"),g.style.height="".concat(n,"px"),s!==null&&(g.style.top="".concat(s,"px")),o!==null&&(g.style.bottom="".concat(o,"px")),h?g.style.left="".concat(u,"px"):g.style.right="".concat(u,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),t.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Jd="data:image/svg+xml;base64,",cE=Jd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",fE=Jd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Lp=Jd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",hE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",kp=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),dE=function(){function e(){this.data=kp.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=kp.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),pE=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=_p.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var n=document.createElement("br"),s=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(s);var o=document.createElement("a");o.innerText=_p.reportIssues(),o.href="https://github.com/mebjas/html5-qrcode/issues",o.target="new",o.style.color="white",this.infoDiv.appendChild(o),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),gE=function(){function e(t,r){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=r,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Lp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return r.onHoverIn()},this.infoIcon.onmouseout=function(n){return r.onHoverOut()},this.infoIcon.onclick=function(n){return r.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=hE,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Lp,this.infoIcon.style.opacity="0.6")},e}(),mE=function(){function e(){var t=this;this.infoDiv=new pE,this.infoIcon=new gE(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),yE=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function h(x){try{d(n.next(x))}catch(v){u(v)}}function g(x){try{d(n.throw(x))}catch(v){u(v)}}function d(x){x.done?o(x.value):s(x.value).then(h,g)}d((n=n.apply(e,t||[])).next())})},vE=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(x){return g([d,x])}}function g(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(x){d=[6,x],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},jp=function(){function e(){}return e.hasPermissions=function(){return yE(this,void 0,void 0,function(){var t,r,n,s;return vE(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=o.sent(),r=0,n=t;r<n.length;r++)if(s=n[r],s.kind==="videoinput"&&s.label)return[2,!0];return[2,!1]}})})},e}(),ts=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var n=r[t];if(e.isCameraScanType(n))return!0}return!1},e.isCameraScanType=function(t){return t===bs.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===bs.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return ni.DEFAULT_SUPPORTED_SCAN_TYPE;var r=ni.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var n=0,s=t;n<s.length;n++){var o=s[n];if(!ni.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return t},e}(),bn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Mi=function(){function e(){}return e.createElement=function(t,r){var n=document.createElement(t);return n.id=r,n.classList.add(bn.ALL_ELEMENT_CLASS),t==="button"&&n.setAttribute("type","button"),n},e}(),iy=function(e,t,r,n){function s(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function h(x){try{d(n.next(x))}catch(v){u(v)}}function g(x){try{d(n.throw(x))}catch(v){u(v)}}function d(x){x.done?o(x.value):s(x.value).then(h,g)}d((n=n.apply(e,t||[])).next())})},sy=function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,s,o,u;return u={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function h(d){return function(x){return g([d,x])}}function g(d){if(n)throw new TypeError("Generator is already executing.");for(;u&&(u=0,d[0]&&(r=0)),r;)try{if(n=1,s&&(o=d[0]&2?s.return:d[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,d[1])).done)return o;switch(s=0,o&&(d=[d[0]&2,o.value]),d[0]){case 0:case 1:o=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!o||d[1]>o[0]&&d[1]<o[3])){r.label=d[1];break}if(d[0]===6&&r.label<o[1]){r.label=o[1],o=d;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(d);break}o[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(x){d=[6,x],s=0}finally{n=o=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Hp=function(){function e(t,r,n){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=r,this.onTorchActionFailureCallback=n}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return iy(this,void 0,void 0,function(){var t,r;return sy(this,function(n){switch(n.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return r=n.sent(),this.propagateFailure(t,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,r){t===r?(this.buttonController.setText(r?Ot.torchOffButton():Ot.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},e.prototype.propagateFailure=function(t,r){var n=t?Ot.torchOnFailedMessage():Ot.torchOffFailedMessage();r&&(n+="; Error = "+r),this.onTorchActionFailureCallback(n)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),xE=function(){function e(t,r){this.onTorchActionFailureCallback=r,this.torchButton=Mi.createElement("button",bn.TORCH_BUTTON_ID),this.torchController=new Hp(t,this,r)}return e.prototype.render=function(t,r){var n=this;this.torchButton.innerText=Ot.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var s=this;this.torchButton.addEventListener("click",function(o){return iy(n,void 0,void 0,function(){return sy(this,function(u){switch(u.label){case 0:return[4,s.torchController.flipState()];case 1:return u.sent(),s.torchController.isTorchEnabled()?(s.torchButton.classList.remove(bn.TORCH_BUTTON_CLASS_TORCH_OFF),s.torchButton.classList.add(bn.TORCH_BUTTON_CLASS_TORCH_ON)):(s.torchButton.classList.remove(bn.TORCH_BUTTON_CLASS_TORCH_ON),s.torchButton.classList.add(bn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new Hp(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Ot.torchOnButton(),this.torchController.reset()},e.create=function(t,r,n,s){var o=new e(r,s);return o.render(t,n),o},e}(),wE=function(){function e(t,r,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",t.appendChild(this.fileBasedScanRegion);var s=document.createElement("label");s.setAttribute("for",this.getFileScanInputId()),s.style.display="inline-block",this.fileBasedScanRegion.appendChild(s),this.fileSelectionButton=Mi.createElement("button",bn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){s.click()}),s.append(this.fileSelectionButton),this.fileScanInput=Mi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",s.appendChild(this.fileScanInput);var o=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var d=g.files,x=d[0],v=x.name;o.setImageNameToButton(v),n(x)}}});var u=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(u),this.fileBasedScanRegion.addEventListener("dragenter",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){o.fileBasedScanRegion.style.border=o.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),o.fileBasedScanRegion.style.border=o.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var d=g.files;if(!d||d.length===0)return;for(var x=!1,v=0;v<d.length;++v){var y=d.item(v);if(y){var S=/image.*/;if(y.type.match(S)){x=!0;var w=y.name;o.setImageNameToButton(w),n(y),u.innerText=Ot.dragAndDropMessage();break}}}x||(u.innerText=Ot.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Ot.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var r=20;if(t.length>r){var n=t.substring(0,8),s=t.length,o=t.substring(s-8,s);t="".concat(n,"....").concat(o)}var u=Ot.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=u},e.prototype.setInitialValueToButton=function(){var t=Ot.fileSelectionChooseImage()+" - "+Ot.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,r,n){var s=new e(t,r,n);return s},e}(),EE=function(){function e(t){this.selectElement=Mi.createElement("select",bn.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var r=document.createElement("span");r.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)r.style.display="none";else{var s=Ot.selectCamera();r.innerText="".concat(s," (").concat(this.cameras.length,")  ")}for(var o=1,u=0,h=this.cameras;u<h.length;u++){var g=h[u],d=g.id,x=g.label==null?d:g.label;(!x||x==="")&&(x=[Ot.anonymousCameraPrefix(),o++].join(" "));var v=document.createElement("option");v.value=d,v.innerText=x,this.options.push(v),this.selectElement.appendChild(v)}r.appendChild(this.selectElement),t.appendChild(r)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var r=0,n=this.options;r<n.length;r++){var s=n[r];if(s.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,r){var n=new e(r);return n.render(t),n},e}(),SE=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Mi.createElement("input",bn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var s=this;this.rangeInput.addEventListener("input",function(){return s.onValueChange()}),this.rangeInput.addEventListener("change",function(){return s.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,r,n,s){this.rangeInput.min=t.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=s.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,r){var n=new e;return n.render(t,r),n},e}(),Sn;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Sn||(Sn={}));function AE(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function CE(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var IE=function(){function e(t,r,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(r),this.verbose=n===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new ts(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new ty(this.verbose),this.persistedDataManager=new dE,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,r){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(o,u){if(t)t(o,u);else{if(n.lastMatchFound===o)return;n.lastMatchFound=o,n.setHeaderMessage(Ot.lastMatch(o),Sn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(o,u){r&&r(o,u)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new Bp(this.getScanRegionId(),CE(this.config,this.verbose))},e.prototype.pause=function(t){(xi(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,r=function(){var n=document.getElementById(t.elementId);n&&(n.innerHTML="",t.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,s){if(!t.html5Qrcode){n();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(o){if(!t.html5Qrcode){n();return}t.html5Qrcode.clear(),r(),n()}).catch(function(o){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",o),s(o)}):(t.html5Qrcode.clear(),r(),n())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=ni.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!ni.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=ni.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=ni.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:ni.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ni.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ni.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var r=document.createElement("div"),n=this.getScanRegionId();r.id=n,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",t.appendChild(r),ts.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var s=document.createElement("div"),o=this.getDashboardId();s.id=o,s.style.width="100%",t.appendChild(s),this.setupInitialDashboard(s)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",t.appendChild(r);var n=new mE;n.renderInto(r);var s=document.createElement("div");s.id=this.getHeaderMessageContainerId(),s.style.display="none",s.style.textAlign="center",s.style.fontSize="14px",s.style.padding="2px 10px",s.style.margin="4px",s.style.borderTop="1px solid #f6f6f6",r.appendChild(s)},e.prototype.createSection=function(t){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",t.appendChild(r)},e.prototype.createCameraListUi=function(t,r,n){var s=this;s.showHideScanTypeSwapLink(!1),s.setHeaderMessage(Ot.cameraPermissionRequesting());var o=function(){n||s.createPermissionButton(t,r)};Bp.getCameras().then(function(u){s.persistedDataManager.setHasPermission(!0),s.showHideScanTypeSwapLink(!0),s.resetHeaderMessage(),u&&u.length>0?(t.removeChild(r),s.renderCameraSelection(u)):(s.setHeaderMessage(Ot.noCameraFound(),Sn.STATUS_WARNING),o())}).catch(function(u){s.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:o(),s.setHeaderMessage(u,Sn.STATUS_WARNING),s.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,r){var n=this,s=Mi.createElement("button",this.getCameraPermissionButtonId());s.innerText=Ot.cameraPermissionTitle(),s.addEventListener("click",function(){s.disabled=!0,n.createCameraListUi(t,r,s)}),r.appendChild(s)},e.prototype.createPermissionsUi=function(t,r){var n=this;if(ts.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){jp.hasPermissions().then(function(s){s?n.createCameraListUi(t,r):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,r))}).catch(function(s){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,r)});return}this.createPermissionButton(t,r)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");t.appendChild(r);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=ts.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(n);var s=document.createElement("div");s.style.textAlign="center",n.appendChild(s),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,s),this.renderFileScanUi(r)},e.prototype.renderFileScanUi=function(t){var r=ts.isFileScanType(this.currentScanType),n=this,s=function(o){if(!n.html5Qrcode)throw"html5Qrcode not defined";ts.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(Ot.loadingImage()),n.html5Qrcode.scanFileV2(o,!0).then(function(u){n.resetHeaderMessage(),n.qrCodeSuccessCallback(u.decodedText,u)}).catch(function(u){n.setHeaderMessage(u,Sn.STATUS_WARNING),n.qrCodeErrorCallback(u,ey.createFrom(u))}))};this.fileSelectionUi=wE.create(t,r,s)},e.prototype.renderCameraSelection=function(t){var r=this,n=this,s=document.getElementById(this.getDashboardSectionCameraScanRegionId());s.style.textAlign="center";var o=SE.create(s,!1),u=function(A){var b=A.zoomFeature();if(b.isSupported()){o.setOnCameraZoomValueChangeCallback(function(N){b.apply(N)});var I=1;r.config.defaultZoomValueIfSupported&&(I=r.config.defaultZoomValueIfSupported),I=$3(I,b.min(),b.max()),o.setValues(b.min(),b.max(),I,b.step()),o.show()}},h=EE.create(s,t),g=document.createElement("span"),d=Mi.createElement("button",bn.CAMERA_START_BUTTON_ID);d.innerText=Ot.scanButtonStartScanningText(),g.appendChild(d);var x=Mi.createElement("button",bn.CAMERA_STOP_BUTTON_ID);x.innerText=Ot.scanButtonStopScanningText(),x.style.display="none",x.disabled=!0,g.appendChild(x);var v,y=function(A){if(!A.torchFeature().isSupported()){v&&v.hide();return}v?v.updateTorchCapability(A.torchFeature()):v=xE.create(g,A.torchFeature(),{display:"none",marginLeft:"5px"},function(b){n.setHeaderMessage(b,Sn.STATUS_WARNING)}),v.show()};s.appendChild(g);var S=function(A){A||(d.style.display="none"),d.innerText=Ot.scanButtonStartScanningText(),d.style.opacity="1",d.disabled=!1,A&&(d.style.display="inline-block")};if(d.addEventListener("click",function(A){d.innerText=Ot.scanButtonScanningStarting(),h.disable(),d.disabled=!0,d.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var b=h.getValue();n.persistedDataManager.setLastUsedCameraId(b),n.html5Qrcode.start(b,AE(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(I){x.disabled=!1,x.style.display="inline-block",S(!1);var N=n.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&y(N),r.config.showZoomSliderIfSupported===!0&&u(N)}).catch(function(I){n.showHideScanTypeSwapLink(!0),h.enable(),S(!0),n.setHeaderMessage(I,Sn.STATUS_WARNING)})}),h.hasSingleItem()&&d.click(),x.addEventListener("click",function(A){if(!n.html5Qrcode)throw"html5Qrcode not defined";x.disabled=!0,n.html5Qrcode.stop().then(function(b){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),h.enable(),d.disabled=!1,x.style.display="none",d.style.display="inline-block",v&&(v.reset(),v.hide()),o.removeOnCameraZoomValueChangeCallback(),o.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(b){x.disabled=!1,n.setHeaderMessage(b,Sn.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var w=n.persistedDataManager.getLastUsedCameraId();h.hasValue(w)?(h.setValue(w),d.click()):n.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,r=Ot.textIfCameraScanSelected(),n=Ot.textIfFileScanSelected(),s=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");o.style.textAlign="center";var u=Mi.createElement("span",this.getDashboardSectionSwapLinkId());u.style.textDecoration="underline",u.style.cursor="pointer",u.innerText=ts.isCameraScanType(this.currentScanType)?r:n,u.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ts.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),u.innerText=n,t.currentScanType=bs.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),u.innerText=r,t.currentScanType=bs.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),o.appendChild(u),s.appendChild(o)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){jp.hasPermissions().then(function(n){if(n){var s=document.getElementById(r.getCameraPermissionButtonId());if(!s)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";s.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(n){r.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,r){r||(r=Sn.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=t,n.style.display="block",r){case Sn.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Sn.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Sn.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=cE,this.cameraScanImage.alt=Ot.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=fE,this.fileScanImage.alt=Ot.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return bn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return bn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ir.apply(this,arguments)}var wr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(wr||(wr={}));const Up="popstate";function bE(e){e===void 0&&(e={});function t(n,s){let{pathname:o,search:u,hash:h}=n.location;return wl("",{pathname:o,search:u,hash:h},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Dl(s)}return NE(t,r,null,e)}function pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Za(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function TE(){return Math.random().toString(36).substr(2,8)}function Vp(e,t){return{usr:e.state,key:e.key,idx:t}}function wl(e,t,r,n){return r===void 0&&(r=null),ir({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ds(t):t,{state:r,key:t&&t.key||n||TE()})}function Dl(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Ds(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function NE(e,t,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:o=!1}=n,u=s.history,h=wr.Pop,g=null,d=x();d==null&&(d=0,u.replaceState(ir({},u.state,{idx:d}),""));function x(){return(u.state||{idx:null}).idx}function v(){h=wr.Pop;let b=x(),I=b==null?null:b-d;d=b,g&&g({action:h,location:A.location,delta:I})}function y(b,I){h=wr.Push;let N=wl(A.location,b,I);d=x()+1;let F=Vp(N,d),L=A.createHref(N);try{u.pushState(F,"",L)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(L)}o&&g&&g({action:h,location:A.location,delta:1})}function S(b,I){h=wr.Replace;let N=wl(A.location,b,I);d=x();let F=Vp(N,d),L=A.createHref(N);u.replaceState(F,"",L),o&&g&&g({action:h,location:A.location,delta:0})}function w(b){let I=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof b=="string"?b:Dl(b);return N=N.replace(/ $/,"%20"),pt(I,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,I)}let A={get action(){return h},get location(){return e(s,u)},listen(b){if(g)throw new Error("A history only accepts one active listener");return s.addEventListener(Up,v),g=b,()=>{s.removeEventListener(Up,v),g=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let I=w(b);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:y,replace:S,go(b){return u.go(b)}};return A}var Wt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wt||(Wt={}));const _E=new Set(["lazy","caseSensitive","path","id","index","children"]);function DE(e){return e.index===!0}function El(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((s,o)=>{let u=[...r,String(o)],h=typeof s.id=="string"?s.id:u.join("-");if(pt(s.index!==!0||!s.children,"Cannot specify children on an index route"),pt(!n[h],'Found a route id collision on id "'+h+`".  Route id's must be globally unique within Data Router usages`),DE(s)){let g=ir({},s,t(s),{id:h});return n[h]=g,g}else{let g=ir({},s,t(s),{id:h,children:void 0});return n[h]=g,s.children&&(g.children=El(s.children,t,u,n)),g}})}function ks(e,t,r){return r===void 0&&(r="/"),Tu(e,t,r,!1)}function Tu(e,t,r,n){let s=typeof t=="string"?Ds(t):t,o=Rl(s.pathname||"/",r);if(o==null)return null;let u=ay(e);OE(u);let h=null;for(let g=0;h==null&&g<u.length;++g){let d=$E(o);h=UE(u[g],d,n)}return h}function RE(e,t){let{route:r,pathname:n,params:s}=e;return{id:r.id,pathname:n,params:s,data:t[r.id],handle:r.handle}}function ay(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(o,u,h)=>{let g={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};g.relativePath.startsWith("/")&&(pt(g.relativePath.startsWith(n),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(n.length));let d=Es([n,g.relativePath]),x=r.concat(g);o.children&&o.children.length>0&&(pt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ay(o.children,t,x,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:jE(d,o.index),routesMeta:x})};return e.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))s(o,u);else for(let g of oy(o.path))s(o,u,g)}),t}function oy(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return s?[o,""]:[o];let u=oy(n.join("/")),h=[];return h.push(...u.map(g=>g===""?o:[o,g].join("/"))),s&&h.push(...u),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function OE(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:HE(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const FE=/^:[\w-]+$/,PE=3,ME=2,BE=1,LE=10,kE=-2,$p=e=>e==="*";function jE(e,t){let r=e.split("/"),n=r.length;return r.some($p)&&(n+=kE),t&&(n+=ME),r.filter(s=>!$p(s)).reduce((s,o)=>s+(FE.test(o)?PE:o===""?BE:LE),n)}function HE(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function UE(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,s={},o="/",u=[];for(let h=0;h<n.length;++h){let g=n[h],d=h===n.length-1,x=o==="/"?t:t.slice(o.length)||"/",v=zp({path:g.relativePath,caseSensitive:g.caseSensitive,end:d},x),y=g.route;if(!v&&d&&r&&!n[n.length-1].route.index&&(v=zp({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},x)),!v)return null;Object.assign(s,v.params),u.push({params:s,pathname:Es([o,v.pathname]),pathnameBase:WE(Es([o,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(o=Es([o,v.pathnameBase]))}return u}function zp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=VE(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],u=o.replace(/(.)\/+$/,"$1"),h=s.slice(1);return{params:n.reduce((d,x,v)=>{let{paramName:y,isOptional:S}=x;if(y==="*"){let A=h[v]||"";u=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const w=h[v];return S&&!w?d[y]=void 0:d[y]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:u,pattern:e}}function VE(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Za(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,g)=>(n.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function $E(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Za(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Rl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function zE(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Ds(e):e;return{pathname:r?r.startsWith("/")?r:KE(r,t):t,search:GE(n),hash:qE(s)}}function KE(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function kf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ly(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function uy(e,t){let r=ly(e);return t?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function cy(e,t,r,n){n===void 0&&(n=!1);let s;typeof e=="string"?s=Ds(e):(s=ir({},e),pt(!s.pathname||!s.pathname.includes("?"),kf("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),kf("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),kf("#","search","hash",s)));let o=e===""||s.pathname==="",u=o?"/":s.pathname,h;if(u==null)h=r;else{let v=t.length-1;if(!n&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),v-=1;s.pathname=y.join("/")}h=v>=0?t[v]:"/"}let g=zE(s,h),d=u&&u!=="/"&&u.endsWith("/"),x=(o||u===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(d||x)&&(g.pathname+="/"),g}const Es=e=>e.join("/").replace(/\/\/+/g,"/"),WE=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),GE=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qE=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class e1{constructor(t,r,n,s){s===void 0&&(s=!1),this.status=t,this.statusText=r||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Fc(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const fy=["post","put","patch","delete"],XE=new Set(fy),YE=["get",...fy],ZE=new Set(YE),QE=new Set([301,302,303,307,308]),JE=new Set([307,308]),jf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},e4={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ro={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},t1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,t4=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),hy="remix-router-transitions";function r4(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;pt(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let Z=e.detectErrorBoundary;s=re=>({hasErrorBoundary:Z(re)})}else s=t4;let o={},u=El(e.routes,s,void 0,o),h,g=e.basename||"/",d=e.unstable_dataStrategy||o4,x=e.unstable_patchRoutesOnMiss,v=ir({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),y=null,S=new Set,w=null,A=null,b=null,I=e.hydrationData!=null,N=ks(u,e.history.location,g),F=null;if(N==null&&!x){let Z=Zr(404,{pathname:e.history.location.pathname}),{matches:re,route:ue}=eg(u);N=re,F={[ue.id]:Z}}N&&x&&!e.hydrationData&&hi(N,u,e.history.location.pathname).active&&(N=null);let L;if(!N)L=!1,N=[];else if(N.some(Z=>Z.route.lazy))L=!1;else if(!N.some(Z=>Z.route.loader))L=!0;else if(v.v7_partialHydration){let Z=e.hydrationData?e.hydrationData.loaderData:null,re=e.hydrationData?e.hydrationData.errors:null,ue=ge=>ge.route.loader?typeof ge.route.loader=="function"&&ge.route.loader.hydrate===!0?!1:Z&&Z[ge.route.id]!==void 0||re&&re[ge.route.id]!==void 0:!0;if(re){let ge=N.findIndex(De=>re[De.route.id]!==void 0);L=N.slice(0,ge+1).every(ue)}else L=N.every(ue)}else L=e.hydrationData!=null;let H,_={historyAction:e.history.action,location:e.history.location,matches:N,initialized:L,navigation:jf,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||F,fetchers:new Map,blockers:new Map},R=wr.Pop,P=!1,D,k=!1,W=new Map,K=null,ie=!1,G=!1,V=[],ce=[],te=new Map,Ee=0,be=-1,oe=new Map,Y=new Set,le=new Map,ne=new Map,U=new Set,q=new Map,J=new Map,ve=new Map,ye=!1;function ke(){if(y=e.history.listen(Z=>{let{action:re,location:ue,delta:ge}=Z;if(ye){ye=!1;return}Za(J.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let De=fo({currentLocation:_.location,nextLocation:ue,historyAction:re});if(De&&ge!=null){ye=!0,e.history.go(ge*-1),qi(De,{state:"blocked",location:ue,proceed(){qi(De,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),e.history.go(ge)},reset(){let de=new Map(_.blockers);de.set(De,Ro),Ze({blockers:de})}});return}return bt(re,ue)}),r){w4(t,W);let Z=()=>E4(t,W);t.addEventListener("pagehide",Z),K=()=>t.removeEventListener("pagehide",Z)}return _.initialized||bt(wr.Pop,_.location,{initialHydration:!0}),H}function Le(){y&&y(),K&&K(),S.clear(),D&&D.abort(),_.fetchers.forEach((Z,re)=>Ni(re)),_.blockers.forEach((Z,re)=>Gi(re))}function Ye(Z){return S.add(Z),()=>S.delete(Z)}function Ze(Z,re){re===void 0&&(re={}),_=ir({},_,Z);let ue=[],ge=[];v.v7_fetcherPersist&&_.fetchers.forEach((De,de)=>{De.state==="idle"&&(U.has(de)?ge.push(de):ue.push(de))}),[...S].forEach(De=>De(_,{deletedFetchers:ge,unstable_viewTransitionOpts:re.viewTransitionOpts,unstable_flushSync:re.flushSync===!0})),v.v7_fetcherPersist&&(ue.forEach(De=>_.fetchers.delete(De)),ge.forEach(De=>Ni(De)))}function tt(Z,re,ue){var ge,De;let{flushSync:de}=ue===void 0?{}:ue,ze=_.actionData!=null&&_.navigation.formMethod!=null&&ii(_.navigation.formMethod)&&_.navigation.state==="loading"&&((ge=Z.state)==null?void 0:ge._isRedirect)!==!0,_e;re.actionData?Object.keys(re.actionData).length>0?_e=re.actionData:_e=null:ze?_e=_.actionData:_e=null;let Ve=re.loaderData?Qp(_.loaderData,re.loaderData,re.matches||[],re.errors):_.loaderData,je=_.blockers;je.size>0&&(je=new Map(je),je.forEach((ut,Rt)=>je.set(Rt,Ro)));let Ue=P===!0||_.navigation.formMethod!=null&&ii(_.navigation.formMethod)&&((De=Z.state)==null?void 0:De._isRedirect)!==!0;h&&(u=h,h=void 0),ie||R===wr.Pop||(R===wr.Push?e.history.push(Z,Z.state):R===wr.Replace&&e.history.replace(Z,Z.state));let Et;if(R===wr.Pop){let ut=W.get(_.location.pathname);ut&&ut.has(Z.pathname)?Et={currentLocation:_.location,nextLocation:Z}:W.has(Z.pathname)&&(Et={currentLocation:Z,nextLocation:_.location})}else if(k){let ut=W.get(_.location.pathname);ut?ut.add(Z.pathname):(ut=new Set([Z.pathname]),W.set(_.location.pathname,ut)),Et={currentLocation:_.location,nextLocation:Z}}Ze(ir({},re,{actionData:_e,loaderData:Ve,historyAction:R,location:Z,initialized:!0,navigation:jf,revalidation:"idle",restoreScrollPosition:Ar(Z,re.matches||_.matches),preventScrollReset:Ue,blockers:je}),{viewTransitionOpts:Et,flushSync:de===!0}),R=wr.Pop,P=!1,k=!1,ie=!1,G=!1,V=[],ce=[]}async function dr(Z,re){if(typeof Z=="number"){e.history.go(Z);return}let ue=Uh(_.location,_.matches,g,v.v7_prependBasename,Z,v.v7_relativeSplatPath,re==null?void 0:re.fromRouteId,re==null?void 0:re.relative),{path:ge,submission:De,error:de}=Kp(v.v7_normalizeFormMethod,!1,ue,re),ze=_.location,_e=wl(_.location,ge,re&&re.state);_e=ir({},_e,e.history.encodeLocation(_e));let Ve=re&&re.replace!=null?re.replace:void 0,je=wr.Push;Ve===!0?je=wr.Replace:Ve===!1||De!=null&&ii(De.formMethod)&&De.formAction===_.location.pathname+_.location.search&&(je=wr.Replace);let Ue=re&&"preventScrollReset"in re?re.preventScrollReset===!0:void 0,Et=(re&&re.unstable_flushSync)===!0,ut=fo({currentLocation:ze,nextLocation:_e,historyAction:je});if(ut){qi(ut,{state:"blocked",location:_e,proceed(){qi(ut,{state:"proceeding",proceed:void 0,reset:void 0,location:_e}),dr(Z,re)},reset(){let Rt=new Map(_.blockers);Rt.set(ut,Ro),Ze({blockers:Rt})}});return}return await bt(je,_e,{submission:De,pendingError:de,preventScrollReset:Ue,replace:re&&re.replace,enableViewTransition:re&&re.unstable_viewTransition,flushSync:Et})}function Pt(){if(Sr(),Ze({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){bt(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}bt(R||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation})}}async function bt(Z,re,ue){D&&D.abort(),D=null,R=Z,ie=(ue&&ue.startUninterruptedRevalidation)===!0,ho(_.location,_.matches),P=(ue&&ue.preventScrollReset)===!0,k=(ue&&ue.enableViewTransition)===!0;let ge=h||u,De=ue&&ue.overrideNavigation,de=ks(ge,re,g),ze=(ue&&ue.flushSync)===!0,_e=hi(de,ge,re.pathname);if(_e.active&&_e.matches&&(de=_e.matches),!de){let{error:Ct,notFoundMatches:Bt,route:yt}=xt(re.pathname);tt(re,{matches:Bt,loaderData:{},errors:{[yt.id]:Ct}},{flushSync:ze});return}if(_.initialized&&!G&&d4(_.location,re)&&!(ue&&ue.submission&&ii(ue.submission.formMethod))){tt(re,{matches:de},{flushSync:ze});return}D=new AbortController;let Ve=ma(e.history,re,D.signal,ue&&ue.submission),je;if(ue&&ue.pendingError)je=[Ma(de).route.id,{type:Wt.error,error:ue.pendingError}];else if(ue&&ue.submission&&ii(ue.submission.formMethod)){let Ct=await Ht(Ve,re,ue.submission,de,_e.active,{replace:ue.replace,flushSync:ze});if(Ct.shortCircuited)return;if(Ct.pendingActionResult){let[Bt,yt]=Ct.pendingActionResult;if(Cn(yt)&&Fc(yt.error)&&yt.error.status===404){D=null,tt(re,{matches:Ct.matches,loaderData:{},errors:{[Bt]:yt.error}});return}}de=Ct.matches||de,je=Ct.pendingActionResult,De=Hf(re,ue.submission),ze=!1,_e.active=!1,Ve=ma(e.history,Ve.url,Ve.signal)}let{shortCircuited:Ue,matches:Et,loaderData:ut,errors:Rt}=await ot(Ve,re,de,_e.active,De,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,ze,je);Ue||(D=null,tt(re,ir({matches:Et||de},Jp(je),{loaderData:ut,errors:Rt})))}async function Ht(Z,re,ue,ge,De,de){de===void 0&&(de={}),Sr();let ze=v4(re,ue);if(Ze({navigation:ze},{flushSync:de.flushSync===!0}),De){let je=await _i(ge,re.pathname,Z.signal);if(je.type==="aborted")return{shortCircuited:!0};if(je.type==="error"){let{boundaryId:Ue,error:Et}=Fn(re.pathname,je);return{matches:je.partialMatches,pendingActionResult:[Ue,{type:Wt.error,error:Et}]}}else if(je.matches)ge=je.matches;else{let{notFoundMatches:Ue,error:Et,route:ut}=xt(re.pathname);return{matches:Ue,pendingActionResult:[ut.id,{type:Wt.error,error:Et}]}}}let _e,Ve=Ho(ge,re);if(!Ve.route.action&&!Ve.route.lazy)_e={type:Wt.error,error:Zr(405,{method:Z.method,pathname:re.pathname,routeId:Ve.route.id})};else if(_e=(await er("action",Z,[Ve],ge))[0],Z.signal.aborted)return{shortCircuited:!0};if(Ws(_e)){let je;return de&&de.replace!=null?je=de.replace:je=Xp(_e.response.headers.get("Location"),new URL(Z.url),g)===_.location.pathname+_.location.search,await it(Z,_e,{submission:ue,replace:je}),{shortCircuited:!0}}if(Ks(_e))throw Zr(400,{type:"defer-action"});if(Cn(_e)){let je=Ma(ge,Ve.route.id);return(de&&de.replace)!==!0&&(R=wr.Push),{matches:ge,pendingActionResult:[je.route.id,_e]}}return{matches:ge,pendingActionResult:[Ve.route.id,_e]}}async function ot(Z,re,ue,ge,De,de,ze,_e,Ve,je,Ue){let Et=De||Hf(re,de),ut=de||ze||ng(Et),Rt=!ie&&(!v.v7_partialHydration||!Ve);if(ge){if(Rt){let Ke=st(Ue);Ze(ir({navigation:Et},Ke!==void 0?{actionData:Ke}:{}),{flushSync:je})}let Fe=await _i(ue,re.pathname,Z.signal);if(Fe.type==="aborted")return{shortCircuited:!0};if(Fe.type==="error"){let{boundaryId:Ke,error:Je}=Fn(re.pathname,Fe);return{matches:Fe.partialMatches,loaderData:{},errors:{[Ke]:Je}}}else if(Fe.matches)ue=Fe.matches;else{let{error:Ke,notFoundMatches:Je,route:Lt}=xt(re.pathname);return{matches:Je,loaderData:{},errors:{[Lt.id]:Ke}}}}let Ct=h||u,[Bt,yt]=Wp(e.history,_,ue,ut,re,v.v7_partialHydration&&Ve===!0,v.v7_skipActionErrorRevalidation,G,V,ce,U,le,Y,Ct,g,Ue);if(oa(Fe=>!(ue&&ue.some(Ke=>Ke.route.id===Fe))||Bt&&Bt.some(Ke=>Ke.route.id===Fe)),be=++Ee,Bt.length===0&&yt.length===0){let Fe=lr();return tt(re,ir({matches:ue,loaderData:{},errors:Ue&&Cn(Ue[1])?{[Ue[0]]:Ue[1].error}:null},Jp(Ue),Fe?{fetchers:new Map(_.fetchers)}:{}),{flushSync:je}),{shortCircuited:!0}}if(Rt){let Fe={};if(!ge){Fe.navigation=Et;let Ke=st(Ue);Ke!==void 0&&(Fe.actionData=Ke)}yt.length>0&&(Fe.fetchers=pr(yt)),Ze(Fe,{flushSync:je})}yt.forEach(Fe=>{te.has(Fe.key)&&Dt(Fe.key),Fe.controller&&te.set(Fe.key,Fe.controller)});let Nt=()=>yt.forEach(Fe=>Dt(Fe.key));D&&D.signal.addEventListener("abort",Nt);let{loaderResults:qn,fetcherResults:Yr}=await Ge(_.matches,ue,Bt,yt,Z);if(Z.signal.aborted)return{shortCircuited:!0};D&&D.signal.removeEventListener("abort",Nt),yt.forEach(Fe=>te.delete(Fe.key));let di=tg([...qn,...Yr]);if(di){if(di.idx>=Bt.length){let Fe=yt[di.idx-Bt.length].key;Y.add(Fe)}return await it(Z,di.result,{replace:_e}),{shortCircuited:!0}}let{loaderData:me,errors:Mn}=Zp(_,ue,Bt,qn,Ue,yt,Yr,q);q.forEach((Fe,Ke)=>{Fe.subscribe(Je=>{(Je||Fe.done)&&q.delete(Ke)})}),v.v7_partialHydration&&Ve&&_.errors&&Object.entries(_.errors).filter(Fe=>{let[Ke]=Fe;return!Bt.some(Je=>Je.route.id===Ke)}).forEach(Fe=>{let[Ke,Je]=Fe;Mn=Object.assign(Mn||{},{[Ke]:Je})});let Ut=lr(),Xn=Tt(be),la=Ut||Xn||yt.length>0;return ir({matches:ue,loaderData:me,errors:Mn},la?{fetchers:new Map(_.fetchers)}:{})}function st(Z){if(Z&&!Cn(Z[1]))return{[Z[0]]:Z[1].data};if(_.actionData)return Object.keys(_.actionData).length===0?null:_.actionData}function pr(Z){return Z.forEach(re=>{let ue=_.fetchers.get(re.key),ge=Oo(void 0,ue?ue.data:void 0);_.fetchers.set(re.key,ge)}),new Map(_.fetchers)}function Oe(Z,re,ue,ge){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");te.has(Z)&&Dt(Z);let De=(ge&&ge.unstable_flushSync)===!0,de=h||u,ze=Uh(_.location,_.matches,g,v.v7_prependBasename,ue,v.v7_relativeSplatPath,re,ge==null?void 0:ge.relative),_e=ks(de,ze,g),Ve=hi(_e,de,ze);if(Ve.active&&Ve.matches&&(_e=Ve.matches),!_e){Mt(Z,re,Zr(404,{pathname:ze}),{flushSync:De});return}let{path:je,submission:Ue,error:Et}=Kp(v.v7_normalizeFormMethod,!0,ze,ge);if(Et){Mt(Z,re,Et,{flushSync:De});return}let ut=Ho(_e,je);if(P=(ge&&ge.preventScrollReset)===!0,Ue&&ii(Ue.formMethod)){On(Z,re,je,ut,_e,Ve.active,De,Ue);return}le.set(Z,{routeId:re,path:je}),Gn(Z,re,je,ut,_e,Ve.active,De,Ue)}async function On(Z,re,ue,ge,De,de,ze,_e){Sr(),le.delete(Z);function Ve(Lt){if(!Lt.route.action&&!Lt.route.lazy){let xn=Zr(405,{method:_e.formMethod,pathname:ue,routeId:re});return Mt(Z,re,xn,{flushSync:ze}),!0}return!1}if(!de&&Ve(ge))return;let je=_.fetchers.get(Z);xr(Z,x4(_e,je),{flushSync:ze});let Ue=new AbortController,Et=ma(e.history,ue,Ue.signal,_e);if(de){let Lt=await _i(De,ue,Et.signal);if(Lt.type==="aborted")return;if(Lt.type==="error"){let{error:xn}=Fn(ue,Lt);Mt(Z,re,xn,{flushSync:ze});return}else if(Lt.matches){if(De=Lt.matches,ge=Ho(De,ue),Ve(ge))return}else{Mt(Z,re,Zr(404,{pathname:ue}),{flushSync:ze});return}}te.set(Z,Ue);let ut=Ee,Ct=(await er("action",Et,[ge],De))[0];if(Et.signal.aborted){te.get(Z)===Ue&&te.delete(Z);return}if(v.v7_fetcherPersist&&U.has(Z)){if(Ws(Ct)||Cn(Ct)){xr(Z,is(void 0));return}}else{if(Ws(Ct))if(te.delete(Z),be>ut){xr(Z,is(void 0));return}else return Y.add(Z),xr(Z,Oo(_e)),it(Et,Ct,{fetcherSubmission:_e});if(Cn(Ct)){Mt(Z,re,Ct.error);return}}if(Ks(Ct))throw Zr(400,{type:"defer-action"});let Bt=_.navigation.location||_.location,yt=ma(e.history,Bt,Ue.signal),Nt=h||u,qn=_.navigation.state!=="idle"?ks(Nt,_.navigation.location,g):_.matches;pt(qn,"Didn't find any matches after fetcher action");let Yr=++Ee;oe.set(Z,Yr);let di=Oo(_e,Ct.data);_.fetchers.set(Z,di);let[me,Mn]=Wp(e.history,_,qn,_e,Bt,!1,v.v7_skipActionErrorRevalidation,G,V,ce,U,le,Y,Nt,g,[ge.route.id,Ct]);Mn.filter(Lt=>Lt.key!==Z).forEach(Lt=>{let xn=Lt.key,ua=_.fetchers.get(xn),gr=Oo(void 0,ua?ua.data:void 0);_.fetchers.set(xn,gr),te.has(xn)&&Dt(xn),Lt.controller&&te.set(xn,Lt.controller)}),Ze({fetchers:new Map(_.fetchers)});let Ut=()=>Mn.forEach(Lt=>Dt(Lt.key));Ue.signal.addEventListener("abort",Ut);let{loaderResults:Xn,fetcherResults:la}=await Ge(_.matches,qn,me,Mn,yt);if(Ue.signal.aborted)return;Ue.signal.removeEventListener("abort",Ut),oe.delete(Z),te.delete(Z),Mn.forEach(Lt=>te.delete(Lt.key));let Fe=tg([...Xn,...la]);if(Fe){if(Fe.idx>=me.length){let Lt=Mn[Fe.idx-me.length].key;Y.add(Lt)}return it(yt,Fe.result)}let{loaderData:Ke,errors:Je}=Zp(_,_.matches,me,Xn,void 0,Mn,la,q);if(_.fetchers.has(Z)){let Lt=is(Ct.data);_.fetchers.set(Z,Lt)}Tt(Yr),_.navigation.state==="loading"&&Yr>be?(pt(R,"Expected pending action"),D&&D.abort(),tt(_.navigation.location,{matches:qn,loaderData:Ke,errors:Je,fetchers:new Map(_.fetchers)})):(Ze({errors:Je,loaderData:Qp(_.loaderData,Ke,qn,Je),fetchers:new Map(_.fetchers)}),G=!1)}async function Gn(Z,re,ue,ge,De,de,ze,_e){let Ve=_.fetchers.get(Z);xr(Z,Oo(_e,Ve?Ve.data:void 0),{flushSync:ze});let je=new AbortController,Ue=ma(e.history,ue,je.signal);if(de){let Ct=await _i(De,ue,Ue.signal);if(Ct.type==="aborted")return;if(Ct.type==="error"){let{error:Bt}=Fn(ue,Ct);Mt(Z,re,Bt,{flushSync:ze});return}else if(Ct.matches)De=Ct.matches,ge=Ho(De,ue);else{Mt(Z,re,Zr(404,{pathname:ue}),{flushSync:ze});return}}te.set(Z,je);let Et=Ee,Rt=(await er("loader",Ue,[ge],De))[0];if(Ks(Rt)&&(Rt=await yy(Rt,Ue.signal,!0)||Rt),te.get(Z)===je&&te.delete(Z),!Ue.signal.aborted){if(U.has(Z)){xr(Z,is(void 0));return}if(Ws(Rt))if(be>Et){xr(Z,is(void 0));return}else{Y.add(Z),await it(Ue,Rt);return}if(Cn(Rt)){Mt(Z,re,Rt.error);return}pt(!Ks(Rt),"Unhandled fetcher deferred data"),xr(Z,is(Rt.data))}}async function it(Z,re,ue){let{submission:ge,fetcherSubmission:De,replace:de}=ue===void 0?{}:ue;re.response.headers.has("X-Remix-Revalidate")&&(G=!0);let ze=re.response.headers.get("Location");pt(ze,"Expected a Location header on the redirect Response"),ze=Xp(ze,new URL(Z.url),g);let _e=wl(_.location,ze,{_isRedirect:!0});if(r){let Rt=!1;if(re.response.headers.has("X-Remix-Reload-Document"))Rt=!0;else if(t1.test(ze)){const Ct=e.history.createURL(ze);Rt=Ct.origin!==t.location.origin||Rl(Ct.pathname,g)==null}if(Rt){de?t.location.replace(ze):t.location.assign(ze);return}}D=null;let Ve=de===!0?wr.Replace:wr.Push,{formMethod:je,formAction:Ue,formEncType:Et}=_.navigation;!ge&&!De&&je&&Ue&&Et&&(ge=ng(_.navigation));let ut=ge||De;if(JE.has(re.response.status)&&ut&&ii(ut.formMethod))await bt(Ve,_e,{submission:ir({},ut,{formAction:ze}),preventScrollReset:P});else{let Rt=Hf(_e,ge);await bt(Ve,_e,{overrideNavigation:Rt,fetcherSubmission:De,preventScrollReset:P})}}async function er(Z,re,ue,ge){try{let De=await l4(d,Z,re,ue,ge,o,s);return await Promise.all(De.map((de,ze)=>{if(g4(de)){let _e=de.result;return{type:Wt.redirect,response:f4(_e,re,ue[ze].route.id,ge,g,v.v7_relativeSplatPath)}}return c4(de)}))}catch(De){return ue.map(()=>({type:Wt.error,error:De}))}}async function Ge(Z,re,ue,ge,De){let[de,...ze]=await Promise.all([ue.length?er("loader",De,ue,re):[],...ge.map(_e=>{if(_e.matches&&_e.match&&_e.controller){let Ve=ma(e.history,_e.path,_e.controller.signal);return er("loader",Ve,[_e.match],_e.matches).then(je=>je[0])}else return Promise.resolve({type:Wt.error,error:Zr(404,{pathname:_e.path})})})]);return await Promise.all([rg(Z,ue,de,de.map(()=>De.signal),!1,_.loaderData),rg(Z,ge.map(_e=>_e.match),ze,ge.map(_e=>_e.controller?_e.controller.signal:null),!0)]),{loaderResults:de,fetcherResults:ze}}function Sr(){G=!0,V.push(...oa()),le.forEach((Z,re)=>{te.has(re)&&(ce.push(re),Dt(re))})}function xr(Z,re,ue){ue===void 0&&(ue={}),_.fetchers.set(Z,re),Ze({fetchers:new Map(_.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Mt(Z,re,ue,ge){ge===void 0&&(ge={});let De=Ma(_.matches,re);Ni(Z),Ze({errors:{[De.route.id]:ue},fetchers:new Map(_.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Rs(Z){return v.v7_fetcherPersist&&(ne.set(Z,(ne.get(Z)||0)+1),U.has(Z)&&U.delete(Z)),_.fetchers.get(Z)||e4}function Ni(Z){let re=_.fetchers.get(Z);te.has(Z)&&!(re&&re.state==="loading"&&oe.has(Z))&&Dt(Z),le.delete(Z),oe.delete(Z),Y.delete(Z),U.delete(Z),_.fetchers.delete(Z)}function Qc(Z){if(v.v7_fetcherPersist){let re=(ne.get(Z)||0)-1;re<=0?(ne.delete(Z),U.add(Z)):ne.set(Z,re)}else Ni(Z);Ze({fetchers:new Map(_.fetchers)})}function Dt(Z){let re=te.get(Z);pt(re,"Expected fetch controller: "+Z),re.abort(),te.delete(Z)}function Ne(Z){for(let re of Z){let ue=Rs(re),ge=is(ue.data);_.fetchers.set(re,ge)}}function lr(){let Z=[],re=!1;for(let ue of Y){let ge=_.fetchers.get(ue);pt(ge,"Expected fetcher: "+ue),ge.state==="loading"&&(Y.delete(ue),Z.push(ue),re=!0)}return Ne(Z),re}function Tt(Z){let re=[];for(let[ue,ge]of oe)if(ge<Z){let De=_.fetchers.get(ue);pt(De,"Expected fetcher: "+ue),De.state==="loading"&&(Dt(ue),oe.delete(ue),re.push(ue))}return Ne(re),re.length>0}function tr(Z,re){let ue=_.blockers.get(Z)||Ro;return J.get(Z)!==re&&J.set(Z,re),ue}function Gi(Z){_.blockers.delete(Z),J.delete(Z)}function qi(Z,re){let ue=_.blockers.get(Z)||Ro;pt(ue.state==="unblocked"&&re.state==="blocked"||ue.state==="blocked"&&re.state==="blocked"||ue.state==="blocked"&&re.state==="proceeding"||ue.state==="blocked"&&re.state==="unblocked"||ue.state==="proceeding"&&re.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+re.state);let ge=new Map(_.blockers);ge.set(Z,re),Ze({blockers:ge})}function fo(Z){let{currentLocation:re,nextLocation:ue,historyAction:ge}=Z;if(J.size===0)return;J.size>1&&Za(!1,"A router only supports one blocker at a time");let De=Array.from(J.entries()),[de,ze]=De[De.length-1],_e=_.blockers.get(de);if(!(_e&&_e.state==="proceeding")&&ze({currentLocation:re,nextLocation:ue,historyAction:ge}))return de}function xt(Z){let re=Zr(404,{pathname:Z}),ue=h||u,{matches:ge,route:De}=eg(ue);return oa(),{notFoundMatches:ge,route:De,error:re}}function Fn(Z,re){return{boundaryId:Ma(re.partialMatches).route.id,error:Zr(400,{type:"route-discovery",pathname:Z,message:re.error!=null&&"message"in re.error?re.error:String(re.error)})}}function oa(Z){let re=[];return q.forEach((ue,ge)=>{(!Z||Z(ge))&&(ue.cancel(),re.push(ge),q.delete(ge))}),re}function kl(Z,re,ue){if(w=Z,b=re,A=ue||null,!I&&_.navigation===jf){I=!0;let ge=Ar(_.location,_.matches);ge!=null&&Ze({restoreScrollPosition:ge})}return()=>{w=null,b=null,A=null}}function sn(Z,re){return A&&A(Z,re.map(ge=>RE(ge,_.loaderData)))||Z.key}function ho(Z,re){if(w&&b){let ue=sn(Z,re);w[ue]=b()}}function Ar(Z,re){if(w){let ue=sn(Z,re),ge=w[ue];if(typeof ge=="number")return ge}return null}function hi(Z,re,ue){if(x)if(Z){let ge=Z[Z.length-1].route;if(ge.path&&(ge.path==="*"||ge.path.endsWith("/*")))return{active:!0,matches:Tu(re,ue,g,!0)}}else return{active:!0,matches:Tu(re,ue,g,!0)||[]};return{active:!1,matches:null}}async function _i(Z,re,ue){let ge=Z,De=ge.length>0?ge[ge.length-1].route:null;for(;;){let de=h==null,ze=h||u;try{await a4(x,re,ge,ze,o,s,ve,ue)}catch(Ue){return{type:"error",error:Ue,partialMatches:ge}}finally{de&&(u=[...u])}if(ue.aborted)return{type:"aborted"};let _e=ks(ze,re,g),Ve=!1;if(_e){let Ue=_e[_e.length-1].route;if(Ue.index)return{type:"success",matches:_e};if(Ue.path&&Ue.path.length>0)if(Ue.path==="*")Ve=!0;else return{type:"success",matches:_e}}let je=Tu(ze,re,g,!0);if(!je||ge.map(Ue=>Ue.route.id).join("-")===je.map(Ue=>Ue.route.id).join("-"))return{type:"success",matches:Ve?_e:null};if(ge=je,De=ge[ge.length-1].route,De.path==="*")return{type:"success",matches:ge}}}function Pn(Z){o={},h=El(Z,s,void 0,o)}function Jc(Z,re){let ue=h==null;py(Z,re,h||u,o,s),ue&&(u=[...u],Ze({}))}return H={get basename(){return g},get future(){return v},get state(){return _},get routes(){return u},get window(){return t},initialize:ke,subscribe:Ye,enableScrollRestoration:kl,navigate:dr,fetch:Oe,revalidate:Pt,createHref:Z=>e.history.createHref(Z),encodeLocation:Z=>e.history.encodeLocation(Z),getFetcher:Rs,deleteFetcher:Qc,dispose:Le,getBlocker:tr,deleteBlocker:Gi,patchRoutes:Jc,_internalFetchControllers:te,_internalActiveDeferreds:q,_internalSetRoutes:Pn},H}function n4(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Uh(e,t,r,n,s,o,u,h){let g,d;if(u){g=[];for(let v of t)if(g.push(v),v.route.id===u){d=v;break}}else g=t,d=t[t.length-1];let x=cy(s||".",uy(g,o),Rl(e.pathname,r)||e.pathname,h==="path");return s==null&&(x.search=e.search,x.hash=e.hash),(s==null||s===""||s===".")&&d&&d.route.index&&!r1(x.search)&&(x.search=x.search?x.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(x.pathname=x.pathname==="/"?r:Es([r,x.pathname])),Dl(x)}function Kp(e,t,r,n){if(!n||!n4(n))return{path:r};if(n.formMethod&&!y4(n.formMethod))return{path:r,error:Zr(405,{method:n.formMethod})};let s=()=>({path:r,error:Zr(400,{type:"invalid-body"})}),o=n.formMethod||"get",u=e?o.toUpperCase():o.toLowerCase(),h=gy(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ii(u))return s();let y=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((S,w)=>{let[A,b]=w;return""+S+A+"="+b+`
`},""):String(n.body);return{path:r,submission:{formMethod:u,formAction:h,formEncType:n.formEncType,formData:void 0,json:void 0,text:y}}}else if(n.formEncType==="application/json"){if(!ii(u))return s();try{let y=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:u,formAction:h,formEncType:n.formEncType,formData:void 0,json:y,text:void 0}}}catch{return s()}}}pt(typeof FormData=="function","FormData is not available in this environment");let g,d;if(n.formData)g=Vh(n.formData),d=n.formData;else if(n.body instanceof FormData)g=Vh(n.body),d=n.body;else if(n.body instanceof URLSearchParams)g=n.body,d=Yp(g);else if(n.body==null)g=new URLSearchParams,d=new FormData;else try{g=new URLSearchParams(n.body),d=Yp(g)}catch{return s()}let x={formMethod:u,formAction:h,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:d,json:void 0,text:void 0};if(ii(x.formMethod))return{path:r,submission:x};let v=Ds(r);return t&&v.search&&r1(v.search)&&g.append("index",""),v.search="?"+g,{path:Dl(v),submission:x}}function i4(e,t){let r=e;if(t){let n=e.findIndex(s=>s.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function Wp(e,t,r,n,s,o,u,h,g,d,x,v,y,S,w,A){let b=A?Cn(A[1])?A[1].error:A[1].data:void 0,I=e.createURL(t.location),N=e.createURL(s),F=A&&Cn(A[1])?A[0]:void 0,L=F?i4(r,F):r,H=A?A[1].statusCode:void 0,_=u&&H&&H>=400,R=L.filter((D,k)=>{let{route:W}=D;if(W.lazy)return!0;if(W.loader==null)return!1;if(o)return typeof W.loader!="function"||W.loader.hydrate?!0:t.loaderData[W.id]===void 0&&(!t.errors||t.errors[W.id]===void 0);if(s4(t.loaderData,t.matches[k],D)||g.some(G=>G===D.route.id))return!0;let K=t.matches[k],ie=D;return Gp(D,ir({currentUrl:I,currentParams:K.params,nextUrl:N,nextParams:ie.params},n,{actionResult:b,actionStatus:H,defaultShouldRevalidate:_?!1:h||I.pathname+I.search===N.pathname+N.search||I.search!==N.search||dy(K,ie)}))}),P=[];return v.forEach((D,k)=>{if(o||!r.some(V=>V.route.id===D.routeId)||x.has(k))return;let W=ks(S,D.path,w);if(!W){P.push({key:k,routeId:D.routeId,path:D.path,matches:null,match:null,controller:null});return}let K=t.fetchers.get(k),ie=Ho(W,D.path),G=!1;y.has(k)?G=!1:d.includes(k)?G=!0:K&&K.state!=="idle"&&K.data===void 0?G=h:G=Gp(ie,ir({currentUrl:I,currentParams:t.matches[t.matches.length-1].params,nextUrl:N,nextParams:r[r.length-1].params},n,{actionResult:b,actionStatus:H,defaultShouldRevalidate:_?!1:h})),G&&P.push({key:k,routeId:D.routeId,path:D.path,matches:W,match:ie,controller:new AbortController})}),[R,P]}function s4(e,t,r){let n=!t||r.route.id!==t.route.id,s=e[r.route.id]===void 0;return n||s}function dy(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Gp(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function a4(e,t,r,n,s,o,u,h){let g=[t,...r.map(d=>d.route.id)].join("-");try{let d=u.get(g);d||(d=e({path:t,matches:r,patch:(x,v)=>{h.aborted||py(x,v,n,s,o)}}),u.set(g,d)),d&&p4(d)&&await d}finally{u.delete(g)}}function py(e,t,r,n,s){if(e){var o;let u=n[e];pt(u,"No route found to patch children into: routeId = "+e);let h=El(t,s,[e,"patch",String(((o=u.children)==null?void 0:o.length)||"0")],n);u.children?u.children.push(...h):u.children=h}else{let u=El(t,s,["patch",String(r.length||"0")],n);r.push(...u)}}async function qp(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let s=r[e.id];pt(s,"No route found in manifest");let o={};for(let u in n){let g=s[u]!==void 0&&u!=="hasErrorBoundary";Za(!g,'Route "'+s.id+'" has a static property "'+u+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+u+'" will be ignored.')),!g&&!_E.has(u)&&(o[u]=n[u])}Object.assign(s,o),Object.assign(s,ir({},t(s),{lazy:void 0}))}function o4(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function l4(e,t,r,n,s,o,u,h){let g=n.reduce((v,y)=>v.add(y.route.id),new Set),d=new Set,x=await e({matches:s.map(v=>{let y=g.has(v.route.id);return ir({},v,{shouldLoad:y,resolve:w=>(d.add(v.route.id),y?u4(t,r,v,o,u,w,h):Promise.resolve({type:Wt.data,result:void 0}))})}),request:r,params:s[0].params,context:h});return s.forEach(v=>pt(d.has(v.route.id),'`match.resolve()` was not called for route id "'+v.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),x.filter((v,y)=>g.has(s[y].route.id))}async function u4(e,t,r,n,s,o,u){let h,g,d=x=>{let v,y=new Promise((A,b)=>v=b);g=()=>v(),t.signal.addEventListener("abort",g);let S=A=>typeof x!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):x({request:t,params:r.params,context:u},...A!==void 0?[A]:[]),w;return o?w=o(A=>S(A)):w=(async()=>{try{return{type:"data",result:await S()}}catch(A){return{type:"error",result:A}}})(),Promise.race([w,y])};try{let x=r.route[e];if(r.route.lazy)if(x){let v,[y]=await Promise.all([d(x).catch(S=>{v=S}),qp(r.route,s,n)]);if(v!==void 0)throw v;h=y}else if(await qp(r.route,s,n),x=r.route[e],x)h=await d(x);else if(e==="action"){let v=new URL(t.url),y=v.pathname+v.search;throw Zr(405,{method:t.method,pathname:y,routeId:r.route.id})}else return{type:Wt.data,result:void 0};else if(x)h=await d(x);else{let v=new URL(t.url),y=v.pathname+v.search;throw Zr(404,{pathname:y})}pt(h.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(x){return{type:Wt.error,result:x}}finally{g&&t.signal.removeEventListener("abort",g)}return h}async function c4(e){let{result:t,type:r,status:n}=e;if(my(t)){let u;try{let h=t.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?t.body==null?u=null:u=await t.json():u=await t.text()}catch(h){return{type:Wt.error,error:h}}return r===Wt.error?{type:Wt.error,error:new e1(t.status,t.statusText,u),statusCode:t.status,headers:t.headers}:{type:Wt.data,data:u,statusCode:t.status,headers:t.headers}}if(r===Wt.error)return{type:Wt.error,error:t,statusCode:Fc(t)?t.status:n};if(m4(t)){var s,o;return{type:Wt.deferred,deferredData:t,statusCode:(s=t.init)==null?void 0:s.status,headers:((o=t.init)==null?void 0:o.headers)&&new Headers(t.init.headers)}}return{type:Wt.data,data:t,statusCode:n}}function f4(e,t,r,n,s,o){let u=e.headers.get("Location");if(pt(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!t1.test(u)){let h=n.slice(0,n.findIndex(g=>g.route.id===r)+1);u=Uh(new URL(t.url),h,s,!0,u,o),e.headers.set("Location",u)}return e}function Xp(e,t,r){if(t1.test(e)){let n=e,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),o=Rl(s.pathname,r)!=null;if(s.origin===t.origin&&o)return s.pathname+s.search+s.hash}return e}function ma(e,t,r,n){let s=e.createURL(gy(t)).toString(),o={signal:r};if(n&&ii(n.formMethod)){let{formMethod:u,formEncType:h}=n;o.method=u.toUpperCase(),h==="application/json"?(o.headers=new Headers({"Content-Type":h}),o.body=JSON.stringify(n.json)):h==="text/plain"?o.body=n.text:h==="application/x-www-form-urlencoded"&&n.formData?o.body=Vh(n.formData):o.body=n.formData}return new Request(s,o)}function Vh(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function Yp(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function h4(e,t,r,n,s,o){let u={},h=null,g,d=!1,x={},v=n&&Cn(n[1])?n[1].error:void 0;return r.forEach((y,S)=>{let w=t[S].route.id;if(pt(!Ws(y),"Cannot handle redirect results in processLoaderData"),Cn(y)){let A=y.error;v!==void 0&&(A=v,v=void 0),h=h||{};{let b=Ma(e,w);h[b.route.id]==null&&(h[b.route.id]=A)}u[w]=void 0,d||(d=!0,g=Fc(y.error)?y.error.status:500),y.headers&&(x[w]=y.headers)}else Ks(y)?(s.set(w,y.deferredData),u[w]=y.deferredData.data,y.statusCode!=null&&y.statusCode!==200&&!d&&(g=y.statusCode),y.headers&&(x[w]=y.headers)):(u[w]=y.data,y.statusCode&&y.statusCode!==200&&!d&&(g=y.statusCode),y.headers&&(x[w]=y.headers))}),v!==void 0&&n&&(h={[n[0]]:v},u[n[0]]=void 0),{loaderData:u,errors:h,statusCode:g||200,loaderHeaders:x}}function Zp(e,t,r,n,s,o,u,h){let{loaderData:g,errors:d}=h4(t,r,n,s,h);for(let x=0;x<o.length;x++){let{key:v,match:y,controller:S}=o[x];pt(u!==void 0&&u[x]!==void 0,"Did not find corresponding fetcher result");let w=u[x];if(!(S&&S.signal.aborted))if(Cn(w)){let A=Ma(e.matches,y==null?void 0:y.route.id);d&&d[A.route.id]||(d=ir({},d,{[A.route.id]:w.error})),e.fetchers.delete(v)}else if(Ws(w))pt(!1,"Unhandled fetcher revalidation redirect");else if(Ks(w))pt(!1,"Unhandled fetcher deferred data");else{let A=is(w.data);e.fetchers.set(v,A)}}return{loaderData:g,errors:d}}function Qp(e,t,r,n){let s=ir({},t);for(let o of r){let u=o.route.id;if(t.hasOwnProperty(u)?t[u]!==void 0&&(s[u]=t[u]):e[u]!==void 0&&o.route.loader&&(s[u]=e[u]),n&&n.hasOwnProperty(u))break}return s}function Jp(e){return e?Cn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ma(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function eg(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Zr(e,t){let{pathname:r,routeId:n,method:s,type:o,message:u}=t===void 0?{}:t,h="Unknown Server Error",g="Unknown @remix-run/router error";return e===400?(h="Bad Request",o==="route-discovery"?g='Unable to match URL "'+r+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+u):s&&r&&n?g="You made a "+s+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":o==="defer-action"?g="defer() is not supported in actions":o==="invalid-body"&&(g="Unable to encode submission body")):e===403?(h="Forbidden",g='Route "'+n+'" does not match URL "'+r+'"'):e===404?(h="Not Found",g='No route matches URL "'+r+'"'):e===405&&(h="Method Not Allowed",s&&r&&n?g="You made a "+s.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":s&&(g='Invalid request method "'+s.toUpperCase()+'"')),new e1(e||500,h,new Error(g),!0)}function tg(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Ws(r))return{result:r,idx:t}}}function gy(e){let t=typeof e=="string"?Ds(e):e;return Dl(ir({},t,{hash:""}))}function d4(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function p4(e){return typeof e=="object"&&e!=null&&"then"in e}function g4(e){return my(e.result)&&QE.has(e.result.status)}function Ks(e){return e.type===Wt.deferred}function Cn(e){return e.type===Wt.error}function Ws(e){return(e&&e.type)===Wt.redirect}function m4(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function my(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function y4(e){return ZE.has(e.toLowerCase())}function ii(e){return XE.has(e.toLowerCase())}async function rg(e,t,r,n,s,o){for(let u=0;u<r.length;u++){let h=r[u],g=t[u];if(!g)continue;let d=e.find(v=>v.route.id===g.route.id),x=d!=null&&!dy(d,g)&&(o&&o[g.route.id])!==void 0;if(Ks(h)&&(s||x)){let v=n[u];pt(v,"Expected an AbortSignal for revalidating fetcher deferred result"),await yy(h,v,s).then(y=>{y&&(r[u]=y||r[u])})}}}async function yy(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Wt.data,data:e.deferredData.unwrappedData}}catch(s){return{type:Wt.error,error:s}}return{type:Wt.data,data:e.deferredData.data}}}function r1(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ho(e,t){let r=typeof t=="string"?Ds(t).search:t.search;if(e[e.length-1].route.index&&r1(r||""))return e[e.length-1];let n=ly(e);return n[n.length-1]}function ng(e){let{formMethod:t,formAction:r,formEncType:n,text:s,formData:o,json:u}=e;if(!(!t||!r||!n)){if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:s};if(o!=null)return{formMethod:t,formAction:r,formEncType:n,formData:o,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:u,text:void 0}}}function Hf(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function v4(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Oo(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function x4(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function is(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function w4(e,t){try{let r=e.sessionStorage.getItem(hy);if(r){let n=JSON.parse(r);for(let[s,o]of Object.entries(n||{}))o&&Array.isArray(o)&&t.set(s,new Set(o||[]))}}catch{}}function E4(e,t){if(t.size>0){let r={};for(let[n,s]of t)r[n]=[...s];try{e.sessionStorage.setItem(hy,JSON.stringify(r))}catch(n){Za(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sc(){return sc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sc.apply(this,arguments)}const Pc=Re.createContext(null),vy=Re.createContext(null),Mc=Re.createContext(null),n1=Re.createContext(null),ia=Re.createContext({outlet:null,matches:[],isDataRoute:!1}),xy=Re.createContext(null);function Bc(){return Re.useContext(n1)!=null}function wy(){return Bc()||pt(!1),Re.useContext(n1).location}function Ey(e){Re.useContext(Mc).static||Re.useLayoutEffect(e)}function Sy(){let{isDataRoute:e}=Re.useContext(ia);return e?P4():S4()}function S4(){Bc()||pt(!1);let e=Re.useContext(Pc),{basename:t,future:r,navigator:n}=Re.useContext(Mc),{matches:s}=Re.useContext(ia),{pathname:o}=wy(),u=JSON.stringify(uy(s,r.v7_relativeSplatPath)),h=Re.useRef(!1);return Ey(()=>{h.current=!0}),Re.useCallback(function(d,x){if(x===void 0&&(x={}),!h.current)return;if(typeof d=="number"){n.go(d);return}let v=cy(d,JSON.parse(u),o,x.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Es([t,v.pathname])),(x.replace?n.replace:n.push)(v,x.state,x)},[t,n,u,o,e])}function A4(){let{matches:e}=Re.useContext(ia),t=e[e.length-1];return t?t.params:{}}function C4(e,t,r,n){Bc()||pt(!1);let{navigator:s}=Re.useContext(Mc),{matches:o}=Re.useContext(ia),u=o[o.length-1],h=u?u.params:{};u&&u.pathname;let g=u?u.pathnameBase:"/";u&&u.route;let d=wy(),x;x=d;let v=x.pathname||"/",y=v;if(g!=="/"){let A=g.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let S=ks(e,{pathname:y});return _4(S&&S.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:Es([g,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?g:Es([g,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),o,r,n)}function I4(){let e=F4(),t=Fc(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Re.createElement(Re.Fragment,null,Re.createElement("h2",null,"Unexpected Application Error!"),Re.createElement("h3",{style:{fontStyle:"italic"}},t),r?Re.createElement("pre",{style:s},r):null,null)}const b4=Re.createElement(I4,null);class T4 extends Re.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?Re.createElement(ia.Provider,{value:this.props.routeContext},Re.createElement(xy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N4(e){let{routeContext:t,match:r,children:n}=e,s=Re.useContext(Pc);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),Re.createElement(ia.Provider,{value:t},n)}function _4(e,t,r,n){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var o;if((o=r)!=null&&o.errors)e=r.matches;else return null}let u=e,h=(s=r)==null?void 0:s.errors;if(h!=null){let x=u.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);x>=0||pt(!1),u=u.slice(0,Math.min(u.length,x+1))}let g=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let x=0;x<u.length;x++){let v=u[x];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(d=x),v.route.id){let{loaderData:y,errors:S}=r,w=v.route.loader&&y[v.route.id]===void 0&&(!S||S[v.route.id]===void 0);if(v.route.lazy||w){g=!0,d>=0?u=u.slice(0,d+1):u=[u[0]];break}}}return u.reduceRight((x,v,y)=>{let S,w=!1,A=null,b=null;r&&(S=h&&v.route.id?h[v.route.id]:void 0,A=v.route.errorElement||b4,g&&(d<0&&y===0?(M4("route-fallback"),w=!0,b=null):d===y&&(w=!0,b=v.route.hydrateFallbackElement||null)));let I=t.concat(u.slice(0,y+1)),N=()=>{let F;return S?F=A:w?F=b:v.route.Component?F=Re.createElement(v.route.Component,null):v.route.element?F=v.route.element:F=x,Re.createElement(N4,{match:v,routeContext:{outlet:x,matches:I,isDataRoute:r!=null},children:F})};return r&&(v.route.ErrorBoundary||v.route.errorElement||y===0)?Re.createElement(T4,{location:r.location,revalidation:r.revalidation,component:A,error:S,children:N(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):N()},null)}var Ay=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Ay||{}),ac=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ac||{});function D4(e){let t=Re.useContext(Pc);return t||pt(!1),t}function R4(e){let t=Re.useContext(vy);return t||pt(!1),t}function O4(e){let t=Re.useContext(ia);return t||pt(!1),t}function Cy(e){let t=O4(),r=t.matches[t.matches.length-1];return r.route.id||pt(!1),r.route.id}function F4(){var e;let t=Re.useContext(xy),r=R4(ac.UseRouteError),n=Cy(ac.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function P4(){let{router:e}=D4(Ay.UseNavigateStable),t=Cy(ac.UseNavigateStable),r=Re.useRef(!1);return Ey(()=>{r.current=!0}),Re.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,sc({fromRouteId:t},o)))},[e,t])}const ig={};function M4(e,t,r){ig[e]||(ig[e]=!0)}function B4(e){let{basename:t="/",children:r=null,location:n,navigationType:s=wr.Pop,navigator:o,static:u=!1,future:h}=e;Bc()&&pt(!1);let g=t.replace(/^\/*/,"/"),d=Re.useMemo(()=>({basename:g,navigator:o,static:u,future:sc({v7_relativeSplatPath:!1},h)}),[g,h,o,u]);typeof n=="string"&&(n=Ds(n));let{pathname:x="/",search:v="",hash:y="",state:S=null,key:w="default"}=n,A=Re.useMemo(()=>{let b=Rl(x,g);return b==null?null:{location:{pathname:b,search:v,hash:y,state:S,key:w},navigationType:s}},[g,x,v,y,S,w,s]);return A==null?null:Re.createElement(Mc.Provider,{value:d},Re.createElement(n1.Provider,{children:r,value:A}))}new Promise(()=>{});function L4(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:Re.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:Re.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:Re.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oc(){return oc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oc.apply(this,arguments)}const k4="6";try{window.__reactRouterVersion=k4}catch{}function j4(e,t){return r4({basename:t==null?void 0:t.basename,future:oc({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:bE({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||H4(),routes:e,mapRouteProperties:L4,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,unstable_patchRoutesOnMiss:t==null?void 0:t.unstable_patchRoutesOnMiss,window:t==null?void 0:t.window}).initialize()}function H4(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=oc({},t,{errors:U4(t.errors)})),t}function U4(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")r[n]=new e1(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let o=window[s.__subType];if(typeof o=="function")try{let u=new o(s.message);u.stack="",r[n]=u}catch{}}if(r[n]==null){let o=new Error(s.message);o.stack="",r[n]=o}}else r[n]=s;return r}const V4=Re.createContext({isTransitioning:!1}),$4=Re.createContext(new Map),z4="startTransition",sg=_x[z4],K4="flushSync",ag=U3[K4];function W4(e){sg?sg(e):e()}function Fo(e){ag?ag(e):e()}class G4{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function q4(e){let{fallbackElement:t,router:r,future:n}=e,[s,o]=Re.useState(r.state),[u,h]=Re.useState(),[g,d]=Re.useState({isTransitioning:!1}),[x,v]=Re.useState(),[y,S]=Re.useState(),[w,A]=Re.useState(),b=Re.useRef(new Map),{v7_startTransition:I}=n||{},N=Re.useCallback(P=>{I?W4(P):P()},[I]),F=Re.useCallback((P,D)=>{let{deletedFetchers:k,unstable_flushSync:W,unstable_viewTransitionOpts:K}=D;k.forEach(G=>b.current.delete(G)),P.fetchers.forEach((G,V)=>{G.data!==void 0&&b.current.set(V,G.data)});let ie=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!K||ie){W?Fo(()=>o(P)):N(()=>o(P));return}if(W){Fo(()=>{y&&(x&&x.resolve(),y.skipTransition()),d({isTransitioning:!0,flushSync:!0,currentLocation:K.currentLocation,nextLocation:K.nextLocation})});let G=r.window.document.startViewTransition(()=>{Fo(()=>o(P))});G.finished.finally(()=>{Fo(()=>{v(void 0),S(void 0),h(void 0),d({isTransitioning:!1})})}),Fo(()=>S(G));return}y?(x&&x.resolve(),y.skipTransition(),A({state:P,currentLocation:K.currentLocation,nextLocation:K.nextLocation})):(h(P),d({isTransitioning:!0,flushSync:!1,currentLocation:K.currentLocation,nextLocation:K.nextLocation}))},[r.window,y,x,b,N]);Re.useLayoutEffect(()=>r.subscribe(F),[r,F]),Re.useEffect(()=>{g.isTransitioning&&!g.flushSync&&v(new G4)},[g]),Re.useEffect(()=>{if(x&&u&&r.window){let P=u,D=x.promise,k=r.window.document.startViewTransition(async()=>{N(()=>o(P)),await D});k.finished.finally(()=>{v(void 0),S(void 0),h(void 0),d({isTransitioning:!1})}),S(k)}},[N,u,x,r.window]),Re.useEffect(()=>{x&&u&&s.location.key===u.location.key&&x.resolve()},[x,y,s.location,u]),Re.useEffect(()=>{!g.isTransitioning&&w&&(h(w.state),d({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}),A(void 0))},[g.isTransitioning,w]),Re.useEffect(()=>{},[]);let L=Re.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:P=>r.navigate(P),push:(P,D,k)=>r.navigate(P,{state:D,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(P,D,k)=>r.navigate(P,{replace:!0,state:D,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[r]),H=r.basename||"/",_=Re.useMemo(()=>({router:r,navigator:L,static:!1,basename:H}),[r,L,H]),R=Re.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return Re.createElement(Re.Fragment,null,Re.createElement(Pc.Provider,{value:_},Re.createElement(vy.Provider,{value:s},Re.createElement($4.Provider,{value:b.current},Re.createElement(V4.Provider,{value:g},Re.createElement(B4,{basename:H,location:s.location,navigationType:s.historyAction,navigator:L,future:R},s.initialized||r.future.v7_partialHydration?Re.createElement(X4,{routes:r.routes,future:r.future,state:s}):t))))),null)}const X4=Re.memo(Y4);function Y4(e){let{routes:t,future:r,state:n}=e;return C4(t,void 0,n,r)}var og;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(og||(og={}));var lg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lg||(lg={}));function Z4(){const e=Sy();return Re.useEffect(()=>{const t={qrbox:{width:250,height:250},fps:5},r=new IE("reader",t,!1);let n=!0;r.render(s,o);async function s(u){n&&(r.clear(),e(`/permits/${u}`),n=!1)}function o(u){console.warn(u)}},[]),qe.jsxs("div",{className:"",children:[qe.jsx("h1",{className:"text-3xl font-bold",children:"E-PERMIT VERIFICATION"}),qe.jsx("div",{children:qe.jsx("div",{id:"reader"})})]})}function Q4(){return qe.jsx(Z4,{})}var $h={exports:{}},Iy={},ui={},Qa={},Ol={},dt={},Sl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(N){if(super(),!e.IDENTIFIER.test(N))throw new Error("CodeGen: name must be a valid identifier");this.str=N}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(N){super(),this._items=typeof N=="string"?[N]:N}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const N=this._items[0];return N===""||N==='""'}get str(){var N;return(N=this._str)!==null&&N!==void 0?N:this._str=this._items.reduce((F,L)=>`${F}${L}`,"")}get names(){var N;return(N=this._names)!==null&&N!==void 0?N:this._names=this._items.reduce((F,L)=>(L instanceof r&&(F[L.str]=(F[L.str]||0)+1),F),{})}}e._Code=n,e.nil=new n("");function s(I,...N){const F=[I[0]];let L=0;for(;L<N.length;)h(F,N[L]),F.push(I[++L]);return new n(F)}e._=s;const o=new n("+");function u(I,...N){const F=[S(I[0])];let L=0;for(;L<N.length;)F.push(o),h(F,N[L]),F.push(o,S(I[++L]));return g(F),new n(F)}e.str=u;function h(I,N){N instanceof n?I.push(...N._items):N instanceof r?I.push(N):I.push(v(N))}e.addCodeArg=h;function g(I){let N=1;for(;N<I.length-1;){if(I[N]===o){const F=d(I[N-1],I[N+1]);if(F!==void 0){I.splice(N-1,3,F);continue}I[N++]="+"}N++}}function d(I,N){if(N==='""')return I;if(I==='""')return N;if(typeof I=="string")return N instanceof r||I[I.length-1]!=='"'?void 0:typeof N!="string"?`${I.slice(0,-1)}${N}"`:N[0]==='"'?I.slice(0,-1)+N.slice(1):void 0;if(typeof N=="string"&&N[0]==='"'&&!(I instanceof r))return`"${I}${N.slice(1)}`}function x(I,N){return N.emptyStr()?I:I.emptyStr()?N:u`${I}${N}`}e.strConcat=x;function v(I){return typeof I=="number"||typeof I=="boolean"||I===null?I:S(Array.isArray(I)?I.join(","):I)}function y(I){return new n(S(I))}e.stringify=y;function S(I){return JSON.stringify(I).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=S;function w(I){return typeof I=="string"&&e.IDENTIFIER.test(I)?new n(`.${I}`):s`[${I}]`}e.getProperty=w;function A(I){if(typeof I=="string"&&e.IDENTIFIER.test(I))return new n(`${I}`);throw new Error(`CodeGen: invalid export name: ${I}, use explicit $id name mapping`)}e.getEsmExportName=A;function b(I){return new n(I.toString())}e.regexpCode=b})(Sl);var zh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=Sl;class r extends Error{constructor(d){super(`CodeGen: "code" for ${d} not defined`),this.value=d.value}}var n;(function(g){g[g.Started=0]="Started",g[g.Completed=1]="Completed"})(n||(e.UsedValueState=n={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:d,parent:x}={}){this._names={},this._prefixes=d,this._parent=x}toName(d){return d instanceof t.Name?d:this.name(d)}name(d){return new t.Name(this._newName(d))}_newName(d){const x=this._names[d]||this._nameGroup(d);return`${d}${x.index++}`}_nameGroup(d){var x,v;if(!((v=(x=this._parent)===null||x===void 0?void 0:x._prefixes)===null||v===void 0)&&v.has(d)||this._prefixes&&!this._prefixes.has(d))throw new Error(`CodeGen: prefix "${d}" is not allowed in this scope`);return this._names[d]={prefix:d,index:0}}}e.Scope=s;class o extends t.Name{constructor(d,x){super(x),this.prefix=d}setValue(d,{property:x,itemIndex:v}){this.value=d,this.scopePath=(0,t._)`.${new t.Name(x)}[${v}]`}}e.ValueScopeName=o;const u=(0,t._)`\n`;class h extends s{constructor(d){super(d),this._values={},this._scope=d.scope,this.opts={...d,_n:d.lines?u:t.nil}}get(){return this._scope}name(d){return new o(d,this._newName(d))}value(d,x){var v;if(x.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const y=this.toName(d),{prefix:S}=y,w=(v=x.key)!==null&&v!==void 0?v:x.ref;let A=this._values[S];if(A){const N=A.get(w);if(N)return N}else A=this._values[S]=new Map;A.set(w,y);const b=this._scope[S]||(this._scope[S]=[]),I=b.length;return b[I]=x.ref,y.setValue(x,{property:S,itemIndex:I}),y}getValue(d,x){const v=this._values[d];if(v)return v.get(x)}scopeRefs(d,x=this._values){return this._reduceValues(x,v=>{if(v.scopePath===void 0)throw new Error(`CodeGen: name "${v}" has no value`);return(0,t._)`${d}${v.scopePath}`})}scopeCode(d=this._values,x,v){return this._reduceValues(d,y=>{if(y.value===void 0)throw new Error(`CodeGen: name "${y}" has no value`);return y.value.code},x,v)}_reduceValues(d,x,v={},y){let S=t.nil;for(const w in d){const A=d[w];if(!A)continue;const b=v[w]=v[w]||new Map;A.forEach(I=>{if(b.has(I))return;b.set(I,n.Started);let N=x(I);if(N){const F=this.opts.es5?e.varKinds.var:e.varKinds.const;S=(0,t._)`${S}${F} ${I} = ${N};${this.opts._n}`}else if(N=y==null?void 0:y(I))S=(0,t._)`${S}${N}${this.opts._n}`;else throw new r(I);b.set(I,n.Completed)})}return S}}e.ValueScope=h})(zh);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=Sl,r=zh;var n=Sl;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=zh;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class o{optimizeNodes(){return this}optimizeNames(U,q){return this}}class u extends o{constructor(U,q,J){super(),this.varKind=U,this.name=q,this.rhs=J}render({es5:U,_n:q}){const J=U?r.varKinds.var:this.varKind,ve=this.rhs===void 0?"":` = ${this.rhs}`;return`${J} ${this.name}${ve};`+q}optimizeNames(U,q){if(U[this.name.str])return this.rhs&&(this.rhs=G(this.rhs,U,q)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class h extends o{constructor(U,q,J){super(),this.lhs=U,this.rhs=q,this.sideEffects=J}render({_n:U}){return`${this.lhs} = ${this.rhs};`+U}optimizeNames(U,q){if(!(this.lhs instanceof t.Name&&!U[this.lhs.str]&&!this.sideEffects))return this.rhs=G(this.rhs,U,q),this}get names(){const U=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ie(U,this.rhs)}}class g extends h{constructor(U,q,J,ve){super(U,J,ve),this.op=q}render({_n:U}){return`${this.lhs} ${this.op}= ${this.rhs};`+U}}class d extends o{constructor(U){super(),this.label=U,this.names={}}render({_n:U}){return`${this.label}:`+U}}class x extends o{constructor(U){super(),this.label=U,this.names={}}render({_n:U}){return`break${this.label?` ${this.label}`:""};`+U}}class v extends o{constructor(U){super(),this.error=U}render({_n:U}){return`throw ${this.error};`+U}get names(){return this.error.names}}class y extends o{constructor(U){super(),this.code=U}render({_n:U}){return`${this.code};`+U}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(U,q){return this.code=G(this.code,U,q),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class S extends o{constructor(U=[]){super(),this.nodes=U}render(U){return this.nodes.reduce((q,J)=>q+J.render(U),"")}optimizeNodes(){const{nodes:U}=this;let q=U.length;for(;q--;){const J=U[q].optimizeNodes();Array.isArray(J)?U.splice(q,1,...J):J?U[q]=J:U.splice(q,1)}return U.length>0?this:void 0}optimizeNames(U,q){const{nodes:J}=this;let ve=J.length;for(;ve--;){const ye=J[ve];ye.optimizeNames(U,q)||(V(U,ye.names),J.splice(ve,1))}return J.length>0?this:void 0}get names(){return this.nodes.reduce((U,q)=>K(U,q.names),{})}}class w extends S{render(U){return"{"+U._n+super.render(U)+"}"+U._n}}class A extends S{}class b extends w{}b.kind="else";class I extends w{constructor(U,q){super(q),this.condition=U}render(U){let q=`if(${this.condition})`+super.render(U);return this.else&&(q+="else "+this.else.render(U)),q}optimizeNodes(){super.optimizeNodes();const U=this.condition;if(U===!0)return this.nodes;let q=this.else;if(q){const J=q.optimizeNodes();q=this.else=Array.isArray(J)?new b(J):J}if(q)return U===!1?q instanceof I?q:q.nodes:this.nodes.length?this:new I(ce(U),q instanceof I?[q]:q.nodes);if(!(U===!1||!this.nodes.length))return this}optimizeNames(U,q){var J;if(this.else=(J=this.else)===null||J===void 0?void 0:J.optimizeNames(U,q),!!(super.optimizeNames(U,q)||this.else))return this.condition=G(this.condition,U,q),this}get names(){const U=super.names;return ie(U,this.condition),this.else&&K(U,this.else.names),U}}I.kind="if";class N extends w{}N.kind="for";class F extends N{constructor(U){super(),this.iteration=U}render(U){return`for(${this.iteration})`+super.render(U)}optimizeNames(U,q){if(super.optimizeNames(U,q))return this.iteration=G(this.iteration,U,q),this}get names(){return K(super.names,this.iteration.names)}}class L extends N{constructor(U,q,J,ve){super(),this.varKind=U,this.name=q,this.from=J,this.to=ve}render(U){const q=U.es5?r.varKinds.var:this.varKind,{name:J,from:ve,to:ye}=this;return`for(${q} ${J}=${ve}; ${J}<${ye}; ${J}++)`+super.render(U)}get names(){const U=ie(super.names,this.from);return ie(U,this.to)}}class H extends N{constructor(U,q,J,ve){super(),this.loop=U,this.varKind=q,this.name=J,this.iterable=ve}render(U){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(U)}optimizeNames(U,q){if(super.optimizeNames(U,q))return this.iterable=G(this.iterable,U,q),this}get names(){return K(super.names,this.iterable.names)}}class _ extends w{constructor(U,q,J){super(),this.name=U,this.args=q,this.async=J}render(U){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(U)}}_.kind="func";class R extends S{render(U){return"return "+super.render(U)}}R.kind="return";class P extends w{render(U){let q="try"+super.render(U);return this.catch&&(q+=this.catch.render(U)),this.finally&&(q+=this.finally.render(U)),q}optimizeNodes(){var U,q;return super.optimizeNodes(),(U=this.catch)===null||U===void 0||U.optimizeNodes(),(q=this.finally)===null||q===void 0||q.optimizeNodes(),this}optimizeNames(U,q){var J,ve;return super.optimizeNames(U,q),(J=this.catch)===null||J===void 0||J.optimizeNames(U,q),(ve=this.finally)===null||ve===void 0||ve.optimizeNames(U,q),this}get names(){const U=super.names;return this.catch&&K(U,this.catch.names),this.finally&&K(U,this.finally.names),U}}class D extends w{constructor(U){super(),this.error=U}render(U){return`catch(${this.error})`+super.render(U)}}D.kind="catch";class k extends w{render(U){return"finally"+super.render(U)}}k.kind="finally";class W{constructor(U,q={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...q,_n:q.lines?`
`:""},this._extScope=U,this._scope=new r.Scope({parent:U}),this._nodes=[new A]}toString(){return this._root.render(this.opts)}name(U){return this._scope.name(U)}scopeName(U){return this._extScope.name(U)}scopeValue(U,q){const J=this._extScope.value(U,q);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(U,q){return this._extScope.getValue(U,q)}scopeRefs(U){return this._extScope.scopeRefs(U,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(U,q,J,ve){const ye=this._scope.toName(q);return J!==void 0&&ve&&(this._constants[ye.str]=J),this._leafNode(new u(U,ye,J)),ye}const(U,q,J){return this._def(r.varKinds.const,U,q,J)}let(U,q,J){return this._def(r.varKinds.let,U,q,J)}var(U,q,J){return this._def(r.varKinds.var,U,q,J)}assign(U,q,J){return this._leafNode(new h(U,q,J))}add(U,q){return this._leafNode(new g(U,e.operators.ADD,q))}code(U){return typeof U=="function"?U():U!==t.nil&&this._leafNode(new y(U)),this}object(...U){const q=["{"];for(const[J,ve]of U)q.length>1&&q.push(","),q.push(J),(J!==ve||this.opts.es5)&&(q.push(":"),(0,t.addCodeArg)(q,ve));return q.push("}"),new t._Code(q)}if(U,q,J){if(this._blockNode(new I(U)),q&&J)this.code(q).else().code(J).endIf();else if(q)this.code(q).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(U){return this._elseNode(new I(U))}else(){return this._elseNode(new b)}endIf(){return this._endBlockNode(I,b)}_for(U,q){return this._blockNode(U),q&&this.code(q).endFor(),this}for(U,q){return this._for(new F(U),q)}forRange(U,q,J,ve,ye=this.opts.es5?r.varKinds.var:r.varKinds.let){const ke=this._scope.toName(U);return this._for(new L(ye,ke,q,J),()=>ve(ke))}forOf(U,q,J,ve=r.varKinds.const){const ye=this._scope.toName(U);if(this.opts.es5){const ke=q instanceof t.Name?q:this.var("_arr",q);return this.forRange("_i",0,(0,t._)`${ke}.length`,Le=>{this.var(ye,(0,t._)`${ke}[${Le}]`),J(ye)})}return this._for(new H("of",ve,ye,q),()=>J(ye))}forIn(U,q,J,ve=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(U,(0,t._)`Object.keys(${q})`,J);const ye=this._scope.toName(U);return this._for(new H("in",ve,ye,q),()=>J(ye))}endFor(){return this._endBlockNode(N)}label(U){return this._leafNode(new d(U))}break(U){return this._leafNode(new x(U))}return(U){const q=new R;if(this._blockNode(q),this.code(U),q.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(R)}try(U,q,J){if(!q&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const ve=new P;if(this._blockNode(ve),this.code(U),q){const ye=this.name("e");this._currNode=ve.catch=new D(ye),q(ye)}return J&&(this._currNode=ve.finally=new k,this.code(J)),this._endBlockNode(D,k)}throw(U){return this._leafNode(new v(U))}block(U,q){return this._blockStarts.push(this._nodes.length),U&&this.code(U).endBlock(q),this}endBlock(U){const q=this._blockStarts.pop();if(q===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-q;if(J<0||U!==void 0&&J!==U)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${U} expected`);return this._nodes.length=q,this}func(U,q=t.nil,J,ve){return this._blockNode(new _(U,q,J)),ve&&this.code(ve).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(U=1){for(;U-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(U){return this._currNode.nodes.push(U),this}_blockNode(U){this._currNode.nodes.push(U),this._nodes.push(U)}_endBlockNode(U,q){const J=this._currNode;if(J instanceof U||q&&J instanceof q)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${q?`${U.kind}/${q.kind}`:U.kind}"`)}_elseNode(U){const q=this._currNode;if(!(q instanceof I))throw new Error('CodeGen: "else" without "if"');return this._currNode=q.else=U,this}get _root(){return this._nodes[0]}get _currNode(){const U=this._nodes;return U[U.length-1]}set _currNode(U){const q=this._nodes;q[q.length-1]=U}}e.CodeGen=W;function K(ne,U){for(const q in U)ne[q]=(ne[q]||0)+(U[q]||0);return ne}function ie(ne,U){return U instanceof t._CodeOrName?K(ne,U.names):ne}function G(ne,U,q){if(ne instanceof t.Name)return J(ne);if(!ve(ne))return ne;return new t._Code(ne._items.reduce((ye,ke)=>(ke instanceof t.Name&&(ke=J(ke)),ke instanceof t._Code?ye.push(...ke._items):ye.push(ke),ye),[]));function J(ye){const ke=q[ye.str];return ke===void 0||U[ye.str]!==1?ye:(delete U[ye.str],ke)}function ve(ye){return ye instanceof t._Code&&ye._items.some(ke=>ke instanceof t.Name&&U[ke.str]===1&&q[ke.str]!==void 0)}}function V(ne,U){for(const q in U)ne[q]=(ne[q]||0)-(U[q]||0)}function ce(ne){return typeof ne=="boolean"||typeof ne=="number"||ne===null?!ne:(0,t._)`!${le(ne)}`}e.not=ce;const te=Y(e.operators.AND);function Ee(...ne){return ne.reduce(te)}e.and=Ee;const be=Y(e.operators.OR);function oe(...ne){return ne.reduce(be)}e.or=oe;function Y(ne){return(U,q)=>U===t.nil?q:q===t.nil?U:(0,t._)`${le(U)} ${ne} ${le(q)}`}function le(ne){return ne instanceof t.Name?ne:(0,t._)`(${ne})`}})(dt);var Pe={};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.checkStrictMode=Pe.getErrorPath=Pe.Type=Pe.useFunc=Pe.setEvaluated=Pe.evaluatedPropsToName=Pe.mergeEvaluated=Pe.eachItem=Pe.unescapeJsonPointer=Pe.escapeJsonPointer=Pe.escapeFragment=Pe.unescapeFragment=Pe.schemaRefOrVal=Pe.schemaHasRulesButRef=Pe.schemaHasRules=Pe.checkUnknownRules=Pe.alwaysValidSchema=Pe.toHash=void 0;const zt=dt,J4=Sl;function eS(e){const t={};for(const r of e)t[r]=!0;return t}Pe.toHash=eS;function tS(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(by(e,t),!Ty(t,e.self.RULES.all))}Pe.alwaysValidSchema=tS;function by(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;const s=n.RULES.keywords;for(const o in t)s[o]||Dy(e,`unknown keyword: "${o}"`)}Pe.checkUnknownRules=by;function Ty(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(t[r])return!0;return!1}Pe.schemaHasRules=Ty;function rS(e,t){if(typeof e=="boolean")return!e;for(const r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}Pe.schemaHasRulesButRef=rS;function nS({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,zt._)`${r}`}return(0,zt._)`${e}${t}${(0,zt.getProperty)(n)}`}Pe.schemaRefOrVal=nS;function iS(e){return Ny(decodeURIComponent(e))}Pe.unescapeFragment=iS;function sS(e){return encodeURIComponent(i1(e))}Pe.escapeFragment=sS;function i1(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Pe.escapeJsonPointer=i1;function Ny(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Pe.unescapeJsonPointer=Ny;function aS(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)}Pe.eachItem=aS;function ug({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,o,u,h)=>{const g=u===void 0?o:u instanceof zt.Name?(o instanceof zt.Name?e(s,o,u):t(s,o,u),u):o instanceof zt.Name?(t(s,u,o),o):r(o,u);return h===zt.Name&&!(g instanceof zt.Name)?n(s,g):g}}Pe.mergeEvaluated={props:ug({mergeNames:(e,t,r)=>e.if((0,zt._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,zt._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,zt._)`${r} || {}`).code((0,zt._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,zt._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,zt._)`${r} || {}`),s1(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:_y}),items:ug({mergeNames:(e,t,r)=>e.if((0,zt._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,zt._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,zt._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,zt._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function _y(e,t){if(t===!0)return e.var("props",!0);const r=e.var("props",(0,zt._)`{}`);return t!==void 0&&s1(e,r,t),r}Pe.evaluatedPropsToName=_y;function s1(e,t,r){Object.keys(r).forEach(n=>e.assign((0,zt._)`${t}${(0,zt.getProperty)(n)}`,!0))}Pe.setEvaluated=s1;const cg={};function oS(e,t){return e.scopeValue("func",{ref:t,code:cg[t.code]||(cg[t.code]=new J4._Code(t.code))})}Pe.useFunc=oS;var Kh;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Kh||(Pe.Type=Kh={}));function lS(e,t,r){if(e instanceof zt.Name){const n=t===Kh.Num;return r?n?(0,zt._)`"[" + ${e} + "]"`:(0,zt._)`"['" + ${e} + "']"`:n?(0,zt._)`"/" + ${e}`:(0,zt._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,zt.getProperty)(e).toString():"/"+i1(e)}Pe.getErrorPath=lS;function Dy(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}Pe.checkStrictMode=Dy;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0});const Wr=dt,uS={data:new Wr.Name("data"),valCxt:new Wr.Name("valCxt"),instancePath:new Wr.Name("instancePath"),parentData:new Wr.Name("parentData"),parentDataProperty:new Wr.Name("parentDataProperty"),rootData:new Wr.Name("rootData"),dynamicAnchors:new Wr.Name("dynamicAnchors"),vErrors:new Wr.Name("vErrors"),errors:new Wr.Name("errors"),this:new Wr.Name("this"),self:new Wr.Name("self"),scope:new Wr.Name("scope"),json:new Wr.Name("json"),jsonPos:new Wr.Name("jsonPos"),jsonLen:new Wr.Name("jsonLen"),jsonPart:new Wr.Name("jsonPart")};Ti.default=uS;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=dt,r=Pe,n=Ti;e.keywordError={message:({keyword:b})=>(0,t.str)`must pass "${b}" keyword validation`},e.keyword$DataError={message:({keyword:b,schemaType:I})=>I?(0,t.str)`"${b}" keyword must be ${I} ($data)`:(0,t.str)`"${b}" keyword is invalid ($data)`};function s(b,I=e.keywordError,N,F){const{it:L}=b,{gen:H,compositeRule:_,allErrors:R}=L,P=v(b,I,N);F??(_||R)?g(H,P):d(L,(0,t._)`[${P}]`)}e.reportError=s;function o(b,I=e.keywordError,N){const{it:F}=b,{gen:L,compositeRule:H,allErrors:_}=F,R=v(b,I,N);g(L,R),H||_||d(F,n.default.vErrors)}e.reportExtraError=o;function u(b,I){b.assign(n.default.errors,I),b.if((0,t._)`${n.default.vErrors} !== null`,()=>b.if(I,()=>b.assign((0,t._)`${n.default.vErrors}.length`,I),()=>b.assign(n.default.vErrors,null)))}e.resetErrorsCount=u;function h({gen:b,keyword:I,schemaValue:N,data:F,errsCount:L,it:H}){if(L===void 0)throw new Error("ajv implementation error");const _=b.name("err");b.forRange("i",L,n.default.errors,R=>{b.const(_,(0,t._)`${n.default.vErrors}[${R}]`),b.if((0,t._)`${_}.instancePath === undefined`,()=>b.assign((0,t._)`${_}.instancePath`,(0,t.strConcat)(n.default.instancePath,H.errorPath))),b.assign((0,t._)`${_}.schemaPath`,(0,t.str)`${H.errSchemaPath}/${I}`),H.opts.verbose&&(b.assign((0,t._)`${_}.schema`,N),b.assign((0,t._)`${_}.data`,F))})}e.extendErrors=h;function g(b,I){const N=b.const("err",I);b.if((0,t._)`${n.default.vErrors} === null`,()=>b.assign(n.default.vErrors,(0,t._)`[${N}]`),(0,t._)`${n.default.vErrors}.push(${N})`),b.code((0,t._)`${n.default.errors}++`)}function d(b,I){const{gen:N,validateName:F,schemaEnv:L}=b;L.$async?N.throw((0,t._)`new ${b.ValidationError}(${I})`):(N.assign((0,t._)`${F}.errors`,I),N.return(!1))}const x={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function v(b,I,N){const{createErrors:F}=b.it;return F===!1?(0,t._)`{}`:y(b,I,N)}function y(b,I,N={}){const{gen:F,it:L}=b,H=[S(L,N),w(b,N)];return A(b,I,H),F.object(...H)}function S({errorPath:b},{instancePath:I}){const N=I?(0,t.str)`${b}${(0,r.getErrorPath)(I,r.Type.Str)}`:b;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,N)]}function w({keyword:b,it:{errSchemaPath:I}},{schemaPath:N,parentSchema:F}){let L=F?I:(0,t.str)`${I}/${b}`;return N&&(L=(0,t.str)`${L}${(0,r.getErrorPath)(N,r.Type.Str)}`),[x.schemaPath,L]}function A(b,{params:I,message:N},F){const{keyword:L,data:H,schemaValue:_,it:R}=b,{opts:P,propertyName:D,topSchemaRef:k,schemaPath:W}=R;F.push([x.keyword,L],[x.params,typeof I=="function"?I(b):I||(0,t._)`{}`]),P.messages&&F.push([x.message,typeof N=="function"?N(b):N]),P.verbose&&F.push([x.schema,_],[x.parentSchema,(0,t._)`${k}${W}`],[n.default.data,H]),D&&F.push([x.propertyName,D])}})(Ol);Object.defineProperty(Qa,"__esModule",{value:!0});Qa.boolOrEmptySchema=Qa.topBoolOrEmptySchema=void 0;const cS=Ol,fS=dt,hS=Ti,dS={message:"boolean schema is false"};function pS(e){const{gen:t,schema:r,validateName:n}=e;r===!1?Ry(e,!1):typeof r=="object"&&r.$async===!0?t.return(hS.default.data):(t.assign((0,fS._)`${n}.errors`,null),t.return(!0))}Qa.topBoolOrEmptySchema=pS;function gS(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),Ry(e)):r.var(t,!0)}Qa.boolOrEmptySchema=gS;function Ry(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,cS.reportError)(s,dS,void 0,t)}var Tr={},ea={};Object.defineProperty(ea,"__esModule",{value:!0});ea.getRules=ea.isJSONType=void 0;const mS=["string","number","integer","boolean","null","object","array"],yS=new Set(mS);function vS(e){return typeof e=="string"&&yS.has(e)}ea.isJSONType=vS;function xS(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}ea.getRules=xS;var Li={};Object.defineProperty(Li,"__esModule",{value:!0});Li.shouldUseRule=Li.shouldUseGroup=Li.schemaHasRulesForType=void 0;function wS({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&Oy(e,n)}Li.schemaHasRulesForType=wS;function Oy(e,t){return t.rules.some(r=>Fy(e,r))}Li.shouldUseGroup=Oy;function Fy(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Li.shouldUseRule=Fy;Object.defineProperty(Tr,"__esModule",{value:!0});Tr.reportTypeError=Tr.checkDataTypes=Tr.checkDataType=Tr.coerceAndCheckDataType=Tr.getJSONTypes=Tr.getSchemaTypes=Tr.DataType=void 0;const ES=ea,SS=Li,AS=Ol,lt=dt,Py=Pe;var Va;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Va||(Tr.DataType=Va={}));function CS(e){const t=My(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Tr.getSchemaTypes=CS;function My(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(ES.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Tr.getJSONTypes=My;function IS(e,t){const{gen:r,data:n,opts:s}=e,o=bS(t,s.coerceTypes),u=t.length>0&&!(o.length===0&&t.length===1&&(0,SS.schemaHasRulesForType)(e,t[0]));if(u){const h=a1(t,n,s.strictNumbers,Va.Wrong);r.if(h,()=>{o.length?TS(e,t,o):o1(e)})}return u}Tr.coerceAndCheckDataType=IS;const By=new Set(["string","number","integer","boolean","null"]);function bS(e,t){return t?e.filter(r=>By.has(r)||t==="array"&&r==="array"):[]}function TS(e,t,r){const{gen:n,data:s,opts:o}=e,u=n.let("dataType",(0,lt._)`typeof ${s}`),h=n.let("coerced",(0,lt._)`undefined`);o.coerceTypes==="array"&&n.if((0,lt._)`${u} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,lt._)`${s}[0]`).assign(u,(0,lt._)`typeof ${s}`).if(a1(t,s,o.strictNumbers),()=>n.assign(h,s))),n.if((0,lt._)`${h} !== undefined`);for(const d of r)(By.has(d)||d==="array"&&o.coerceTypes==="array")&&g(d);n.else(),o1(e),n.endIf(),n.if((0,lt._)`${h} !== undefined`,()=>{n.assign(s,h),NS(e,h)});function g(d){switch(d){case"string":n.elseIf((0,lt._)`${u} == "number" || ${u} == "boolean"`).assign(h,(0,lt._)`"" + ${s}`).elseIf((0,lt._)`${s} === null`).assign(h,(0,lt._)`""`);return;case"number":n.elseIf((0,lt._)`${u} == "boolean" || ${s} === null
              || (${u} == "string" && ${s} && ${s} == +${s})`).assign(h,(0,lt._)`+${s}`);return;case"integer":n.elseIf((0,lt._)`${u} === "boolean" || ${s} === null
              || (${u} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(h,(0,lt._)`+${s}`);return;case"boolean":n.elseIf((0,lt._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(h,!1).elseIf((0,lt._)`${s} === "true" || ${s} === 1`).assign(h,!0);return;case"null":n.elseIf((0,lt._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(h,null);return;case"array":n.elseIf((0,lt._)`${u} === "string" || ${u} === "number"
              || ${u} === "boolean" || ${s} === null`).assign(h,(0,lt._)`[${s}]`)}}}function NS({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,lt._)`${t} !== undefined`,()=>e.assign((0,lt._)`${t}[${r}]`,n))}function Wh(e,t,r,n=Va.Correct){const s=n===Va.Correct?lt.operators.EQ:lt.operators.NEQ;let o;switch(e){case"null":return(0,lt._)`${t} ${s} null`;case"array":o=(0,lt._)`Array.isArray(${t})`;break;case"object":o=(0,lt._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=u((0,lt._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=u();break;default:return(0,lt._)`typeof ${t} ${s} ${e}`}return n===Va.Correct?o:(0,lt.not)(o);function u(h=lt.nil){return(0,lt.and)((0,lt._)`typeof ${t} == "number"`,h,r?(0,lt._)`isFinite(${t})`:lt.nil)}}Tr.checkDataType=Wh;function a1(e,t,r,n){if(e.length===1)return Wh(e[0],t,r,n);let s;const o=(0,Py.toHash)(e);if(o.array&&o.object){const u=(0,lt._)`typeof ${t} != "object"`;s=o.null?u:(0,lt._)`!${t} || ${u}`,delete o.null,delete o.array,delete o.object}else s=lt.nil;o.number&&delete o.integer;for(const u in o)s=(0,lt.and)(s,Wh(u,t,r,n));return s}Tr.checkDataTypes=a1;const _S={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,lt._)`{type: ${e}}`:(0,lt._)`{type: ${t}}`};function o1(e){const t=DS(e);(0,AS.reportError)(t,_S)}Tr.reportTypeError=o1;function DS(e){const{gen:t,data:r,schema:n}=e,s=(0,Py.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.assignDefaults=void 0;const ya=dt,RS=Pe;function OS(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)fg(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,o)=>fg(e,o,s.default))}Lc.assignDefaults=OS;function fg(e,t,r){const{gen:n,compositeRule:s,data:o,opts:u}=e;if(r===void 0)return;const h=(0,ya._)`${o}${(0,ya.getProperty)(t)}`;if(s){(0,RS.checkStrictMode)(e,`default is ignored for: ${h}`);return}let g=(0,ya._)`${h} === undefined`;u.useDefaults==="empty"&&(g=(0,ya._)`${g} || ${h} === null || ${h} === ""`),n.if(g,(0,ya._)`${h} = ${(0,ya.stringify)(r)}`)}var Si={},ht={};Object.defineProperty(ht,"__esModule",{value:!0});ht.validateUnion=ht.validateArray=ht.usePattern=ht.callValidateCode=ht.schemaProperties=ht.allSchemaProperties=ht.noPropertyInData=ht.propertyInData=ht.isOwnProperty=ht.hasPropFunc=ht.reportMissingProp=ht.checkMissingProp=ht.checkReportMissingProp=void 0;const Qt=dt,l1=Pe,rs=Ti,FS=Pe;function PS(e,t){const{gen:r,data:n,it:s}=e;r.if(c1(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Qt._)`${t}`},!0),e.error()})}ht.checkReportMissingProp=PS;function MS({gen:e,data:t,it:{opts:r}},n,s){return(0,Qt.or)(...n.map(o=>(0,Qt.and)(c1(e,t,o,r.ownProperties),(0,Qt._)`${s} = ${o}`)))}ht.checkMissingProp=MS;function BS(e,t){e.setParams({missingProperty:t},!0),e.error()}ht.reportMissingProp=BS;function Ly(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Qt._)`Object.prototype.hasOwnProperty`})}ht.hasPropFunc=Ly;function u1(e,t,r){return(0,Qt._)`${Ly(e)}.call(${t}, ${r})`}ht.isOwnProperty=u1;function LS(e,t,r,n){const s=(0,Qt._)`${t}${(0,Qt.getProperty)(r)} !== undefined`;return n?(0,Qt._)`${s} && ${u1(e,t,r)}`:s}ht.propertyInData=LS;function c1(e,t,r,n){const s=(0,Qt._)`${t}${(0,Qt.getProperty)(r)} === undefined`;return n?(0,Qt.or)(s,(0,Qt.not)(u1(e,t,r))):s}ht.noPropertyInData=c1;function ky(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}ht.allSchemaProperties=ky;function kS(e,t){return ky(t).filter(r=>!(0,l1.alwaysValidSchema)(e,t[r]))}ht.schemaProperties=kS;function jS({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:o},it:u},h,g,d){const x=d?(0,Qt._)`${e}, ${t}, ${n}${s}`:t,v=[[rs.default.instancePath,(0,Qt.strConcat)(rs.default.instancePath,o)],[rs.default.parentData,u.parentData],[rs.default.parentDataProperty,u.parentDataProperty],[rs.default.rootData,rs.default.rootData]];u.opts.dynamicRef&&v.push([rs.default.dynamicAnchors,rs.default.dynamicAnchors]);const y=(0,Qt._)`${x}, ${r.object(...v)}`;return g!==Qt.nil?(0,Qt._)`${h}.call(${g}, ${y})`:(0,Qt._)`${h}(${y})`}ht.callValidateCode=jS;const HS=(0,Qt._)`new RegExp`;function US({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,o=s(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,Qt._)`${s.code==="new RegExp"?HS:(0,FS.useFunc)(e,s)}(${r}, ${n})`})}ht.usePattern=US;function VS(e){const{gen:t,data:r,keyword:n,it:s}=e,o=t.name("valid");if(s.allErrors){const h=t.let("valid",!0);return u(()=>t.assign(h,!1)),h}return t.var(o,!0),u(()=>t.break()),o;function u(h){const g=t.const("len",(0,Qt._)`${r}.length`);t.forRange("i",0,g,d=>{e.subschema({keyword:n,dataProp:d,dataPropType:l1.Type.Num},o),t.if((0,Qt.not)(o),h)})}}ht.validateArray=VS;function $S(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(g=>(0,l1.alwaysValidSchema)(s,g))&&!s.opts.unevaluated)return;const u=t.let("valid",!1),h=t.name("_valid");t.block(()=>r.forEach((g,d)=>{const x=e.subschema({keyword:n,schemaProp:d,compositeRule:!0},h);t.assign(u,(0,Qt._)`${u} || ${h}`),e.mergeValidEvaluated(x,h)||t.if((0,Qt.not)(u))})),e.result(u,()=>e.reset(),()=>e.error(!0))}ht.validateUnion=$S;Object.defineProperty(Si,"__esModule",{value:!0});Si.validateKeywordUsage=Si.validSchemaType=Si.funcKeywordCode=Si.macroKeywordCode=void 0;const Jr=dt,js=Ti,zS=ht,KS=Ol;function WS(e,t){const{gen:r,keyword:n,schema:s,parentSchema:o,it:u}=e,h=t.macro.call(u.self,s,o,u),g=jy(r,n,h);u.opts.validateSchema!==!1&&u.self.validateSchema(h,!0);const d=r.name("valid");e.subschema({schema:h,schemaPath:Jr.nil,errSchemaPath:`${u.errSchemaPath}/${n}`,topSchemaRef:g,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}Si.macroKeywordCode=WS;function GS(e,t){var r;const{gen:n,keyword:s,schema:o,parentSchema:u,$data:h,it:g}=e;XS(g,t);const d=!h&&t.compile?t.compile.call(g.self,o,u,g):t.validate,x=jy(n,s,d),v=n.let("valid");e.block$data(v,y),e.ok((r=t.valid)!==null&&r!==void 0?r:v);function y(){if(t.errors===!1)A(),t.modifying&&hg(e),b(()=>e.error());else{const I=t.async?S():w();t.modifying&&hg(e),b(()=>qS(e,I))}}function S(){const I=n.let("ruleErrs",null);return n.try(()=>A((0,Jr._)`await `),N=>n.assign(v,!1).if((0,Jr._)`${N} instanceof ${g.ValidationError}`,()=>n.assign(I,(0,Jr._)`${N}.errors`),()=>n.throw(N))),I}function w(){const I=(0,Jr._)`${x}.errors`;return n.assign(I,null),A(Jr.nil),I}function A(I=t.async?(0,Jr._)`await `:Jr.nil){const N=g.opts.passContext?js.default.this:js.default.self,F=!("compile"in t&&!h||t.schema===!1);n.assign(v,(0,Jr._)`${I}${(0,zS.callValidateCode)(e,x,N,F)}`,t.modifying)}function b(I){var N;n.if((0,Jr.not)((N=t.valid)!==null&&N!==void 0?N:v),I)}}Si.funcKeywordCode=GS;function hg(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,Jr._)`${n.parentData}[${n.parentDataProperty}]`))}function qS(e,t){const{gen:r}=e;r.if((0,Jr._)`Array.isArray(${t})`,()=>{r.assign(js.default.vErrors,(0,Jr._)`${js.default.vErrors} === null ? ${t} : ${js.default.vErrors}.concat(${t})`).assign(js.default.errors,(0,Jr._)`${js.default.vErrors}.length`),(0,KS.extendErrors)(e)},()=>e.error())}function XS({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function jy(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Jr.stringify)(r)})}function YS(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Si.validSchemaType=YS;function ZS({schema:e,opts:t,self:r,errSchemaPath:n},s,o){if(Array.isArray(s.keyword)?!s.keyword.includes(o):s.keyword!==o)throw new Error("ajv implementation error");const u=s.dependencies;if(u!=null&&u.some(h=>!Object.prototype.hasOwnProperty.call(e,h)))throw new Error(`parent schema must have dependencies of ${o}: ${u.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[o])){const g=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(g);else throw new Error(g)}}Si.validateKeywordUsage=ZS;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.extendSubschemaMode=Ss.extendSubschemaData=Ss.getSubschema=void 0;const Ei=dt,Hy=Pe;function QS(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:o,topSchemaRef:u}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const h=e.schema[t];return r===void 0?{schema:h,schemaPath:(0,Ei._)`${e.schemaPath}${(0,Ei.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:h[r],schemaPath:(0,Ei._)`${e.schemaPath}${(0,Ei.getProperty)(t)}${(0,Ei.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Hy.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||o===void 0||u===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:u,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Ss.getSubschema=QS;function JS(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:o,propertyName:u}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:h}=t;if(r!==void 0){const{errorPath:d,dataPathArr:x,opts:v}=t,y=h.let("data",(0,Ei._)`${t.data}${(0,Ei.getProperty)(r)}`,!0);g(y),e.errorPath=(0,Ei.str)`${d}${(0,Hy.getErrorPath)(r,n,v.jsPropertySyntax)}`,e.parentDataProperty=(0,Ei._)`${r}`,e.dataPathArr=[...x,e.parentDataProperty]}if(s!==void 0){const d=s instanceof Ei.Name?s:h.let("data",s,!0);g(d),u!==void 0&&(e.propertyName=u)}o&&(e.dataTypes=o);function g(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}Ss.extendSubschemaData=JS;function e8(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:o}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Ss.extendSubschemaMode=e8;var Hr={},Uy=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[s]))return!1;for(s=n;s--!==0;){var u=o[s];if(!e(t[u],r[u]))return!1}return!0}return t!==t&&r!==r},Vy={exports:{}},fs=Vy.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Nu(t,n,s,e,"",e)};fs.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};fs.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};fs.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};fs.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Nu(e,t,r,n,s,o,u,h,g,d){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,o,u,h,g,d);for(var x in n){var v=n[x];if(Array.isArray(v)){if(x in fs.arrayKeywords)for(var y=0;y<v.length;y++)Nu(e,t,r,v[y],s+"/"+x+"/"+y,o,s,x,n,y)}else if(x in fs.propsKeywords){if(v&&typeof v=="object")for(var S in v)Nu(e,t,r,v[S],s+"/"+x+"/"+t8(S),o,s,x,n,S)}else(x in fs.keywords||e.allKeys&&!(x in fs.skipKeywords))&&Nu(e,t,r,v,s+"/"+x,o,s,x,n)}r(n,s,o,u,h,g,d)}}function t8(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var r8=Vy.exports;Object.defineProperty(Hr,"__esModule",{value:!0});Hr.getSchemaRefs=Hr.resolveUrl=Hr.normalizeId=Hr._getFullPath=Hr.getFullPath=Hr.inlineRef=void 0;const n8=Pe,i8=Uy,s8=r8,a8=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function o8(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Gh(e):t?$y(e)<=t:!1}Hr.inlineRef=o8;const l8=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Gh(e){for(const t in e){if(l8.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(Gh)||typeof r=="object"&&Gh(r))return!0}return!1}function $y(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!a8.has(r)&&(typeof e[r]=="object"&&(0,n8.eachItem)(e[r],n=>t+=$y(n)),t===1/0))return 1/0}return t}function zy(e,t="",r){r!==!1&&(t=$a(t));const n=e.parse(t);return Ky(e,n)}Hr.getFullPath=zy;function Ky(e,t){return e.serialize(t).split("#")[0]+"#"}Hr._getFullPath=Ky;const u8=/#\/?$/;function $a(e){return e?e.replace(u8,""):""}Hr.normalizeId=$a;function c8(e,t,r){return r=$a(r),e.resolve(t,r)}Hr.resolveUrl=c8;const f8=/^[a-z_][-a-z0-9._]*$/i;function h8(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=$a(e[r]||t),o={"":s},u=zy(n,s,!1),h={},g=new Set;return s8(e,{allKeys:!0},(v,y,S,w)=>{if(w===void 0)return;const A=u+y;let b=o[w];typeof v[r]=="string"&&(b=I.call(this,v[r])),N.call(this,v.$anchor),N.call(this,v.$dynamicAnchor),o[y]=b;function I(F){const L=this.opts.uriResolver.resolve;if(F=$a(b?L(b,F):F),g.has(F))throw x(F);g.add(F);let H=this.refs[F];return typeof H=="string"&&(H=this.refs[H]),typeof H=="object"?d(v,H.schema,F):F!==$a(A)&&(F[0]==="#"?(d(v,h[F],F),h[F]=v):this.refs[F]=A),F}function N(F){if(typeof F=="string"){if(!f8.test(F))throw new Error(`invalid anchor "${F}"`);I.call(this,`#${F}`)}}}),h;function d(v,y,S){if(y!==void 0&&!i8(v,y))throw x(S)}function x(v){return new Error(`reference "${v}" resolves to more than one schema`)}}Hr.getSchemaRefs=h8;Object.defineProperty(ui,"__esModule",{value:!0});ui.getData=ui.KeywordCxt=ui.validateFunctionCode=void 0;const Wy=Qa,dg=Tr,f1=Li,lc=Tr,d8=Lc,Qo=Si,Uf=Ss,He=dt,nt=Ti,p8=Hr,ki=Pe,Po=Ol;function g8(e){if(Xy(e)&&(Yy(e),qy(e))){v8(e);return}Gy(e,()=>(0,Wy.topBoolOrEmptySchema)(e))}ui.validateFunctionCode=g8;function Gy({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},o){s.code.es5?e.func(t,(0,He._)`${nt.default.data}, ${nt.default.valCxt}`,n.$async,()=>{e.code((0,He._)`"use strict"; ${pg(r,s)}`),y8(e,s),e.code(o)}):e.func(t,(0,He._)`${nt.default.data}, ${m8(s)}`,n.$async,()=>e.code(pg(r,s)).code(o))}function m8(e){return(0,He._)`{${nt.default.instancePath}="", ${nt.default.parentData}, ${nt.default.parentDataProperty}, ${nt.default.rootData}=${nt.default.data}${e.dynamicRef?(0,He._)`, ${nt.default.dynamicAnchors}={}`:He.nil}}={}`}function y8(e,t){e.if(nt.default.valCxt,()=>{e.var(nt.default.instancePath,(0,He._)`${nt.default.valCxt}.${nt.default.instancePath}`),e.var(nt.default.parentData,(0,He._)`${nt.default.valCxt}.${nt.default.parentData}`),e.var(nt.default.parentDataProperty,(0,He._)`${nt.default.valCxt}.${nt.default.parentDataProperty}`),e.var(nt.default.rootData,(0,He._)`${nt.default.valCxt}.${nt.default.rootData}`),t.dynamicRef&&e.var(nt.default.dynamicAnchors,(0,He._)`${nt.default.valCxt}.${nt.default.dynamicAnchors}`)},()=>{e.var(nt.default.instancePath,(0,He._)`""`),e.var(nt.default.parentData,(0,He._)`undefined`),e.var(nt.default.parentDataProperty,(0,He._)`undefined`),e.var(nt.default.rootData,nt.default.data),t.dynamicRef&&e.var(nt.default.dynamicAnchors,(0,He._)`{}`)})}function v8(e){const{schema:t,opts:r,gen:n}=e;Gy(e,()=>{r.$comment&&t.$comment&&Qy(e),A8(e),n.let(nt.default.vErrors,null),n.let(nt.default.errors,0),r.unevaluated&&x8(e),Zy(e),b8(e)})}function x8(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,He._)`${r}.evaluated`),t.if((0,He._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,He._)`${e.evaluated}.props`,(0,He._)`undefined`)),t.if((0,He._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,He._)`${e.evaluated}.items`,(0,He._)`undefined`))}function pg(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,He._)`/*# sourceURL=${r} */`:He.nil}function w8(e,t){if(Xy(e)&&(Yy(e),qy(e))){E8(e,t);return}(0,Wy.boolOrEmptySchema)(e,t)}function qy({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function Xy(e){return typeof e.schema!="boolean"}function E8(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&Qy(e),C8(e),I8(e);const o=n.const("_errs",nt.default.errors);Zy(e,o),n.var(t,(0,He._)`${o} === ${nt.default.errors}`)}function Yy(e){(0,ki.checkUnknownRules)(e),S8(e)}function Zy(e,t){if(e.opts.jtd)return gg(e,[],!1,t);const r=(0,dg.getSchemaTypes)(e.schema),n=(0,dg.coerceAndCheckDataType)(e,r);gg(e,r,!n,t)}function S8(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,ki.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function A8(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,ki.checkStrictMode)(e,"default is ignored in the schema root")}function C8(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,p8.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function I8(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Qy({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const o=r.$comment;if(s.$comment===!0)e.code((0,He._)`${nt.default.self}.logger.log(${o})`);else if(typeof s.$comment=="function"){const u=(0,He.str)`${n}/$comment`,h=e.scopeValue("root",{ref:t.root});e.code((0,He._)`${nt.default.self}.opts.$comment(${o}, ${u}, ${h}.schema)`)}}function b8(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:o}=e;r.$async?t.if((0,He._)`${nt.default.errors} === 0`,()=>t.return(nt.default.data),()=>t.throw((0,He._)`new ${s}(${nt.default.vErrors})`)):(t.assign((0,He._)`${n}.errors`,nt.default.vErrors),o.unevaluated&&T8(e),t.return((0,He._)`${nt.default.errors} === 0`))}function T8({gen:e,evaluated:t,props:r,items:n}){r instanceof He.Name&&e.assign((0,He._)`${t}.props`,r),n instanceof He.Name&&e.assign((0,He._)`${t}.items`,n)}function gg(e,t,r,n){const{gen:s,schema:o,data:u,allErrors:h,opts:g,self:d}=e,{RULES:x}=d;if(o.$ref&&(g.ignoreKeywordsWithRef||!(0,ki.schemaHasRulesButRef)(o,x))){s.block(()=>tv(e,"$ref",x.all.$ref.definition));return}g.jtd||N8(e,t),s.block(()=>{for(const y of x.rules)v(y);v(x.post)});function v(y){(0,f1.shouldUseGroup)(o,y)&&(y.type?(s.if((0,lc.checkDataType)(y.type,u,g.strictNumbers)),mg(e,y),t.length===1&&t[0]===y.type&&r&&(s.else(),(0,lc.reportTypeError)(e)),s.endIf()):mg(e,y),h||s.if((0,He._)`${nt.default.errors} === ${n||0}`))}}function mg(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,d8.assignDefaults)(e,t.type),r.block(()=>{for(const o of t.rules)(0,f1.shouldUseRule)(n,o)&&tv(e,o.keyword,o.definition,t.type)})}function N8(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(_8(e,t),e.opts.allowUnionTypes||D8(e,t),R8(e,e.dataTypes))}function _8(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Jy(e.dataTypes,r)||h1(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),F8(e,t)}}function D8(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&h1(e,"use allowUnionTypes to allow union type keyword")}function R8(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,f1.shouldUseRule)(e.schema,s)){const{type:o}=s.definition;o.length&&!o.some(u=>O8(t,u))&&h1(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function O8(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Jy(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function F8(e,t){const r=[];for(const n of e.dataTypes)Jy(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function h1(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,ki.checkStrictMode)(e,t,e.opts.strictTypes)}class ev{constructor(t,r,n){if((0,Qo.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,ki.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",rv(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Qo.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",nt.default.errors))}result(t,r,n){this.failResult((0,He.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,He.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,He._)`${r} !== undefined && (${(0,He.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?Po.reportExtraError:Po.reportError)(this,this.def.error,r)}$dataError(){(0,Po.reportError)(this,this.def.$dataError||Po.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Po.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=He.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=He.nil,r=He.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:o,def:u}=this;n.if((0,He.or)((0,He._)`${s} === undefined`,r)),t!==He.nil&&n.assign(t,!0),(o.length||u.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==He.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:o}=this;return(0,He.or)(u(),h());function u(){if(n.length){if(!(r instanceof He.Name))throw new Error("ajv implementation error");const g=Array.isArray(n)?n:[n];return(0,He._)`${(0,lc.checkDataTypes)(g,r,o.opts.strictNumbers,lc.DataType.Wrong)}`}return He.nil}function h(){if(s.validateSchema){const g=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,He._)`!${g}(${r})`}return He.nil}}subschema(t,r){const n=(0,Uf.getSubschema)(this.it,t);(0,Uf.extendSubschemaData)(n,this.it,t),(0,Uf.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return w8(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=ki.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=ki.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,He.Name)),!0}}ui.KeywordCxt=ev;function tv(e,t,r,n){const s=new ev(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,Qo.funcKeywordCode)(s,r):"macro"in r?(0,Qo.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,Qo.funcKeywordCode)(s,r)}const P8=/^\/(?:[^~]|~0|~1)*$/,M8=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function rv(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,o;if(e==="")return nt.default.rootData;if(e[0]==="/"){if(!P8.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,o=nt.default.rootData}else{const d=M8.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);const x=+d[1];if(s=d[2],s==="#"){if(x>=t)throw new Error(g("property/index",x));return n[t-x]}if(x>t)throw new Error(g("data",x));if(o=r[t-x],!s)return o}let u=o;const h=s.split("/");for(const d of h)d&&(o=(0,He._)`${o}${(0,He.getProperty)((0,ki.unescapeJsonPointer)(d))}`,u=(0,He._)`${u} && ${o}`);return u;function g(d,x){return`Cannot access ${d} ${x} levels up, current level is ${t}`}}ui.getData=rv;var Fl={};Object.defineProperty(Fl,"__esModule",{value:!0});class B8 extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Fl.default=B8;var io={};Object.defineProperty(io,"__esModule",{value:!0});const Vf=Hr;class L8 extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Vf.resolveUrl)(t,r,n),this.missingSchema=(0,Vf.normalizeId)((0,Vf.getFullPath)(t,this.missingRef))}}io.default=L8;var hn={};Object.defineProperty(hn,"__esModule",{value:!0});hn.resolveSchema=hn.getCompilingSchema=hn.resolveRef=hn.compileSchema=hn.SchemaEnv=void 0;const Qn=dt,k8=Fl,Ms=Ti,ai=Hr,yg=Pe,j8=ui;class kc{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,ai.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}hn.SchemaEnv=kc;function d1(e){const t=nv.call(this,e);if(t)return t;const r=(0,ai.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:o}=this.opts,u=new Qn.CodeGen(this.scope,{es5:n,lines:s,ownProperties:o});let h;e.$async&&(h=u.scopeValue("Error",{ref:k8.default,code:(0,Qn._)`require("ajv/dist/runtime/validation_error").default`}));const g=u.scopeName("validate");e.validateName=g;const d={gen:u,allErrors:this.opts.allErrors,data:Ms.default.data,parentData:Ms.default.parentData,parentDataProperty:Ms.default.parentDataProperty,dataNames:[Ms.default.data],dataPathArr:[Qn.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Qn.stringify)(e.schema)}:{ref:e.schema}),validateName:g,ValidationError:h,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Qn.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Qn._)`""`,opts:this.opts,self:this};let x;try{this._compilations.add(e),(0,j8.validateFunctionCode)(d),u.optimize(this.opts.code.optimize);const v=u.toString();x=`${u.scopeRefs(Ms.default.scope)}return ${v}`,this.opts.code.process&&(x=this.opts.code.process(x,e));const S=new Function(`${Ms.default.self}`,`${Ms.default.scope}`,x)(this,this.scope.get());if(this.scope.value(g,{ref:S}),S.errors=null,S.schema=e.schema,S.schemaEnv=e,e.$async&&(S.$async=!0),this.opts.code.source===!0&&(S.source={validateName:g,validateCode:v,scopeValues:u._values}),this.opts.unevaluated){const{props:w,items:A}=d;S.evaluated={props:w instanceof Qn.Name?void 0:w,items:A instanceof Qn.Name?void 0:A,dynamicProps:w instanceof Qn.Name,dynamicItems:A instanceof Qn.Name},S.source&&(S.source.evaluated=(0,Qn.stringify)(S.evaluated))}return e.validate=S,e}catch(v){throw delete e.validate,delete e.validateName,x&&this.logger.error("Error compiling schema, function code:",x),v}finally{this._compilations.delete(e)}}hn.compileSchema=d1;function H8(e,t,r){var n;r=(0,ai.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let o=$8.call(this,e,r);if(o===void 0){const u=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:h}=this.opts;u&&(o=new kc({schema:u,schemaId:h,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=U8.call(this,o)}hn.resolveRef=H8;function U8(e){return(0,ai.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d1.call(this,e)}function nv(e){for(const t of this._compilations)if(V8(t,e))return t}hn.getCompilingSchema=nv;function V8(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function $8(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||jc.call(this,e,t)}function jc(e,t){const r=this.opts.uriResolver.parse(t),n=(0,ai._getFullPath)(this.opts.uriResolver,r);let s=(0,ai.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return $f.call(this,r,e);const o=(0,ai.normalizeId)(n),u=this.refs[o]||this.schemas[o];if(typeof u=="string"){const h=jc.call(this,e,u);return typeof(h==null?void 0:h.schema)!="object"?void 0:$f.call(this,r,h)}if(typeof(u==null?void 0:u.schema)=="object"){if(u.validate||d1.call(this,u),o===(0,ai.normalizeId)(t)){const{schema:h}=u,{schemaId:g}=this.opts,d=h[g];return d&&(s=(0,ai.resolveUrl)(this.opts.uriResolver,s,d)),new kc({schema:h,schemaId:g,root:e,baseId:s})}return $f.call(this,r,u)}}hn.resolveSchema=jc;const z8=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function $f(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const h of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const g=r[(0,yg.unescapeFragment)(h)];if(g===void 0)return;r=g;const d=typeof r=="object"&&r[this.opts.schemaId];!z8.has(h)&&d&&(t=(0,ai.resolveUrl)(this.opts.uriResolver,t,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,yg.schemaHasRulesButRef)(r,this.RULES)){const h=(0,ai.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=jc.call(this,n,h)}const{schemaId:u}=this.opts;if(o=o||new kc({schema:r,schemaId:u,root:n,baseId:t}),o.schema!==o.root.schema)return o}const K8="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",W8="Meta-schema for $data reference (JSON AnySchema extension proposal)",G8="object",q8=["$data"],X8={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Y8=!1,Z8={$id:K8,description:W8,type:G8,required:q8,properties:X8,additionalProperties:Y8};var p1={},Hc={exports:{}};const Q8={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};var J8={HEX:Q8};const{HEX:eA}=J8;function iv(e){if(av(e,".")<3)return{host:e,isIPV4:!1};const t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:rA(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function qh(e,t=!1){let r="",n=!0;for(const s of e){if(eA[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return t&&r.length===0&&(r="0"),r}function tA(e){let t=0;const r={error:!1,address:"",zone:""},n=[],s=[];let o=!1,u=!1,h=!1;function g(){if(s.length){if(o===!1){const d=qh(s);if(d!==void 0)n.push(d);else return r.error=!0,!1}s.length=0}return!0}for(let d=0;d<e.length;d++){const x=e[d];if(!(x==="["||x==="]"))if(x===":"){if(u===!0&&(h=!0),!g())break;if(t++,n.push(":"),t>7){r.error=!0;break}d-1>=0&&e[d-1]===":"&&(u=!0);continue}else if(x==="%"){if(!g())break;o=!0}else{s.push(x);continue}}return s.length&&(o?r.zone=s.join(""):h?n.push(s.join("")):n.push(qh(s))),r.address=n.join(""),r}function sv(e,t={}){if(av(e,":")<2)return{host:e,isIPV6:!1};const r=tA(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,s=r.address;return r.zone&&(n+="%"+r.zone,s+="%25"+r.zone),{host:n,escapedHost:s,isIPV6:!0}}}function rA(e,t){let r="",n=!0;const s=e.length;for(let o=0;o<s;o++){const u=e[o];u==="0"&&n?(o+1<=s&&e[o+1]===t||o+1===s)&&(r+=u,n=!1):(u===t?n=!0:n=!1,r+=u)}return r}function av(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}const vg=/^\.\.?\//u,xg=/^\/\.(?:\/|$)/u,wg=/^\/\.\.(?:\/|$)/u,nA=/^\/?(?:.|\n)*?(?=\/|$)/u;function iA(e){const t=[];for(;e.length;)if(e.match(vg))e=e.replace(vg,"");else if(e.match(xg))e=e.replace(xg,"/");else if(e.match(wg))e=e.replace(wg,"/"),t.pop();else if(e==="."||e==="..")e="";else{const r=e.match(nA);if(r){const n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function sA(e,t){const r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function aA(e,t){const r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host);const s=iv(n);if(s.isIPV4)n=s.host;else{const o=sv(s.host,{isIPV4:!1});o.isIPV6===!0?n=`[${o.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}var oA={recomposeAuthority:aA,normalizeComponentEncoding:sA,removeDotSegments:iA,normalizeIPv4:iv,normalizeIPv6:sv,stringArrayToHexStripped:qh};const lA=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,uA=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function ov(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function lv(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function uv(e){const t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function cA(e){return e.secure=ov(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function fA(e){if((e.port===(ov(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function hA(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(uA);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const s=`${n}:${t.nid||e.nid}`,o=g1[s];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function dA(e,t){const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,o=g1[s];o&&(e=o.serialize(e,t));const u=e,h=e.nss;return u.path=`${n||t.nid}:${h}`,t.skipEscape=!0,u}function pA(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!lA.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function gA(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t}const cv={scheme:"http",domainHost:!0,parse:lv,serialize:uv},mA={scheme:"https",domainHost:cv.domainHost,parse:lv,serialize:uv},_u={scheme:"ws",domainHost:!0,parse:cA,serialize:fA},yA={scheme:"wss",domainHost:_u.domainHost,parse:_u.parse,serialize:_u.serialize},vA={scheme:"urn",parse:hA,serialize:dA,skipNormalize:!0},xA={scheme:"urn:uuid",parse:pA,serialize:gA,skipNormalize:!0},g1={http:cv,https:mA,ws:_u,wss:yA,urn:vA,"urn:uuid":xA};var wA=g1;const{normalizeIPv6:EA,normalizeIPv4:SA,removeDotSegments:Uo,recomposeAuthority:AA,normalizeComponentEncoding:lu}=oA,m1=wA;function CA(e,t){return typeof e=="string"?e=Ai(zi(e,t),t):typeof e=="object"&&(e=zi(Ai(e,t),t)),e}function IA(e,t,r){const n=Object.assign({scheme:"null"},r),s=fv(zi(e,n),zi(t,n),n,!0);return Ai(s,{...n,skipEscape:!0})}function fv(e,t,r,n){const s={};return n||(e=zi(Ai(e,r),r),t=zi(Ai(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Uo(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=Uo(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=Uo(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=Uo(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function bA(e,t,r){return typeof e=="string"?(e=unescape(e),e=Ai(lu(zi(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Ai(lu(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Ai(lu(zi(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Ai(lu(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Ai(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],o=m1[(n.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&(s.push(r.scheme),s.push(":"));const u=AA(r,n);if(u!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(u),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let h=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(h=Uo(h)),u===void 0&&(h=h.replace(/^\/\//u,"/%2F")),s.push(h)}return r.query!==void 0&&(s.push("?"),s.push(r.query)),r.fragment!==void 0&&(s.push("#"),s.push(r.fragment)),s.join("")}const TA=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function NA(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||TA[t])return!0;return!1}const _A=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function zi(e,t){const r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1;let o=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);const u=e.match(_A);if(u){if(n.scheme=u[1],n.userinfo=u[3],n.host=u[4],n.port=parseInt(u[5],10),n.path=u[6]||"",n.query=u[7],n.fragment=u[8],isNaN(n.port)&&(n.port=u[5]),n.host){const g=SA(n.host);if(g.isIPV4===!1){const d=EA(g.host,{isIPV4:!1});n.host=d.host.toLowerCase(),o=d.isIPV6}else n.host=g.host,o=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const h=m1[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!h||!h.unicodeSupport)&&n.host&&(r.domainHost||h&&h.domainHost)&&o===!1&&NA(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(g){n.error=n.error||"Host's domain name can not be converted to ASCII: "+g}(!h||h&&!h.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.userinfo!==void 0&&(n.userinfo=unescape(n.userinfo)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),h&&h.parse&&h.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const y1={SCHEMES:m1,normalize:CA,resolve:IA,resolveComponents:fv,equal:bA,serialize:Ai,parse:zi};Hc.exports=y1;Hc.exports.default=y1;Hc.exports.fastUri=y1;var DA=Hc.exports;Object.defineProperty(p1,"__esModule",{value:!0});const hv=DA;hv.code='require("ajv/dist/runtime/uri").default';p1.default=hv;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=ui;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var r=dt;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=Fl,s=io,o=ea,u=hn,h=dt,g=Hr,d=Tr,x=Pe,v=Z8,y=p1,S=(oe,Y)=>new RegExp(oe,Y);S.code="new RegExp";const w=["removeAdditional","useDefaults","coerceTypes"],A=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),b={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},I={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},N=200;function F(oe){var Y,le,ne,U,q,J,ve,ye,ke,Le,Ye,Ze,tt,dr,Pt,bt,Ht,ot,st,pr,Oe,On,Gn,it,er;const Ge=oe.strict,Sr=(Y=oe.code)===null||Y===void 0?void 0:Y.optimize,xr=Sr===!0||Sr===void 0?1:Sr||0,Mt=(ne=(le=oe.code)===null||le===void 0?void 0:le.regExp)!==null&&ne!==void 0?ne:S,Rs=(U=oe.uriResolver)!==null&&U!==void 0?U:y.default;return{strictSchema:(J=(q=oe.strictSchema)!==null&&q!==void 0?q:Ge)!==null&&J!==void 0?J:!0,strictNumbers:(ye=(ve=oe.strictNumbers)!==null&&ve!==void 0?ve:Ge)!==null&&ye!==void 0?ye:!0,strictTypes:(Le=(ke=oe.strictTypes)!==null&&ke!==void 0?ke:Ge)!==null&&Le!==void 0?Le:"log",strictTuples:(Ze=(Ye=oe.strictTuples)!==null&&Ye!==void 0?Ye:Ge)!==null&&Ze!==void 0?Ze:"log",strictRequired:(dr=(tt=oe.strictRequired)!==null&&tt!==void 0?tt:Ge)!==null&&dr!==void 0?dr:!1,code:oe.code?{...oe.code,optimize:xr,regExp:Mt}:{optimize:xr,regExp:Mt},loopRequired:(Pt=oe.loopRequired)!==null&&Pt!==void 0?Pt:N,loopEnum:(bt=oe.loopEnum)!==null&&bt!==void 0?bt:N,meta:(Ht=oe.meta)!==null&&Ht!==void 0?Ht:!0,messages:(ot=oe.messages)!==null&&ot!==void 0?ot:!0,inlineRefs:(st=oe.inlineRefs)!==null&&st!==void 0?st:!0,schemaId:(pr=oe.schemaId)!==null&&pr!==void 0?pr:"$id",addUsedSchema:(Oe=oe.addUsedSchema)!==null&&Oe!==void 0?Oe:!0,validateSchema:(On=oe.validateSchema)!==null&&On!==void 0?On:!0,validateFormats:(Gn=oe.validateFormats)!==null&&Gn!==void 0?Gn:!0,unicodeRegExp:(it=oe.unicodeRegExp)!==null&&it!==void 0?it:!0,int32range:(er=oe.int32range)!==null&&er!==void 0?er:!0,uriResolver:Rs}}class L{constructor(Y={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,Y=this.opts={...Y,...F(Y)};const{es5:le,lines:ne}=this.opts.code;this.scope=new h.ValueScope({scope:{},prefixes:A,es5:le,lines:ne}),this.logger=K(Y.logger);const U=Y.validateFormats;Y.validateFormats=!1,this.RULES=(0,o.getRules)(),H.call(this,b,Y,"NOT SUPPORTED"),H.call(this,I,Y,"DEPRECATED","warn"),this._metaOpts=k.call(this),Y.formats&&P.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),Y.keywords&&D.call(this,Y.keywords),typeof Y.meta=="object"&&this.addMetaSchema(Y.meta),R.call(this),Y.validateFormats=U}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:Y,meta:le,schemaId:ne}=this.opts;let U=v;ne==="id"&&(U={...v},U.id=U.$id,delete U.$id),le&&Y&&this.addMetaSchema(U,U[ne],!1)}defaultMeta(){const{meta:Y,schemaId:le}=this.opts;return this.opts.defaultMeta=typeof Y=="object"?Y[le]||Y:void 0}validate(Y,le){let ne;if(typeof Y=="string"){if(ne=this.getSchema(Y),!ne)throw new Error(`no schema with key or ref "${Y}"`)}else ne=this.compile(Y);const U=ne(le);return"$async"in ne||(this.errors=ne.errors),U}compile(Y,le){const ne=this._addSchema(Y,le);return ne.validate||this._compileSchemaEnv(ne)}compileAsync(Y,le){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:ne}=this.opts;return U.call(this,Y,le);async function U(Le,Ye){await q.call(this,Le.$schema);const Ze=this._addSchema(Le,Ye);return Ze.validate||J.call(this,Ze)}async function q(Le){Le&&!this.getSchema(Le)&&await U.call(this,{$ref:Le},!0)}async function J(Le){try{return this._compileSchemaEnv(Le)}catch(Ye){if(!(Ye instanceof s.default))throw Ye;return ve.call(this,Ye),await ye.call(this,Ye.missingSchema),J.call(this,Le)}}function ve({missingSchema:Le,missingRef:Ye}){if(this.refs[Le])throw new Error(`AnySchema ${Le} is loaded but ${Ye} cannot be resolved`)}async function ye(Le){const Ye=await ke.call(this,Le);this.refs[Le]||await q.call(this,Ye.$schema),this.refs[Le]||this.addSchema(Ye,Le,le)}async function ke(Le){const Ye=this._loading[Le];if(Ye)return Ye;try{return await(this._loading[Le]=ne(Le))}finally{delete this._loading[Le]}}}addSchema(Y,le,ne,U=this.opts.validateSchema){if(Array.isArray(Y)){for(const J of Y)this.addSchema(J,void 0,ne,U);return this}let q;if(typeof Y=="object"){const{schemaId:J}=this.opts;if(q=Y[J],q!==void 0&&typeof q!="string")throw new Error(`schema ${J} must be string`)}return le=(0,g.normalizeId)(le||q),this._checkUnique(le),this.schemas[le]=this._addSchema(Y,ne,le,U,!0),this}addMetaSchema(Y,le,ne=this.opts.validateSchema){return this.addSchema(Y,le,!0,ne),this}validateSchema(Y,le){if(typeof Y=="boolean")return!0;let ne;if(ne=Y.$schema,ne!==void 0&&typeof ne!="string")throw new Error("$schema must be a string");if(ne=ne||this.opts.defaultMeta||this.defaultMeta(),!ne)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const U=this.validate(ne,Y);if(!U&&le){const q="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(q);else throw new Error(q)}return U}getSchema(Y){let le;for(;typeof(le=_.call(this,Y))=="string";)Y=le;if(le===void 0){const{schemaId:ne}=this.opts,U=new u.SchemaEnv({schema:{},schemaId:ne});if(le=u.resolveSchema.call(this,U,Y),!le)return;this.refs[Y]=le}return le.validate||this._compileSchemaEnv(le)}removeSchema(Y){if(Y instanceof RegExp)return this._removeAllSchemas(this.schemas,Y),this._removeAllSchemas(this.refs,Y),this;switch(typeof Y){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const le=_.call(this,Y);return typeof le=="object"&&this._cache.delete(le.schema),delete this.schemas[Y],delete this.refs[Y],this}case"object":{const le=Y;this._cache.delete(le);let ne=Y[this.opts.schemaId];return ne&&(ne=(0,g.normalizeId)(ne),delete this.schemas[ne],delete this.refs[ne]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(Y){for(const le of Y)this.addKeyword(le);return this}addKeyword(Y,le){let ne;if(typeof Y=="string")ne=Y,typeof le=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),le.keyword=ne);else if(typeof Y=="object"&&le===void 0){if(le=Y,ne=le.keyword,Array.isArray(ne)&&!ne.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(G.call(this,ne,le),!le)return(0,x.eachItem)(ne,q=>V.call(this,q)),this;te.call(this,le);const U={...le,type:(0,d.getJSONTypes)(le.type),schemaType:(0,d.getJSONTypes)(le.schemaType)};return(0,x.eachItem)(ne,U.type.length===0?q=>V.call(this,q,U):q=>U.type.forEach(J=>V.call(this,q,U,J))),this}getKeyword(Y){const le=this.RULES.all[Y];return typeof le=="object"?le.definition:!!le}removeKeyword(Y){const{RULES:le}=this;delete le.keywords[Y],delete le.all[Y];for(const ne of le.rules){const U=ne.rules.findIndex(q=>q.keyword===Y);U>=0&&ne.rules.splice(U,1)}return this}addFormat(Y,le){return typeof le=="string"&&(le=new RegExp(le)),this.formats[Y]=le,this}errorsText(Y=this.errors,{separator:le=", ",dataVar:ne="data"}={}){return!Y||Y.length===0?"No errors":Y.map(U=>`${ne}${U.instancePath} ${U.message}`).reduce((U,q)=>U+le+q)}$dataMetaSchema(Y,le){const ne=this.RULES.all;Y=JSON.parse(JSON.stringify(Y));for(const U of le){const q=U.split("/").slice(1);let J=Y;for(const ve of q)J=J[ve];for(const ve in ne){const ye=ne[ve];if(typeof ye!="object")continue;const{$data:ke}=ye.definition,Le=J[ve];ke&&Le&&(J[ve]=be(Le))}}return Y}_removeAllSchemas(Y,le){for(const ne in Y){const U=Y[ne];(!le||le.test(ne))&&(typeof U=="string"?delete Y[ne]:U&&!U.meta&&(this._cache.delete(U.schema),delete Y[ne]))}}_addSchema(Y,le,ne,U=this.opts.validateSchema,q=this.opts.addUsedSchema){let J;const{schemaId:ve}=this.opts;if(typeof Y=="object")J=Y[ve];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof Y!="boolean")throw new Error("schema must be object or boolean")}let ye=this._cache.get(Y);if(ye!==void 0)return ye;ne=(0,g.normalizeId)(J||ne);const ke=g.getSchemaRefs.call(this,Y,ne);return ye=new u.SchemaEnv({schema:Y,schemaId:ve,meta:le,baseId:ne,localRefs:ke}),this._cache.set(ye.schema,ye),q&&!ne.startsWith("#")&&(ne&&this._checkUnique(ne),this.refs[ne]=ye),U&&this.validateSchema(Y,!0),ye}_checkUnique(Y){if(this.schemas[Y]||this.refs[Y])throw new Error(`schema with key or id "${Y}" already exists`)}_compileSchemaEnv(Y){if(Y.meta?this._compileMetaSchema(Y):u.compileSchema.call(this,Y),!Y.validate)throw new Error("ajv implementation error");return Y.validate}_compileMetaSchema(Y){const le=this.opts;this.opts=this._metaOpts;try{u.compileSchema.call(this,Y)}finally{this.opts=le}}}L.ValidationError=n.default,L.MissingRefError=s.default,e.default=L;function H(oe,Y,le,ne="error"){for(const U in oe){const q=U;q in Y&&this.logger[ne](`${le}: option ${U}. ${oe[q]}`)}}function _(oe){return oe=(0,g.normalizeId)(oe),this.schemas[oe]||this.refs[oe]}function R(){const oe=this.opts.schemas;if(oe)if(Array.isArray(oe))this.addSchema(oe);else for(const Y in oe)this.addSchema(oe[Y],Y)}function P(){for(const oe in this.opts.formats){const Y=this.opts.formats[oe];Y&&this.addFormat(oe,Y)}}function D(oe){if(Array.isArray(oe)){this.addVocabulary(oe);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const Y in oe){const le=oe[Y];le.keyword||(le.keyword=Y),this.addKeyword(le)}}function k(){const oe={...this.opts};for(const Y of w)delete oe[Y];return oe}const W={log(){},warn(){},error(){}};function K(oe){if(oe===!1)return W;if(oe===void 0)return console;if(oe.log&&oe.warn&&oe.error)return oe;throw new Error("logger must implement log, warn and error methods")}const ie=/^[a-z_$][a-z0-9_$:-]*$/i;function G(oe,Y){const{RULES:le}=this;if((0,x.eachItem)(oe,ne=>{if(le.keywords[ne])throw new Error(`Keyword ${ne} is already defined`);if(!ie.test(ne))throw new Error(`Keyword ${ne} has invalid name`)}),!!Y&&Y.$data&&!("code"in Y||"validate"in Y))throw new Error('$data keyword must have "code" or "validate" function')}function V(oe,Y,le){var ne;const U=Y==null?void 0:Y.post;if(le&&U)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:q}=this;let J=U?q.post:q.rules.find(({type:ye})=>ye===le);if(J||(J={type:le,rules:[]},q.rules.push(J)),q.keywords[oe]=!0,!Y)return;const ve={keyword:oe,definition:{...Y,type:(0,d.getJSONTypes)(Y.type),schemaType:(0,d.getJSONTypes)(Y.schemaType)}};Y.before?ce.call(this,J,ve,Y.before):J.rules.push(ve),q.all[oe]=ve,(ne=Y.implements)===null||ne===void 0||ne.forEach(ye=>this.addKeyword(ye))}function ce(oe,Y,le){const ne=oe.rules.findIndex(U=>U.keyword===le);ne>=0?oe.rules.splice(ne,0,Y):(oe.rules.push(Y),this.logger.warn(`rule ${le} is not defined`))}function te(oe){let{metaSchema:Y}=oe;Y!==void 0&&(oe.$data&&this.opts.$data&&(Y=be(Y)),oe.validateSchema=this.compile(Y,!0))}const Ee={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function be(oe){return{anyOf:[oe,Ee]}}})(Iy);var v1={},x1={},w1={};Object.defineProperty(w1,"__esModule",{value:!0});const RA={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};w1.default=RA;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.callRef=ta.getValidate=void 0;const OA=io,Eg=ht,un=dt,va=Ti,Sg=hn,uu=Pe,FA={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:o,validateName:u,opts:h,self:g}=n,{root:d}=o;if((r==="#"||r==="#/")&&s===d.baseId)return v();const x=Sg.resolveRef.call(g,d,s,r);if(x===void 0)throw new OA.default(n.opts.uriResolver,s,r);if(x instanceof Sg.SchemaEnv)return y(x);return S(x);function v(){if(o===d)return Du(e,u,o,o.$async);const w=t.scopeValue("root",{ref:d});return Du(e,(0,un._)`${w}.validate`,d,d.$async)}function y(w){const A=dv(e,w);Du(e,A,w,w.$async)}function S(w){const A=t.scopeValue("schema",h.code.source===!0?{ref:w,code:(0,un.stringify)(w)}:{ref:w}),b=t.name("valid"),I=e.subschema({schema:w,dataTypes:[],schemaPath:un.nil,topSchemaRef:A,errSchemaPath:r},b);e.mergeEvaluated(I),e.ok(b)}}};function dv(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,un._)`${r.scopeValue("wrapper",{ref:t})}.validate`}ta.getValidate=dv;function Du(e,t,r,n){const{gen:s,it:o}=e,{allErrors:u,schemaEnv:h,opts:g}=o,d=g.passContext?va.default.this:un.nil;n?x():v();function x(){if(!h.$async)throw new Error("async schema referenced by sync schema");const w=s.let("valid");s.try(()=>{s.code((0,un._)`await ${(0,Eg.callValidateCode)(e,t,d)}`),S(t),u||s.assign(w,!0)},A=>{s.if((0,un._)`!(${A} instanceof ${o.ValidationError})`,()=>s.throw(A)),y(A),u||s.assign(w,!1)}),e.ok(w)}function v(){e.result((0,Eg.callValidateCode)(e,t,d),()=>S(t),()=>y(t))}function y(w){const A=(0,un._)`${w}.errors`;s.assign(va.default.vErrors,(0,un._)`${va.default.vErrors} === null ? ${A} : ${va.default.vErrors}.concat(${A})`),s.assign(va.default.errors,(0,un._)`${va.default.vErrors}.length`)}function S(w){var A;if(!o.opts.unevaluated)return;const b=(A=r==null?void 0:r.validate)===null||A===void 0?void 0:A.evaluated;if(o.props!==!0)if(b&&!b.dynamicProps)b.props!==void 0&&(o.props=uu.mergeEvaluated.props(s,b.props,o.props));else{const I=s.var("props",(0,un._)`${w}.evaluated.props`);o.props=uu.mergeEvaluated.props(s,I,o.props,un.Name)}if(o.items!==!0)if(b&&!b.dynamicItems)b.items!==void 0&&(o.items=uu.mergeEvaluated.items(s,b.items,o.items));else{const I=s.var("items",(0,un._)`${w}.evaluated.items`);o.items=uu.mergeEvaluated.items(s,I,o.items,un.Name)}}}ta.callRef=Du;ta.default=FA;Object.defineProperty(x1,"__esModule",{value:!0});const PA=w1,MA=ta,BA=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",PA.default,MA.default];x1.default=BA;var E1={},S1={};Object.defineProperty(S1,"__esModule",{value:!0});const uc=dt,ns=uc.operators,cc={maximum:{okStr:"<=",ok:ns.LTE,fail:ns.GT},minimum:{okStr:">=",ok:ns.GTE,fail:ns.LT},exclusiveMaximum:{okStr:"<",ok:ns.LT,fail:ns.GTE},exclusiveMinimum:{okStr:">",ok:ns.GT,fail:ns.LTE}},LA={message:({keyword:e,schemaCode:t})=>(0,uc.str)`must be ${cc[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,uc._)`{comparison: ${cc[e].okStr}, limit: ${t}}`},kA={keyword:Object.keys(cc),type:"number",schemaType:"number",$data:!0,error:LA,code(e){const{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,uc._)`${r} ${cc[t].fail} ${n} || isNaN(${r})`)}};S1.default=kA;var A1={};Object.defineProperty(A1,"__esModule",{value:!0});const Jo=dt,jA={message:({schemaCode:e})=>(0,Jo.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Jo._)`{multipleOf: ${e}}`},HA={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:jA,code(e){const{gen:t,data:r,schemaCode:n,it:s}=e,o=s.opts.multipleOfPrecision,u=t.let("res"),h=o?(0,Jo._)`Math.abs(Math.round(${u}) - ${u}) > 1e-${o}`:(0,Jo._)`${u} !== parseInt(${u})`;e.fail$data((0,Jo._)`(${n} === 0 || (${u} = ${r}/${n}, ${h}))`)}};A1.default=HA;var C1={},I1={};Object.defineProperty(I1,"__esModule",{value:!0});function pv(e){const t=e.length;let r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}I1.default=pv;pv.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(C1,"__esModule",{value:!0});const Hs=dt,UA=Pe,VA=I1,$A={message({keyword:e,schemaCode:t}){const r=e==="maxLength"?"more":"fewer";return(0,Hs.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,Hs._)`{limit: ${e}}`},zA={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:$A,code(e){const{keyword:t,data:r,schemaCode:n,it:s}=e,o=t==="maxLength"?Hs.operators.GT:Hs.operators.LT,u=s.opts.unicode===!1?(0,Hs._)`${r}.length`:(0,Hs._)`${(0,UA.useFunc)(e.gen,VA.default)}(${r})`;e.fail$data((0,Hs._)`${u} ${o} ${n}`)}};C1.default=zA;var b1={};Object.defineProperty(b1,"__esModule",{value:!0});const KA=ht,fc=dt,WA={message:({schemaCode:e})=>(0,fc.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,fc._)`{pattern: ${e}}`},GA={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:WA,code(e){const{data:t,$data:r,schema:n,schemaCode:s,it:o}=e,u=o.opts.unicodeRegExp?"u":"",h=r?(0,fc._)`(new RegExp(${s}, ${u}))`:(0,KA.usePattern)(e,n);e.fail$data((0,fc._)`!${h}.test(${t})`)}};b1.default=GA;var T1={};Object.defineProperty(T1,"__esModule",{value:!0});const el=dt,qA={message({keyword:e,schemaCode:t}){const r=e==="maxProperties"?"more":"fewer";return(0,el.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,el._)`{limit: ${e}}`},XA={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:qA,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?el.operators.GT:el.operators.LT;e.fail$data((0,el._)`Object.keys(${r}).length ${s} ${n}`)}};T1.default=XA;var N1={};Object.defineProperty(N1,"__esModule",{value:!0});const Mo=ht,tl=dt,YA=Pe,ZA={message:({params:{missingProperty:e}})=>(0,tl.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,tl._)`{missingProperty: ${e}}`},QA={keyword:"required",type:"object",schemaType:"array",$data:!0,error:ZA,code(e){const{gen:t,schema:r,schemaCode:n,data:s,$data:o,it:u}=e,{opts:h}=u;if(!o&&r.length===0)return;const g=r.length>=h.loopRequired;if(u.allErrors?d():x(),h.strictRequired){const S=e.parentSchema.properties,{definedProperties:w}=e.it;for(const A of r)if((S==null?void 0:S[A])===void 0&&!w.has(A)){const b=u.schemaEnv.baseId+u.errSchemaPath,I=`required property "${A}" is not defined at "${b}" (strictRequired)`;(0,YA.checkStrictMode)(u,I,u.opts.strictRequired)}}function d(){if(g||o)e.block$data(tl.nil,v);else for(const S of r)(0,Mo.checkReportMissingProp)(e,S)}function x(){const S=t.let("missing");if(g||o){const w=t.let("valid",!0);e.block$data(w,()=>y(S,w)),e.ok(w)}else t.if((0,Mo.checkMissingProp)(e,r,S)),(0,Mo.reportMissingProp)(e,S),t.else()}function v(){t.forOf("prop",n,S=>{e.setParams({missingProperty:S}),t.if((0,Mo.noPropertyInData)(t,s,S,h.ownProperties),()=>e.error())})}function y(S,w){e.setParams({missingProperty:S}),t.forOf(S,n,()=>{t.assign(w,(0,Mo.propertyInData)(t,s,S,h.ownProperties)),t.if((0,tl.not)(w),()=>{e.error(),t.break()})},tl.nil)}}};N1.default=QA;var _1={};Object.defineProperty(_1,"__esModule",{value:!0});const rl=dt,JA={message({keyword:e,schemaCode:t}){const r=e==="maxItems"?"more":"fewer";return(0,rl.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,rl._)`{limit: ${e}}`},e6={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:JA,code(e){const{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?rl.operators.GT:rl.operators.LT;e.fail$data((0,rl._)`${r}.length ${s} ${n}`)}};_1.default=e6;var D1={},Pl={};Object.defineProperty(Pl,"__esModule",{value:!0});const gv=Uy;gv.code='require("ajv/dist/runtime/equal").default';Pl.default=gv;Object.defineProperty(D1,"__esModule",{value:!0});const zf=Tr,kr=dt,t6=Pe,r6=Pl,n6={message:({params:{i:e,j:t}})=>(0,kr.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,kr._)`{i: ${e}, j: ${t}}`},i6={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:n6,code(e){const{gen:t,data:r,$data:n,schema:s,parentSchema:o,schemaCode:u,it:h}=e;if(!n&&!s)return;const g=t.let("valid"),d=o.items?(0,zf.getSchemaTypes)(o.items):[];e.block$data(g,x,(0,kr._)`${u} === false`),e.ok(g);function x(){const w=t.let("i",(0,kr._)`${r}.length`),A=t.let("j");e.setParams({i:w,j:A}),t.assign(g,!0),t.if((0,kr._)`${w} > 1`,()=>(v()?y:S)(w,A))}function v(){return d.length>0&&!d.some(w=>w==="object"||w==="array")}function y(w,A){const b=t.name("item"),I=(0,zf.checkDataTypes)(d,b,h.opts.strictNumbers,zf.DataType.Wrong),N=t.const("indices",(0,kr._)`{}`);t.for((0,kr._)`;${w}--;`,()=>{t.let(b,(0,kr._)`${r}[${w}]`),t.if(I,(0,kr._)`continue`),d.length>1&&t.if((0,kr._)`typeof ${b} == "string"`,(0,kr._)`${b} += "_"`),t.if((0,kr._)`typeof ${N}[${b}] == "number"`,()=>{t.assign(A,(0,kr._)`${N}[${b}]`),e.error(),t.assign(g,!1).break()}).code((0,kr._)`${N}[${b}] = ${w}`)})}function S(w,A){const b=(0,t6.useFunc)(t,r6.default),I=t.name("outer");t.label(I).for((0,kr._)`;${w}--;`,()=>t.for((0,kr._)`${A} = ${w}; ${A}--;`,()=>t.if((0,kr._)`${b}(${r}[${w}], ${r}[${A}])`,()=>{e.error(),t.assign(g,!1).break(I)})))}}};D1.default=i6;var R1={};Object.defineProperty(R1,"__esModule",{value:!0});const Xh=dt,s6=Pe,a6=Pl,o6={message:"must be equal to constant",params:({schemaCode:e})=>(0,Xh._)`{allowedValue: ${e}}`},l6={keyword:"const",$data:!0,error:o6,code(e){const{gen:t,data:r,$data:n,schemaCode:s,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,Xh._)`!${(0,s6.useFunc)(t,a6.default)}(${r}, ${s})`):e.fail((0,Xh._)`${o} !== ${r}`)}};R1.default=l6;var O1={};Object.defineProperty(O1,"__esModule",{value:!0});const Vo=dt,u6=Pe,c6=Pl,f6={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Vo._)`{allowedValues: ${e}}`},h6={keyword:"enum",schemaType:"array",$data:!0,error:f6,code(e){const{gen:t,data:r,$data:n,schema:s,schemaCode:o,it:u}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");const h=s.length>=u.opts.loopEnum;let g;const d=()=>g??(g=(0,u6.useFunc)(t,c6.default));let x;if(h||n)x=t.let("valid"),e.block$data(x,v);else{if(!Array.isArray(s))throw new Error("ajv implementation error");const S=t.const("vSchema",o);x=(0,Vo.or)(...s.map((w,A)=>y(S,A)))}e.pass(x);function v(){t.assign(x,!1),t.forOf("v",o,S=>t.if((0,Vo._)`${d()}(${r}, ${S})`,()=>t.assign(x,!0).break()))}function y(S,w){const A=s[w];return typeof A=="object"&&A!==null?(0,Vo._)`${d()}(${r}, ${S}[${w}])`:(0,Vo._)`${r} === ${A}`}}};O1.default=h6;Object.defineProperty(E1,"__esModule",{value:!0});const d6=S1,p6=A1,g6=C1,m6=b1,y6=T1,v6=N1,x6=_1,w6=D1,E6=R1,S6=O1,A6=[d6.default,p6.default,g6.default,m6.default,y6.default,v6.default,x6.default,w6.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},E6.default,S6.default];E1.default=A6;var F1={},so={};Object.defineProperty(so,"__esModule",{value:!0});so.validateAdditionalItems=void 0;const Us=dt,Yh=Pe,C6={message:({params:{len:e}})=>(0,Us.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Us._)`{limit: ${e}}`},I6={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:C6,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Yh.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}mv(e,n)}};function mv(e,t){const{gen:r,schema:n,data:s,keyword:o,it:u}=e;u.items=!0;const h=r.const("len",(0,Us._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Us._)`${h} <= ${t.length}`);else if(typeof n=="object"&&!(0,Yh.alwaysValidSchema)(u,n)){const d=r.var("valid",(0,Us._)`${h} <= ${t.length}`);r.if((0,Us.not)(d),()=>g(d)),e.ok(d)}function g(d){r.forRange("i",t.length,h,x=>{e.subschema({keyword:o,dataProp:x,dataPropType:Yh.Type.Num},d),u.allErrors||r.if((0,Us.not)(d),()=>r.break())})}}so.validateAdditionalItems=mv;so.default=I6;var P1={},ao={};Object.defineProperty(ao,"__esModule",{value:!0});ao.validateTuple=void 0;const Ag=dt,Ru=Pe,b6=ht,T6={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return yv(e,"additionalItems",t);r.items=!0,!(0,Ru.alwaysValidSchema)(r,t)&&e.ok((0,b6.validateArray)(e))}};function yv(e,t,r=e.schema){const{gen:n,parentSchema:s,data:o,keyword:u,it:h}=e;x(s),h.opts.unevaluated&&r.length&&h.items!==!0&&(h.items=Ru.mergeEvaluated.items(n,r.length,h.items));const g=n.name("valid"),d=n.const("len",(0,Ag._)`${o}.length`);r.forEach((v,y)=>{(0,Ru.alwaysValidSchema)(h,v)||(n.if((0,Ag._)`${d} > ${y}`,()=>e.subschema({keyword:u,schemaProp:y,dataProp:y},g)),e.ok(g))});function x(v){const{opts:y,errSchemaPath:S}=h,w=r.length,A=w===v.minItems&&(w===v.maxItems||v[t]===!1);if(y.strictTuples&&!A){const b=`"${u}" is ${w}-tuple, but minItems or maxItems/${t} are not specified or different at path "${S}"`;(0,Ru.checkStrictMode)(h,b,y.strictTuples)}}}ao.validateTuple=yv;ao.default=T6;Object.defineProperty(P1,"__esModule",{value:!0});const N6=ao,_6={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,N6.validateTuple)(e,"items")};P1.default=_6;var M1={};Object.defineProperty(M1,"__esModule",{value:!0});const Cg=dt,D6=Pe,R6=ht,O6=so,F6={message:({params:{len:e}})=>(0,Cg.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Cg._)`{limit: ${e}}`},P6={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:F6,code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,D6.alwaysValidSchema)(n,t)&&(s?(0,O6.validateAdditionalItems)(e,s):e.ok((0,R6.validateArray)(e)))}};M1.default=P6;var B1={};Object.defineProperty(B1,"__esModule",{value:!0});const jn=dt,cu=Pe,M6={message:({params:{min:e,max:t}})=>t===void 0?(0,jn.str)`must contain at least ${e} valid item(s)`:(0,jn.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,jn._)`{minContains: ${e}}`:(0,jn._)`{minContains: ${e}, maxContains: ${t}}`},B6={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:M6,code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;let u,h;const{minContains:g,maxContains:d}=n;o.opts.next?(u=g===void 0?1:g,h=d):u=1;const x=t.const("len",(0,jn._)`${s}.length`);if(e.setParams({min:u,max:h}),h===void 0&&u===0){(0,cu.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(h!==void 0&&u>h){(0,cu.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,cu.alwaysValidSchema)(o,r)){let A=(0,jn._)`${x} >= ${u}`;h!==void 0&&(A=(0,jn._)`${A} && ${x} <= ${h}`),e.pass(A);return}o.items=!0;const v=t.name("valid");h===void 0&&u===1?S(v,()=>t.if(v,()=>t.break())):u===0?(t.let(v,!0),h!==void 0&&t.if((0,jn._)`${s}.length > 0`,y)):(t.let(v,!1),y()),e.result(v,()=>e.reset());function y(){const A=t.name("_valid"),b=t.let("count",0);S(A,()=>t.if(A,()=>w(b)))}function S(A,b){t.forRange("i",0,x,I=>{e.subschema({keyword:"contains",dataProp:I,dataPropType:cu.Type.Num,compositeRule:!0},A),b()})}function w(A){t.code((0,jn._)`${A}++`),h===void 0?t.if((0,jn._)`${A} >= ${u}`,()=>t.assign(v,!0).break()):(t.if((0,jn._)`${A} > ${h}`,()=>t.assign(v,!1).break()),u===1?t.assign(v,!0):t.if((0,jn._)`${A} >= ${u}`,()=>t.assign(v,!0)))}}};B1.default=B6;var vv={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=dt,r=Pe,n=ht;e.error={message:({params:{property:g,depsCount:d,deps:x}})=>{const v=d===1?"property":"properties";return(0,t.str)`must have ${v} ${x} when property ${g} is present`},params:({params:{property:g,depsCount:d,deps:x,missingProperty:v}})=>(0,t._)`{property: ${g},
    missingProperty: ${v},
    depsCount: ${d},
    deps: ${x}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(g){const[d,x]=o(g);u(g,d),h(g,x)}};function o({schema:g}){const d={},x={};for(const v in g){if(v==="__proto__")continue;const y=Array.isArray(g[v])?d:x;y[v]=g[v]}return[d,x]}function u(g,d=g.schema){const{gen:x,data:v,it:y}=g;if(Object.keys(d).length===0)return;const S=x.let("missing");for(const w in d){const A=d[w];if(A.length===0)continue;const b=(0,n.propertyInData)(x,v,w,y.opts.ownProperties);g.setParams({property:w,depsCount:A.length,deps:A.join(", ")}),y.allErrors?x.if(b,()=>{for(const I of A)(0,n.checkReportMissingProp)(g,I)}):(x.if((0,t._)`${b} && (${(0,n.checkMissingProp)(g,A,S)})`),(0,n.reportMissingProp)(g,S),x.else())}}e.validatePropertyDeps=u;function h(g,d=g.schema){const{gen:x,data:v,keyword:y,it:S}=g,w=x.name("valid");for(const A in d)(0,r.alwaysValidSchema)(S,d[A])||(x.if((0,n.propertyInData)(x,v,A,S.opts.ownProperties),()=>{const b=g.subschema({keyword:y,schemaProp:A},w);g.mergeValidEvaluated(b,w)},()=>x.var(w,!0)),g.ok(w))}e.validateSchemaDeps=h,e.default=s})(vv);var L1={};Object.defineProperty(L1,"__esModule",{value:!0});const xv=dt,L6=Pe,k6={message:"property name must be valid",params:({params:e})=>(0,xv._)`{propertyName: ${e.propertyName}}`},j6={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:k6,code(e){const{gen:t,schema:r,data:n,it:s}=e;if((0,L6.alwaysValidSchema)(s,r))return;const o=t.name("valid");t.forIn("key",n,u=>{e.setParams({propertyName:u}),e.subschema({keyword:"propertyNames",data:u,dataTypes:["string"],propertyName:u,compositeRule:!0},o),t.if((0,xv.not)(o),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(o)}};L1.default=j6;var Uc={};Object.defineProperty(Uc,"__esModule",{value:!0});const fu=ht,ei=dt,H6=Ti,hu=Pe,U6={message:"must NOT have additional properties",params:({params:e})=>(0,ei._)`{additionalProperty: ${e.additionalProperty}}`},V6={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:U6,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:o,it:u}=e;if(!o)throw new Error("ajv implementation error");const{allErrors:h,opts:g}=u;if(u.props=!0,g.removeAdditional!=="all"&&(0,hu.alwaysValidSchema)(u,r))return;const d=(0,fu.allSchemaProperties)(n.properties),x=(0,fu.allSchemaProperties)(n.patternProperties);v(),e.ok((0,ei._)`${o} === ${H6.default.errors}`);function v(){t.forIn("key",s,b=>{!d.length&&!x.length?w(b):t.if(y(b),()=>w(b))})}function y(b){let I;if(d.length>8){const N=(0,hu.schemaRefOrVal)(u,n.properties,"properties");I=(0,fu.isOwnProperty)(t,N,b)}else d.length?I=(0,ei.or)(...d.map(N=>(0,ei._)`${b} === ${N}`)):I=ei.nil;return x.length&&(I=(0,ei.or)(I,...x.map(N=>(0,ei._)`${(0,fu.usePattern)(e,N)}.test(${b})`))),(0,ei.not)(I)}function S(b){t.code((0,ei._)`delete ${s}[${b}]`)}function w(b){if(g.removeAdditional==="all"||g.removeAdditional&&r===!1){S(b);return}if(r===!1){e.setParams({additionalProperty:b}),e.error(),h||t.break();return}if(typeof r=="object"&&!(0,hu.alwaysValidSchema)(u,r)){const I=t.name("valid");g.removeAdditional==="failing"?(A(b,I,!1),t.if((0,ei.not)(I),()=>{e.reset(),S(b)})):(A(b,I),h||t.if((0,ei.not)(I),()=>t.break()))}}function A(b,I,N){const F={keyword:"additionalProperties",dataProp:b,dataPropType:hu.Type.Str};N===!1&&Object.assign(F,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(F,I)}}};Uc.default=V6;var k1={};Object.defineProperty(k1,"__esModule",{value:!0});const $6=ui,Ig=ht,Kf=Pe,bg=Uc,z6={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:n,data:s,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&bg.default.code(new $6.KeywordCxt(o,bg.default,"additionalProperties"));const u=(0,Ig.allSchemaProperties)(r);for(const v of u)o.definedProperties.add(v);o.opts.unevaluated&&u.length&&o.props!==!0&&(o.props=Kf.mergeEvaluated.props(t,(0,Kf.toHash)(u),o.props));const h=u.filter(v=>!(0,Kf.alwaysValidSchema)(o,r[v]));if(h.length===0)return;const g=t.name("valid");for(const v of h)d(v)?x(v):(t.if((0,Ig.propertyInData)(t,s,v,o.opts.ownProperties)),x(v),o.allErrors||t.else().var(g,!0),t.endIf()),e.it.definedProperties.add(v),e.ok(g);function d(v){return o.opts.useDefaults&&!o.compositeRule&&r[v].default!==void 0}function x(v){e.subschema({keyword:"properties",schemaProp:v,dataProp:v},g)}}};k1.default=z6;var j1={};Object.defineProperty(j1,"__esModule",{value:!0});const Tg=ht,du=dt,Ng=Pe,_g=Pe,K6={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:n,parentSchema:s,it:o}=e,{opts:u}=o,h=(0,Tg.allSchemaProperties)(r),g=h.filter(A=>(0,Ng.alwaysValidSchema)(o,r[A]));if(h.length===0||g.length===h.length&&(!o.opts.unevaluated||o.props===!0))return;const d=u.strictSchema&&!u.allowMatchingProperties&&s.properties,x=t.name("valid");o.props!==!0&&!(o.props instanceof du.Name)&&(o.props=(0,_g.evaluatedPropsToName)(t,o.props));const{props:v}=o;y();function y(){for(const A of h)d&&S(A),o.allErrors?w(A):(t.var(x,!0),w(A),t.if(x))}function S(A){for(const b in d)new RegExp(A).test(b)&&(0,Ng.checkStrictMode)(o,`property ${b} matches pattern ${A} (use allowMatchingProperties)`)}function w(A){t.forIn("key",n,b=>{t.if((0,du._)`${(0,Tg.usePattern)(e,A)}.test(${b})`,()=>{const I=g.includes(A);I||e.subschema({keyword:"patternProperties",schemaProp:A,dataProp:b,dataPropType:_g.Type.Str},x),o.opts.unevaluated&&v!==!0?t.assign((0,du._)`${v}[${b}]`,!0):!I&&!o.allErrors&&t.if((0,du.not)(x),()=>t.break())})})}}};j1.default=K6;var H1={};Object.defineProperty(H1,"__esModule",{value:!0});const W6=Pe,G6={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:n}=e;if((0,W6.alwaysValidSchema)(n,r)){e.fail();return}const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};H1.default=G6;var U1={};Object.defineProperty(U1,"__esModule",{value:!0});const q6=ht,X6={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:q6.validateUnion,error:{message:"must match a schema in anyOf"}};U1.default=X6;var V1={};Object.defineProperty(V1,"__esModule",{value:!0});const Ou=dt,Y6=Pe,Z6={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Ou._)`{passingSchemas: ${e.passing}}`},Q6={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Z6,code(e){const{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;const o=r,u=t.let("valid",!1),h=t.let("passing",null),g=t.name("_valid");e.setParams({passing:h}),t.block(d),e.result(u,()=>e.reset(),()=>e.error(!0));function d(){o.forEach((x,v)=>{let y;(0,Y6.alwaysValidSchema)(s,x)?t.var(g,!0):y=e.subschema({keyword:"oneOf",schemaProp:v,compositeRule:!0},g),v>0&&t.if((0,Ou._)`${g} && ${u}`).assign(u,!1).assign(h,(0,Ou._)`[${h}, ${v}]`).else(),t.if(g,()=>{t.assign(u,!0),t.assign(h,v),y&&e.mergeEvaluated(y,Ou.Name)})})}}};V1.default=Q6;var $1={};Object.defineProperty($1,"__esModule",{value:!0});const J6=Pe,eC={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach((o,u)=>{if((0,J6.alwaysValidSchema)(n,o))return;const h=e.subschema({keyword:"allOf",schemaProp:u},s);e.ok(s),e.mergeEvaluated(h)})}};$1.default=eC;var z1={};Object.defineProperty(z1,"__esModule",{value:!0});const hc=dt,wv=Pe,tC={message:({params:e})=>(0,hc.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,hc._)`{failingKeyword: ${e.ifClause}}`},rC={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:tC,code(e){const{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,wv.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const s=Dg(n,"then"),o=Dg(n,"else");if(!s&&!o)return;const u=t.let("valid",!0),h=t.name("_valid");if(g(),e.reset(),s&&o){const x=t.let("ifClause");e.setParams({ifClause:x}),t.if(h,d("then",x),d("else",x))}else s?t.if(h,d("then")):t.if((0,hc.not)(h),d("else"));e.pass(u,()=>e.error(!0));function g(){const x=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},h);e.mergeEvaluated(x)}function d(x,v){return()=>{const y=e.subschema({keyword:x},h);t.assign(u,h),e.mergeValidEvaluated(y,u),v?t.assign(v,(0,hc._)`${x}`):e.setParams({ifClause:x})}}}};function Dg(e,t){const r=e.schema[t];return r!==void 0&&!(0,wv.alwaysValidSchema)(e,r)}z1.default=rC;var K1={};Object.defineProperty(K1,"__esModule",{value:!0});const nC=Pe,iC={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,nC.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};K1.default=iC;Object.defineProperty(F1,"__esModule",{value:!0});const sC=so,aC=P1,oC=ao,lC=M1,uC=B1,cC=vv,fC=L1,hC=Uc,dC=k1,pC=j1,gC=H1,mC=U1,yC=V1,vC=$1,xC=z1,wC=K1;function EC(e=!1){const t=[gC.default,mC.default,yC.default,vC.default,xC.default,wC.default,fC.default,hC.default,cC.default,dC.default,pC.default];return e?t.push(aC.default,lC.default):t.push(sC.default,oC.default),t.push(uC.default),t}F1.default=EC;var W1={},G1={};Object.defineProperty(G1,"__esModule",{value:!0});const yr=dt,SC={message:({schemaCode:e})=>(0,yr.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,yr._)`{format: ${e}}`},AC={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:SC,code(e,t){const{gen:r,data:n,$data:s,schema:o,schemaCode:u,it:h}=e,{opts:g,errSchemaPath:d,schemaEnv:x,self:v}=h;if(!g.validateFormats)return;s?y():S();function y(){const w=r.scopeValue("formats",{ref:v.formats,code:g.code.formats}),A=r.const("fDef",(0,yr._)`${w}[${u}]`),b=r.let("fType"),I=r.let("format");r.if((0,yr._)`typeof ${A} == "object" && !(${A} instanceof RegExp)`,()=>r.assign(b,(0,yr._)`${A}.type || "string"`).assign(I,(0,yr._)`${A}.validate`),()=>r.assign(b,(0,yr._)`"string"`).assign(I,A)),e.fail$data((0,yr.or)(N(),F()));function N(){return g.strictSchema===!1?yr.nil:(0,yr._)`${u} && !${I}`}function F(){const L=x.$async?(0,yr._)`(${A}.async ? await ${I}(${n}) : ${I}(${n}))`:(0,yr._)`${I}(${n})`,H=(0,yr._)`(typeof ${I} == "function" ? ${L} : ${I}.test(${n}))`;return(0,yr._)`${I} && ${I} !== true && ${b} === ${t} && !${H}`}}function S(){const w=v.formats[o];if(!w){N();return}if(w===!0)return;const[A,b,I]=F(w);A===t&&e.pass(L());function N(){if(g.strictSchema===!1){v.logger.warn(H());return}throw new Error(H());function H(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function F(H){const _=H instanceof RegExp?(0,yr.regexpCode)(H):g.code.formats?(0,yr._)`${g.code.formats}${(0,yr.getProperty)(o)}`:void 0,R=r.scopeValue("formats",{key:o,ref:H,code:_});return typeof H=="object"&&!(H instanceof RegExp)?[H.type||"string",H.validate,(0,yr._)`${R}.validate`]:["string",H,R]}function L(){if(typeof w=="object"&&!(w instanceof RegExp)&&w.async){if(!x.$async)throw new Error("async format in sync schema");return(0,yr._)`await ${I}(${n})`}return typeof b=="function"?(0,yr._)`${I}(${n})`:(0,yr._)`${I}.test(${n})`}}}};G1.default=AC;Object.defineProperty(W1,"__esModule",{value:!0});const CC=G1,IC=[CC.default];W1.default=IC;var Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});Ja.contentVocabulary=Ja.metadataVocabulary=void 0;Ja.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ja.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(v1,"__esModule",{value:!0});const bC=x1,TC=E1,NC=F1,_C=W1,Rg=Ja,DC=[bC.default,TC.default,(0,NC.default)(),_C.default,Rg.metadataVocabulary,Rg.contentVocabulary];v1.default=DC;var q1={},Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.DiscrError=void 0;var Og;(function(e){e.Tag="tag",e.Mapping="mapping"})(Og||(Vc.DiscrError=Og={}));Object.defineProperty(q1,"__esModule",{value:!0});const wa=dt,Zh=Vc,Fg=hn,RC=io,OC=Pe,FC={message:({params:{discrError:e,tagName:t}})=>e===Zh.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,wa._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},PC={keyword:"discriminator",type:"object",schemaType:"object",error:FC,code(e){const{gen:t,data:r,schema:n,parentSchema:s,it:o}=e,{oneOf:u}=s;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=n.propertyName;if(typeof h!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const g=t.let("valid",!1),d=t.const("tag",(0,wa._)`${r}${(0,wa.getProperty)(h)}`);t.if((0,wa._)`typeof ${d} == "string"`,()=>x(),()=>e.error(!1,{discrError:Zh.DiscrError.Tag,tag:d,tagName:h})),e.ok(g);function x(){const S=y();t.if(!1);for(const w in S)t.elseIf((0,wa._)`${d} === ${w}`),t.assign(g,v(S[w]));t.else(),e.error(!1,{discrError:Zh.DiscrError.Mapping,tag:d,tagName:h}),t.endIf()}function v(S){const w=t.name("valid"),A=e.subschema({keyword:"oneOf",schemaProp:S},w);return e.mergeEvaluated(A,wa.Name),w}function y(){var S;const w={},A=I(s);let b=!0;for(let L=0;L<u.length;L++){let H=u[L];if(H!=null&&H.$ref&&!(0,OC.schemaHasRulesButRef)(H,o.self.RULES)){const R=H.$ref;if(H=Fg.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,R),H instanceof Fg.SchemaEnv&&(H=H.schema),H===void 0)throw new RC.default(o.opts.uriResolver,o.baseId,R)}const _=(S=H==null?void 0:H.properties)===null||S===void 0?void 0:S[h];if(typeof _!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);b=b&&(A||I(H)),N(_,L)}if(!b)throw new Error(`discriminator: "${h}" must be required`);return w;function I({required:L}){return Array.isArray(L)&&L.includes(h)}function N(L,H){if(L.const)F(L.const,H);else if(L.enum)for(const _ of L.enum)F(_,H);else throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`)}function F(L,H){if(typeof L!="string"||L in w)throw new Error(`discriminator: "${h}" values must be unique strings`);w[L]=H}}}};q1.default=PC;const MC="http://json-schema.org/draft-07/schema#",BC="http://json-schema.org/draft-07/schema#",LC="Core schema meta-schema",kC={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},jC=["object","boolean"],HC={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},UC={$schema:MC,$id:BC,title:LC,definitions:kC,type:jC,properties:HC,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const r=Iy,n=v1,s=q1,o=UC,u=["/properties"],h="http://json-schema.org/draft-07/schema";class g extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(w=>this.addVocabulary(w)),this.opts.discriminator&&this.addKeyword(s.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const w=this.opts.$data?this.$dataMetaSchema(o,u):o;this.addMetaSchema(w,h,!1),this.refs["http://json-schema.org/schema"]=h}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(h)?h:void 0)}}t.Ajv=g,e.exports=t=g,e.exports.Ajv=g,Object.defineProperty(t,"__esModule",{value:!0}),t.default=g;var d=ui;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var x=dt;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return x._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return x.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return x.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return x.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return x.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return x.CodeGen}});var v=Fl;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return v.default}});var y=io;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return y.default}})})($h,$h.exports);var VC=$h.exports;const $C=mc(VC);var Ie={},Al={};Al.userAgent=!1;var xa={},zC="11.1.0",KC="jsrsasign(all) 11.1.0 (2024-02-01) (c) 2010-2023 Kenji Urushima | kjur.github.io/jsrsasign/license";/*! CryptoJS v3.1.2 core-fix.js
 * code.google.com/p/crypto-js
 * (c) 2009-2013 by Jeff Mott. All rights reserved.
 * code.google.com/p/crypto-js/wiki/License
 * THIS IS FIX of 'core.js' to fix Hmac issue.
 * https://code.google.com/p/crypto-js/issues/detail?id=84
 * https://crypto-js.googlecode.com/svn-history/r667/branches/3.x/src/core.js
 */var Te=Te||function(e,t){var r={},n=r.lib={},s=n.Base=function(){function y(){}return{extend:function(S){y.prototype=this;var w=new y;return S&&w.mixIn(S),w.hasOwnProperty("init")||(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var S=this.extend();return S.init.apply(S,arguments),S},init:function(){},mixIn:function(S){for(var w in S)S.hasOwnProperty(w)&&(this[w]=S[w]);S.hasOwnProperty("toString")&&(this.toString=S.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=n.WordArray=s.extend({init:function(y,S){y=this.words=y||[],S!=t?this.sigBytes=S:this.sigBytes=y.length*4},toString:function(y){return(y||h).stringify(this)},concat:function(y){var S=this.words,w=y.words,A=this.sigBytes,b=y.sigBytes;if(this.clamp(),A%4)for(var I=0;I<b;I++){var N=w[I>>>2]>>>24-I%4*8&255;S[A+I>>>2]|=N<<24-(A+I)%4*8}else for(var I=0;I<b;I+=4)S[A+I>>>2]=w[I>>>2];return this.sigBytes+=b,this},clamp:function(){var y=this.words,S=this.sigBytes;y[S>>>2]&=4294967295<<32-S%4*8,y.length=e.ceil(S/4)},clone:function(){var y=s.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var S=[],w=0;w<y;w+=4)S.push(e.random()*4294967296|0);return new o.init(S,y)}}),u=r.enc={},h=u.Hex={stringify:function(y){for(var S=y.words,w=y.sigBytes,A=[],b=0;b<w;b++){var I=S[b>>>2]>>>24-b%4*8&255;A.push((I>>>4).toString(16)),A.push((I&15).toString(16))}return A.join("")},parse:function(y){for(var S=y.length,w=[],A=0;A<S;A+=2)w[A>>>3]|=parseInt(y.substr(A,2),16)<<24-A%8*4;return new o.init(w,S/2)}},g=u.Latin1={stringify:function(y){for(var S=y.words,w=y.sigBytes,A=[],b=0;b<w;b++){var I=S[b>>>2]>>>24-b%4*8&255;A.push(String.fromCharCode(I))}return A.join("")},parse:function(y){for(var S=y.length,w=[],A=0;A<S;A++)w[A>>>2]|=(y.charCodeAt(A)&255)<<24-A%4*8;return new o.init(w,S)}},d=u.Utf8={stringify:function(y){try{return decodeURIComponent(escape(g.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return g.parse(unescape(encodeURIComponent(y)))}},x=n.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=d.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var S=this._data,w=S.words,A=S.sigBytes,b=this.blockSize,I=b*4,N=A/I;y?N=e.ceil(N):N=e.max((N|0)-this._minBufferSize,0);var F=N*b,L=e.min(F*4,A);if(F){for(var H=0;H<F;H+=b)this._doProcessBlock(w,H);var _=w.splice(0,F);S.sigBytes-=L}return new o.init(_,L)},clone:function(){var y=s.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0});n.Hasher=x.extend({cfg:s.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){x.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var S=this._doFinalize();return S},blockSize:512/32,_createHelper:function(y){return function(S,w){return new y.init(w).finalize(S)}},_createHmacHelper:function(y){return function(S,w){return new v.HMAC.init(y,w).finalize(S)}}});var v=r.algo={};return r}(Math);(function(e){var s=Te,t=s.lib,r=t.Base,n=t.WordArray,s=s.x64={};s.Word=r.extend({init:function(o,u){this.high=o,this.low=u}}),s.WordArray=r.extend({init:function(o,u){o=this.words=o||[],this.sigBytes=u!=e?u:8*o.length},toX32:function(){for(var o=this.words,u=o.length,h=[],g=0;g<u;g++){var d=o[g];h.push(d.high),h.push(d.low)}return n.create(h,this.sigBytes)},clone:function(){for(var o=r.clone.call(this),u=o.words=this.words.slice(0),h=u.length,g=0;g<h;g++)u[g]=u[g].clone();return o}})})();Te.lib.Cipher||function(e){var S=Te,t=S.lib,r=t.Base,n=t.WordArray,s=t.BufferedBlockAlgorithm,o=S.enc.Base64,u=S.algo.EvpKDF,h=t.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(A,b){return this.create(this._ENC_XFORM_MODE,A,b)},createDecryptor:function(A,b){return this.create(this._DEC_XFORM_MODE,A,b)},init:function(A,b,I){this.cfg=this.cfg.extend(I),this._xformMode=A,this._key=b,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(A){return this._append(A),this._process()},finalize:function(A){return A&&this._append(A),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(A){return{encrypt:function(b,I,N){return(typeof I=="string"?w:y).encrypt(A,b,I,N)},decrypt:function(b,I,N){return(typeof I=="string"?w:y).decrypt(A,b,I,N)}}}});t.StreamCipher=h.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var v=S.mode={},g=function(A,b,I){var N=this._iv;N?this._iv=e:N=this._prevBlock;for(var F=0;F<I;F++)A[b+F]^=N[F]},d=(t.BlockCipherMode=r.extend({createEncryptor:function(A,b){return this.Encryptor.create(A,b)},createDecryptor:function(A,b){return this.Decryptor.create(A,b)},init:function(A,b){this._cipher=A,this._iv=b}})).extend();d.Encryptor=d.extend({processBlock:function(A,b){var I=this._cipher,N=I.blockSize;g.call(this,A,b,N),I.encryptBlock(A,b),this._prevBlock=A.slice(b,b+N)}}),d.Decryptor=d.extend({processBlock:function(A,b){var I=this._cipher,N=I.blockSize,F=A.slice(b,b+N);I.decryptBlock(A,b),g.call(this,A,b,N),this._prevBlock=F}}),v=v.CBC=d,d=(S.pad={}).Pkcs7={pad:function(A,b){for(var I=4*b,I=I-A.sigBytes%I,N=I<<24|I<<16|I<<8|I,F=[],L=0;L<I;L+=4)F.push(N);I=n.create(F,I),A.concat(I)},unpad:function(A){A.sigBytes-=A.words[A.sigBytes-1>>>2]&255}},t.BlockCipher=h.extend({cfg:h.cfg.extend({mode:v,padding:d}),reset:function(){h.reset.call(this);var b=this.cfg,A=b.iv,b=b.mode;if(this._xformMode==this._ENC_XFORM_MODE)var I=b.createEncryptor;else I=b.createDecryptor,this._minBufferSize=1;this._mode=I.call(b,this,A&&A.words)},_doProcessBlock:function(A,b){this._mode.processBlock(A,b)},_doFinalize:function(){var A=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){A.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),A.unpad(b);return b},blockSize:4});var x=t.CipherParams=r.extend({init:function(A){this.mixIn(A)},toString:function(A){return(A||this.formatter).stringify(this)}}),v=(S.format={}).OpenSSL={stringify:function(A){var b=A.ciphertext;return A=A.salt,(A?n.create([1398893684,1701076831]).concat(A).concat(b):b).toString(o)},parse:function(A){A=o.parse(A);var b=A.words;if(b[0]==1398893684&&b[1]==1701076831){var I=n.create(b.slice(2,4));b.splice(0,4),A.sigBytes-=16}return x.create({ciphertext:A,salt:I})}},y=t.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(A,b,I,N){N=this.cfg.extend(N);var F=A.createEncryptor(I,N);return b=F.finalize(b),F=F.cfg,x.create({ciphertext:b,key:I,iv:F.iv,algorithm:A,mode:F.mode,padding:F.padding,blockSize:A.blockSize,formatter:N.format})},decrypt:function(A,b,I,N){return N=this.cfg.extend(N),b=this._parse(b,N.format),A.createDecryptor(I,N).finalize(b.ciphertext)},_parse:function(A,b){return typeof A=="string"?b.parse(A,this):A}}),S=(S.kdf={}).OpenSSL={execute:function(A,b,I,N){return N||(N=n.random(8)),A=u.create({keySize:b+I}).compute(A,N),I=n.create(A.words.slice(b),4*I),A.sigBytes=4*b,x.create({key:A,iv:I,salt:N})}},w=t.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:S}),encrypt:function(A,b,I,N){return N=this.cfg.extend(N),I=N.kdf.execute(I,A.keySize,A.ivSize),N.iv=I.iv,A=y.encrypt.call(this,A,b,I.key,N),A.mixIn(I),A},decrypt:function(A,b,I,N){return N=this.cfg.extend(N),b=this._parse(b,N.format),I=N.kdf.execute(I,A.keySize,A.ivSize,b.salt),N.iv=I.iv,y.decrypt.call(this,A,b,I.key,N)}})}();(function(){for(var e=Te,t=e.lib.BlockCipher,_=e.algo,r=[],n=[],s=[],o=[],u=[],h=[],g=[],d=[],x=[],v=[],y=[],S=0;256>S;S++)y[S]=128>S?S<<1:S<<1^283;for(var w=0,A=0,S=0;256>S;S++){var b=A^A<<1^A<<2^A<<3^A<<4,b=b>>>8^b&255^99;r[w]=b,n[b]=w;var I=y[w],N=y[I],F=y[N],L=257*y[b]^16843008*b;s[w]=L<<24|L>>>8,o[w]=L<<16|L>>>16,u[w]=L<<8|L>>>24,h[w]=L,L=16843009*F^65537*N^257*I^16843008*w,g[b]=L<<24|L>>>8,d[b]=L<<16|L>>>16,x[b]=L<<8|L>>>24,v[b]=L,w?(w=I^y[y[y[F^I]]],A^=y[y[A]]):w=A=1}var H=[0,1,2,4,8,16,32,64,128,27,54],_=_.AES=t.extend({_doReset:function(){for(var D=this._key,R=D.words,P=D.sigBytes/4,D=4*((this._nRounds=P+6)+1),k=this._keySchedule=[],W=0;W<D;W++)if(W<P)k[W]=R[W];else{var K=k[W-1];W%P?6<P&&W%P==4&&(K=r[K>>>24]<<24|r[K>>>16&255]<<16|r[K>>>8&255]<<8|r[K&255]):(K=K<<8|K>>>24,K=r[K>>>24]<<24|r[K>>>16&255]<<16|r[K>>>8&255]<<8|r[K&255],K^=H[W/P|0]<<24),k[W]=k[W-P]^K}for(R=this._invKeySchedule=[],P=0;P<D;P++)W=D-P,K=P%4?k[W]:k[W-4],R[P]=4>P||4>=W?K:g[r[K>>>24]]^d[r[K>>>16&255]]^x[r[K>>>8&255]]^v[r[K&255]]},encryptBlock:function(R,P){this._doCryptBlock(R,P,this._keySchedule,s,o,u,h,r)},decryptBlock:function(R,P){var D=R[P+1];R[P+1]=R[P+3],R[P+3]=D,this._doCryptBlock(R,P,this._invKeySchedule,g,d,x,v,n),D=R[P+1],R[P+1]=R[P+3],R[P+3]=D},_doCryptBlock:function(R,P,D,k,W,K,ie,G){for(var V=this._nRounds,le=R[P]^D[0],ne=R[P+1]^D[1],U=R[P+2]^D[2],Y=R[P+3]^D[3],ce=4,te=1;te<V;te++)var Ee=k[le>>>24]^W[ne>>>16&255]^K[U>>>8&255]^ie[Y&255]^D[ce++],be=k[ne>>>24]^W[U>>>16&255]^K[Y>>>8&255]^ie[le&255]^D[ce++],oe=k[U>>>24]^W[Y>>>16&255]^K[le>>>8&255]^ie[ne&255]^D[ce++],Y=k[Y>>>24]^W[le>>>16&255]^K[ne>>>8&255]^ie[U&255]^D[ce++],le=Ee,ne=be,U=oe;Ee=(G[le>>>24]<<24|G[ne>>>16&255]<<16|G[U>>>8&255]<<8|G[Y&255])^D[ce++],be=(G[ne>>>24]<<24|G[U>>>16&255]<<16|G[Y>>>8&255]<<8|G[le&255])^D[ce++],oe=(G[U>>>24]<<24|G[Y>>>16&255]<<16|G[le>>>8&255]<<8|G[ne&255])^D[ce++],Y=(G[Y>>>24]<<24|G[le>>>16&255]<<16|G[ne>>>8&255]<<8|G[U&255])^D[ce++],R[P]=Ee,R[P+1]=be,R[P+2]=oe,R[P+3]=Y},keySize:8});e.AES=t._createHelper(_)})();(function(){function e(y,S){var w=(this._lBlock>>>y^this._rBlock)&S;this._rBlock^=w,this._lBlock^=w<<y}function t(y,S){var w=(this._rBlock>>>y^this._lBlock)&S;this._lBlock^=w,this._rBlock^=w<<y}var r=Te,s=r.lib,n=s.WordArray,s=s.BlockCipher,o=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],g=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],x=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],v=o.DES=s.extend({_doReset:function(){for(var y=this._key.words,S=[],w=0;56>w;w++){var A=u[w]-1;S[w]=y[A>>>5]>>>31-A%32&1}for(y=this._subKeys=[],A=0;16>A;A++){for(var b=y[A]=[],I=g[A],w=0;24>w;w++)b[w/6|0]|=S[(h[w]-1+I)%28]<<31-w%6,b[4+(w/6|0)]|=S[28+(h[w+24]-1+I)%28]<<31-w%6;for(b[0]=b[0]<<1|b[0]>>>31,w=1;7>w;w++)b[w]>>>=4*(w-1)+3;b[7]=b[7]<<5|b[7]>>>27}for(S=this._invSubKeys=[],w=0;16>w;w++)S[w]=y[15-w]},encryptBlock:function(y,S){this._doCryptBlock(y,S,this._subKeys)},decryptBlock:function(y,S){this._doCryptBlock(y,S,this._invSubKeys)},_doCryptBlock:function(y,S,w){this._lBlock=y[S],this._rBlock=y[S+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var A=0;16>A;A++){for(var b=w[A],I=this._lBlock,N=this._rBlock,F=0,L=0;8>L;L++)F|=d[L][((N^b[L])&x[L])>>>0];this._lBlock=N,this._rBlock=I^F}w=this._lBlock,this._lBlock=this._rBlock,this._rBlock=w,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),y[S]=this._lBlock,y[S+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=s._createHelper(v),o=o.TripleDES=s.extend({_doReset:function(){var y=this._key.words;this._des1=v.createEncryptor(n.create(y.slice(0,2))),this._des2=v.createEncryptor(n.create(y.slice(2,4))),this._des3=v.createEncryptor(n.create(y.slice(4,6)))},encryptBlock:function(y,S){this._des1.encryptBlock(y,S),this._des2.decryptBlock(y,S),this._des3.encryptBlock(y,S)},decryptBlock:function(y,S){this._des3.decryptBlock(y,S),this._des2.encryptBlock(y,S),this._des1.decryptBlock(y,S)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=s._createHelper(o)})();(function(){var e=Te,t=e.lib.WordArray;e.enc.Base64={stringify:function(r){var n=r.words,s=r.sigBytes,o=this._map;r.clamp(),r=[];for(var u=0;u<s;u+=3)for(var h=(n[u>>>2]>>>24-8*(u%4)&255)<<16|(n[u+1>>>2]>>>24-8*((u+1)%4)&255)<<8|n[u+2>>>2]>>>24-8*((u+2)%4)&255,g=0;4>g&&u+.75*g<s;g++)r.push(o.charAt(h>>>6*(3-g)&63));if(n=o.charAt(64))for(;r.length%4;)r.push(n);return r.join("")},parse:function(r){var n=r.length,s=this._map,o=s.charAt(64);o&&(o=r.indexOf(o),o!=-1&&(n=o));for(var o=[],u=0,h=0;h<n;h++)if(h%4){var g=s.indexOf(r.charAt(h-1))<<2*(h%4),d=s.indexOf(r.charAt(h))>>>6-2*(h%4);o[u>>>2]|=(g|d)<<24-8*(u%4),u++}return t.create(o,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(e){function t(v,y,S,w,A,b,I){return v=v+(y&S|~y&w)+A+I,(v<<b|v>>>32-b)+y}function r(v,y,S,w,A,b,I){return v=v+(y&w|S&~w)+A+I,(v<<b|v>>>32-b)+y}function n(v,y,S,w,A,b,I){return v=v+(y^S^w)+A+I,(v<<b|v>>>32-b)+y}function s(v,y,S,w,A,b,I){return v=v+(S^(y|~w))+A+I,(v<<b|v>>>32-b)+y}for(var o=Te,g=o.lib,u=g.WordArray,h=g.Hasher,g=o.algo,d=[],x=0;64>x;x++)d[x]=4294967296*e.abs(e.sin(x+1))|0;g=g.MD5=h.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(v,y){for(var S=0;16>S;S++){var w=y+S,A=v[w];v[w]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360}var S=this._hash.words,w=v[y+0],A=v[y+1],b=v[y+2],I=v[y+3],N=v[y+4],F=v[y+5],L=v[y+6],H=v[y+7],_=v[y+8],R=v[y+9],P=v[y+10],D=v[y+11],k=v[y+12],W=v[y+13],K=v[y+14],ie=v[y+15],G=S[0],te=S[1],ce=S[2],V=S[3],G=t(G,te,ce,V,w,7,d[0]),V=t(V,G,te,ce,A,12,d[1]),ce=t(ce,V,G,te,b,17,d[2]),te=t(te,ce,V,G,I,22,d[3]),G=t(G,te,ce,V,N,7,d[4]),V=t(V,G,te,ce,F,12,d[5]),ce=t(ce,V,G,te,L,17,d[6]),te=t(te,ce,V,G,H,22,d[7]),G=t(G,te,ce,V,_,7,d[8]),V=t(V,G,te,ce,R,12,d[9]),ce=t(ce,V,G,te,P,17,d[10]),te=t(te,ce,V,G,D,22,d[11]),G=t(G,te,ce,V,k,7,d[12]),V=t(V,G,te,ce,W,12,d[13]),ce=t(ce,V,G,te,K,17,d[14]),te=t(te,ce,V,G,ie,22,d[15]),G=r(G,te,ce,V,A,5,d[16]),V=r(V,G,te,ce,L,9,d[17]),ce=r(ce,V,G,te,D,14,d[18]),te=r(te,ce,V,G,w,20,d[19]),G=r(G,te,ce,V,F,5,d[20]),V=r(V,G,te,ce,P,9,d[21]),ce=r(ce,V,G,te,ie,14,d[22]),te=r(te,ce,V,G,N,20,d[23]),G=r(G,te,ce,V,R,5,d[24]),V=r(V,G,te,ce,K,9,d[25]),ce=r(ce,V,G,te,I,14,d[26]),te=r(te,ce,V,G,_,20,d[27]),G=r(G,te,ce,V,W,5,d[28]),V=r(V,G,te,ce,b,9,d[29]),ce=r(ce,V,G,te,H,14,d[30]),te=r(te,ce,V,G,k,20,d[31]),G=n(G,te,ce,V,F,4,d[32]),V=n(V,G,te,ce,_,11,d[33]),ce=n(ce,V,G,te,D,16,d[34]),te=n(te,ce,V,G,K,23,d[35]),G=n(G,te,ce,V,A,4,d[36]),V=n(V,G,te,ce,N,11,d[37]),ce=n(ce,V,G,te,H,16,d[38]),te=n(te,ce,V,G,P,23,d[39]),G=n(G,te,ce,V,W,4,d[40]),V=n(V,G,te,ce,w,11,d[41]),ce=n(ce,V,G,te,I,16,d[42]),te=n(te,ce,V,G,L,23,d[43]),G=n(G,te,ce,V,R,4,d[44]),V=n(V,G,te,ce,k,11,d[45]),ce=n(ce,V,G,te,ie,16,d[46]),te=n(te,ce,V,G,b,23,d[47]),G=s(G,te,ce,V,w,6,d[48]),V=s(V,G,te,ce,H,10,d[49]),ce=s(ce,V,G,te,K,15,d[50]),te=s(te,ce,V,G,F,21,d[51]),G=s(G,te,ce,V,k,6,d[52]),V=s(V,G,te,ce,I,10,d[53]),ce=s(ce,V,G,te,P,15,d[54]),te=s(te,ce,V,G,A,21,d[55]),G=s(G,te,ce,V,_,6,d[56]),V=s(V,G,te,ce,ie,10,d[57]),ce=s(ce,V,G,te,L,15,d[58]),te=s(te,ce,V,G,W,21,d[59]),G=s(G,te,ce,V,N,6,d[60]),V=s(V,G,te,ce,D,10,d[61]),ce=s(ce,V,G,te,b,15,d[62]),te=s(te,ce,V,G,R,21,d[63]);S[0]=S[0]+G|0,S[1]=S[1]+te|0,S[2]=S[2]+ce|0,S[3]=S[3]+V|0},_doFinalize:function(){var v=this._data,y=v.words,S=8*this._nDataBytes,w=8*v.sigBytes;y[w>>>5]|=128<<24-w%32;var A=e.floor(S/4294967296);for(y[(w+64>>>9<<4)+15]=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,y[(w+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,v.sigBytes=4*(y.length+1),this._process(),v=this._hash,y=v.words,S=0;4>S;S++)w=y[S],y[S]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360;return v},clone:function(){var v=h.clone.call(this);return v._hash=this._hash.clone(),v}}),o.MD5=h._createHelper(g),o.HmacMD5=h._createHmacHelper(g)})(Math);(function(){var e=Te,s=e.lib,t=s.WordArray,r=s.Hasher,n=[],s=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(o,u){for(var h=this._hash.words,g=h[0],d=h[1],x=h[2],v=h[3],y=h[4],S=0;80>S;S++){if(16>S)n[S]=o[u+S]|0;else{var w=n[S-3]^n[S-8]^n[S-14]^n[S-16];n[S]=w<<1|w>>>31}w=(g<<5|g>>>27)+y+n[S],w=20>S?w+((d&x|~d&v)+1518500249):40>S?w+((d^x^v)+1859775393):60>S?w+((d&x|d&v|x&v)-1894007588):w+((d^x^v)-899497514),y=v,v=x,x=d<<30|d>>>2,d=g,g=w}h[0]=h[0]+g|0,h[1]=h[1]+d|0,h[2]=h[2]+x|0,h[3]=h[3]+v|0,h[4]=h[4]+y|0},_doFinalize:function(){var o=this._data,u=o.words,h=8*this._nDataBytes,g=8*o.sigBytes;return u[g>>>5]|=128<<24-g%32,u[(g+64>>>9<<4)+14]=Math.floor(h/4294967296),u[(g+64>>>9<<4)+15]=h,o.sigBytes=4*u.length,this._process(),this._hash},clone:function(){var o=r.clone.call(this);return o._hash=this._hash.clone(),o}});e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s)})();(function(e){for(var t=Te,S=t.lib,r=S.WordArray,n=S.Hasher,S=t.algo,s=[],o=[],u=function(A){return 4294967296*(A-(A|0))|0},h=2,g=0;64>g;){var d;e:{d=h;for(var x=e.sqrt(d),v=2;v<=x;v++)if(!(d%v)){d=!1;break e}d=!0}d&&(8>g&&(s[g]=u(e.pow(h,.5))),o[g]=u(e.pow(h,1/3)),g++),h++}var y=[],S=S.SHA256=n.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(w,A){for(var b=this._hash.words,I=b[0],N=b[1],F=b[2],L=b[3],H=b[4],_=b[5],R=b[6],P=b[7],D=0;64>D;D++){if(16>D)y[D]=w[A+D]|0;else{var k=y[D-15],W=y[D-2];y[D]=((k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3)+y[D-7]+((W<<15|W>>>17)^(W<<13|W>>>19)^W>>>10)+y[D-16]}k=P+((H<<26|H>>>6)^(H<<21|H>>>11)^(H<<7|H>>>25))+(H&_^~H&R)+o[D]+y[D],W=((I<<30|I>>>2)^(I<<19|I>>>13)^(I<<10|I>>>22))+(I&N^I&F^N&F),P=R,R=_,_=H,H=L+k|0,L=F,F=N,N=I,I=k+W|0}b[0]=b[0]+I|0,b[1]=b[1]+N|0,b[2]=b[2]+F|0,b[3]=b[3]+L|0,b[4]=b[4]+H|0,b[5]=b[5]+_|0,b[6]=b[6]+R|0,b[7]=b[7]+P|0},_doFinalize:function(){var w=this._data,A=w.words,b=8*this._nDataBytes,I=8*w.sigBytes;return A[I>>>5]|=128<<24-I%32,A[(I+64>>>9<<4)+14]=e.floor(b/4294967296),A[(I+64>>>9<<4)+15]=b,w.sigBytes=4*A.length,this._process(),this._hash},clone:function(){var w=n.clone.call(this);return w._hash=this._hash.clone(),w}});t.SHA256=n._createHelper(S),t.HmacSHA256=n._createHmacHelper(S)})(Math);(function(){var e=Te,t=e.lib.WordArray,n=e.algo,r=n.SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var s=r._doFinalize.call(this);return s.sigBytes-=4,s}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)})();(function(){function e(){return n.create.apply(n,arguments)}for(var t=Te,r=t.lib.Hasher,o=t.x64,n=o.Word,s=o.WordArray,o=t.algo,u=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],h=[],g=0;80>g;g++)h[g]=e();o=o.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(d,x){for(var N=this._hash.words,v=N[0],y=N[1],S=N[2],w=N[3],A=N[4],b=N[5],I=N[6],N=N[7],F=v.high,L=v.low,H=y.high,_=y.low,R=S.high,P=S.low,D=w.high,k=w.low,W=A.high,K=A.low,ie=b.high,G=b.low,V=I.high,ce=I.low,te=N.high,Ee=N.low,be=F,oe=L,Y=H,le=_,ne=R,U=P,q=D,J=k,ve=W,ye=K,ke=ie,Le=G,Ye=V,Ze=ce,tt=te,dr=Ee,Pt=0;80>Pt;Pt++){var Sr=h[Pt];if(16>Pt)var bt=Sr.high=d[x+2*Pt]|0,Ge=Sr.low=d[x+2*Pt+1]|0;else{var bt=h[Pt-15],Ge=bt.high,pr=bt.low,bt=(Ge>>>1|pr<<31)^(Ge>>>8|pr<<24)^Ge>>>7,pr=(pr>>>1|Ge<<31)^(pr>>>8|Ge<<24)^(pr>>>7|Ge<<25),Oe=h[Pt-2],Ge=Oe.high,it=Oe.low,Oe=(Ge>>>19|it<<13)^(Ge<<3|it>>>29)^Ge>>>6,it=(it>>>19|Ge<<13)^(it<<3|Ge>>>29)^(it>>>6|Ge<<26),Ge=h[Pt-7],Ht=Ge.high,ot=h[Pt-16],er=ot.high,ot=ot.low,Ge=pr+Ge.low,bt=bt+Ht+(Ge>>>0<pr>>>0?1:0),Ge=Ge+it,bt=bt+Oe+(Ge>>>0<it>>>0?1:0),Ge=Ge+ot,bt=bt+er+(Ge>>>0<ot>>>0?1:0);Sr.high=bt,Sr.low=Ge}var Ht=ve&ke^~ve&Ye,ot=ye&Le^~ye&Ze,Sr=be&Y^be&ne^Y&ne,st=oe&le^oe&U^le&U,pr=(be>>>28|oe<<4)^(be<<30|oe>>>2)^(be<<25|oe>>>7),Oe=(oe>>>28|be<<4)^(oe<<30|be>>>2)^(oe<<25|be>>>7),it=u[Pt],On=it.high,Gn=it.low,it=dr+((ye>>>14|ve<<18)^(ye>>>18|ve<<14)^(ye<<23|ve>>>9)),er=tt+((ve>>>14|ye<<18)^(ve>>>18|ye<<14)^(ve<<23|ye>>>9))+(it>>>0<dr>>>0?1:0),it=it+ot,er=er+Ht+(it>>>0<ot>>>0?1:0),it=it+Gn,er=er+On+(it>>>0<Gn>>>0?1:0),it=it+Ge,er=er+bt+(it>>>0<Ge>>>0?1:0),Ge=Oe+st,Sr=pr+Sr+(Ge>>>0<Oe>>>0?1:0),tt=Ye,dr=Ze,Ye=ke,Ze=Le,ke=ve,Le=ye,ye=J+it|0,ve=q+er+(ye>>>0<J>>>0?1:0)|0,q=ne,J=U,ne=Y,U=le,Y=be,le=oe,oe=it+Ge|0,be=er+Sr+(oe>>>0<it>>>0?1:0)|0}L=v.low=L+oe,v.high=F+be+(L>>>0<oe>>>0?1:0),_=y.low=_+le,y.high=H+Y+(_>>>0<le>>>0?1:0),P=S.low=P+U,S.high=R+ne+(P>>>0<U>>>0?1:0),k=w.low=k+J,w.high=D+q+(k>>>0<J>>>0?1:0),K=A.low=K+ye,A.high=W+ve+(K>>>0<ye>>>0?1:0),G=b.low=G+Le,b.high=ie+ke+(G>>>0<Le>>>0?1:0),ce=I.low=ce+Ze,I.high=V+Ye+(ce>>>0<Ze>>>0?1:0),Ee=N.low=Ee+dr,N.high=te+tt+(Ee>>>0<dr>>>0?1:0)},_doFinalize:function(){var d=this._data,x=d.words,v=8*this._nDataBytes,y=8*d.sigBytes;return x[y>>>5]|=128<<24-y%32,x[(y+128>>>10<<5)+30]=Math.floor(v/4294967296),x[(y+128>>>10<<5)+31]=v,d.sigBytes=4*x.length,this._process(),this._hash.toX32()},clone:function(){var d=r.clone.call(this);return d._hash=this._hash.clone(),d},blockSize:32}),t.SHA512=r._createHelper(o),t.HmacSHA512=r._createHmacHelper(o)})();(function(){var e=Te,s=e.x64,t=s.Word,r=s.WordArray,s=e.algo,n=s.SHA512,s=s.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var o=n._doFinalize.call(this);return o.sigBytes-=16,o}});e.SHA384=n._createHelper(s),e.HmacSHA384=n._createHmacHelper(s)})();(function(){var e=Te,d=e.lib,t=d.WordArray,r=d.Hasher,d=e.algo,n=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),o=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=t.create([0,1518500249,1859775393,2400959708,2840853838]),g=t.create([1352829926,1548603684,1836072691,2053994217,0]),d=d.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(x,v){for(var y=0;16>y;y++){var S=v+y,w=x[S];x[S]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var S=this._hash.words,w=h.words,A=g.words,b=n.words,I=s.words,N=o.words,F=u.words,L,H,_,R,P,D,k,W,K,ie;D=L=S[0],k=H=S[1],W=_=S[2],K=R=S[3],ie=P=S[4];for(var G,y=0;80>y;y+=1)G=L+x[v+b[y]]|0,G=16>y?G+((H^_^R)+w[0]):32>y?G+((H&_|~H&R)+w[1]):48>y?G+(((H|~_)^R)+w[2]):64>y?G+((H&R|_&~R)+w[3]):G+((H^(_|~R))+w[4]),G|=0,G=G<<N[y]|G>>>32-N[y],G=G+P|0,L=P,P=R,R=_<<10|_>>>22,_=H,H=G,G=D+x[v+I[y]]|0,G=16>y?G+((k^(W|~K))+A[0]):32>y?G+((k&K|W&~K)+A[1]):48>y?G+(((k|~W)^K)+A[2]):64>y?G+((k&W|~k&K)+A[3]):G+((k^W^K)+A[4]),G|=0,G=G<<F[y]|G>>>32-F[y],G=G+ie|0,D=ie,ie=K,K=W<<10|W>>>22,W=k,k=G;G=S[1]+_+K|0,S[1]=S[2]+R+ie|0,S[2]=S[3]+P+D|0,S[3]=S[4]+L+k|0,S[4]=S[0]+H+W|0,S[0]=G},_doFinalize:function(){var x=this._data,v=x.words,y=8*this._nDataBytes,S=8*x.sigBytes;for(v[S>>>5]|=128<<24-S%32,v[(S+64>>>9<<4)+14]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,x.sigBytes=4*(v.length+1),this._process(),x=this._hash,v=x.words,y=0;5>y;y++)S=v[y],v[y]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360;return x},clone:function(){var x=r.clone.call(this);return x._hash=this._hash.clone(),x}});e.RIPEMD160=r._createHelper(d),e.HmacRIPEMD160=r._createHmacHelper(d)})();(function(){var e=Te,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(r,n){r=this._hasher=new r.init,typeof n=="string"&&(n=t.parse(n));var s=r.blockSize,o=4*s;n.sigBytes>o&&(n=r.finalize(n)),n.clamp();for(var u=this._oKey=n.clone(),h=this._iKey=n.clone(),g=u.words,d=h.words,x=0;x<s;x++)g[x]^=1549556828,d[x]^=909522486;u.sigBytes=h.sigBytes=o,this.reset()},reset:function(){var r=this._hasher;r.reset(),r.update(this._iKey)},update:function(r){return this._hasher.update(r),this},finalize:function(r){var n=this._hasher;return r=n.finalize(r),n.reset(),n.finalize(this._oKey.clone().concat(r))}})})();(function(){var e=Te,n=e.lib,t=n.Base,r=n.WordArray,n=e.algo,s=n.HMAC,o=n.PBKDF2=t.extend({cfg:t.extend({keySize:4,hasher:n.SHA1,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,h){for(var w=this.cfg,g=s.create(w.hasher,u),d=r.create(),x=r.create([1]),v=d.words,y=x.words,S=w.keySize,w=w.iterations;v.length<S;){var A=g.update(h).finalize(x);g.reset();for(var b=A.words,I=b.length,N=A,F=1;F<w;F++){N=g.finalize(N),g.reset();for(var L=N.words,H=0;H<I;H++)b[H]^=L[H]}d.concat(A),y[0]++}return d.sigBytes=4*S,d}});e.PBKDF2=function(u,h,g){return o.create(g).compute(u,h)}})();/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var Ea="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ev="=";function ji(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=Ea.charAt(r>>6)+Ea.charAt(r&63);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=Ea.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=Ea.charAt(r>>2)+Ea.charAt((r&3)<<4));(n.length&3)>0;)n+=Ev;return n}function oo(e){var t="",r,n=0,s,o;for(r=0;r<e.length&&e.charAt(r)!=Ev;++r)o=Ea.indexOf(e.charAt(r)),!(o<0)&&(n==0?(t+=Ri(o>>2),s=o&3,n=1):n==1?(t+=Ri(s<<2|o>>4),s=o&15,n=2):n==2?(t+=Ri(s),t+=Ri(o>>2),s=o&3,n=3):(t+=Ri(s<<2|o>>4),t+=Ri(o&15),n=0));return n==1&&(t+=Ri(s<<2)),t}function Sv(e){var t=oo(e),r,n=new Array;for(r=0;2*r<t.length;++r)n[r]=parseInt(t.substring(2*r,2*r+2),16);return n}/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
*/var As;function ee(e,t,r){e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function wt(){return new ee(null)}function WC(e,t,r,n,s,o){for(;--o>=0;){var u=t*this[e++]+r[n]+s;s=Math.floor(u/67108864),r[n++]=u&67108863}return s}function GC(e,t,r,n,s,o){for(var u=t&32767,h=t>>15;--o>=0;){var g=this[e]&32767,d=this[e++]>>15,x=h*g+d*u;g=u*g+((x&32767)<<15)+r[n]+(s&1073741823),s=(g>>>30)+(x>>>15)+h*d+(s>>>30),r[n++]=g&1073741823}return s}function qC(e,t,r,n,s,o){for(var u=t&16383,h=t>>14;--o>=0;){var g=this[e]&16383,d=this[e++]>>14,x=h*g+d*u;g=u*g+((x&16383)<<14)+r[n]+s,s=(g>>28)+(x>>14)+h*d,r[n++]=g&268435455}return s}Al.appName=="Microsoft Internet Explorer"?(ee.prototype.am=GC,As=30):Al.appName!="Netscape"?(ee.prototype.am=WC,As=26):(ee.prototype.am=qC,As=28);ee.prototype.DB=As;ee.prototype.DM=(1<<As)-1;ee.prototype.DV=1<<As;var X1=52;ee.prototype.FV=Math.pow(2,X1);ee.prototype.F1=X1-As;ee.prototype.F2=2*As-X1;var XC="0123456789abcdefghijklmnopqrstuvwxyz",$c=new Array,lo,$n;lo=48;for($n=0;$n<=9;++$n)$c[lo++]=$n;lo=97;for($n=10;$n<36;++$n)$c[lo++]=$n;lo=65;for($n=10;$n<36;++$n)$c[lo++]=$n;function Ri(e){return XC.charAt(e)}function Av(e,t){var r=$c[e.charCodeAt(t)];return r??-1}function YC(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function ZC(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0}function hs(e){var t=wt();return t.fromInt(e),t}function QC(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,s=!1,o=0;--n>=0;){var u=r==8?e[n]&255:Av(e,n);if(u<0){e.charAt(n)=="-"&&(s=!0);continue}s=!1,o==0?this[this.t++]=u:o+r>this.DB?(this[this.t-1]|=(u&(1<<this.DB-o)-1)<<o,this[this.t++]=u>>this.DB-o):this[this.t-1]|=u<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&e[0]&128&&(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&ee.ZERO.subTo(this,this)}function JC(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function e5(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,s=!1,o="",u=this.t,h=this.DB-u*this.DB%t;if(u-- >0)for(h<this.DB&&(n=this[u]>>h)>0&&(s=!0,o=Ri(n));u>=0;)h<t?(n=(this[u]&(1<<h)-1)<<t-h,n|=this[--u]>>(h+=this.DB-t)):(n=this[u]>>(h-=t)&r,h<=0&&(h+=this.DB,--u)),n>0&&(s=!0),s&&(o+=Ri(n));return s?o:"0"}function t5(){var e=wt();return ee.ZERO.subTo(this,e),e}function r5(){return this.s<0?this.negate():this}function n5(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this[r]-e[r])!=0)return t;return 0}function zc(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function i5(){return this.t<=0?0:this.DB*(this.t-1)+zc(this[this.t-1]^this.s&this.DM)}function s5(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function a5(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function o5(e,t){var r=e%this.DB,n=this.DB-r,s=(1<<n)-1,o=Math.floor(e/this.DB),u=this.s<<r&this.DM,h;for(h=this.t-1;h>=0;--h)t[h+o+1]=this[h]>>n|u,u=(this[h]&s)<<r;for(h=o-1;h>=0;--h)t[h]=0;t[o]=u,t.t=this.t+o+1,t.s=this.s,t.clamp()}function l5(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,s=this.DB-n,o=(1<<n)-1;t[0]=this[r]>>n;for(var u=r+1;u<this.t;++u)t[u-r-1]|=(this[u]&o)<<s,t[u-r]=this[u]>>n;n>0&&(t[this.t-r-1]|=(this.s&o)<<s),t.t=this.t-r,t.clamp()}function u5(e,t){for(var r=0,n=0,s=Math.min(e.t,this.t);r<s;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()}function c5(e,t){var r=this.abs(),n=e.abs(),s=r.t;for(t.t=s+n.t;--s>=0;)t[s]=0;for(s=0;s<n.t;++s)t[s+r.t]=r.am(0,n[s],t,s,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&ee.ZERO.subTo(t,t)}function f5(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function h5(e,t,r){var n=e.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t){t!=null&&t.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=wt());var o=wt(),u=this.s,h=e.s,g=this.DB-zc(n[n.t-1]);g>0?(n.lShiftTo(g,o),s.lShiftTo(g,r)):(n.copyTo(o),s.copyTo(r));var d=o.t,x=o[d-1];if(x!=0){var v=x*(1<<this.F1)+(d>1?o[d-2]>>this.F2:0),y=this.FV/v,S=(1<<this.F1)/v,w=1<<this.F2,A=r.t,b=A-d,I=t??wt();for(o.dlShiftTo(b,I),r.compareTo(I)>=0&&(r[r.t++]=1,r.subTo(I,r)),ee.ONE.dlShiftTo(d,I),I.subTo(o,o);o.t<d;)o[o.t++]=0;for(;--b>=0;){var N=r[--A]==x?this.DM:Math.floor(r[A]*y+(r[A-1]+w)*S);if((r[A]+=o.am(0,N,r,b,0,d))<N)for(o.dlShiftTo(b,I),r.subTo(I,r);r[A]<--N;)r.subTo(I,r)}t!=null&&(r.drShiftTo(d,t),u!=h&&ee.ZERO.subTo(t,t)),r.t=d,r.clamp(),g>0&&r.rShiftTo(g,r),u<0&&ee.ZERO.subTo(r,r)}}}function d5(e){var t=wt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(ee.ZERO)>0&&e.subTo(t,t),t}function sa(e){this.m=e}function p5(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function g5(e){return e}function m5(e){e.divRemTo(this.m,null,e)}function y5(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function v5(e,t){e.squareTo(t),this.reduce(t)}sa.prototype.convert=p5;sa.prototype.revert=g5;sa.prototype.reduce=m5;sa.prototype.mulTo=y5;sa.prototype.sqrTo=v5;function x5(){if(this.t<1)return 0;var e=this[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function aa(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function w5(e){var t=wt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(ee.ZERO)>0&&this.m.subTo(t,t),t}function E5(e){var t=wt();return e.copyTo(t),this.reduce(t),t}function S5(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e[t]&32767,n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function A5(e,t){e.squareTo(t),this.reduce(t)}function C5(e,t,r){e.multiplyTo(t,r),this.reduce(r)}aa.prototype.convert=w5;aa.prototype.revert=E5;aa.prototype.reduce=S5;aa.prototype.mulTo=C5;aa.prototype.sqrTo=A5;function I5(){return(this.t>0?this[0]&1:this.s)==0}function b5(e,t){if(e>4294967295||e<1)return ee.ONE;var r=wt(),n=wt(),s=t.convert(this),o=zc(e)-1;for(s.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,s,r);else{var u=r;r=n,n=u}return t.revert(r)}function T5(e,t){var r;return e<256||t.isEven()?r=new sa(t):r=new aa(t),this.exp(e,r)}ee.prototype.copyTo=YC;ee.prototype.fromInt=ZC;ee.prototype.fromString=QC;ee.prototype.clamp=JC;ee.prototype.dlShiftTo=s5;ee.prototype.drShiftTo=a5;ee.prototype.lShiftTo=o5;ee.prototype.rShiftTo=l5;ee.prototype.subTo=u5;ee.prototype.multiplyTo=c5;ee.prototype.squareTo=f5;ee.prototype.divRemTo=h5;ee.prototype.invDigit=x5;ee.prototype.isEven=I5;ee.prototype.exp=b5;ee.prototype.toString=e5;ee.prototype.negate=t5;ee.prototype.abs=r5;ee.prototype.compareTo=n5;ee.prototype.bitLength=i5;ee.prototype.mod=d5;ee.prototype.modPowInt=T5;ee.ZERO=hs(0);ee.ONE=hs(1);/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function N5(){var e=wt();return this.copyTo(e),e}function _5(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function D5(){return this.t==0?this.s:this[0]<<24>>24}function R5(){return this.t==0?this.s:this[0]<<16>>16}function O5(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function F5(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function P5(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=hs(r),s=wt(),o=wt(),u="";for(this.divRemTo(n,s,o);s.signum()>0;)u=(r+o.intValue()).toString(e).substr(1)+u,s.divRemTo(n,s,o);return o.intValue().toString(e)+u}function M5(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),s=!1,o=0,u=0,h=0;h<e.length;++h){var g=Av(e,h);if(g<0){e.charAt(h)=="-"&&this.signum()==0&&(s=!0);continue}u=t*u+g,++o>=r&&(this.dMultiply(n),this.dAddOffset(u,0),o=0,u=0)}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(u,0)),s&&ee.ZERO.subTo(this,this)}function B5(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(ee.ONE.shiftLeft(e-1),Y1,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(ee.ONE.shiftLeft(e-1),this);else{var n=new Array,s=e&7;n.length=(e>>3)+1,t.nextBytes(n),s>0?n[0]&=(1<<s)-1:n[0]=0,this.fromString(n,256)}}function L5(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,s=0;if(e-- >0)for(r<this.DB&&(n=this[e]>>r)!=(this.s&this.DM)>>r&&(t[s++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this[e]&(1<<r)-1)<<8-r,n|=this[--e]>>(r+=this.DB-8)):(n=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),s==0&&(this.s&128)!=(n&128)&&++s,(s>0||n!=this.s)&&(t[s++]=n);return t}function k5(e){return this.compareTo(e)==0}function j5(e){return this.compareTo(e)<0?this:e}function H5(e){return this.compareTo(e)>0?this:e}function U5(e,t,r){var n,s,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(s=e.s&this.DM,n=o;n<this.t;++n)r[n]=t(this[n],s);r.t=this.t}else{for(s=this.s&this.DM,n=o;n<e.t;++n)r[n]=t(s,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function V5(e,t){return e&t}function $5(e){var t=wt();return this.bitwiseTo(e,V5,t),t}function Y1(e,t){return e|t}function z5(e){var t=wt();return this.bitwiseTo(e,Y1,t),t}function Cv(e,t){return e^t}function K5(e){var t=wt();return this.bitwiseTo(e,Cv,t),t}function Iv(e,t){return e&~t}function W5(e){var t=wt();return this.bitwiseTo(e,Iv,t),t}function G5(){for(var e=wt(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function q5(e){var t=wt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function X5(e){var t=wt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Y5(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function Z5(){for(var e=0;e<this.t;++e)if(this[e]!=0)return e*this.DB+Y5(this[e]);return this.s<0?this.t*this.DB:-1}function Q5(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function J5(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Q5(this[r]^t);return e}function eI(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this[t]&1<<e%this.DB)!=0}function tI(e,t){var r=ee.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function rI(e){return this.changeBit(e,Y1)}function nI(e){return this.changeBit(e,Iv)}function iI(e){return this.changeBit(e,Cv)}function sI(e,t){for(var r=0,n=0,s=Math.min(e.t,this.t);r<s;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()}function aI(e){var t=wt();return this.addTo(e,t),t}function oI(e){var t=wt();return this.subTo(e,t),t}function lI(e){var t=wt();return this.multiplyTo(e,t),t}function uI(){var e=wt();return this.squareTo(e),e}function cI(e){var t=wt();return this.divRemTo(e,t,null),t}function fI(e){var t=wt();return this.divRemTo(e,null,t),t}function hI(e){var t=wt(),r=wt();return this.divRemTo(e,t,r),new Array(t,r)}function dI(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function pI(e,t){if(e!=0){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Ml(){}function bv(e){return e}function gI(e,t,r){e.multiplyTo(t,r)}function mI(e,t){e.squareTo(t)}Ml.prototype.convert=bv;Ml.prototype.revert=bv;Ml.prototype.mulTo=gI;Ml.prototype.sqrTo=mI;function yI(e){return this.exp(e,new Ml)}function vI(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var s;for(s=r.t-this.t;n<s;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(s=Math.min(e.t,t);n<s;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function xI(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function uo(e){this.r2=wt(),this.q3=wt(),ee.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function wI(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=wt();return e.copyTo(t),this.reduce(t),t}function EI(e){return e}function SI(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function AI(e,t){e.squareTo(t),this.reduce(t)}function CI(e,t,r){e.multiplyTo(t,r),this.reduce(r)}uo.prototype.convert=wI;uo.prototype.revert=EI;uo.prototype.reduce=SI;uo.prototype.mulTo=CI;uo.prototype.sqrTo=AI;function II(e,t){var r=e.bitLength(),n,s=hs(1),o;if(r<=0)return s;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new sa(t):t.isEven()?o=new uo(t):o=new aa(t);var u=new Array,h=3,g=n-1,d=(1<<n)-1;if(u[1]=o.convert(this),n>1){var x=wt();for(o.sqrTo(u[1],x);h<=d;)u[h]=wt(),o.mulTo(x,u[h-2],u[h]),h+=2}var v=e.t-1,y,S=!0,w=wt(),A;for(r=zc(e[v])-1;v>=0;){for(r>=g?y=e[v]>>r-g&d:(y=(e[v]&(1<<r+1)-1)<<g-r,v>0&&(y|=e[v-1]>>this.DB+r-g)),h=n;!(y&1);)y>>=1,--h;if((r-=h)<0&&(r+=this.DB,--v),S)u[y].copyTo(s),S=!1;else{for(;h>1;)o.sqrTo(s,w),o.sqrTo(w,s),h-=2;h>0?o.sqrTo(s,w):(A=s,s=w,w=A),o.mulTo(w,u[y],s)}for(;v>=0&&!(e[v]&1<<r);)o.sqrTo(s,w),A=s,s=w,w=A,--r<0&&(r=this.DB-1,--v)}return o.revert(s)}function bI(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var s=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(s<o&&(o=s),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(s=t.getLowestSetBit())>0&&t.rShiftTo(s,t),(s=r.getLowestSetBit())>0&&r.rShiftTo(s,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function TI(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function NI(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return ee.ZERO;for(var r=e.clone(),n=this.clone(),s=hs(1),o=hs(0),u=hs(0),h=hs(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?((!u.isEven()||!h.isEven())&&(u.addTo(this,u),h.subTo(e,h)),u.rShiftTo(1,u)):h.isEven()||h.subTo(e,h),h.rShiftTo(1,h);r.compareTo(n)>=0?(r.subTo(n,r),t&&s.subTo(u,s),o.subTo(h,o)):(n.subTo(r,n),t&&u.subTo(s,u),h.subTo(o,h))}if(n.compareTo(ee.ONE)!=0)return ee.ZERO;if(h.compareTo(e)>=0)return h.subtract(e);if(h.signum()<0)h.addTo(e,h);else return h;return h.signum()<0?h.add(e):h}var en=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],_I=(1<<26)/en[en.length-1];function DI(e){var t,r=this.abs();if(r.t==1&&r[0]<=en[en.length-1]){for(t=0;t<en.length;++t)if(r[0]==en[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<en.length;){for(var n=en[t],s=t+1;s<en.length&&n<_I;)n*=en[s++];for(n=r.modInt(n);t<s;)if(n%en[t++]==0)return!1}return r.millerRabin(e)}function RI(e){var t=this.subtract(ee.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);e=e+1>>1,e>en.length&&(e=en.length);for(var s=wt(),o=0;o<e;++o){s.fromInt(en[Math.floor(Math.random()*en.length)]);var u=s.modPow(n,this);if(u.compareTo(ee.ONE)!=0&&u.compareTo(t)!=0){for(var h=1;h++<r&&u.compareTo(t)!=0;)if(u=u.modPowInt(2,this),u.compareTo(ee.ONE)==0)return!1;if(u.compareTo(t)!=0)return!1}}return!0}ee.prototype.chunkSize=O5;ee.prototype.toRadix=P5;ee.prototype.fromRadix=M5;ee.prototype.fromNumber=B5;ee.prototype.bitwiseTo=U5;ee.prototype.changeBit=tI;ee.prototype.addTo=sI;ee.prototype.dMultiply=dI;ee.prototype.dAddOffset=pI;ee.prototype.multiplyLowerTo=vI;ee.prototype.multiplyUpperTo=xI;ee.prototype.modInt=TI;ee.prototype.millerRabin=RI;ee.prototype.clone=N5;ee.prototype.intValue=_5;ee.prototype.byteValue=D5;ee.prototype.shortValue=R5;ee.prototype.signum=F5;ee.prototype.toByteArray=L5;ee.prototype.equals=k5;ee.prototype.min=j5;ee.prototype.max=H5;ee.prototype.and=$5;ee.prototype.or=z5;ee.prototype.xor=K5;ee.prototype.andNot=W5;ee.prototype.not=G5;ee.prototype.shiftLeft=q5;ee.prototype.shiftRight=X5;ee.prototype.getLowestSetBit=Z5;ee.prototype.bitCount=J5;ee.prototype.testBit=eI;ee.prototype.setBit=rI;ee.prototype.clearBit=nI;ee.prototype.flipBit=iI;ee.prototype.add=aI;ee.prototype.subtract=oI;ee.prototype.multiply=lI;ee.prototype.divide=cI;ee.prototype.remainder=fI;ee.prototype.divideAndRemainder=hI;ee.prototype.modPow=II;ee.prototype.modInverse=NI;ee.prototype.pow=yI;ee.prototype.gcd=bI;ee.prototype.isProbablePrime=DI;ee.prototype.square=uI;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Z1(){this.i=0,this.j=0,this.S=new Array}function OI(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0}function FI(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]}Z1.prototype.init=OI;Z1.prototype.next=FI;function PI(){return new Z1}var Qh=256;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */var pu,In,Fr;function MI(e){In[Fr++]^=e&255,In[Fr++]^=e>>8&255,In[Fr++]^=e>>16&255,In[Fr++]^=e>>24&255,Fr>=Qh&&(Fr-=Qh)}function Q1(){MI(new Date().getTime())}if(In==null){In=new Array,Fr=0;var Jn;if(xa!==void 0&&(xa.crypto!==void 0||xa.msCrypto!==void 0)){var Pg=xa.crypto||xa.msCrypto;if(Pg.getRandomValues){var Mg=new Uint8Array(32);for(Pg.getRandomValues(Mg),Jn=0;Jn<32;++Jn)In[Fr++]=Mg[Jn]}else if(Al.appName=="Netscape"&&Al.appVersion<"5"){var Bg=xa.crypto.random(32);for(Jn=0;Jn<Bg.length;++Jn)In[Fr++]=Bg.charCodeAt(Jn)&255}}for(;Fr<Qh;)Jn=Math.floor(65536*Math.random()),In[Fr++]=Jn>>>8,In[Fr++]=Jn&255;Fr=0,Q1()}function BI(){if(pu==null){for(Q1(),pu=PI(),pu.init(In),Fr=0;Fr<In.length;++Fr)In[Fr]=0;Fr=0}return pu.next()}function LI(e){var t;for(t=0;t<e.length;++t)e[t]=BI()}function co(){}co.prototype.nextBytes=LI;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function cn(e,t){return new ee(e,t)}function rt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function kI(e,t){if(this.isPublic=!0,this.isPrivate=!1,typeof e!="string")this.n=e,this.e=t;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=cn(e,16),this.e=parseInt(t,16);else throw"Invalid RSA public key"}function jI(e){return e.modPowInt(this.e,this.n)}rt.prototype.doPublic=jI;rt.prototype.setPublic=kI;rt.prototype.type="RSA";function HI(e,t,r){if(this.isPrivate=!0,typeof e!="string")this.n=e,this.e=t,this.d=r;else if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=cn(e,16),this.e=parseInt(t,16),this.d=cn(r,16);else throw"Invalid RSA private key"}function UI(e,t,r,n,s,o,u,h){if(this.isPrivate=!0,this.isPublic=!1,e==null)throw"RSASetPrivateEx N == null";if(t==null)throw"RSASetPrivateEx E == null";if(e.length==0)throw"RSASetPrivateEx N.length == 0";if(t.length==0)throw"RSASetPrivateEx E.length == 0";if(e!=null&&t!=null&&e.length>0&&t.length>0)this.n=cn(e,16),this.e=parseInt(t,16),this.d=cn(r,16),this.p=cn(n,16),this.q=cn(s,16),this.dmp1=cn(o,16),this.dmq1=cn(u,16),this.coeff=cn(h,16);else throw"Invalid RSA private key in RSASetPrivateEx"}function VI(e,t){var r=new co,n=e>>1;this.e=parseInt(t,16);for(var s=new ee(t,16),o=e/2-100,u=ee.ONE.shiftLeft(o);;){for(;this.p=new ee(e-n,1,r),!(this.p.subtract(ee.ONE).gcd(s).compareTo(ee.ONE)==0&&this.p.isProbablePrime(10)););for(;this.q=new ee(n,1,r),!(this.q.subtract(ee.ONE).gcd(s).compareTo(ee.ONE)==0&&this.q.isProbablePrime(10)););if(this.p.compareTo(this.q)<=0){var h=this.p;this.p=this.q,this.q=h}var g=this.q.subtract(this.p).abs();if(!(g.bitLength()<o||g.compareTo(u)<=0)){var d=this.p.subtract(ee.ONE),x=this.q.subtract(ee.ONE),v=d.multiply(x);if(v.gcd(s).compareTo(ee.ONE)==0&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=s.modInverse(v),this.dmp1=this.d.mod(d),this.dmq1=this.d.mod(x),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0}function $I(e){if(this.p==null||this.q==null)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)}rt.prototype.doPrivate=$I;rt.prototype.setPrivate=HI;rt.prototype.setPrivateEx=UI;rt.prototype.generate=VI;/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function _r(e,t){this.x=t,this.q=e}function zI(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function KI(){return this.x}function WI(){return new _r(this.q,this.x.negate().mod(this.q))}function GI(e){return new _r(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function qI(e){return new _r(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function XI(e){return new _r(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function YI(){return new _r(this.q,this.x.square().mod(this.q))}function ZI(e){return new _r(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}_r.prototype.equals=zI;_r.prototype.toBigInteger=KI;_r.prototype.negate=WI;_r.prototype.add=GI;_r.prototype.subtract=qI;_r.prototype.multiply=XI;_r.prototype.square=YI;_r.prototype.divide=ZI;_r.prototype.sqrt=function(){return new _r(this.q,this.x.sqrt().mod(this.q))};function It(e,t,r,n){this.curve=e,this.x=t,this.y=r,n==null?this.z=ee.ONE:this.z=n,this.zinv=null}function QI(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function JI(){return this.zinv==null&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function eb(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,r;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),t.equals(ee.ZERO)?(r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),r.equals(ee.ZERO)):!1}function tb(){return this.x==null&&this.y==null?!0:this.z.equals(ee.ZERO)&&!this.y.toBigInteger().equals(ee.ZERO)}function rb(){return new It(this.curve,this.x,this.y.negate(),this.z)}function nb(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(ee.ZERO.equals(r))return ee.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new ee("3"),s=this.x.toBigInteger(),o=this.y.toBigInteger();e.x.toBigInteger(),e.y.toBigInteger();var u=r.square(),h=u.multiply(r),g=s.multiply(u),d=t.square().multiply(this.z),x=d.subtract(g.shiftLeft(1)).multiply(e.z).subtract(h).multiply(r).mod(this.curve.q),v=g.multiply(n).multiply(t).subtract(o.multiply(h)).subtract(d.multiply(t)).multiply(e.z).add(t.multiply(h)).mod(this.curve.q),y=h.multiply(this.z).multiply(e.z).mod(this.curve.q);return new It(this.curve,this.curve.fromBigInteger(x),this.curve.fromBigInteger(v),y)}function ib(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=new ee("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),s=n.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),u=t.square().multiply(e);ee.ZERO.equals(o)||(u=u.add(this.z.square().multiply(o))),u=u.mod(this.curve.q);var h=u.square().subtract(t.shiftLeft(3).multiply(s)).shiftLeft(1).multiply(n).mod(this.curve.q),g=u.multiply(e).multiply(t).subtract(s.shiftLeft(1)).shiftLeft(2).multiply(s).subtract(u.square().multiply(u)).mod(this.curve.q),d=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new It(this.curve,this.curve.fromBigInteger(h),this.curve.fromBigInteger(g),d)}function sb(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ee("3")),n=this.negate(),s=this,o=this.curve.q.subtract(e),u=o.multiply(new ee("3")),h=new It(this.curve,this.x,this.y),g=h.negate(),d;for(d=r.bitLength()-2;d>0;--d){s=s.twice();var x=r.testBit(d),v=t.testBit(d);x!=v&&(s=s.add(x?this:n))}for(d=u.bitLength()-2;d>0;--d){h=h.twice();var y=u.testBit(d),S=o.testBit(d);y!=S&&(h=h.add(y?h:g))}return s}function ab(e,t,r){var n;e.bitLength()>r.bitLength()?n=e.bitLength()-1:n=r.bitLength()-1;for(var s=this.curve.getInfinity(),o=this.add(t);n>=0;)s=s.twice(),e.testBit(n)?r.testBit(n)?s=s.add(o):s=s.add(this):r.testBit(n)&&(s=s.add(t)),--n;return s}It.prototype.getX=QI;It.prototype.getY=JI;It.prototype.equals=eb;It.prototype.isInfinity=tb;It.prototype.negate=rb;It.prototype.add=nb;It.prototype.twice=ib;It.prototype.multiply=sb;It.prototype.multiplyTwo=ab;function Wi(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new It(this,null,null)}function ob(){return this.q}function lb(){return this.a}function ub(){return this.b}function cb(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function fb(){return this.infinity}function hb(e){return new _r(this.q,e)}function db(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2);e.substr(2);var r=this.fromBigInteger(new ee(g,16)),n=this.getA(),s=this.getB(),o=r.square().add(n).multiply(r).add(s),u=o.sqrt();return t=="03"&&(u=u.negate()),new It(this,r,u);case 4:case 6:case 7:var h=(e.length-2)/2,g=e.substr(2,h),d=e.substr(h+2,h);return new It(this,this.fromBigInteger(new ee(g,16)),this.fromBigInteger(new ee(d,16)));default:return null}}Wi.prototype.getQ=ob;Wi.prototype.getA=lb;Wi.prototype.getB=ub;Wi.prototype.equals=cb;Wi.prototype.getInfinity=fb;Wi.prototype.fromBigInteger=hb;Wi.prototype.decodePointHex=db;/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */_r.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)};It.prototype.getEncoded=function(e){var t=function(o,u){var h=o.toByteArrayUnsigned();if(u<h.length)h=h.slice(h.length-u);else for(;u>h.length;)h.unshift(0);return h},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),s=t(r,32);return e?n.isEven()?s.unshift(2):s.unshift(3):(s.unshift(4),s=s.concat(t(n,32))),s};It.decodeFrom=function(e,t){t[0];var r=t.length-1,n=t.slice(1,1+r/2),s=t.slice(1+r/2,1+r);n.unshift(0),s.unshift(0);var o=new ee(n),u=new ee(s);return new It(e,e.fromBigInteger(o),e.fromBigInteger(u))};It.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,n=t.substr(2,r/2),s=t.substr(2+r/2,r/2),o=new ee(n,16),u=new ee(s,16);return new It(e,e.fromBigInteger(o),e.fromBigInteger(u))};It.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y),n=r.divide(t),s=n.square().subtract(this.x).subtract(e.x),o=n.multiply(this.x.subtract(s)).subtract(this.y);return new It(this.curve,s,o)};It.prototype.twice2D=function(){if(this.isInfinity())return this;if(this.y.toBigInteger().signum()==0)return this.curve.getInfinity();var e=this.curve.fromBigInteger(ee.valueOf(2)),t=this.curve.fromBigInteger(ee.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),s=r.multiply(this.x.subtract(n)).subtract(this.y);return new It(this.curve,n,s)};It.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(e.signum()==0)return this.curve.getInfinity();var t=e,r=t.multiply(new ee("3")),n=this.negate(),s=this,o;for(o=r.bitLength()-2;o>0;--o){s=s.twice();var u=r.testBit(o),h=t.testBit(o);u!=h&&(s=s.add2D(u?this:n))}return s};It.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),s=this.curve.getQ(),o=t.multiply(t).mod(s),u=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(s);return o.equals(u)};It.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"};It.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(ee.ONE)<0||t.compareTo(e.subtract(ee.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(ee.ONE)<0||r.compareTo(e.subtract(ee.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */var Tv=function(){var e="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",t='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))',r='(?:"'+t+'*")',n=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+e+"|"+r+")","g"),s=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),o={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"};function u(x,v,y){return v?o[v]:String.fromCharCode(parseInt(y,16))}var h=new String(""),g="\\",d=Object.hasOwnProperty;return function(x,v){var y=x.match(n),S,w=y[0],A=!1;w==="{"?S={}:w==="["?S=[]:(S=[],A=!0);for(var b,I=[S],N=1-A,F=y.length;N<F;++N){w=y[N];var L;switch(w.charCodeAt(0)){default:L=I[0],L[b||L.length]=+w,b=void 0;break;case 34:if(w=w.substring(1,w.length-1),w.indexOf(g)!==-1&&(w=w.replace(s,u)),L=I[0],!b)if(L instanceof Array)b=L.length;else{b=w||h;break}L[b]=w,b=void 0;break;case 91:L=I[0],I.unshift(L[b||L.length]=[]),b=void 0;break;case 93:I.shift();break;case 102:L=I[0],L[b||L.length]=!1,b=void 0;break;case 110:L=I[0],L[b||L.length]=null,b=void 0;break;case 116:L=I[0],L[b||L.length]=!0,b=void 0;break;case 123:L=I[0],I.unshift(L[b||L.length]={}),b=void 0;break;case 125:I.shift();break}}if(A){if(I.length!==1)throw new Error;S=S[0]}else if(I.length)throw new Error;if(v){var H=function(_,R){var P=_[R];if(P&&typeof P=="object"){var D=null;for(var k in P)if(d.call(P,k)&&P!==_){var W=H(P,k);W!==void 0?P[k]=W:(D||(D=[]),D.push(k))}if(D)for(var K=D.length;--K>=0;)delete P[D[K]]}return v.call(_,R,P)};S=H({"":S},"")}return S}}();(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});E.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){return Ll(e)},this.getPEMStringFromHex=function(e,t){return Gr(e,t)},this.newObject=function(e){var t=E,r=t.asn1,n=r.ASN1Object,s=r.DERBoolean,o=r.DERInteger,u=r.DERBitString,h=r.DEROctetString,g=r.DERNull,d=r.DERObjectIdentifier,x=r.DEREnumerated,v=r.DERUTF8String,y=r.DERNumericString,S=r.DERPrintableString,w=r.DERTeletexString,A=r.DERIA5String,b=r.DERUTCTime,I=r.DERGeneralizedTime,N=r.DERVisibleString,F=r.DERBMPString,L=r.DERSequence,H=r.DERSet,_=r.DERTaggedObject,R=r.ASN1Util.newObject;if(e instanceof r.ASN1Object)return e;var P=Object.keys(e);if(P.length!=1)throw new Error("key of param shall be only one.");var D=P[0];if(":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+D+":")==-1)throw new Error("undefined key: "+D);if(D=="bool")return new s(e[D]);if(D=="int")return new o(e[D]);if(D=="bitstr")return new u(e[D]);if(D=="octstr")return new h(e[D]);if(D=="null")return new g(e[D]);if(D=="oid")return new d(e[D]);if(D=="enum")return new x(e[D]);if(D=="utf8str")return new v(e[D]);if(D=="numstr")return new y(e[D]);if(D=="prnstr")return new S(e[D]);if(D=="telstr")return new w(e[D]);if(D=="ia5str")return new A(e[D]);if(D=="utctime")return new b(e[D]);if(D=="gentime")return new I(e[D]);if(D=="visstr")return new N(e[D]);if(D=="bmpstr")return new F(e[D]);if(D=="asn1")return new n(e[D]);if(D=="seq"){for(var k=e[D],W=[],K=0;K<k.length;K++){var ie=R(k[K]);W.push(ie)}return new L({array:W})}if(D=="set"){for(var k=e[D],W=[],K=0;K<k.length;K++){var ie=R(k[K]);W.push(ie)}return new H({array:W})}if(D=="tag"){var G=e[D];if(Object.prototype.toString.call(G)==="[object Array]"&&G.length==3){var V=R(G[2]);return new _({tag:G[0],explicit:G[1],obj:V})}else return new _(G)}},this.jsonToASN1HEX=function(e){var t=this.newObject(e);return t.tohex()}};E.asn1.ASN1Util.oidHexToInt=function(e){for(var s="",t=parseInt(e.substr(0,2),16),r=Math.floor(t/40),n=t%40,s=r+"."+n,o="",u=2;u<e.length;u+=2){var h=parseInt(e.substr(u,2),16),g=("00000000"+h.toString(2)).slice(-8);if(o=o+g.substr(1,7),g.substr(0,1)=="0"){var d=new ee(o,2);s=s+"."+d.toString(10),o=""}}return s};E.asn1.ASN1Util.oidIntToHex=function(e){var t=function(h){var g=h.toString(16);return g.length==1&&(g="0"+g),g},r=function(h){var g="",d=new ee(h,10),x=d.toString(2),v=7-x.length%7;v==7&&(v=0);for(var y="",S=0;S<v;S++)y+="0";x=y+x;for(var S=0;S<x.length-1;S+=7){var w=x.substr(S,7);S!=x.length-7&&(w="1"+w),g+=t(parseInt(w,2))}return g};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",s=e.split("."),o=parseInt(s[0])*40+parseInt(s[1]);n+=t(o),s.splice(0,2);for(var u=0;u<s.length;u++)n+=r(s[u]);return n};E.asn1.ASN1Object=function(e){var t="";this.params=null,this.getLengthHexFromValue=function(){if(typeof this.hV>"u"||this.hV==null)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+t.length+",v="+this.hV);var r=this.hV.length/2,n=r.toString(16);if(n.length%2==1&&(n="0"+n),r<128)return n;var s=n.length/2;if(s>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+r.toString(16));var o=128+s;return o.toString(16)+n},this.tohex=function(){return(this.hTLV==null||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(r){this.params=r},e!=null&&e.tlv!=null&&(this.hTLV=e.tlv,this.isModified=!1)};E.asn1.DERAbstractString=function(e){E.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.s=t,this.hV=Wc(this.s).toLowerCase()},this.setStringHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"?this.setString(e):typeof e.str<"u"?this.setString(e.str):typeof e.hex<"u"&&this.setStringHex(e.hex))};pe(E.asn1.DERAbstractString,E.asn1.ASN1Object);E.asn1.DERAbstractTime=function(e){E.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(t){var r=t.getTime()+t.getTimezoneOffset()*6e4,n=new Date(r);return n},this.formatDate=function(t,r,n){var s=this.zeroPadding,o=this.localDateToUTC(t),u=String(o.getFullYear());r=="utc"&&(u=u.substr(2,2));var h=s(String(o.getMonth()+1),2),g=s(String(o.getDate()),2),d=s(String(o.getHours()),2),x=s(String(o.getMinutes()),2),v=s(String(o.getSeconds()),2),y=u+h+g+d+x+v;if(n===!0){var S=o.getMilliseconds();if(S!=0){var w=s(String(S),3);w=w.replace(/[0]+$/,""),y=y+"."+w}}return y+"Z"},this.zeroPadding=function(t,r){return t.length>=r?t:new Array(r-t.length+1).join("0")+t},this.setByParam=function(t){this.hV=null,this.hTLV=null,this.params=t},this.getString=function(){},this.setString=function(t){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.str=t},this.setByDate=function(t){this.hTLV=null,this.isModified=!0,this.params==null&&(this.params={}),this.params.date=t},this.setByDateValue=function(t,r,n,s,o,u){var h=new Date(Date.UTC(t,r-1,n,s,o,u,0));this.setByDate(h)},this.getFreshValueHex=function(){return this.hV}};pe(E.asn1.DERAbstractTime,E.asn1.ASN1Object);E.asn1.DERAbstractStructured=function(e){E.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array=t},this.appendASN1Object=function(t){this.hTLV=null,this.isModified=!0,this.asn1Array.push(t)},this.asn1Array=new Array,typeof e<"u"&&typeof e.array<"u"&&(this.asn1Array=e.array)};pe(E.asn1.DERAbstractStructured,E.asn1.ASN1Object);E.asn1.DERBoolean=function(e){E.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",e==!1?this.hTLV="010100":this.hTLV="0101ff"};pe(E.asn1.DERBoolean,E.asn1.ASN1Object);E.asn1.DERInteger=function(e){E.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.params=null;var t=Ll;this.setByBigInteger=function(r){this.isModified=!0,this.params={bigint:r}},this.setByInteger=function(r){this.isModified=!0,this.params=r},this.setValueHex=function(r){this.isModified=!0,this.params={hex:r}},this.getFreshValueHex=function(){var r=this.params,n=null;if(r==null)throw new Error("value not set");if(typeof r=="object"&&r.hex!=null)return this.hV=r.hex,this.hV;if(typeof r=="number")n=new ee(String(r),10);else if(r.int!=null)n=new ee(String(r.int),10);else if(r.bigint!=null)n=r.bigint;else throw new Error("wrong parameter");return this.hV=t(n),this.hV},e!=null&&(this.params=e)};pe(E.asn1.DERInteger,E.asn1.ASN1Object);E.asn1.DERBitString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=E.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}E.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(r){this.hTLV=null,this.isModified=!0,this.hV=r},this.setUnusedBitsAndHexValue=function(r,n){if(r<0||7<r)throw"unused bits shall be from 0 to 7: u = "+r;var s="0"+r;this.hTLV=null,this.isModified=!0,this.hV=s+n},this.setByBinaryString=function(r){r=r.replace(/0+$/,"");var n=8-r.length%8;n==8&&(n=0),r+="0000000".substr(0,n);for(var s="",o=0;o<r.length-1;o+=8){var u=r.substr(o,8),h=parseInt(u,2).toString(16);h.length==1&&(h="0"+h),s+=h}this.hTLV=null,this.isModified=!0,this.hV="0"+n+s},this.setByBooleanArray=function(r){for(var n="",s=0;s<r.length;s++)r[s]==!0?n+="1":n+="0";this.setByBinaryString(n)},this.newFalseArray=function(r){for(var n=new Array(r),s=0;s<r;s++)n[s]=!1;return n},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e=="string"&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):typeof e.hex<"u"?this.setHexValueIncludingUnusedBits(e.hex):typeof e.bin<"u"?this.setByBinaryString(e.bin):typeof e.array<"u"&&this.setByBooleanArray(e.array))};pe(E.asn1.DERBitString,E.asn1.ASN1Object);E.asn1.DEROctetString=function(e){if(e!==void 0&&typeof e.obj<"u"){var t=E.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}E.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"};pe(E.asn1.DEROctetString,E.asn1.DERAbstractString);E.asn1.DERNull=function(){E.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"};pe(E.asn1.DERNull,E.asn1.ASN1Object);E.asn1.DERObjectIdentifier=function(e){E.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(t){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueOidString=function(t){var r=Pv(t);if(r==null)throw new Error("malformed oid string: "+t);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=r},this.setValueName=function(t){var r=E.asn1.x509.OID.name2oid(t);if(r!=="")this.setValueOidString(r);else throw new Error("DERObjectIdentifier oidName undefined: "+t)},this.setValueNameOrOid=function(t){t.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(t):this.setValueName(t)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(t){typeof t=="string"?this.setValueNameOrOid(t):t.oid!==void 0?this.setValueNameOrOid(t.oid):t.name!==void 0?this.setValueNameOrOid(t.name):t.hex!==void 0&&this.setValueHex(t.hex)},e!==void 0&&this.setByParam(e)};pe(E.asn1.DERObjectIdentifier,E.asn1.ASN1Object);E.asn1.DEREnumerated=function(e){E.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(t){this.hTLV=null,this.isModified=!0,this.hV=Ll(t)},this.setByInteger=function(t){var r=new ee(String(t),10);this.setByBigInteger(r)},this.setValueHex=function(t){this.hV=t},this.getFreshValueHex=function(){return this.hV},typeof e<"u"&&(typeof e.int<"u"?this.setByInteger(e.int):typeof e=="number"?this.setByInteger(e):typeof e.hex<"u"&&this.setValueHex(e.hex))};pe(E.asn1.DEREnumerated,E.asn1.ASN1Object);E.asn1.DERUTF8String=function(e){E.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"};pe(E.asn1.DERUTF8String,E.asn1.DERAbstractString);E.asn1.DERNumericString=function(e){E.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"};pe(E.asn1.DERNumericString,E.asn1.DERAbstractString);E.asn1.DERPrintableString=function(e){E.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"};pe(E.asn1.DERPrintableString,E.asn1.DERAbstractString);E.asn1.DERTeletexString=function(e){E.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"};pe(E.asn1.DERTeletexString,E.asn1.DERAbstractString);E.asn1.DERIA5String=function(e){E.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"};pe(E.asn1.DERIA5String,E.asn1.DERAbstractString);E.asn1.DERVisibleString=function(e){E.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"};pe(E.asn1.DERVisibleString,E.asn1.DERAbstractString);E.asn1.DERBMPString=function(e){E.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"};pe(E.asn1.DERBMPString,E.asn1.DERAbstractString);E.asn1.DERUTCTime=function(e){E.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{12}Z$/)||t.match(/^[0-9]{12}\.[0-9]+Z$/))this.hV=dn(t);else throw new Error("malformed string for UTCTime: "+t);else if(t.str!=null)this.hV=dn(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=dn(this.formatDate(r,"utc",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=dn(this.formatDate(t.date,"utc",n))}else t instanceof Date&&(this.hV=dn(this.formatDate(t,"utc")));if(this.hV==null)throw new Error("parameter not specified properly for UTCTime");return this.hV},e!=null&&this.setByParam(e)};pe(E.asn1.DERUTCTime,E.asn1.DERAbstractTime);E.asn1.DERGeneralizedTime=function(e){E.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var t=this.params;if(this.params==null&&(t={date:new Date}),typeof t=="string")if(t.match(/^[0-9]{14}Z$/)||t.match(/^[0-9]{14}\.[0-9]+Z$/))this.hV=dn(t);else throw new Error("malformed string for GeneralizedTime: "+t);else if(t.str!=null)this.hV=dn(t.str);else if(t.date==null&&t.millis==!0){var r=new Date;this.hV=dn(this.formatDate(r,"gen",!0))}else if(t.date!=null&&t.date instanceof Date){var n=t.millis===!0;this.hV=dn(this.formatDate(t.date,"gen",n))}else t instanceof Date&&(this.hV=dn(this.formatDate(t,"gen")));if(this.hV==null)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},e!=null&&this.setByParam(e)};pe(E.asn1.DERGeneralizedTime,E.asn1.DERAbstractTime);E.asn1.DERSequence=function(e){E.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var t="",r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t+=n.tohex()}return this.hV=t,this.hV}};pe(E.asn1.DERSequence,E.asn1.DERAbstractStructured);E.asn1.DERSet=function(e){E.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var t=new Array,r=0;r<this.asn1Array.length;r++){var n=this.asn1Array[r];t.push(n.tohex())}return this.sortFlag==!0&&t.sort(),this.hV=t.join(""),this.hV},typeof e<"u"&&typeof e.sortflag<"u"&&e.sortflag==!1&&(this.sortFlag=!1)};pe(E.asn1.DERSet,E.asn1.DERAbstractStructured);E.asn1.DERTaggedObject=function(e){E.asn1.DERTaggedObject.superclass.constructor.call(this);var t=E.asn1,r=we,n=r.getV;r.isASN1HEX;var s=t.ASN1Util.newObject;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(o,u,h){this.params={tag:u,explicit:o,obj:h}},this.getFreshValueHex=function(){var o=this.params;if(o.explicit==null&&(o.explicit=!0),o.tage!=null&&(o.tag=o.tage,o.explicit=!0),o.tagi!=null&&(o.tag=o.tagi,o.explicit=!1),o.str!=null)this.hV=Wc(o.str);else if(o.hex!=null)this.hV=o.hex;else if(o.obj!=null){var u;o.obj instanceof t.ASN1Object?u=o.obj.tohex():typeof o.obj=="object"&&(u=s(o.obj).tohex()),o.explicit?this.hV=u:this.hV=n(u,0)}else throw new Error("str, hex nor obj not specified");return o.tag==null&&(o.tag="a0"),this.hT=o.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(o){this.params=o},e!==void 0&&this.setByParam(e)};pe(E.asn1.DERTaggedObject,E.asn1.ASN1Object);var we=new function(){};we.getLblen=function(e,t){if(e.substr(t+2,1)!="8")return 1;var r=parseInt(e.substr(t+3,1));return r==0?-1:0<r&&r<10?r+1:-2};we.getL=function(e,t){var r=we.getLblen(e,t);return r<1?"":e.substr(t+2,r*2)};we.getVblen=function(e,t){var r,n;return r=we.getL(e,t),r==""?-1:(r.substr(0,1)==="8"?n=new ee(r.substr(2),16):n=new ee(r,16),n.intValue())};we.getVidx=function(e,t){var r=we.getLblen(e,t);return r<0?r:t+(r+1)*2};we.getV=function(e,t){var r=we.getVidx(e,t),n=we.getVblen(e,t);return e.substr(r,n*2)};we.getTLV=function(e,t){return e.substr(t,2)+we.getL(e,t)+we.getV(e,t)};we.getTLVblen=function(e,t){return 2+we.getLblen(e,t)*2+we.getVblen(e,t)*2};we.getNextSiblingIdx=function(e,t){var r=we.getVidx(e,t),n=we.getVblen(e,t);return r+n*2};we.getChildIdx=function(e,t){var r=we,n=[],s,o,u;s=r.getVidx(e,t),o=r.getVblen(e,t)*2,e.substr(t,2)=="03"&&(s+=2,o-=2),u=0;for(var h=s;u<=o;){var g=r.getTLVblen(e,h);if(u+=g,u<=o&&n.push(h),h+=g,u>=o)break}return n};we.getNthChildIdx=function(e,t,r){var n=we.getChildIdx(e,t);return n[r]};we.getIdxbyList=function(e,t,r,n){var s=we,o,u;return r.length==0?n!==void 0&&e.substr(t,2)!==n?-1:t:(o=r.shift(),u=s.getChildIdx(e,t),o>=u.length?-1:s.getIdxbyList(e,u[o],r,n))};we.getIdxbyListEx=function(e,t,r,n){var s=we,o,u;if(r.length==0)return n!==void 0&&e.substr(t,2)!==n?-1:t;o=r.shift(),u=s.getChildIdx(e,t);for(var h=0,g=0;g<u.length;g++){var d=e.substr(u[g],2);if(typeof o=="number"&&!s.isContextTag(d)&&h==o||typeof o=="string"&&s.isContextTag(d,o))return s.getIdxbyListEx(e,u[g],r,n);s.isContextTag(d)||h++}return-1};we.getTLVbyList=function(e,t,r,n){var s=we,o=s.getIdxbyList(e,t,r,n);return o==-1||o>=e.length?null:s.getTLV(e,o)};we.getTLVbyListEx=function(e,t,r,n){var s=we,o=s.getIdxbyListEx(e,t,r,n);return o==-1?null:s.getTLV(e,o)};we.getVbyList=function(e,t,r,n,s){var o=we,u,h;return u=o.getIdxbyList(e,t,r,n),u==-1||u>=e.length?null:(h=o.getV(e,u),s===!0&&(h=h.substr(2)),h)};we.getVbyListEx=function(e,t,r,n,s){var o=we,u,h;return u=o.getIdxbyListEx(e,t,r,n),u==-1?null:(h=o.getV(e,u),e.substr(u,2)=="03"&&s!==!1&&(h=h.substr(2)),h)};we.getInt=function(e,t,r){r==null&&(r=-1);try{var n=e.substr(t,2);if(n!="02"&&n!="03")return r;var s=we.getV(e,t);return n=="02"?parseInt(s,16):Bv(s)}catch{return r}};we.getOID=function(e,t,r){r==null&&(r=null);try{if(e.substr(t,2)!="06")return r;var n=we.getV(e,t);return Zc(n)}catch{return r}};we.getOIDName=function(e,t,r){r==null&&(r=null);try{var n=we.getOID(e,t,r);if(n==r)return r;var s=E.asn1.x509.OID.oid2name(n);return s==""?n:s}catch{return r}};we.getString=function(e,t,r){r==null&&(r=null);try{var n=we.getV(e,t);return vn(n)}catch{return r}};we.hextooidstr=function(e){var t=function(v,y){return v.length>=y?v:new Array(y-v.length+1).join("0")+v},r=[],n=e.substr(0,2),s=parseInt(n,16);r[0]=new String(Math.floor(s/40)),r[1]=new String(s%40);for(var o=e.substr(2),u=[],h=0;h<o.length/2;h++)u.push(parseInt(o.substr(h*2,2),16));for(var g=[],d="",h=0;h<u.length;h++)u[h]&128?d=d+t((u[h]&127).toString(2),7):(d=d+t((u[h]&127).toString(2),7),g.push(new String(parseInt(d,2))),d="");var x=r.join(".");return g.length>0&&(x=x+"."+g.join(".")),x};we.dump=function(e,t,r,n){var s=we,o=s.getV,u=s.dump,h=s.getChildIdx,g=e;e instanceof E.asn1.ASN1Object&&(g=e.tohex());var d=function(R,P){if(R.length<=P*2)return R;var D=R.substr(0,P)+"..(total "+R.length/2+"bytes).."+R.substr(R.length-P,P);return D};t===void 0&&(t={ommit_long_octet:32}),r===void 0&&(r=0),n===void 0&&(n="");var x=t.ommit_long_octet,H=g.substr(r,2);if(H=="01"){var v=o(g,r);return v=="00"?n+`BOOLEAN FALSE
`:n+`BOOLEAN TRUE
`}if(H=="02"){var v=o(g,r);return n+"INTEGER "+d(v,x)+`
`}if(H=="03"){var v=o(g,r);if(s.isASN1HEX(v.substr(2))){var y=n+`BITSTRING, encapsulates
`;return y=y+u(v.substr(2),t,0,n+"  "),y}else return n+"BITSTRING "+d(v,x)+`
`}if(H=="04"){var v=o(g,r);if(s.isASN1HEX(v)){var y=n+`OCTETSTRING, encapsulates
`;return y=y+u(v,t,0,n+"  "),y}else return n+"OCTETSTRING "+d(v,x)+`
`}if(H=="05")return n+`NULL
`;if(H=="06"){var S=o(g,r),w=E.asn1.ASN1Util.oidHexToInt(S),A=E.asn1.x509.OID.oid2name(w),b=w.replace(/\./g," ");return A!=""?n+"ObjectIdentifier "+A+" ("+b+`)
`:n+"ObjectIdentifier ("+b+`)
`}if(H=="0a")return n+"ENUMERATED "+parseInt(o(g,r))+`
`;if(H=="0c")return n+"UTF8String '"+_t(o(g,r))+`'
`;if(H=="13")return n+"PrintableString '"+_t(o(g,r))+`'
`;if(H=="14")return n+"TeletexString '"+_t(o(g,r))+`'
`;if(H=="16")return n+"IA5String '"+_t(o(g,r))+`'
`;if(H=="17")return n+"UTCTime "+_t(o(g,r))+`
`;if(H=="18")return n+"GeneralizedTime "+_t(o(g,r))+`
`;if(H=="1a")return n+"VisualString '"+_t(o(g,r))+`'
`;if(H=="1e")return n+"BMPString '"+r0(o(g,r))+`'
`;if(H=="30"){if(g.substr(r,4)=="3000")return n+`SEQUENCE {}
`;var y=n+`SEQUENCE
`,I=h(g,r),N=t;if((I.length==2||I.length==3)&&g.substr(I[0],2)=="06"&&g.substr(I[I.length-1],2)=="04"){var A=s.oidname(o(g,I[0])),F=JSON.parse(JSON.stringify(t));F.x509ExtName=A,N=F}for(var L=0;L<I.length;L++)y=y+u(g,N,I[L],n+"  ");return y}if(H=="31"){for(var y=n+`SET
`,I=h(g,r),L=0;L<I.length;L++)y=y+u(g,t,I[L],n+"  ");return y}var H=parseInt(H,16);if(H&128){var _=H&31;if(H&32){for(var y=n+"["+_+`]
`,I=h(g,r),L=0;L<I.length;L++)y=y+u(g,t,I[L],n+"  ");return y}else{var v=o(g,r);if(we.isASN1HEX(v)){var y=n+"["+_+`]
`;return y=y+u(v,t,0,n+"  "),y}else(v.substr(0,8)=="68747470"||t.x509ExtName==="subjectAltName"&&_==2)&&(v=_t(v));var y=n+"["+_+"] "+v+`
`;return y}}return n+"UNKNOWN("+H+") "+o(g,r)+`
`};we.parse=function(e){var t=we,r=t.parse,n=t.isASN1HEX,s=t.getV,o=t.getTLV,u=t.getChildIdx,h=E.asn1,g=h.ASN1Util.oidHexToInt,d=h.x509.OID.oid2name,x=_t,v=r0,y=xb,S={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},w=function(D){for(var k=[],W=u(D,0),K=0;K<W.length;K++){var ie=W[K],G=o(D,ie),V=r(G);k.push(V)}return k},A=e.substr(0,2),b={},I=s(e,0);if(A=="01")return e=="0101ff"?{bool:!0}:{bool:!1};if(A=="02")return{int:{hex:I}};if(A=="03")try{if(I.substr(0,2)!="00")throw"not encap";var N=I.substr(2);if(!n(N))throw"not encap";return{bitstr:{obj:r(N)}}}catch{var F=null;return I.length<=10&&(F=kv(I)),F==null?{bitstr:{hex:I}}:{bitstr:{bin:F}}}else if(A=="04")try{if(!n(I))throw"not encap";return{octstr:{obj:r(I)}}}catch{return{octstr:{hex:I}}}else{if(A=="05")return{null:""};if(A=="06"){var L=g(I),H=d(L);return H==""?{oid:L}:{oid:H}}else{if(A=="0a")return I.length>4?{enum:{hex:I}}:{enum:parseInt(I,16)};if(A=="30"||A=="31")return b[S[A]]=w(e),b;if(A=="14"){var _=y(I);return b[S[A]]={str:_},b}else if(A=="1e"){var _=v(I);return b[S[A]]={str:_},b}else if(":0c:12:13:16:17:18:1a:".indexOf(A)!=-1){var _=x(I);return b[S[A]]={str:_},b}else if(A.match(/^8[0-9]$/)){var _=x(I);return _==null|_==""?{tag:{tag:A,explicit:!1,hex:I}}:_.match(/[\x00-\x1F\x7F-\x9F]/)!=null||_.match(/[\u0000-\u001F\u0080\u009F]/)!=null?{tag:{tag:A,explicit:!1,hex:I}}:{tag:{tag:A,explicit:!1,str:_}}}else if(A.match(/^a[0-9]$/))try{if(!n(I))throw new Error("not encap");return{tag:{tag:A,explicit:!0,obj:r(I)}}}catch{return{tag:{tag:A,explicit:!0,hex:I}}}else{var R=new E.asn1.ASN1Object;R.hV=I;var P=R.getLengthHexFromValue();return{asn1:{tlv:A+P+I}}}}}};we.isContextTag=function(e,t){e=e.toLowerCase();var r,n;try{r=parseInt(e,16)}catch{return-1}if(t===void 0)return(r&192)==128;try{var s=t.match(/^\[[0-9]+\]$/);return s==null||(n=parseInt(t.substr(1,t.length-1),10),n>31)?!1:(r&192)==128&&(r&31)==n}catch{return!1}};we.isASN1HEX=function(e){var t=we;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),s=t.getL(e,0),o=e.length-n.length-s.length;return o==r*2};we.checkStrictDER=function(e,t,r,n,s){var o=we;if(r===void 0){if(typeof e!="string")throw new Error("not hex string");if(e=e.toLowerCase(),!E.lang.String.isHex(e))throw new Error("not hex string");r=e.length,n=e.length/2,n<128?s=1:s=Math.ceil(n.toString(16))+1}var u=o.getL(e,t);if(u.length>s*2)throw new Error("L of TLV too long: idx="+t);var h=o.getVblen(e,t);if(h>n)throw new Error("value of L too long than hex: idx="+t);var g=o.getTLV(e,t),d=g.length-2-o.getL(e,t).length;if(d!==h*2)throw new Error("V string length and L's value not the same:"+d+"/"+h*2);if(t===0&&e.length!=g.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+g.length);var x=e.substr(t,2);if(x==="02"){var v=o.getVidx(e,t);if(e.substr(v,2)=="00"&&e.charCodeAt(v+2)<56)throw new Error("not least zeros for DER INTEGER")}if(parseInt(x,16)&32){for(var y=o.getVblen(e,t),S=0,w=o.getChildIdx(e,t),A=0;A<w.length;A++){var b=o.getTLV(e,w[A]);S+=b.length,o.checkStrictDER(e,w[A],r,n,s)}if(y*2!=S)throw new Error("sum of children's TLV length and L unmatch: "+y*2+"!="+S)}};we.oidname=function(e){var t=E.asn1;E.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return r===""&&(r=e),r};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.x509>"u"||!E.asn1.x509)&&(E.asn1.x509={});E.asn1.x509.Certificate=function(e){E.asn1.x509.Certificate.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERBitString,s=r.DERSequence,o=r.x509,u=o.TBSCertificate,h=o.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(g){this.params=g},this.sign=function(){var g=this.params,d=g.sigalg;g.sigalg.name!=null&&(d=g.sigalg.name);var x=g.tbsobj.tohex(),v=new E.crypto.Signature({alg:d});v.init(g.cakey),v.updateHex(x),g.sighex=v.sign()},this.getPEM=function(){return Gr(this.tohex(),"CERTIFICATE")},this.tohex=function(){var g=this.params;if((g.tbsobj==null||g.tbsobj==null)&&(g.tbsobj=new u(g)),g.sighex==null&&g.cakey!=null&&this.sign(),g.sighex==null)throw new Error("sighex or cakey parameter not defined");var d=[];d.push(g.tbsobj),d.push(new h({name:g.sigalg})),d.push(new n({hex:"00"+g.sighex}));var x=new s({array:d});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};pe(E.asn1.x509.Certificate,E.asn1.ASN1Object);E.asn1.x509.TBSCertificate=function(e){E.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.x509,s=r.DERTaggedObject,o=r.DERInteger,u=r.DERSequence,h=n.AlgorithmIdentifier,g=n.Time,d=n.X500Name,x=n.Extensions,v=n.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(y){this.params=y},this.tohex=function(){var y=[],S=this.params;if(S.version!=null||S.version!=1){var w=2;S.version!=null&&(w=S.version-1);var A=new s({obj:new o({int:w})});y.push(A)}y.push(new o(S.serial)),y.push(new h({name:S.sigalg})),y.push(new d(S.issuer)),y.push(new u({array:[new g(S.notbefore),new g(S.notafter)]})),y.push(new d(S.subject)),y.push(new v(gt.getKey(S.sbjpubkey))),S.ext!==void 0&&S.ext.length>0&&y.push(new s({tag:"a3",obj:new x(S.ext)}));var b=new E.asn1.DERSequence({array:y});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.TBSCertificate,E.asn1.ASN1Object);E.asn1.x509.Extensions=function(e){E.asn1.x509.Extensions.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERSequence,s=r.x509;this.aParam=[],this.setByParam=function(o){this.aParam=o},this.tohex=function(){for(var o=[],u=0;u<this.aParam.length;u++){var h=this.aParam[u],g=h.extname,d=null;if(h.extn!=null)d=new s.PrivateExtension(h);else if(g=="subjectKeyIdentifier")d=new s.SubjectKeyIdentifier(h);else if(g=="keyUsage")d=new s.KeyUsage(h);else if(g=="subjectAltName")d=new s.SubjectAltName(h);else if(g=="issuerAltName")d=new s.IssuerAltName(h);else if(g=="basicConstraints")d=new s.BasicConstraints(h);else if(g=="nameConstraints")d=new s.NameConstraints(h);else if(g=="cRLDistributionPoints")d=new s.CRLDistributionPoints(h);else if(g=="certificatePolicies")d=new s.CertificatePolicies(h);else if(g=="policyMappings")d=new s.PolicyMappings(h);else if(g=="policyConstraints")d=new s.PolicyConstraints(h);else if(g=="inhibitAnyPolicy")d=new s.InhibitAnyPolicy(h);else if(g=="authorityKeyIdentifier")d=new s.AuthorityKeyIdentifier(h);else if(g=="extKeyUsage")d=new s.ExtKeyUsage(h);else if(g=="authorityInfoAccess")d=new s.AuthorityInfoAccess(h);else if(g=="cRLNumber")d=new s.CRLNumber(h);else if(g=="cRLReason")d=new s.CRLReason(h);else if(g=="ocspNonce")d=new s.OCSPNonce(h);else if(g=="ocspNoCheck")d=new s.OCSPNoCheck(h);else if(g=="adobeTimeStamp")d=new s.AdobeTimeStamp(h);else if(g=="subjectDirectoryAttributes")d=new s.SubjectDirectoryAttributes(h);else throw new Error("extension not supported:"+JSON.stringify(h));d!=null&&o.push(d)}var x=new n({array:o});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.x509.Extensions,E.asn1.ASN1Object);E.asn1.x509.Extension=function(e){E.asn1.x509.Extension.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERObjectIdentifier,s=r.DEROctetString;r.DERBitString;var o=r.DERBoolean,u=r.DERSequence;this.tohex=function(){var h=new n({oid:this.oid}),g=new s({hex:this.getExtnValueHex()}),d=new Array;d.push(h),this.critical&&d.push(new o),d.push(g);var x=new u({array:d});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,e!==void 0&&e.critical!==void 0&&(this.critical=e.critical)};pe(E.asn1.x509.Extension,E.asn1.ASN1Object);E.asn1.x509.KeyUsage=function(e){E.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,r={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var n=this.getBinValue();return this.asn1ExtnValue=new E.asn1.DERBitString({bin:n}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var n=this.params;if(typeof n!="object"||typeof n.names!="object"&&typeof n.bin!="string")throw new t("parameter not yet set");if(n.names!=null)return gc(n.names,r);if(n.bin!=null)return n.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",e!==void 0&&(this.params=e)};pe(E.asn1.x509.KeyUsage,E.asn1.x509.Extension);E.asn1.x509.BasicConstraints=function(e){E.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERBoolean,n=t.DERInteger,s=t.DERSequence;this.getExtnValueHex=function(){var o=new Array;this.cA&&o.push(new r),this.pathLen>-1&&o.push(new n({int:this.pathLen}));var u=new s({array:o});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,e!==void 0&&(e.cA!==void 0&&(this.cA=e.cA),e.pathLen!==void 0&&(this.pathLen=e.pathLen))};pe(E.asn1.x509.BasicConstraints,E.asn1.x509.Extension);E.asn1.x509.CRLDistributionPoints=function(e){E.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(s){for(var o=[],u=0;u<s.length;u++)if(s[u]instanceof E.asn1.ASN1Object)o.push(s[u]);else{var h=new n.DistributionPoint(s[u]);o.push(h)}this.asn1ExtnValue=new r.DERSequence({array:o})},this.setByOneURI=function(s){var o=new n.DistributionPoint({fulluri:s});this.setByDPArray([o])},this.oid="2.5.29.31",e!==void 0&&(e.array!==void 0?this.setByDPArray(e.array):e.uri!==void 0&&this.setByOneURI(e.uri))};pe(E.asn1.x509.CRLDistributionPoints,E.asn1.x509.Extension);E.asn1.x509.DistributionPoint=function(e){E.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.x509.DistributionPointName;this.tohex=function(){var s=new r.DERSequence;if(this.asn1DP!=null){var o=new r.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});s.appendASN1Object(o)}return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.dpobj!==void 0?this.asn1DP=e.dpobj:e.dpname!==void 0?this.asn1DP=new n(e.dpname):e.fulluri!==void 0&&(this.asn1DP=new n({full:[{uri:e.fulluri}]})))};pe(E.asn1.x509.DistributionPoint,E.asn1.ASN1Object);E.asn1.x509.DistributionPointName=function(e){E.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERTaggedObject;if(this.tohex=function(){if(this.type!="full")throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new n({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0)if(r.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else if(e.full!==void 0)this.type="full",this.tag="a0",this.asn1V=new r.x509.GeneralNames(e.full);else throw new Error("This class supports GeneralNames only as argument")};pe(E.asn1.x509.DistributionPointName,E.asn1.ASN1Object);E.asn1.x509.CertificatePolicies=function(e){E.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509,s=r.DERSequence,o=n.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var u=[],h=0;h<this.params.array.length;h++)u.push(new o(this.params.array[h]));var g=new s({array:u});return this.asn1ExtnValue=g,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",e!==void 0&&(this.params=e)};pe(E.asn1.x509.CertificatePolicies,E.asn1.x509.Extension);E.asn1.x509.PolicyInformation=function(e){E.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,s=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(this.params.policyoid===void 0&&this.params.array===void 0)throw new Error("parameter oid and array missing");var o=[new n(this.params.policyoid)];if(this.params.array!==void 0){for(var u=[],h=0;h<this.params.array.length;h++)u.push(new s(this.params.array[h]));u.length>0&&o.push(new r({array:u}))}var g=new r({array:o});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyInformation,E.asn1.ASN1Object);E.asn1.x509.PolicyQualifierInfo=function(e){E.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERSequence,n=t.DERIA5String,s=t.DERObjectIdentifier,o=t.x509.UserNotice;this.params=null,this.tohex=function(){if(this.params.cps!==void 0){var u=new r({array:[new s({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]});return u.tohex()}if(this.params.unotice!=null){var u=new r({array:[new s({oid:"1.3.6.1.5.5.7.2.2"}),new o(this.params.unotice)]});return u.tohex()}},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyQualifierInfo,E.asn1.ASN1Object);E.asn1.x509.UserNotice=function(e){E.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=E.asn1.DERSequence;E.asn1.DERInteger;var r=E.asn1.x509.DisplayText,n=E.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var s=[];this.params.noticeref!==void 0&&s.push(new n(this.params.noticeref)),this.params.exptext!==void 0&&s.push(new r(this.params.exptext));var o=new t({array:s});return o.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.UserNotice,E.asn1.ASN1Object);E.asn1.x509.NoticeReference=function(e){E.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=E.asn1.DERSequence,r=E.asn1.DERInteger,n=E.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var s=[];if(this.params.org!==void 0&&s.push(new n(this.params.org)),this.params.noticenum!==void 0){for(var o=[],u=this.params.noticenum,h=0;h<u.length;h++)o.push(new r(u[h]));s.push(new t({array:o}))}if(s.length==0)throw new Error("parameter is empty");var g=new t({array:s});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(this.params=e)};pe(E.asn1.x509.NoticeReference,E.asn1.ASN1Object);E.asn1.x509.DisplayText=function(e){E.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",e!==void 0&&(e.type==="ia5"?this.hT="16":e.type==="vis"?this.hT="1a":e.type==="bmp"&&(this.hT="1e"))};pe(E.asn1.x509.DisplayText,E.asn1.DERAbstractString);E.asn1.x509.PolicyMappings=function(e){E.asn1.x509.PolicyMappings.superclass.constructor.call(this,e);var t=E,r=t.asn1;r.x509;var n=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){for(var s=this.params,o=[],u=0;u<s.array.length;u++){var h=s.array[u];o.push({seq:[{oid:h[0]},{oid:h[1]}]})}return this.asn1ExtnValue=n({seq:o}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.33",e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyMappings,E.asn1.x509.Extension);E.asn1.x509.PolicyConstraints=function(e){E.asn1.x509.PolicyConstraints.superclass.constructor.call(this,e);var t=E,r=t.asn1;r.x509;var n=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){var s=this.params,o=[];return s.reqexp!=null&&o.push({tag:{tagi:"80",obj:{int:s.reqexp}}}),s.inhibit!=null&&o.push({tag:{tagi:"81",obj:{int:s.inhibit}}}),this.asn1ExtnValue=n({seq:o}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.36",e!==void 0&&(this.params=e)};pe(E.asn1.x509.PolicyConstraints,E.asn1.x509.Extension);E.asn1.x509.InhibitAnyPolicy=function(e){E.asn1.x509.InhibitAnyPolicy.superclass.constructor.call(this,e);var t=E,r=t.asn1;r.x509;var n=r.ASN1Util.newObject;this.params=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=n({int:this.params.skip}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.54",e!==void 0&&(this.params=e)};pe(E.asn1.x509.InhibitAnyPolicy,E.asn1.x509.Extension);E.asn1.x509.NameConstraints=function(e){E.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.x509,s=r.ASN1Util.newObject,o=n.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var u=this.params,h=[];if(u.permit!=null&&u.permit.length!=null){for(var g=[],d=0;d<u.permit.length;d++)g.push(new o(u.permit[d]));h.push({tag:{tagi:"a0",obj:{seq:g}}})}if(u.exclude!=null&&u.exclude.length!=null){for(var x=[],d=0;d<u.exclude.length;d++)x.push(new o(u.exclude[d]));h.push({tag:{tagi:"a1",obj:{seq:x}}})}return this.asn1ExtnValue=s({seq:h}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",e!==void 0&&(this.params=e)};pe(E.asn1.x509.NameConstraints,E.asn1.x509.Extension);E.asn1.x509.GeneralSubtree=function(e){E.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=E.asn1,r=t.x509,n=r.GeneralName,s=t.ASN1Util.newObject;this.params=null,this.setByParam=function(o){this.params=o},this.tohex=function(){var o=this.params,u=[new n(o)];o.min!=null&&u.push({tag:{tagi:"80",obj:{int:o.min}}}),o.max!=null&&u.push({tag:{tagi:"81",obj:{int:o.max}}});var h=s({seq:u});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.GeneralSubtree,E.asn1.ASN1Object);E.asn1.x509.ExtKeyUsage=function(e){E.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=E,r=t.asn1;this.setPurposeArray=function(n){this.asn1ExtnValue=new r.DERSequence;for(var s=0;s<n.length;s++){var o=new r.DERObjectIdentifier(n[s]);this.asn1ExtnValue.appendASN1Object(o)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",e!==void 0&&e.array!==void 0&&this.setPurposeArray(e.array)};pe(E.asn1.x509.ExtKeyUsage,E.asn1.x509.Extension);E.asn1.x509.AuthorityKeyIdentifier=function(e){E.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.DERTaggedObject,s=r.x509.GeneralNames;t.crypto.Util.isKey,this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var o=new Array;this.asn1KID&&o.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&o.push(new n({explicit:!1,tag:"a1",obj:new s([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&o.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var u=new r.DERSequence({array:o});return this.asn1ExtnValue=u,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(o){if(o.str!==void 0||o.hex!==void 0)this.asn1KID=new E.asn1.DEROctetString(o);else if(typeof o=="object"&&E.crypto.Util.isKey(o)||typeof o=="string"&&o.indexOf("BEGIN ")!=-1){var u=o;typeof o=="string"&&(u=gt.getKey(o));var h=gt.getKeyID(u);this.asn1KID=new E.asn1.DEROctetString({hex:h})}},this.setCertIssuerByParam=function(o){o.str!==void 0||o.ldapstr!==void 0||o.hex!==void 0||o.certsubject!==void 0||o.certissuer!==void 0?this.asn1CertIssuer=new E.asn1.x509.X500Name(o):typeof o=="string"&&o.indexOf("BEGIN ")!=-1&&o.indexOf("CERTIFICATE")!=-1&&(this.asn1CertIssuer=new E.asn1.x509.X500Name({certissuer:o}))},this.setCertSNByParam=function(o){if(o.str!==void 0||o.bigint!==void 0||o.hex!==void 0)this.asn1CertSN=new E.asn1.DERInteger(o);else if(typeof o=="string"&&o.indexOf("BEGIN ")!=-1&&o.indexOf("CERTIFICATE")){var u=new Qe;u.readCertPEM(o);var h=u.getSerialNumberHex();this.asn1CertSN=new E.asn1.DERInteger({hex:h})}},this.oid="2.5.29.35",e!==void 0&&(e.kid!==void 0&&this.setKIDByParam(e.kid),e.issuer!==void 0&&this.setCertIssuerByParam(e.issuer),e.sn!==void 0&&this.setCertSNByParam(e.sn),e.issuersn!==void 0&&typeof e.issuersn=="string"&&e.issuersn.indexOf("BEGIN ")!=-1&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))};pe(E.asn1.x509.AuthorityKeyIdentifier,E.asn1.x509.Extension);E.asn1.x509.SubjectKeyIdentifier=function(e){E.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(s){if(s.str!==void 0||s.hex!==void 0)this.asn1KID=new n(s);else if(typeof s=="object"&&E.crypto.Util.isKey(s)||typeof s=="string"&&s.indexOf("BEGIN")!=-1){var o=s;typeof s=="string"&&(o=gt.getKey(s));var u=gt.getKeyID(o);this.asn1KID=new E.asn1.DEROctetString({hex:u})}},this.oid="2.5.29.14",e!==void 0&&e.kid!==void 0&&this.setKIDByParam(e.kid)};pe(E.asn1.x509.SubjectKeyIdentifier,E.asn1.x509.Extension);E.asn1.x509.AuthorityInfoAccess=function(e){E.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(t){for(var r=new Array,n=E,s=n.asn1,o=s.DERSequence,u=s.DERObjectIdentifier,h=s.x509.GeneralName,g=0;g<t.length;g++){var d,x=t[g];if(x.ocsp!==void 0)d=new o({array:[new u({oid:"1.3.6.1.5.5.7.48.1"}),new h({uri:x.ocsp})]});else if(x.caissuer!==void 0)d=new o({array:[new u({oid:"1.3.6.1.5.5.7.48.2"}),new h({uri:x.caissuer})]});else throw new Error("unknown AccessMethod parameter: "+JSON.stringify(x));r.push(d)}this.asn1ExtnValue=new o({array:r})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",e!==void 0&&e.array!==void 0&&this.setAccessDescriptionArray(e.array)};pe(E.asn1.x509.AuthorityInfoAccess,E.asn1.x509.Extension);E.asn1.x509.SubjectAltName=function(e){E.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new E.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};pe(E.asn1.x509.SubjectAltName,E.asn1.x509.Extension);E.asn1.x509.IssuerAltName=function(e){E.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(t){this.asn1ExtnValue=new E.asn1.x509.GeneralNames(t)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",e!==void 0&&e.array!==void 0&&this.setNameArray(e.array)};pe(E.asn1.x509.IssuerAltName,E.asn1.x509.Extension);E.asn1.x509.SubjectDirectoryAttributes=function(e){E.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=E.asn1,r=t.DERSequence,n=t.ASN1Util.newObject,s=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var o=[],u=0;u<this.params.array.length;u++){var h=this.params.array[u];if(h.attr!=null&&h.array!=null){var g={seq:[{oid:h.attr},{set:h.array}]};o.push(n(g));continue}var d={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if(h.attr=="dateOfBirth")d.seq[0].oid=s(h.attr),d.seq[1].set[0]={gentime:h.str};else if(h.attr=="placeOfBirth")d.seq[0].oid=s(h.attr),d.seq[1].set[0]={utf8str:h.str};else if(h.attr=="gender")d.seq[0].oid=s(h.attr),d.seq[1].set[0]={prnstr:h.str};else if(h.attr=="countryOfCitizenship")d.seq[0].oid=s(h.attr),d.seq[1].set[0]={prnstr:h.str};else if(h.attr=="countryOfResidence")d.seq[0].oid=s(h.attr),d.seq[1].set[0]={prnstr:h.str};else throw new Error("unsupported attribute: "+h.attr);o.push(new n(d))}var x=new r({array:o});return this.asn1ExtnValue=x,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",e!==void 0&&(this.params=e)};pe(E.asn1.x509.SubjectDirectoryAttributes,E.asn1.x509.Extension);E.asn1.x509.PrivateExtension=function(e){E.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=E,r=t.lang.String.isHex,n=t.asn1,s=n.x509.OID.name2oid,o=n.ASN1Util.newObject;this.params=null,this.setByParam=function(u){this.oid=s(u.extname),this.params=u},this.getExtnValueHex=function(){if(this.params.extname==null||this.params.extn==null)throw new Error("extname or extnhex not specified");var u=this.params.extn;if(typeof u=="string"&&r(u))return u;if(typeof u=="object")try{return o(u).tohex()}catch{}throw new Error("unsupported extn value")},e!=null&&this.setByParam(e)};pe(E.asn1.x509.PrivateExtension,E.asn1.x509.Extension);E.asn1.x509.CRL=function(e){E.asn1.x509.CRL.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERSequence,s=r.DERBitString,o=r.x509,u=o.AlgorithmIdentifier,h=o.TBSCertList;this.params=void 0,this.setByParam=function(g){this.params=g},this.sign=function(){var g=new h(this.params).tohex(),d=new E.crypto.Signature({alg:this.params.sigalg});d.init(this.params.cakey),d.updateHex(g);var x=d.sign();this.params.sighex=x},this.getPEM=function(){return Gr(this.tohex(),"X509 CRL")},this.tohex=function(){var g=this.params;if(g.tbsobj==null&&(g.tbsobj=new h(g)),g.sighex==null&&g.cakey!=null&&this.sign(),g.sighex==null)throw new Error("sighex or cakey parameter not defined");var d=[];d.push(g.tbsobj),d.push(new u({name:g.sigalg})),d.push(new s({hex:"00"+g.sighex}));var x=new n({array:d});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&(this.params=e)};pe(E.asn1.x509.CRL,E.asn1.ASN1Object);E.asn1.x509.TBSCertList=function(e){E.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERInteger,s=r.DERSequence,o=r.DERTaggedObject;r.DERObjectIdentifier;var u=r.x509,h=u.AlgorithmIdentifier,g=u.Time,d=u.Extensions,x=u.X500Name;this.params=null,this.setByParam=function(v){this.params=v},this.getRevCertSequence=function(){for(var v=[],y=this.params.revcert,S=0;S<y.length;S++){var w=[new n(y[S].sn),new g(y[S].date)];y[S].ext!=null&&w.push(new d(y[S].ext)),v.push(new s({array:w}))}return new s({array:v})},this.tohex=function(){var v=[],y=this.params;if(y.version!=null){var S=y.version-1,w=new n({int:S});v.push(w)}if(v.push(new h({name:y.sigalg})),v.push(new x(y.issuer)),v.push(new g(y.thisupdate)),y.nextupdate!=null&&v.push(new g(y.nextupdate)),y.revcert!=null&&v.push(this.getRevCertSequence()),y.ext!=null){var A=new d(y.ext);v.push(new o({tag:"a0",explicit:!0,obj:A}))}var b=new s({array:v});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.TBSCertList,E.asn1.ASN1Object);E.asn1.x509.CRLEntry=function(e){E.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=E,r=t.asn1;this.setCertSerial=function(n){this.sn=new r.DERInteger(n)},this.setRevocationDate=function(n){this.time=new r.x509.Time(n)},this.tohex=function(){var n=new r.DERSequence({array:[this.sn,this.time]});return this.TLV=n.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.time!==void 0&&this.setRevocationDate(e.time),e.sn!==void 0&&this.setCertSerial(e.sn))};pe(E.asn1.x509.CRLEntry,E.asn1.ASN1Object);E.asn1.x509.CRLNumber=function(e){E.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",e!=null&&(this.params=e)};pe(E.asn1.x509.CRLNumber,E.asn1.x509.Extension);E.asn1.x509.CRLReason=function(e){E.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",e!=null&&(this.params=e)};pe(E.asn1.x509.CRLReason,E.asn1.x509.Extension);E.asn1.x509.OCSPNonce=function(e){E.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",e!=null&&(this.params=e)};pe(E.asn1.x509.OCSPNonce,E.asn1.x509.Extension);E.asn1.x509.OCSPNoCheck=function(e){E.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new E.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",e!=null&&(this.params=e)};pe(E.asn1.x509.OCSPNoCheck,E.asn1.x509.Extension);E.asn1.x509.AdobeTimeStamp=function(e){E.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=E,r=t.asn1,n=r.DERInteger,s=r.DERBoolean,o=r.DERSequence,u=r.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var h=this.params,g=[new n(1)];return g.push(new u({uri:h.uri})),h.reqauth!=null&&g.push(new s(h.reqauth)),this.asn1ExtnValue=new o({array:g}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.AdobeTimeStamp,E.asn1.x509.Extension);E.asn1.x509.X500Name=function(e){E.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=E,r=t.asn1,n=r.x509,s=n.RDN;this.setByString=function(o,u){u!==void 0&&(this.sRule=u);var h=o.split("/");h.shift();for(var g=[],d=0;d<h.length;d++)if(h[d].match(/^[^=]+=.+$/))g.push(h[d]);else{var x=g.length-1;g[x]=g[x]+"/"+h[d]}for(var d=0;d<g.length;d++)this.asn1Array.push(new s({str:g[d],rule:this.sRule}))},this.setByLdapString=function(o,u){u!==void 0&&(this.sRule=u);var h=n.X500Name.ldapToCompat(o);this.setByString(h,u)},this.setByObject=function(o,u){u!==void 0&&(this.sRule=u);for(var h in o)if(o.hasOwnProperty(h)){var g=new s({str:h+"="+o[h],rule:this.sRule});this.asn1Array?this.asn1Array.push(g):this.asn1Array=[g]}},this.setByParam=function(o){if(o.rule!==void 0&&(this.sRule=o.rule),o.array!==void 0)this.paramArray=o.array;else if(o.str!==void 0)this.setByString(o.str);else if(o.ldapstr!==void 0)this.setByLdapString(o.ldapstr);else if(o.hex!==void 0)this.hTLV=o.hex;else if(o.certissuer!==void 0){var u=new Qe;u.readCertPEM(o.certissuer),this.hTLV=u.getIssuerHex()}else if(o.certsubject!==void 0){var u=new Qe;u.readCertPEM(o.certsubject),this.hTLV=u.getSubjectHex()}else typeof o=="object"&&o.certsubject===void 0&&o.certissuer===void 0&&this.setByObject(o)},this.tohex=function(){if(typeof this.hTLV=="string")return this.hTLV;if(this.asn1Array.length==0&&this.paramArray.length>0)for(var o=0;o<this.paramArray.length;o++){var u={array:this.paramArray[o]};this.sRule!="utf8"&&(u.rule=this.sRule);var h=new s(u);this.asn1Array.push(h)}var g=new r.DERSequence({array:this.asn1Array});return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.X500Name,E.asn1.ASN1Object);E.asn1.x509.X500Name.compatToLDAP=function(e){if(e.substr(0,1)!=="/")throw"malformed input";e=e.substr(1);var t=e.split("/");return t.reverse(),t=t.map(function(r){return r.replace(/,/,"\\,")}),t.join(",")};E.asn1.x509.X500Name.onelineToLDAP=function(e){return E.asn1.x509.X500Name.compatToLDAP(e)};E.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),r=!1,n=[],s=0;t.length>0;s++){var o=t.shift();if(r===!0){var u=n.pop(),h=(u+","+o).replace(/\\,/g,",");n.push(h),r=!1}else n.push(o);o.substr(-1,1)==="\\"&&(r=!0)}return n=n.map(function(g){return g.replace("/","\\/")}),n.reverse(),"/"+n.join("/")};E.asn1.x509.X500Name.ldapToOneline=function(e){return E.asn1.x509.X500Name.ldapToCompat(e)};E.asn1.x509.RDN=function(e){E.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=E.asn1.x509.AttributeTypeAndValue;this.setByParam=function(r){r.rule!==void 0&&(this.sRule=r.rule),r.str!==void 0&&this.addByMultiValuedString(r.str),r.array!==void 0&&(this.paramArray=r.array)},this.addByString=function(r){this.asn1Array.push(new E.asn1.x509.AttributeTypeAndValue({str:r,rule:this.sRule}))},this.addByMultiValuedString=function(r){for(var n=E.asn1.x509.RDN.parseString(r),s=0;s<n.length;s++)this.addByString(n[s])},this.tohex=function(){if(this.asn1Array.length==0&&this.paramArray.length>0)for(var r=0;r<this.paramArray.length;r++){var n=this.paramArray[r];n.rule!==void 0&&this.sRule!="utf8"&&(n.rule=this.sRule);var s=new t(n);this.asn1Array.push(s)}var o=new E.asn1.DERSet({array:this.asn1Array});return this.TLV=o.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.RDN,E.asn1.ASN1Object);E.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],s=0;t.length>0;s++){var o=t.shift();if(r===!0){var u=n.pop(),h=(u+"+"+o).replace(/\\\+/g,"+");n.push(h),r=!1}else n.push(o);o.substr(-1,1)==="\\"&&(r=!0)}for(var g=!1,d=[],s=0;n.length>0;s++){var o=n.shift();if(g===!0){var x=d.pop();if(o.match(/"$/)){var h=(x+"+"+o).replace(/^([^=]+)="(.*)"$/,"$1=$2");d.push(h),g=!1}else d.push(x+"+"+o)}else d.push(o);o.match(/^[^=]+="/)&&(g=!0)}return d};E.asn1.x509.AttributeTypeAndValue=function(e){E.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=E,r=t.asn1,n=r.DERSequence,s=r.DERUTF8String,o=r.DERPrintableString,u=r.DERTeletexString,h=r.DERIA5String,g=r.DERVisibleString,d=r.DERBMPString,x=t.lang.String.isMail,v=t.lang.String.isPrintable;this.setByParam=function(y){if(y.rule!==void 0&&(this.sRule=y.rule),y.ds!==void 0&&(this.dsType=y.ds),y.value===void 0&&y.str!==void 0){var S=y.str,w=S.match(/^([^=]+)=(.+)$/);if(w)this.sType=w[1],this.sValue=w[2];else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)}else this.sType=y.type,this.sValue=y.value},this.setByString=function(y,S){S!==void 0&&(this.sRule=S);var w=y.match(/^([^=]+)=(.+)$/);if(w)this.setByAttrTypeAndValueStr(w[1],w[2]);else throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr)},this._getDsType=function(){var y=this.sType,S=this.sValue,w=this.sRule;return w==="prn"?y=="CN"&&x(S)?"ia5":v(S)?"prn":"utf8":w==="utf8"?y=="CN"&&x(S)?"ia5":y=="C"?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(y,S,w){w!==void 0&&(this.sRule=w),this.sType=y,this.sValue=S},this.getValueObj=function(y,S){if(y=="utf8")return new s({str:S});if(y=="prn")return new o({str:S});if(y=="tel")return new u({str:S});if(y=="ia5")return new h({str:S});if(y=="vis")return new g({str:S});if(y=="bmp")return new d({str:S});throw new Error("unsupported directory string type: type="+y+" value="+S)},this.tohex=function(){this.dsType==null&&(this.dsType=this._getDsType());var y=E.asn1.x509.OID.atype2obj(this.sType),S=this.getValueObj(this.dsType,this.sValue),w=new n({array:[y,S]});return this.TLV=w.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.AttributeTypeAndValue,E.asn1.ASN1Object);E.asn1.x509.SubjectPublicKeyInfo=function(e){E.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERInteger,s=r.DERBitString,o=r.DERObjectIdentifier,u=r.DERSequence,h=r.ASN1Util.newObject,g=r.x509,d=g.AlgorithmIdentifier,x=t.crypto;x.ECDSA,x.DSA,this.getASN1Object=function(){if(this.asn1AlgId==null||this.asn1SubjPKey==null)throw"algId and/or subjPubKey not set";var v=new u({array:[this.asn1AlgId,this.asn1SubjPKey]});return v},this.tohex=function(){var v=this.getASN1Object();return this.hTLV=v.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(v){try{if(v instanceof rt){var y=h({seq:[{int:{bigint:v.n}},{int:{int:v.e}}]}),S=y.tohex();this.asn1AlgId=new d({name:"rsaEncryption"}),this.asn1SubjPKey=new s({hex:"00"+S})}}catch{}try{if(v instanceof E.crypto.ECDSA){var w=new o({name:v.curveName});this.asn1AlgId=new d({name:"ecPublicKey",asn1params:w}),this.asn1SubjPKey=new s({hex:"00"+v.pubKeyHex})}}catch{}try{if(v instanceof E.crypto.DSA){var w=new h({seq:[{int:{bigint:v.p}},{int:{bigint:v.q}},{int:{bigint:v.g}}]});this.asn1AlgId=new d({name:"dsa",asn1params:w});var A=new n({bigint:v.y});this.asn1SubjPKey=new s({hex:"00"+A.tohex()})}}catch{}},e!==void 0&&this.setPubKey(e)};pe(E.asn1.x509.SubjectPublicKeyInfo,E.asn1.ASN1Object);E.asn1.x509.Time=function(e){E.asn1.x509.Time.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERUTCTime,s=r.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(o){this.timeParams=o},this.setByParam=function(o){this.params=o},this.getType=function(o){return o.match(/^[0-9]{12}Z$/)?"utc":o.match(/^[0-9]{14}Z$/)?"gen":o.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":o.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var o=this.params,u=null;if(typeof o=="string"&&(o={str:o}),o!=null&&o.str&&(o.type==null||o.type==null)&&(o.type=this.getType(o.str)),o!=null&&o.str?(o.type=="utc"&&(u=new n(o.str)),o.type=="gen"&&(u=new s(o.str))):this.type=="gen"?u=new s:u=new n,u==null)throw new Error("wrong setting for Time");return this.TLV=u.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};E.asn1.x509.Time_bak=function(e){E.asn1.x509.Time_bak.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERUTCTime,s=r.DERGeneralizedTime;this.setTimeParams=function(o){this.timeParams=o},this.tohex=function(){var o=null;return this.timeParams!=null?this.type=="utc"?o=new n(this.timeParams):o=new s(this.timeParams):this.type=="utc"?o=new n:o=new s,this.TLV=o.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",e!==void 0&&(e.type!==void 0?this.type=e.type:e.str!==void 0&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)};pe(E.asn1.x509.Time,E.asn1.ASN1Object);E.asn1.x509.AlgorithmIdentifier=function(e){E.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=E,r=t.asn1,n=r.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(this.nameAlg===null&&this.asn1Alg===null)throw new Error("algorithm not specified");if(this.nameAlg!==null){var o=null;for(var u in n)u===this.nameAlg&&(o=n[u]);if(o!==null)return this.hTLV=o,this.hTLV}this.nameAlg!==null&&this.asn1Alg===null&&(this.asn1Alg=r.x509.OID.name2obj(this.nameAlg));var h=[this.asn1Alg];this.asn1Params!==null&&h.push(this.asn1Params);var g=new r.DERSequence({array:h});return this.hTLV=g.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&(e.name!==void 0&&(this.nameAlg=e.name),e.asn1params!==void 0&&(this.asn1Params=e.asn1params),e.paramempty!==void 0&&(this.paramEmpty=e.paramempty)),this.asn1Params===null&&this.paramEmpty===!1&&this.nameAlg!==null){this.nameAlg.name!==void 0&&(this.nameAlg=this.nameAlg.name);var s=this.nameAlg.toLowerCase();s.substr(-7,7)!=="withdsa"&&s.substr(-9,9)!=="withecdsa"&&(this.asn1Params=new r.DERNull)}};pe(E.asn1.x509.AlgorithmIdentifier,E.asn1.ASN1Object);E.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"};E.asn1.x509.GeneralName=function(e){E.asn1.x509.GeneralName.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.x509,s=n.X500Name,o=n.OtherName,u=r.DERIA5String;r.DERPrintableString;var h=r.DEROctetString,g=r.DERTaggedObject,d=r.ASN1Object,x=Error;this.params=null,this.setByParam=function(v){this.params=v},this.tohex=function(){var v=this.params,y,w,S,w=!1;if(v.other!==void 0)y="a0",S=new o(v.other);else if(v.rfc822!==void 0)y="81",S=new u({str:v.rfc822});else if(v.dns!==void 0)y="82",S=new u({str:v.dns});else if(v.dn!==void 0)y="a4",w=!0,typeof v.dn=="string"?S=new s({str:v.dn}):v.dn instanceof E.asn1.x509.X500Name?S=v.dn:S=new s(v.dn);else if(v.ldapdn!==void 0)y="a4",w=!0,S=new s({ldapstr:v.ldapdn});else if(v.certissuer!==void 0||v.certsubj!==void 0){y="a4",w=!0;var A,b,I=null;if(v.certsubj!==void 0?(A=!1,b=v.certsubj):(A=!0,b=v.certissuer),b.match(/^[0-9A-Fa-f]+$/),b.indexOf("-----BEGIN ")!=-1&&(I=hr(b)),I==null)throw new Error("certsubj/certissuer not cert");var N=new Qe;N.hex=I;var F;A?F=N.getIssuerHex():F=N.getSubjectHex(),S=new d,S.hTLV=F}else if(v.uri!==void 0)y="86",S=new u({str:v.uri});else if(v.ip!==void 0){y="87";var L,H=v.ip;try{if(H.match(/^[0-9a-f]+$/)){var _=H.length;if(_==8||_==16||_==32||_==64)L=H;else throw"err"}else L=t0(H)}catch(P){throw new x("malformed IP address: "+v.ip+":"+P.message)}S=new h({hex:L})}else throw new x("improper params");var R=new g({tag:y,explicit:w,obj:S});return R.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.GeneralName,E.asn1.ASN1Object);E.asn1.x509.GeneralNames=function(e){E.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=E,r=t.asn1;this.setByParamArray=function(n){for(var s=0;s<n.length;s++){var o=new r.x509.GeneralName(n[s]);this.asn1Array.push(o)}},this.tohex=function(){var n=new r.DERSequence({array:this.asn1Array});return n.tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,typeof e<"u"&&this.setByParamArray(e)};pe(E.asn1.x509.GeneralNames,E.asn1.ASN1Object);E.asn1.x509.OtherName=function(e){E.asn1.x509.OtherName.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DERObjectIdentifier,s=r.DERSequence,o=r.ASN1Util.newObject;this.params=null,this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params;if(u.oid==null||u.value==null)throw new Error("oid or value not specified");var h=new n({oid:u.oid}),g=o({tag:{tag:"a0",explicit:!0,obj:u.value}}),d=new s({array:[h,g]});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.x509.OtherName,E.asn1.ASN1Object);E.asn1.x509.OID=new function(){var e=E.asn1.DERObjectIdentifier;this.name2oidList={"aes128-CBC":"2.16.840.1.101.3.4.1.2","aes256-CBC":"2.16.840.1.101.3.4.1.42",sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",hmacWithSHA1:"1.2.840.113549.2.7",hmacWithSHA224:"1.2.840.113549.2.8",hmacWithSHA256:"1.2.840.113549.2.9",hmacWithSHA384:"1.2.840.113549.2.10",hmacWithSHA512:"1.2.840.113549.2.11",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",policyMappings:"2.5.29.33",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",inhibitAnyPolicy:"2.5.29.54",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",smtpUTF8Mailbox:"1.3.6.1.5.5.7.8.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1",smimeMailboxLegacy:"2.23.140.1.5.1.1",smimeMailboxMulti:"2.23.140.1.5.1.2",smimeMailboxStrict:"2.23.140.1.5.1.3",smimeOrganizationLegacy:"2.23.140.1.5.2.1",smimeOrganizationMulti:"2.23.140.1.5.2.2",smimeOrganizationStrict:"2.23.140.1.5.2.3",smimeSponsorLegacy:"2.23.140.1.5.3.1",smimeSponsorMulti:"2.23.140.1.5.3.2",smimeSponsorStrict:"2.23.140.1.5.3.3",smimeIndividualLegacy:"2.23.140.1.5.4.1",smimeIndividualMulti:"2.23.140.1.5.4.2",smimeIndividualStrict:"2.23.140.1.5.4.3"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",GN:"2.5.4.42",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(typeof this.objCache[t]<"u")return this.objCache[t];if(typeof this.name2oidList[t]>"u")throw"Name of ObjectIdentifier not defined: "+t;var r=this.name2oidList[t],n=new e({oid:r});return this.objCache[t]=n,n},this.atype2obj=function(t){if(this.objCache[t]!==void 0)return this.objCache[t];var r;if(t.match(/^\d+\.\d+\.[0-9.]+$/))r=t;else if(this.atype2oidList[t]!==void 0)r=this.atype2oidList[t];else if(this.name2oidList[t]!==void 0)r=this.name2oidList[t];else throw new Error("AttributeType name undefined: "+t);var n=new e({oid:r});return this.objCache[t]=n,n},this.registerOIDs=function(t){if(this.checkOIDs(t))for(var r in t)this.name2oidList[r]=t[r]},this.checkOIDs=function(t){try{var r=Object.keys(t);return r.length==0?!1:(r.map(function(n,s,o){var u=this[n];if(!u.match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")},t),!0)}catch{return!1}}};E.asn1.x509.OID.oid2name=function(e){var t=E.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""};E.asn1.x509.OID.oid2atype=function(e){var t=E.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e};E.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=E.asn1.x509.OID.name2oidList;return t[e]===void 0?"":t[e]};E.asn1.x509.X509Util={};E.asn1.x509.X509Util.newCertPEM=function(e){var t=E.asn1.x509;t.TBSCertificate;var r=t.Certificate,n=new r(e);return n.getPEM()};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.cms>"u"||!E.asn1.cms)&&(E.asn1.cms={});E.asn1.cms.Attribute=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence,o=n.DERSet,u=n.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(h){this.params=h},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var h=new u({oid:this.typeOid}),g=new o({array:this.getValueArray()}),d=new s({array:[h,g]});return d.tohex()},this.getEncodedHex=function(){return this.tohex()}};pe(E.asn1.cms.Attribute,E.asn1.ASN1Object);E.asn1.cms.ContentType=function(e){var t=E,r=t.asn1;r.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){var n=new r.DERObjectIdentifier(this.params.type);return[n]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ContentType,E.asn1.cms.Attribute);E.asn1.cms.MessageDigest=function(e){var t=E,r=t.asn1,n=r.DEROctetString,s=r.cms;s.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){var o=new n(this.params);return[o]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.MessageDigest,E.asn1.cms.Attribute);E.asn1.cms.SigningTime=function(e){var t=E,r=t.asn1;r.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){var n=new r.x509.Time(this.params);return[n]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SigningTime,E.asn1.cms.Attribute);E.asn1.cms.SigningCertificate=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence,o=n.cms,u=o.ESSCertID;r.crypto,o.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var h=this.params.array,g=[],d=0;d<h.length;d++){var x=h[d];e.hasis==!1&&typeof x=="string"&&(x.indexOf("-----BEGIN")!=-1||we.isASN1HEX(x))&&(x={cert:x}),x.hasis!=!1&&e.hasis==!1&&(x.hasis=!1),g.push(new u(x))}var v=new s({array:g}),y=new s({array:[v]});return[y]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SigningCertificate,E.asn1.cms.Attribute);E.asn1.cms.ESSCertID=function(e){E.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,r=E,n=r.asn1,s=n.DEROctetString,o=n.DERSequence,u=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(h,g){if(h.hash!=null)return h.hash;if(typeof h=="string"&&h.indexOf("-----BEGIN")==-1&&!we.isASN1HEX(h))return h;var d;if(typeof h=="string")d=h;else if(h.cert!=null)d=h.cert;else throw new t("hash nor cert unspecified");var x;d.indexOf("-----BEGIN")!=-1?x=hr(d):x=d,typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1?x=hr(h):we.isASN1HEX(h)&&(x=h));var v;if(h.alg!=null)v=h.alg;else if(g!=null)v=g;else throw new t("hash alg unspecified");return r.crypto.Util.hashHex(x,v)},this.tohex=function(){var h=this.params,g=this.getCertHash(h,"sha1"),d=[];d.push(new s({hex:g})),(typeof h=="string"&&h.indexOf("-----BEGIN")!=-1||h.cert!=null&&h.hasis!=!1||h.issuer!=null&&h.serial!=null)&&d.push(new u(h));var x=new o({array:d});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ESSCertID,E.asn1.ASN1Object);E.asn1.cms.SigningCertificateV2=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence;n.x509;var o=n.cms,u=o.ESSCertIDv2;r.crypto,o.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(this.params==null||this.params==null||this.params.array==null)throw new t("parameter 'array' not specified");for(var h=this.params.array,g=[],d=0;d<h.length;d++){var x=h[d];(e.alg!=null||e.hasis==!1)&&typeof x=="string"&&(x.indexOf("-----BEGIN")!=-1||we.isASN1HEX(x))&&(x={cert:x}),x.alg==null&&e.alg!=null&&(x.alg=e.alg),x.hasis!=!1&&e.hasis==!1&&(x.hasis=!1),g.push(new u(x))}var v=new s({array:g}),y=new s({array:[v]});return[y]},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SigningCertificateV2,E.asn1.cms.Attribute);E.asn1.cms.ESSCertIDv2=function(e){E.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.DEROctetString,s=r.DERSequence,o=r.cms.IssuerSerial,u=r.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var h=this.params,g=this.getCertHash(h,"sha256"),d=[];h.alg!=null&&h.alg!="sha256"&&d.push(new u({name:h.alg})),d.push(new n({hex:g})),(typeof h=="string"&&h.indexOf("-----BEGIN")!=-1||h.cert!=null&&h.hasis!=!1||h.issuer!=null&&h.serial!=null)&&d.push(new o(h));var x=new s({array:d});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ESSCertIDv2,E.asn1.cms.ESSCertID);E.asn1.cms.IssuerSerial=function(e){var t=Error,r=E,n=r.asn1,s=n.DERInteger,o=n.DERSequence,u=n.cms,h=n.x509,g=h.GeneralNames,d=Qe;u.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(x){this.params=x},this.tohex=function(){var x=this.params,v,y;if(typeof x=="string"&&x.indexOf("-----BEGIN")!=-1||x.cert!=null){var S;x.cert!=null?S=x.cert:S=x;var w=new d;w.readCertPEM(S),v=w.getIssuer(),y={hex:w.getSerialNumberHex()}}else if(x.issuer!=null&&x.serial)v=x.issuer,y=x.serial;else throw new t("cert or issuer and serial parameter not specified");var A=new g([{dn:v}]),b=new s(y),I=new o({array:[A,b]});return I.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.IssuerSerial,E.asn1.ASN1Object);E.asn1.cms.SignerIdentifier=function(e){var t=E,r=t.asn1;r.DERInteger,r.DERSequence;var n=r.cms,s=n.IssuerAndSerialNumber,o=n.SubjectKeyIdentifier,u=r.x509;u.X500Name,n.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(h.type=="isssn"){var g=new s(h);return g.tohex()}else if(h.type=="skid"){var d=new o(h);return d.tohex()}else throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SignerIdentifier,E.asn1.ASN1Object);E.asn1.cms.IssuerAndSerialNumber=function(e){var t=E,r=t.asn1,n=r.DERInteger,s=r.DERSequence,o=r.cms,u=r.x509,h=u.X500Name,g=Qe,d=Error;o.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var x=this.params,v,y;if(typeof x=="string"&&x.indexOf("-----BEGIN")!=-1||x.cert!=null){var S;x.cert!=null?S=x.cert:S=x;var w=new g;w.readCertPEM(S),v=w.getIssuer(),y={hex:w.getSerialNumberHex()}}else if(x.issuer!=null&&x.serial)v=x.issuer,y=x.serial;else throw new d("cert or issuer and serial parameter not specified");var A=new h(v),b=new n(y),I=new s({array:[A,b]});return I.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(x){this.params=x},e!=null&&this.setByParam(e)};pe(E.asn1.cms.IssuerAndSerialNumber,E.asn1.ASN1Object);E.asn1.cms.SubjectKeyIdentifier=function(e){var t=E,r=t.asn1;r.DERInteger,r.DERSequence;var n=r.ASN1Util.newObject,s=r.cms;s.IssuerAndSerialName,s.SubjectKeyIdentifier;var o=r.x509;o.X500Name;var u=Qe,h=Error;s.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var g=this.params;if(g.cert==null&&g.skid==null)throw new h("property cert nor skid undefined");var d;if(g.cert!=null){var x=new u(g.cert),v=x.getExtSubjectKeyIdentifier();d=v.kid.hex}else g.skid!=null&&(d=g.skid);var y=n({tag:{tage:"a0",obj:{octstr:{hex:d}}}});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SubjectKeyIdentifier,E.asn1.ASN1Object);E.asn1.cms.AttributeList=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSet,o=n.cms;o.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params;if(this.hTLV!=null)return this.hTLV;var h=!0;u.sortflag!=null&&(h=u.sortflag);for(var g=u.array,d=[],x=0;x<g.length;x++){var v=g[x],y=v.attr;if(y=="contentType")d.push(new o.ContentType(v));else if(y=="messageDigest")d.push(new o.MessageDigest(v));else if(y=="signingTime")d.push(new o.SigningTime(v));else if(y=="signingCertificate")d.push(new o.SigningCertificate(v));else if(y=="signingCertificateV2")d.push(new o.SigningCertificateV2(v));else if(y=="signaturePolicyIdentifier")d.push(new E.asn1.cades.SignaturePolicyIdentifier(v));else if(y=="signatureTimeStamp"||y=="timeStampToken")d.push(new E.asn1.cades.SignatureTimeStamp(v));else throw new t("unknown attr: "+y)}var S=new s({array:d,sortflag:h});return this.hTLV=S.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.AttributeList,E.asn1.ASN1Object);E.asn1.cms.SignerInfo=function(e){var t=Error,r=E,n=r.asn1,s=n.DERInteger,o=n.DEROctetString,u=n.DERSequence,h=n.DERTaggedObject,g=n.cms,d=g.SignerIdentifier,x=g.AttributeList;g.ContentType,g.EncapsulatedContentInfo,g.MessageDigest,g.SignedData;var v=n.x509,y=v.AlgorithmIdentifier,S=r.crypto,w=gt;g.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var A=this.params,b=A.sigalg,I=new x(A.sattrs).tohex(),N=w.getKey(A.signkey),F=new S.Signature({alg:b});F.init(N),F.updateHex(I);var L=F.sign();A.sighex=L},this.tohex=function(){var A=this.params,b=[];if(b.push(new s({int:A.version})),b.push(new d(A.id)),b.push(new y({name:A.hashalg})),A.sattrs!=null){var I=new x(A.sattrs);try{b.push(new h({tag:"a0",explicit:!1,obj:I}))}catch(F){throw new t("si sattr error: "+F)}}if(A.sigalgfield!=null?b.push(new y({name:A.sigalgfield})):b.push(new y({name:A.sigalg})),A.sighex==null&&A.signkey!=null&&this.sign(),b.push(new o({hex:A.sighex})),A.uattrs!=null){var I=new x(A.uattrs);try{b.push(new h({tag:"a1",explicit:!1,obj:I}))}catch(L){throw new t("si uattr error: "+L)}}var N=new u({array:b});return N.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SignerInfo,E.asn1.ASN1Object);E.asn1.cms.EncapsulatedContentInfo=function(e){var t=E,r=t.asn1,n=r.DERTaggedObject,s=r.DERSequence,o=r.DERObjectIdentifier,u=r.DEROctetString,h=r.cms;h.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var g=this.params,d=[];if(d.push(new o(g.type)),g.content!=null&&(g.content.hex!=null||g.content.str!=null)&&g.isDetached!=!0){var x=new u(g.content),v=new n({tag:"a0",explicit:!0,obj:x});d.push(v)}var y=new s({array:d});return y.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(g){this.params=g},e!=null&&this.setByParam(e)};pe(E.asn1.cms.EncapsulatedContentInfo,E.asn1.ASN1Object);E.asn1.cms.ContentInfo=function(e){var t=E,r=t.asn1,n=r.DERTaggedObject,s=r.DERSequence,o=r.DERObjectIdentifier,u=r.x509;u.OID.name2obj,E.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,g=[];g.push(new o(h.type));var d=new n({tag:"a0",explicit:!0,obj:h.obj});g.push(d);var x=new s({array:g});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},e!=null&&this.setByParam(e)};pe(E.asn1.cms.ContentInfo,E.asn1.ASN1Object);E.asn1.cms.SignedData=function(e){var t=E,r=t.asn1;r.ASN1Object;var n=r.DERInteger,s=r.DERSet,o=r.DERSequence;r.DERTaggedObject;var u=r.cms,h=u.EncapsulatedContentInfo,g=u.SignerInfo,d=u.ContentInfo,x=u.CertificateSet,v=u.RevocationInfoChoices,y=r.x509,S=y.AlgorithmIdentifier;E.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var w=this.params;this._setDigestAlgs(w),this._setContentTypeByEContent(w),this._setMessageDigestByEContent(w),this._setSignerInfoVersion(w),this._setSignedDataVersion(w)},this._setDigestAlgs=function(w){for(var A={},b=w.sinfos,I=0;I<b.length;I++){var N=b[I];A[N.hashalg]=1}w.hashalgs=Object.keys(A).sort()},this._setContentTypeByEContent=function(w){for(var A=w.econtent.type,b=w.sinfos,I=0;I<b.length;I++){var N=b[I],F=this._getAttrParamByName(N,"contentType");F.type=A}},this._setMessageDigestByEContent=function(w){var A=w.econtent;w.econtent.type;var b=A.content.hex;b==null&&A.type=="data"&&A.content.str!=null&&(b=bi(A.content.str));for(var I=w.sinfos,N=0;N<I.length;N++){var F=I[N],L=F.hashalg,H=this._getAttrParamByName(F,"messageDigest"),_=E.crypto.Util.hashHex(b,L);H.hex=_}},this._getAttrParamByName=function(w,A){for(var b=w.sattrs.array,I=0;I<b.length;I++)if(b[I].attr==A)return b[I]},this._setSignerInfoVersion=function(w){for(var A=w.sinfos,b=0;b<A.length;b++){var I=A[b],N=1;I.id.type=="skid"&&(N=3),I.version=N}},this._setSignedDataVersion=function(w){var A=this._getSignedDataVersion(w);w.version=A},this._getSignedDataVersion=function(w){if(w.revinfos!=null)for(var A=w.revinfos,b=0;b<A.length;b++){var I=A[b];if(I.ocsp!=null)return 5}for(var N=w.sinfos,b=0;b<N.length;b++){var F=w.sinfos[b];if(F.version==3)return 3}return w.econtent.type!="data"?3:1},this.tohex=function(){var w=this.params;this.getEncodedHexPrepare!=null&&this.getEncodedHexPrepare(),w.fixed!=!0&&this.checkAndFixParam();var A=[];A.push(new n({int:w.version}));for(var b=[],I=0;I<w.hashalgs.length;I++){var N=w.hashalgs[I];b.push(new S({name:N}))}A.push(new s({array:b})),A.push(new h(w.econtent)),w.certs!=null&&A.push(new x(w.certs)),w.revinfos!=null&&A.push(new v(w.revinfos));for(var F=[],I=0;I<w.sinfos.length;I++){var L=w.sinfos[I];F.push(new g(L))}A.push(new s({array:F}));var H=new o({array:A});return H.tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){var w=new d({type:"signed-data",obj:this});return w},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.SignedData,E.asn1.ASN1Object);E.asn1.cms.CertificateSet=function(e){E.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,r=E.asn1,n=r.DERTaggedObject,s=r.DERSet,o=r.ASN1Object;this.params=null,this.tohex=function(){var u=this.params,h=[],g;if(u instanceof Array)g=u;else if(u.array!=null)g=u.array;else throw new t("cert array not specified");for(var d=0;d<g.length;d++){var x=g[d],v=hr(x),y=new o;y.hTLV=v,h.push(y)}var S={array:h};u.sortflag==!1&&(S.sortflag=!1);var w=new s(S),A=new n({tag:"a0",explicit:!1,obj:w});return A.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.CertificateSet,E.asn1.ASN1Object);E.asn1.cms.RevocationInfoChoices=function(e){E.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(!t instanceof Array)throw new Error("params is not array");for(var r=[],n=0;n<t.length;n++)r.push(new E.asn1.cms.RevocationInfoChoice(t[n]));var s=E.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:r}}});return s.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.RevocationInfoChoices,E.asn1.ASN1Object);E.asn1.cms.RevocationInfoChoice=function(e){E.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.crl!=null&&typeof t.crl=="string"){var r=t.crl;return t.crl.indexOf("-----BEGIN")!=-1&&(r=hr(t.crl)),r}else if(t.ocsp!=null){var n=E.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new E.asn1.cms.OtherRevocationFormat(t)}});return n.tohex()}else throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.RevocationInfoChoice,E.asn1.ASN1Object);E.asn1.cms.OtherRevocationFormat=function(e){E.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,r=E,n=r.asn1,s=n.ASN1Util.newObject,o=r.lang.String.isHex;this.params=null,this.tohex=function(){var u=this.params;if(u.ocsp==null)throw new t("property ocsp not specified");if(!o(u.ocsp)||!we.isASN1HEX(u.ocsp))throw new t("ocsp value not ASN.1 hex string");var h=s({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:u.ocsp}}]});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cms.OtherRevocationFormat,E.asn1.ASN1Object);E.asn1.cms.CMSUtil=new function(){};E.asn1.cms.CMSUtil.newSignedData=function(e){return new E.asn1.cms.SignedData(e)};E.asn1.cms.CMSUtil.verifySignedData=function(e){var t=E,r=t.asn1,n=r.cms;n.SignerInfo,n.SignedData,n.SigningTime,n.SigningCertificate,n.SigningCertificateV2;var s=r.cades;s.SignaturePolicyIdentifier;var o=t.lang.String.isHex,u=we,h=u.getVbyList,g=u.getTLVbyList,d=u.getIdxbyList,x=u.getChildIdx,v=u.getTLV,y=u.oidname,S=t.crypto.Util.hashHex;e.cms===void 0&&o(e.cms);var w=e.cms,A=function(P,D){for(var k,W=3;W<6;W++)if(k=d(P,0,[1,0,W]),k!==void 0){var K=P.substr(k,2);K==="a0"&&(D.certsIdx=k),K==="a1"&&(D.revinfosIdx=k),K==="31"&&(D.signerinfosIdx=k)}},b=function(P,D){var k=D.signerinfosIdx;if(k!==void 0){var W=x(P,k);D.signerInfoIdxList=W;for(var K=0;K<W.length;K++){var ie=W[K],G={idx:ie};I(P,G),D.signerInfos.push(G)}}},I=function(P,D){var k=D.idx;D.signerid_issuer1=g(P,k,[1,0],"30"),D.signerid_serial1=h(P,k,[1,1],"02"),D.hashalg=y(h(P,k,[2,0],"06"));var W=d(P,k,[3],"a0");D.idxSignedAttrs=W,N(P,D,W);var K=x(P,k),ie=K.length;if(ie<6)throw"malformed SignerInfo";D.sigalg=y(h(P,k,[ie-2,0],"06")),D.sigval=h(P,k,[ie-1],"04")},N=function(P,D,k){var W=x(P,k);D.signedAttrIdxList=W;for(var K=0;K<W.length;K++){var ie=W[K],G=h(P,ie,[0],"06"),V;G==="2a864886f70d010905"?(V=_t(h(P,ie,[1,0])),D.saSigningTime=V):G==="2a864886f70d010904"&&(V=h(P,ie,[1,0],"04"),D.saMessageDigest=V)}},F=function(P,D){if(h(P,0,[0],"06")!=="2a864886f70d010702")return D;D.cmsType="signedData",D.econtent=h(P,0,[1,0,2,1,0]),A(P,D),D.signerInfos=[],b(P,D)},L=function(P,D){for(var k=D.parse.signerInfos,W=k.length,K=!0,ie=0;ie<W;ie++){var G=k[ie];_(P,D,G),G.isValid||(K=!1)}D.isValid=K},H=function(P,D,k,W){var K=D.parse.certsIdx,ie;if(D.certs===void 0){ie=[],D.certkeys=[];for(var G=x(P,K),V=0;V<G.length;V++){var ce=v(P,G[V]),te=new Qe;te.readCertHex(ce),ie[V]=te,D.certkeys[V]=te.getPublicKey()}D.certs=ie}else ie=D.certs;D.cccc=ie.length,D.cccci=G.length;for(var V=0;V<ie.length;V++){var Ee=te.getIssuerHex(),be=te.getSerialNumberHex();k.signerid_issuer1===Ee&&k.signerid_serial1===be&&(k.certkey_idx=V)}},_=function(P,D,k,W){k.verifyDetail={};var K=k.verifyDetail,ie=D.parse.econtent,G=k.hashalg,V=k.saMessageDigest;K.validMessageDigest=!1,S(ie,G)===V&&(K.validMessageDigest=!0),H(P,D,k),K.validSignatureValue=!1;var ce=k.sigalg,te="31"+v(P,k.idxSignedAttrs).substr(2);k.signedattrshex=te;var Ee=D.certs[k.certkey_idx].getPublicKey(),be=new E.crypto.Signature({alg:ce});be.init(Ee),be.updateHex(te);var oe=be.verify(k.sigval);K.validSignatureValue_isValid=oe,oe===!0&&(K.validSignatureValue=!0),k.isValid=!1,K.validMessageDigest&&K.validSignatureValue&&(k.isValid=!0)},R={isValid:!1,parse:{}};return F(w,R.parse),L(w,R),R};E.asn1.cms.CMSParser=function(){var e=Error,t=Qe,r=new t,n=we,s=n.getV,o=n.getTLV;n.getIdxbyList;var u=n.getTLVbyList,h=n.getTLVbyListEx,g=n.getVbyList,d=n.getVbyListEx,x=n.getChildIdx;this.getCMSSignedData=function(v){var y=u(v,0,[1,0]),S=this.getSignedData(y);return S},this.getSignedData=function(v){var y=x(v,0),S={},w=s(v,y[0]),A=parseInt(w,16);S.version=A;var b=o(v,y[1]);S.hashalgs=this.getHashAlgArray(b);var I=o(v,y[2]);S.econtent=this.getEContent(I);var N=h(v,0,["[0]"]);N!=null&&(S.certs=this.getCertificateSet(N)),h(v,0,["[1]"]);var F=h(v,0,[3]);return S.sinfos=this.getSignerInfos(F),S},this.getHashAlgArray=function(v){for(var y=x(v,0),S=new t,w=[],A=0;A<y.length;A++){var b=o(v,y[A]),I=S.getAlgorithmIdentifierName(b);w.push(I)}return w},this.getEContent=function(v){var y={},S=g(v,0,[0]),w=g(v,0,[1,0]);return y.type=E.asn1.x509.OID.oid2name(we.hextooidstr(S)),y.content={hex:w},y},this.getSignerInfos=function(v){for(var y=[],S=x(v,0),w=0;w<S.length;w++){var A=o(v,S[w]),b=this.getSignerInfo(A);y.push(b)}return y},this.getSignerInfo=function(v){var y={},S=x(v,0),w=n.getInt(v,S[0],-1);w!=-1&&(y.version=w);var A=o(v,S[1]),b=this.getIssuerAndSerialNumber(A);y.id=b;var I=o(v,S[2]),N=r.getAlgorithmIdentifierName(I);y.hashalg=N;var F=h(v,0,["[0]"]);if(F!=null){var L=this.getAttributeList(F);y.sattrs=L}var H=h(v,0,[3]),_=r.getAlgorithmIdentifierName(H);y.sigalg=_;var R=d(v,0,[4]);y.sighex=R;var P=h(v,0,["[1]"]);if(P!=null){var D=this.getAttributeList(P);y.uattrs=D}return y},this.getSignerIdentifier=function(v){if(v.substr(0,2)=="30")return this.getIssuerAndSerialNumber(v);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(v){var y={type:"isssn"},S=x(v,0),w=o(v,S[0]);y.issuer=r.getX500Name(w);var A=s(v,S[1]);return y.serial={hex:A},y},this.getAttributeList=function(v){for(var y=[],S=x(v,0),w=0;w<S.length;w++){var A=o(v,S[w]),b=this.getAttribute(A);y.push(b)}return{array:y}},this.getAttribute=function(v){var y={},S=x(v,0),w=n.getOID(v,S[0]),A=E.asn1.x509.OID.oid2name(w);y.attr=A;var b=o(v,S[1]),I=x(b,0);if(I.length==1)y.valhex=o(b,I[0]);else{for(var N=[],F=0;F<I.length;F++)N.push(o(b,I[F]));y.valhex=N}return A=="contentType"?this.setContentType(y):A=="messageDigest"?this.setMessageDigest(y):A=="signingTime"?this.setSigningTime(y):A=="signingCertificate"?this.setSigningCertificate(y):A=="signingCertificateV2"?this.setSigningCertificateV2(y):A=="signaturePolicyIdentifier"&&this.setSignaturePolicyIdentifier(y),y},this.setContentType=function(v){var y=n.getOIDName(v.valhex,0,null);y!=null&&(v.type=y,delete v.valhex)},this.setSigningTime=function(v){var y=s(v.valhex,0),S=_t(y);v.str=S,delete v.valhex},this.setMessageDigest=function(v){var y=s(v.valhex,0);v.hex=y,delete v.valhex},this.setSigningCertificate=function(v){var y=x(v.valhex,0);if(y.length>0){for(var S=o(v.valhex,y[0]),w=x(S,0),A=[],b=0;b<w.length;b++){var I=o(S,w[b]),N=this.getESSCertID(I);A.push(N)}v.array=A}if(y.length>1){var F=o(v.valhex,y[1]);v.polhex=F}delete v.valhex},this.setSignaturePolicyIdentifier=function(v){var y=x(v.valhex,0);if(y.length>0){var S=n.getOID(v.valhex,y[0]);v.oid=S}if(y.length>1){var w=new t,A=x(v.valhex,y[1]),b=o(v.valhex,A[0]),I=w.getAlgorithmIdentifierName(b);v.alg=I;var N=s(v.valhex,A[1]);v.hash=N}delete v.valhex},this.setSigningCertificateV2=function(v){var y=x(v.valhex,0);if(y.length>0){for(var S=o(v.valhex,y[0]),w=x(S,0),A=[],b=0;b<w.length;b++){var I=o(S,w[b]),N=this.getESSCertIDv2(I);A.push(N)}v.array=A}if(y.length>1){var F=o(v.valhex,y[1]);v.polhex=F}delete v.valhex},this.getESSCertID=function(v){var y={},S=x(v,0);if(S.length>0){var w=s(v,S[0]);y.hash=w}if(S.length>1){var A=o(v,S[1]),b=this.getIssuerSerial(A);b.serial!=null&&(y.serial=b.serial),b.issuer!=null&&(y.issuer=b.issuer)}return y},this.getESSCertIDv2=function(v){var y={},S=x(v,0);if(S.length<1||3<S.length)throw new e("wrong number of elements");var w=0;if(v.substr(S[0],2)=="30"){var A=o(v,S[0]);y.alg=r.getAlgorithmIdentifierName(A),w++}else y.alg="sha256";var b=s(v,S[w]);if(y.hash=b,S.length>w+1){var I=o(v,S[w+1]),N=this.getIssuerSerial(I);y.issuer=N.issuer,y.serial=N.serial}return y},this.getIssuerSerial=function(v){var y={},S=x(v,0),w=o(v,S[0]),A=r.getGeneralNames(w),b=A[0].dn;y.issuer=b;var I=s(v,S[1]);return y.serial={hex:I},y},this.getCertificateSet=function(v){for(var y=x(v,0),S=[],w=0;w<y.length;w++){var A=o(v,y[w]);if(A.substr(0,2)=="30"){var b=Gr(A,"CERTIFICATE");S.push(b)}}return{array:S,sortflag:!1}}};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.tsp>"u"||!E.asn1.tsp)&&(E.asn1.tsp={});E.asn1.tsp.TimeStampToken=function(e){var t=E,r=t.asn1,n=r.tsp;n.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var s=new n.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=s.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.TimeStampToken,E.asn1.cms.SignedData);E.asn1.tsp.TSTInfo=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.DERInteger,o=r.DERBoolean,u=r.DERGeneralizedTime,h=r.DERObjectIdentifier,g=r.DERTaggedObject,d=r.tsp,x=d.MessageImprint,v=d.Accuracy;r.x509.X500Name;var y=r.x509.GeneralName;if(d.TSTInfo.superclass.constructor.call(this),this.dVersion=new s({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var S=[this.dVersion];if(this.dPolicy==null)throw new Error("policy shall be specified.");if(S.push(this.dPolicy),this.dMessageImprint==null)throw new Error("messageImprint shall be specified.");if(S.push(this.dMessageImprint),this.dSerial==null)throw new Error("serialNumber shall be specified.");if(S.push(this.dSerial),this.dGenTime==null)throw new Error("genTime shall be specified.");S.push(this.dGenTime),this.dAccuracy!=null&&S.push(this.dAccuracy),this.dOrdering!=null&&S.push(this.dOrdering),this.dNonce!=null&&S.push(this.dNonce),this.dTsa!=null&&S.push(this.dTsa);var w=new n({array:S});return this.hTLV=w.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0){if(typeof e.policy=="string"){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new h({oid:e.policy})}e.messageImprint!==void 0&&(this.dMessageImprint=new x(e.messageImprint)),e.serial!==void 0&&(this.dSerial=new s(e.serial)),e.genTime!==void 0&&(this.dGenTime=new u(e.genTime)),e.accuracy!==void 0&&(this.dAccuracy=new v(e.accuracy)),e.ordering!==void 0&&e.ordering==!0&&(this.dOrdering=new o),e.nonce!==void 0&&(this.dNonce=new s(e.nonce)),e.tsa!==void 0&&(this.dTsa=new g({tag:"a0",explicit:!0,obj:new y({dn:e.tsa})}))}};pe(E.asn1.tsp.TSTInfo,E.asn1.ASN1Object);E.asn1.tsp.Accuracy=function(e){var t=E,r=t.asn1,n=r.ASN1Util.newObject;r.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var s=this.params,o=[];return s.seconds!=null&&typeof s.seconds=="number"&&o.push({int:s.seconds}),s.millis!=null&&typeof s.millis=="number"&&o.push({tag:{tagi:"80",obj:{int:s.millis}}}),s.micros!=null&&typeof s.micros=="number"&&o.push({tag:{tagi:"81",obj:{int:s.micros}}}),n({seq:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.Accuracy,E.asn1.ASN1Object);E.asn1.tsp.MessageImprint=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.DEROctetString,o=r.x509,u=o.AlgorithmIdentifier;r.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params,g=new u({name:h.alg}),d=new s({hex:h.hash}),x=new n({array:[g,d]});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.tsp.MessageImprint,E.asn1.ASN1Object);E.asn1.tsp.TimeStampReq=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.DERInteger,o=r.DERBoolean;r.ASN1Object;var u=r.DERObjectIdentifier,h=r.tsp,g=h.MessageImprint;h.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var d=this.params,x=[];x.push(new s({int:1})),d.messageImprint instanceof E.asn1.ASN1Object?x.push(d.messageImprint):x.push(new g(d.messageImprint)),d.policy!=null&&x.push(new u(d.policy)),d.nonce!=null&&x.push(new s(d.nonce)),d.certreq==!0&&x.push(new o);var v=new n({array:x});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.TimeStampReq,E.asn1.ASN1Object);E.asn1.tsp.TimeStampResp=function(e){var t=E,r=t.asn1,n=r.DERSequence;r.ASN1Object;var s=r.tsp,o=s.PKIStatusInfo;s.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var u=this.params,h=[];if(u.econtent!=null||u.tst!=null)if(u.statusinfo!=null?h.push(new o(u.statusinfo)):h.push(new o("granted")),u.econtent!=null)h.push(new s.TimeStampToken(u).getContentInfo());else if(u.tst instanceof r.ASN1Object)h.push(u.tst);else throw new Error("improper member tst value");else if(u.statusinfo!=null)h.push(new o(u.statusinfo));else throw new Error("parameter for token nor statusinfo not specified");var g=new n({array:h});return g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.TimeStampResp,E.asn1.ASN1Object);E.asn1.tsp.PKIStatusInfo=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence,o=n.tsp,u=o.PKIStatus,h=o.PKIFreeText,g=o.PKIFailureInfo;o.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var d=this.params,x=[];if(typeof d=="string")x.push(new u(d));else{if(d.status==null)throw new t("property 'status' unspecified");x.push(new u(d.status)),d.statusstr!=null&&x.push(new h(d.statusstr)),d.failinfo!=null&&x.push(new g(d.failinfo))}var v=new s({array:x});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIStatusInfo,E.asn1.ASN1Object);E.asn1.tsp.PKIStatus=function(e){var t=Error,r=E,n=r.asn1,s=n.DERInteger,o=n.tsp;o.PKIStatus.superclass.constructor.call(this);var u={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var h=this.params,g;if(typeof h=="string")try{g=u[h]}catch{throw new t("undefined name: "+h)}else if(typeof h=="number")g=h;else throw new t("unsupported params");return new s({int:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIStatus,E.asn1.ASN1Object);E.asn1.tsp.PKIFreeText=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence,o=n.DERUTF8String,u=n.tsp;u.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;if(!h instanceof Array)throw new t("wrong params: not array");for(var g=[],d=0;d<h.length;d++)g.push(new o({str:h[d]}));var x=new s({array:g});return x.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIFreeText,E.asn1.ASN1Object);E.asn1.tsp.PKIFailureInfo=function(e){var t=Error,r=E,n=r.asn1,s=n.DERBitString,o=n.tsp,u=o.PKIFailureInfo,h={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};u.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var g=this.params,d=0;if(typeof g=="number"&&0<=g&&g<=25){d|=1<<g;for(var x=d.toString(2),v="",y=x.length-1;y>=0;y--)v+=x[y];return v}else{if(typeof g=="string"&&h[g]!=null)return gc([g],h);if(typeof g=="object"&&g.length!=null)return gc(g,h);throw new t("wrong params")}},this.tohex=function(){this.params;var g=this.getBinValue();return new s({bin:g}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.tsp.PKIFailureInfo,E.asn1.ASN1Object);E.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(t,r){throw"not implemented yet"}};E.asn1.tsp.SimpleTSAAdapter=function(e){var t=E,r=t.asn1,n=r.tsp,s=t.crypto.Util.hashHex;n.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(o,u){var h=s(o,u);this.params.econtent.content.messageImprint={alg:u,hash:h},this.params.econtent.content.serial={int:this.serial++};var g=Math.floor(Math.random()*1e9);this.params.econtent.content.nonce={int:g};var d=new n.TimeStampToken(this.params);return d.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};pe(E.asn1.tsp.SimpleTSAAdapter,E.asn1.tsp.AbstractTSAAdapter);E.asn1.tsp.FixedTSAAdapter=function(e){var t=E,r=t.asn1,n=r.tsp,s=t.crypto.Util.hashHex;n.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(o,u){var h=s(o,u);this.params.econtent.content.messageImprint={alg:u,hash:h};var g=new n.TimeStampToken(this.params);return g.getContentInfoEncodedHex()},e!==void 0&&(this.params=e)};pe(E.asn1.tsp.FixedTSAAdapter,E.asn1.tsp.AbstractTSAAdapter);E.asn1.tsp.TSPUtil=new function(){};E.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new E.asn1.tsp.TimeStampToken(e)};E.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){var t=new E.asn1.tsp.TSPParser;return t.getTimeStampReq(e)};E.asn1.tsp.TSPUtil.parseMessageImprint=function(e){var t=new E.asn1.tsp.TSPParser;return t.getMessageImprint(e)};E.asn1.tsp.TSPParser=function(){var e=Qe,t=new e,r=we,n=r.getV,s=r.getTLV,o=r.getIdxbyList;r.getTLVbyListEx;var u=r.getChildIdx,h=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],g={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(d){var x=u(d,0);if(x.length==1)return this.getPKIStatusInfo(s(d,x[0]));if(x.length>1){var v=this.getPKIStatusInfo(s(d,x[0])),y=s(d,x[1]),S=this.getToken(y);return S.statusinfo=v,S}},this.getToken=function(d){var x=new E.asn1.cms.CMSParser,v=x.getCMSSignedData(d);return this.setTSTInfo(v),v},this.setTSTInfo=function(d){var x=d.econtent;if(x.type=="tstinfo"){var v=x.content.hex,y=this.getTSTInfo(v);x.content=y}},this.getTSTInfo=function(d){var x={},v=u(d,0),y=n(d,v[1]);x.policy=Zc(y);var S=s(d,v[2]);x.messageImprint=this.getMessageImprint(S);var w=n(d,v[3]);x.serial={hex:w};var A=n(d,v[4]);x.genTime={str:_t(A)};var b=0;if(v.length>5&&d.substr(v[5],2)=="30"){var I=s(d,v[5]);x.accuracy=this.getAccuracy(I),b++}if(v.length>5+b&&d.substr(v[5+b],2)=="01"){var N=n(d,v[5+b]);N=="ff"&&(x.ordering=!0),b++}if(v.length>5+b&&d.substr(v[5+b],2)=="02"){var F=n(d,v[5+b]);x.nonce={hex:F},b++}if(v.length>5+b&&d.substr(v[5+b],2)=="a0"){var L=s(d,v[5+b]);L="30"+L.substr(2),pGeneralNames=t.getGeneralNames(L);var H=pGeneralNames[0].dn;x.tsa=H,b++}if(v.length>5+b&&d.substr(v[5+b],2)=="a1"){var _=s(d,v[5+b]);_="30"+_.substr(2);var R=t.getExtParamArray(_);x.ext=R,b++}return x},this.getAccuracy=function(d){for(var x={},v=u(d,0),y=0;y<v.length;y++){var S=d.substr(v[y],2),w=n(d,v[y]),A=parseInt(w,16);S=="02"?x.seconds=A:S=="80"?x.millis=A:S=="81"&&(x.micros=A)}return x},this.getMessageImprint=function(d){if(d.substr(0,2)!="30")throw new Error("head of messageImprint hex shall be x30");var x={};u(d,0);var v=o(d,0,[0,0]),y=n(d,v),S=r.hextooidstr(y),w=E.asn1.x509.OID.oid2name(S);if(w=="")throw new Error("hashAlg name undefined: "+S);var A=w,b=o(d,0,[1]);return x.alg=A,x.hash=n(d,b),x},this.getPKIStatusInfo=function(d){var x={},v=u(d,0),y=0;try{var S=n(d,v[0]),w=parseInt(S,16);x.status=h[w]}catch{}if(v.length>1&&d.substr(v[1],2)=="30"){var A=s(d,v[1]);x.statusstr=this.getPKIFreeText(A),y++}if(v.length>y&&d.substr(v[1+y],2)=="03"){var b=s(d,v[1+y]);x.failinfo=this.getPKIFailureInfo(b)}return x},this.getPKIFreeText=function(d){for(var x=[],v=u(d,0),y=0;y<v.length;y++)x.push(r.getString(d,v[y]));return x},this.getPKIFailureInfo=function(d){var x=r.getInt(d,0);return g[x]!=null?g[x]:x},this.getTimeStampReq=function(d){var x={};x.certreq=!1;var v=u(d,0);if(v.length<2)throw new Error("TimeStampReq must have at least 2 items");var y=s(d,v[1]);x.messageImprint=E.asn1.tsp.TSPUtil.parseMessageImprint(y);for(var S=2;S<v.length;S++){var w=v[S],A=d.substr(w,2);if(A=="06"){var b=n(d,w);x.policy=r.hextooidstr(b)}A=="02"&&(x.nonce=n(d,w)),A=="01"&&(x.certreq=!0)}return x}};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.cades>"u"||!E.asn1.cades)&&(E.asn1.cades={});E.asn1.cades.SignaturePolicyIdentifier=function(e){var t=E,r=t.asn1,n=r.cades,s=n.SignaturePolicyId;n.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new s(this.params)]},this.setByParam=function(o){this.params=o},e!=null&&this.setByParam(e)};pe(E.asn1.cades.SignaturePolicyIdentifier,E.asn1.cms.Attribute);E.asn1.cades.SignaturePolicyId=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.DERObjectIdentifier,o=r.x509;o.AlgorithmIdentifier;var u=r.cades,h=u.SignaturePolicyId,g=u.OtherHashAlgAndValue;h.superclass.constructor.call(this),this.params=null,this.tohex=function(){var d=this.params,x=[];x.push(new s(d.oid)),x.push(new g(d));var v=new n({array:x});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(d){this.params=d},e!=null&&this.setByParam(e)};pe(E.asn1.cades.SignaturePolicyId,E.asn1.ASN1Object);E.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence,o=n.DEROctetString,u=n.x509,h=u.AlgorithmIdentifier,g=n.cades,d=g.OtherHashAlgAndValue;d.superclass.constructor.call(this),this.params=null,this.tohex=function(){var x=this.params;if(x.alg==null)throw new t("property 'alg' not specified");if(x.hash==null&&x.cert==null)throw new t("property 'hash' nor 'cert' not specified");var v=null;if(x.hash!=null)v=x.hash;else if(x.cert!=null){if(typeof x.cert!="string")throw new t("cert not string");var y=x.cert;x.cert.indexOf("-----BEGIN")!=-1&&(y=hr(x.cert)),v=E.crypto.Util.hashHex(y,x.alg)}var S=[];S.push(new h({name:x.alg})),S.push(new o({hex:v}));var w=new s({array:S});return w.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherHashAlgAndValue,E.asn1.ASN1Object);E.asn1.cades.OtherHashValue=function(e){E.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,r=E;r.lang.String.isHex;var n=r.asn1,s=n.DEROctetString;r.crypto.Util.hashHex,this.params=null,this.tohex=function(){var o=this.params;if(o.hash==null&&o.cert==null)throw new t("hash or cert not specified");var u=null;if(o.hash!=null)u=o.hash;else if(o.cert!=null){if(typeof o.cert!="string")throw new t("cert not string");var h=o.cert;o.cert.indexOf("-----BEGIN")!=-1&&(h=hr(o.cert)),u=E.crypto.Util.hashHex(h,"sha1")}return new s({hex:u}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherHashValue,E.asn1.ASN1Object);E.asn1.cades.SignatureTimeStamp=function(e){var t=Error,r=E,n=r.lang.String.isHex,s=r.asn1,o=s.ASN1Object;s.x509;var u=s.cades;u.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var h=this.params;if(h.tst!=null)if(n(h.tst)){var g=new o;return g.hTLV=h.tst,[g]}else{if(h.tst instanceof o)return[h.tst];throw new t("params.tst has wrong value")}else if(h.res!=null){var d=h.res;if(d instanceof o&&(d=d.tohex()),typeof d!="string"||!n(d))throw new t("params.res has wrong value");we.getTLVbyList(d,0,[1]);var g=new o;return g.hTLV=h.tst,[g]}},e!=null&&this.setByParam(e)};pe(E.asn1.cades.SignatureTimeStamp,E.asn1.cms.Attribute);E.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence,o=n.cades,u=o.OtherCertID,h=r.lang.String.isHex;o.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var g=this.params,d=[],x=0;x<g.array.length;x++){var v=g.array[x];if(typeof v=="string")if(v.indexOf("-----BEGIN")!=-1)v={cert:v};else if(h(v))v={hash:v};else throw new t("unsupported value: "+v);g.alg!=null&&v.alg==null&&(v.alg=g.alg),g.hasis!=null&&v.hasis==null&&(v.hasis=g.hasis);var y=new u(v);d.push(y)}var S=new s({array:d});return[S]},e!=null&&this.setByParam(e)};pe(E.asn1.cades.CompleteCertificateRefs,E.asn1.cms.Attribute);E.asn1.cades.OtherCertID=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.cms,o=s.IssuerSerial,u=r.cades,h=u.OtherHashValue,g=u.OtherHashAlgAndValue;u.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var d=this.params;typeof d=="string"&&(d.indexOf("-----BEGIN")!=-1?d={cert:d}:_isHex(d)&&(d={hash:d}));var x=[],v=null;if(d.alg!=null?v=new g(d):v=new h(d),x.push(v),d.cert!=null&&d.hasis==!0||d.issuer!=null&&d.serial!=null){var y=new o(d);x.push(y)}var S=new n({array:x});return S.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherCertID,E.asn1.ASN1Object);E.asn1.cades.OtherHash=function(e){var t=E,r=t.asn1;r.cms;var n=r.cades,s=n.OtherHashAlgAndValue,o=n.OtherHashValue;t.crypto.Util.hashHex;var u=t.lang.String.isHex;n.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var h=this.params;typeof h=="string"&&(h.indexOf("-----BEGIN")!=-1?h={cert:h}:u(h)&&(h={hash:h}));var g=null;return h.alg!=null?g=new s(h):g=new o(h),g.tohex()},this.getEncodedHex=function(){return this.tohex()},e!=null&&this.setByParam(e)};pe(E.asn1.cades.OtherHash,E.asn1.ASN1Object);E.asn1.cades.CAdESUtil=new function(){};E.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){var t=new E.asn1.cms.CMSParser,r=t.getCMSSignedData(e);return r};E.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,r){var n=we,s=n.getChildIdx,o=n.getTLV,u=n.getV,h=E,g=h.asn1,d=g.ASN1Object,x=g.cms,v=x.AttributeList,y=x.SignerInfo,S={},w=s(e,t);if(w.length!=6)throw"not supported items for SignerInfo (!=6)";var A=w.shift();S.version=o(e,A);var b=w.shift();S.si=o(e,b);var I=w.shift();S.digalg=o(e,I);var N=w.shift();S.sattrs=o(e,N);var F=w.shift();S.sigalg=o(e,F);var L=w.shift();S.sig=o(e,L),S.sigval=u(e,L);var H=null;return S.obj=new y,H=new d,H.hTLV=S.version,S.obj.dCMSVersion=H,H=new d,H.hTLV=S.si,S.obj.dSignerIdentifier=H,H=new d,H.hTLV=S.digalg,S.obj.dDigestAlgorithm=H,H=new d,H.hTLV=S.sattrs,S.obj.dSignedAttrs=H,H=new d,H.hTLV=S.sigalg,S.obj.dSigAlg=H,H=new d,H.hTLV=S.sig,S.obj.dSig=H,S.obj.dUnsignedAttrs=new v,S};(typeof E.asn1.csr>"u"||!E.asn1.csr)&&(E.asn1.csr={});E.asn1.csr.CertificationRequest=function(e){var t=E,r=t.asn1,n=r.DERBitString,s=r.DERSequence,o=r.csr;r.x509;var u=o.CertificationRequestInfo;o.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(h){this.params=h},this.sign=function(){var h=new u(this.params).tohex(),g=new E.crypto.Signature({alg:this.params.sigalg});g.init(this.params.sbjprvkey),g.updateHex(h);var d=g.sign();this.params.sighex=d},this.getPEM=function(){return Gr(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var h=this.params,g=new E.asn1.csr.CertificationRequestInfo(this.params),d=new E.asn1.x509.AlgorithmIdentifier({name:h.sigalg});if(h.sighex==null&&h.sbjprvkey!=null&&this.sign(),h.sighex==null)throw new Error("sighex or sbjprvkey parameter not defined");var x=new n({hex:"00"+h.sighex}),v=new s({array:[g,d,x]});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.csr.CertificationRequest,E.asn1.ASN1Object);E.asn1.csr.CertificationRequestInfo=function(e){var t=E,r=t.asn1;r.DERBitString;var n=r.DERSequence,s=r.DERInteger,o=r.DERUTF8String,u=r.DERTaggedObject,h=r.ASN1Util.newObject,g=r.csr,d=r.x509,x=d.X500Name,v=d.Extensions,y=d.SubjectPublicKeyInfo;g.AttributeList,g.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(w){w!=null&&(this.params=w)},this.tohex=function(){var w=this.params,A=[];if(A.push(new s({int:0})),A.push(new x(w.subject)),A.push(new y(gt.getKey(w.sbjpubkey))),w.attrs!=null){var b=S(w.attrs),I=h({tag:{tage:"a0",obj:b}});A.push(I)}else if(w.extreq!=null){var N=new v(w.extreq),I=h({tag:{tage:"a0",obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[N]}]}}});A.push(I)}else A.push(new u({tag:"a0",explicit:!1,obj:new o({str:""})}));var F=new n({array:A});return F.tohex()},this.getEncodedHex=function(){return this.tohex()};function S(w){for(var A=Error,b=E.asn1.x509.Extensions,I=[],N=0;N<w.length;N++){var F=w[N],L=F.attr;if(L=="extensionRequest"){var H=new b(F.ext),_={seq:[{oid:"1.2.840.113549.1.9.14"},{set:[H]}]};I.push(_)}else if(L=="unstructuredName"){var _={seq:[{oid:"1.2.840.113549.1.9.2"},{set:F.names}]};I.push(_)}else if(L=="challengePassword"){var _={seq:[{oid:"1.2.840.113549.1.9.7"},{set:[{utf8str:F.password}]}]};I.push(_)}else throw new A("unknown CSR attribute")}return{set:I}}e!=null&&this.setByParam(e)};pe(E.asn1.csr.CertificationRequestInfo,E.asn1.ASN1Object);E.asn1.csr.AttributeList=function(e){};pe(E.asn1.csr.AttributeList,E.asn1.ASN1Object);E.asn1.csr.CSRUtil=new function(){};E.asn1.csr.CSRUtil.newCSRPEM=function(e){var t=E.asn1.csr,r=new t.CertificationRequest(e),n=r.getPEM();return n};E.asn1.csr.CSRUtil.getParam=function(e,t){var r=we,n=r.getV,s=r.getIdxbyList,o=r.getTLVbyList,u=r.getTLVbyListEx,h=r.getVbyListEx,g=function(N){var F=s(N,0,[0,3,0,0],"06");return n(N,F)!="2a864886f70d01090e"?null:o(N,0,[0,3,0,1,0],"30")},d={};if(e.indexOf("-----BEGIN CERTIFICATE REQUEST")==-1)throw new Error("argument is not PEM file");var x=hr(e,"CERTIFICATE REQUEST");t&&(d.tbs=o(x,0,[0]));try{var v=u(x,0,[0,1]);if(v=="3000")d.subject={};else{var A=new Qe;d.subject=A.getX500Name(v)}}catch{}var y=u(x,0,[0,2]),S=gt.getKey(y,null,"pkcs8pub");d.sbjpubkey=gt.getPEM(S,"PKCS8PUB");var w=g(x),A=new Qe;w!=null&&(d.extreq=A.getExtParamArray(w));try{var b=u(x,0,[1],"30"),A=new Qe;d.sigalg=A.getAlgorithmIdentifierName(b)}catch{}try{var I=h(x,0,[2]);d.sighex=I}catch{}return d};E.asn1.csr.CSRUtil.verifySignature=function(e){try{var t=null;if(typeof e=="string"&&e.indexOf("-----BEGIN CERTIFICATE REQUEST")!=-1?t=E.asn1.csr.CSRUtil.getParam(e,!0):typeof e=="object"&&e.sbjpubkey!=null&&e.sigalg!=null&&e.sighex!=null&&e.tbs!=null&&(t=e),t==null)return!1;var r=new E.crypto.Signature({alg:t.sigalg});return r.init(t.sbjpubkey),r.updateHex(t.tbs),r.verify(t.sighex)}catch(n){return alert(n),!1}};(typeof E>"u"||!E)&&(E={});(typeof E.asn1>"u"||!E.asn1)&&(E.asn1={});(typeof E.asn1.ocsp>"u"||!E.asn1.ocsp)&&(E.asn1.ocsp={});E.asn1.ocsp.DEFAULT_HASH="sha1";E.asn1.ocsp.OCSPResponse=function(e){E.asn1.ocsp.OCSPResponse.superclass.constructor.call(this),E.asn1.DEREnumerated;var t=E.asn1.ASN1Util.newObject,r=E.asn1.ocsp.ResponseBytes,n=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var s=this.params.resstatus;return typeof s=="number"?s:typeof s!="string"?-1:n.indexOf(s)},this.setByParam=function(s){this.params=s},this.tohex=function(){var s=this.params,o=this._getStatusCode();if(o==-1)throw new Error("responseStatus not supported: "+s.resstatus);if(o!=0)return t({seq:[{enum:{int:o}}]}).tohex();var u=new r(s);return t({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:u}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.OCSPResponse,E.asn1.ASN1Object);E.asn1.ocsp.ResponseBytes=function(e){E.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=E.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,s=t.DEROctetString,o=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(u){this.params=u},this.tohex=function(){var u=this.params;if(u.restype!="ocspBasic")throw new Error("not supported responseType: "+u.restype);var h=new o(u),g=[];g.push(new n({name:"ocspBasic"})),g.push(new s({hex:h.tohex()}));var d=new r({array:g});return d.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.ResponseBytes,E.asn1.ASN1Object);E.asn1.ocsp.BasicOCSPResponse=function(e){E.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,r=E.asn1,n=r.ASN1Object,s=r.DERSequence;r.DERGeneralizedTime;var o=r.DERTaggedObject,u=r.DERBitString;r.x509.Extensions;var h=r.x509.AlgorithmIdentifier,g=r.ocsp;g.ResponderID,_SingleResponseList=g.SingleResponseList,_ResponseData=g.ResponseData,this.params=null,this.setByParam=function(d){this.params=d},this.sign=function(){var d=this.params,x=d.tbsresp.tohex(),v=new E.crypto.Signature({alg:d.sigalg});v.init(d.reskey),v.updateHex(x),d.sighex=v.sign()},this.tohex=function(){var d=this.params;d.tbsresp==null&&(d.tbsresp=new _ResponseData(d)),d.sighex==null&&d.reskey!=null&&this.sign();var x=[];if(x.push(d.tbsresp),x.push(new h({name:d.sigalg})),x.push(new u({hex:"00"+d.sighex})),d.certs!=null&&d.certs.length!=null){for(var v=[],y=0;y<d.certs.length;y++){var S=d.certs[y],w=null;if(we.isASN1HEX(S))w=S;else if(S.match(/-----BEGIN/))w=hr(S);else throw new t("certs["+y+"] not hex or PEM");v.push(new n({tlv:w}))}var A=new s({array:v});x.push(new o({tag:"a0",explicit:!0,obj:A}))}var b=new s({array:x});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.BasicOCSPResponse,E.asn1.ASN1Object);E.asn1.ocsp.ResponseData=function(e){E.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=E.asn1,r=t.DERSequence,n=t.DERGeneralizedTime,s=t.DERTaggedObject,o=t.x509.Extensions,u=t.ocsp,h=u.ResponderID;_SingleResponseList=u.SingleResponseList,this.params=null,this.tohex=function(){var g=this.params;g.respid!=null,g.prodat!=null,g.array!=null;var d=[];if(d.push(new h(g.respid)),d.push(new n(g.prodat)),d.push(new _SingleResponseList(g.array)),g.ext!=null){var x=new o(g.ext);d.push(new s({tag:"a1",explicit:!0,obj:x}))}var v=new r({array:d});return v.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(g){this.params=g},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.ResponseData,E.asn1.ASN1Object);E.asn1.ocsp.ResponderID=function(e){E.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=E,r=t.asn1,n=r.ASN1Util.newObject,s=r.x509.X500Name,o=t.lang.String.isHex,u=Error;this.params=null,this.tohex=function(){var h=this.params;if(h.key!=null){var g=null;if(typeof h.key=="string"){if(o(h.key)&&(g=h.key),h.key.match(/-----BEGIN CERTIFICATE/)){var d=new Qe(h.key),x=d.getExtSubjectKeyIdentifier();x!=null&&(g=x.kid.hex)}}else if(h.key instanceof Qe){var x=h.key.getExtSubjectKeyIdentifier();x!=null&&(g=x.kid.hex)}if(g==null)throw new u("wrong key member value");var v=n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:g}}}});return v.tohex()}else if(h.name!=null){var y=null;if(typeof h.name=="string"&&h.name.match(/-----BEGIN CERTIFICATE/)){var d=new Qe(h.name);y=d.getSubject()}else h.name instanceof Qe?y=h.name.getSubject():typeof h.name=="object"&&(h.name.array!=null||h.name.str!=null)&&(y=h.name);if(y==null)throw new u("wrong name member value");var v=n({tag:{tag:"a1",explicit:!0,obj:new s(y)}});return v.tohex()}throw new u("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(h){this.params=h},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.ResponderID,E.asn1.ASN1Object);E.asn1.ocsp.SingleResponseList=function(e){E.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=E.asn1,r=t.DERSequence,n=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var s=this.params;if(typeof s!="object"||s.length==null)throw new Error("params not specified properly");for(var o=[],u=0;u<s.length;u++)o.push(new n(s[u]));var h=new r({array:o});return h.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(s){this.params=s},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.SingleResponseList,E.asn1.ASN1Object);E.asn1.ocsp.SingleResponse=function(e){var t=Error,r=E,n=r.asn1,s=n.DERSequence,o=n.DERGeneralizedTime,u=n.DERTaggedObject,h=n.ocsp,g=h.CertID,d=h.CertStatus,x=n.x509,v=x.Extensions;h.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var y=this.params,S=[];if(y.certid==null)throw new t("certid unspecified");if(y.status==null)throw new t("status unspecified");if(y.thisupdate==null)throw new t("thisupdate unspecified");if(S.push(new g(y.certid)),S.push(new d(y.status)),S.push(new o(y.thisupdate)),y.nextupdate!=null){var w=new o(y.nextupdate);S.push(new u({tag:"a0",explicit:!0,obj:w}))}if(y.ext!=null){var A=new v(y.ext);S.push(new u({tag:"a1",explicit:!0,obj:A}))}var b=new s({array:S});return b.tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(y){this.params=y},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.SingleResponse,E.asn1.ASN1Object);E.asn1.ocsp.CertID=function(e){var t=E,r=t.asn1,n=r.DEROctetString,s=r.DERInteger,o=r.DERSequence,u=r.x509,h=u.AlgorithmIdentifier,g=r.ocsp;g.DEFAULT_HASH;var d=t.crypto,x=d.Util.hashHex,v=Qe,y=we,S=y.getVbyList;g.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(w,A,b,I){I==null&&(I=this.DEFAULT_HASH),this.params={alg:I,issname:w,isskey:A,sbjsn:b}},this.setByCert=function(w,A,b){b==null&&(b=this.DEFAULT_HASH),this.params={alg:b,issuerCert:w,subjectCert:A}},this.getParamByCerts=function(w,A,b){b==null&&(b=this.DEFAULT_HASH);var I=new v(w),N=new v(A),F=x(I.getSubjectHex(),b),L=I.getPublicKeyHex(),H=x(S(L,0,[1],"03",!0),b),_=N.getSerialNumberHex(),R={alg:b,issname:F,isskey:H,sbjsn:_};return R},this.tohex=function(){if(typeof this.params!="object")throw new Error("params not set");var w=this.params,A,b,I,N;if(w.alg==null?N=this.DEFAULT_HASH:N=w.alg,w.issuerCert!=null&&w.subjectCert!=null){var F=this.getParamByCerts(w.issuerCert,w.subjectCert,N);A=F.issname,b=F.isskey,I=F.sbjsn}else if(w.issname!=null&&w.isskey!=null&&w.sbjsn!=null)A=w.issname,b=w.isskey,I=w.sbjsn;else throw new Error("required param members not defined");var L=new h({name:N}),H=new n({hex:A}),_=new n({hex:b}),R=new s({hex:I}),P=new o({array:[L,H,_,R]});return this.hTLV=P.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.CertID,E.asn1.ASN1Object);E.asn1.ocsp.CertStatus=function(e){E.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var t=this.params;if(t.status=="good")return"8000";if(t.status=="unknown")return"8200";if(t.status=="revoked"){var r=[{gentime:{str:t.time}}];t.reason!=null&&r.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:t.reason}}}});var n={tag:"a1",explicit:!1,obj:{seq:r}};return E.asn1.ASN1Util.newObject({tag:n}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(t){this.params=t},e!==void 0&&this.setByParam(e)};pe(E.asn1.ocsp.CertStatus,E.asn1.ASN1Object);E.asn1.ocsp.Request=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.ocsp;if(s.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var u=[];if(this.dReqCert===null)throw"reqCert not set";u.push(this.dReqCert);var h=new n({array:u});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},typeof e<"u"){var o=new s.CertID(e);this.dReqCert=o}};pe(E.asn1.ocsp.Request,E.asn1.ASN1Object);E.asn1.ocsp.TBSRequest=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.ocsp;s.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(o){for(var u=[],h=0;h<o.length;h++){var g=new s.Request(o[0]);u.push(g)}this.dRequestList=u},this.tohex=function(){var o=[];if(this.version!==0)throw"not supported version: "+this.version;if(this.dRequestorName!==null)throw"requestorName not supported";var u=new n({array:this.dRequestList});if(o.push(u),this.dRequestExt!==null)throw"requestExtensions not supported";var h=new n({array:o});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0&&this.setRequestListByParam(e.reqList)};pe(E.asn1.ocsp.TBSRequest,E.asn1.ASN1Object);E.asn1.ocsp.OCSPRequest=function(e){var t=E,r=t.asn1,n=r.DERSequence,s=r.ocsp;if(s.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var u=[];if(this.dTbsRequest!==null)u.push(this.dTbsRequest);else throw"tbsRequest not set";if(this.dOptionalSignature!==null)throw"optionalSignature not supported";var h=new n({array:u});return this.hTLV=h.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},e!==void 0&&e.reqList!==void 0){var o=new s.TBSRequest(e);this.dTbsRequest=o}};pe(E.asn1.ocsp.OCSPRequest,E.asn1.ASN1Object);E.asn1.ocsp.OCSPUtil={};E.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,r){var n=E,s=n.asn1,o=s.ocsp;r===void 0&&(r=o.DEFAULT_HASH);var u={alg:r,issuerCert:e,subjectCert:t},h=new o.OCSPRequest({reqList:[u]});return h.tohex()};E.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=we,r=t.getVbyList,n=t.getVbyListEx,s=t.getIdxbyList;t.getIdxbyListEx;var o=t.getV,u={};try{var h=n(e,0,[0],"0a");u.responseStatus=parseInt(h,16)}catch{}if(u.responseStatus!==0)return u;try{var g=s(e,0,[1,0,1,0,0,2,0,1]);e.substr(g,2)==="80"?u.certStatus="good":e.substr(g,2)==="a1"?(u.certStatus="revoked",u.revocationTime=_t(r(e,g,[0]))):e.substr(g,2)==="82"&&(u.certStatus="unknown")}catch{}try{var d=s(e,0,[1,0,1,0,0,2,0,2]);u.thisUpdate=_t(o(e,d))}catch{}try{var x=s(e,0,[1,0,1,0,0,2,0,3]);e.substr(x,2)==="a0"&&(u.nextUpdate=_t(r(e,x,[0])))}catch{}return u};E.asn1.ocsp.OCSPParser=function(){var e=Error,t=Qe,r=new t,n=we,s=n.getV,o=n.getTLV,u=n.getIdxbyList,h=n.getVbyList,g=n.getTLVbyList,d=n.getVbyListEx,x=n.getTLVbyListEx,v=n.getChildIdx;this.getOCSPRequest=function(y){var S=v(y,0);if(S.length!=1&&S.length!=2)throw new e("wrong number elements: "+S.length);var w=this.getTBSRequest(o(y,S[0]));return w},this.getTBSRequest=function(y){var S={},w=x(y,0,[0],"30");S.array=this.getRequestList(w);var A=x(y,0,["[2]",0],"30");return A!=null&&(S.ext=r.getExtParamArray(A)),S},this.getRequestList=function(y){for(var S=[],w=v(y,0),A=0;A<w.length;A++){var y=o(y,w[A]);S.push(this.getRequest(y))}return S},this.getRequest=function(y){var S=v(y,0);if(S.length!=1&&S.length!=2)throw new e("wrong number elements: "+S.length);var w=this.getCertID(o(y,S[0]));if(S.length==2){var A=u(y,0,[1,0]);w.ext=r.getExtParamArray(o(y,A))}return w},this.getCertID=function(y){var S=v(y,0);if(S.length!=4)throw new e("wrong number elements: "+S.length);var w=new t,A={};return A.alg=w.getAlgorithmIdentifierName(o(y,S[0])),A.issname=s(y,S[1]),A.isskey=s(y,S[2]),A.sbjsn=s(y,S[3]),A},this.getOCSPResponse=function(y){var S=v(y,0),w,A=s(y,S[0]),b=parseInt(A);if(S.length==1)return{resstatus:b};var I=g(y,0,[1,0]);return w=this.getResponseBytes(I),w.resstatus=b,w},this.getResponseBytes=function(y){var S=v(y,0),w,A=g(y,0,[1,0]);w=this.getBasicOCSPResponse(A);var b=s(y,S[0]);return w.restype=E.asn1.x509.OID.oid2name(Zc(b)),w},this.getBasicOCSPResponse=function(y){var S=v(y,0),w;w=this.getResponseData(o(y,S[0]));var A=new Qe;w.alg=A.getAlgorithmIdentifierName(o(y,S[1]));var b=s(y,S[2]);w.sighex=b.substr(2);var I=d(y,0,["[0]"]);if(I!=null){for(var N=v(I,0),F=[],L=0;L<N.length;L++){var H=o(I,N[L]);F.push(H)}w.certs=F}return w},this.getResponseData=function(y){var S=v(y,0),w=S.length,A={},b=0;y.substr(S[0],2)=="a0"&&b++,A.respid=this.getResponderID(o(y,S[b++]));var I=s(y,S[b++]);if(A.prodat=_t(I),A.array=this.getSingleResponseList(o(y,S[b++])),y.substr(S[w-1],2)=="a1"){var N=g(y,S[w-1],[0]),F=new Qe;A.ext=F.getExtParamArray(N)}return A},this.getResponderID=function(y){var S={};if(y.substr(0,2)=="a2"){var w=h(y,0,[0]);S.key=w}if(y.substr(0,2)=="a1"){var A=g(y,0,[0]),b=new Qe;S.name=b.getX500Name(A)}return S},this.getSingleResponseList=function(y){for(var S=v(y,0),w=[],A=0;A<S.length;A++){var b=this.getSingleResponse(o(y,S[A]));w.push(b)}return w},this.getSingleResponse=function(y){var S=v(y,0),w={},A=this.getCertID(o(y,S[0]));w.certid=A;var b=this.getCertStatus(o(y,S[1]));if(w.status=b,y.substr(S[2],2)=="18"){var I=s(y,S[2]);w.thisupdate=_t(I)}for(var N=3;N<S.length;N++){if(y.substr(S[N],2)=="a0"){var F=h(y,S[N],[0],"18");w.nextupdate=_t(F)}if(y.substr(S[N],2)=="a1"){var L=new Qe,H=g(y,0,[N,0]);w.ext=L.getExtParamArray(H)}}return w},this.getCertStatus=function(y){var S={};if(y=="8000")return{status:"good"};if(y=="8200")return{status:"unknown"};if(y.substr(0,2)=="a1"){S.status="revoked";var w=h(y,0,[0]),A=_t(w);S.time=A}return S}};var E;(typeof E>"u"||!E)&&(E={});(typeof E.lang>"u"||!E.lang)&&(E.lang={});E.lang.String=function(){};function Nv(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function _v(e){for(var t="",r=0;r<e.length;r++)t=t+String.fromCharCode(e[r]);return t}function Kc(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);n.length==1&&(n="0"+n),t=t+n}return t}function dn(e){return Kc(Nv(e))}function pb(e){return ji(dn(e))}function gb(e){return eo(ji(dn(e)))}function mb(e){return _v(Sv(Bl(e)))}function eo(e){return e=e.replace(/\=/g,""),e=e.replace(/\+/g,"-"),e=e.replace(/\//g,"_"),e}function Bl(e){return e.length%4==2?e=e+"==":e.length%4==3&&(e=e+"="),e=e.replace(/-/g,"+"),e=e.replace(/_/g,"/"),e}function Ir(e){return e.length%2==1&&(e="0"+e),eo(ji(e))}function Zt(e){return oo(Bl(e))}var Cl,ci;typeof Buffer=="function"?(Cl=function(e){return eo(Buffer.from(e,"utf8").toString("base64"))},ci=function(e){return Buffer.from(Bl(e),"base64").toString("utf8")}):(Cl=function(e){return Ir(qc(Yc(e)))},ci=function(e){return decodeURIComponent(Xc(Zt(e)))});function yb(e){return ji(qc(Yc(e)))}function vb(e){return decodeURIComponent(Xc(oo(e)))}function Wc(e){return qc(Yc(e)).toLowerCase()}function _t(e){try{return decodeURIComponent(Xc(e))}catch{return null}}function xb(e){return _t(wb(e))}function wb(e){for(var t=e.match(/.{1,2}/g),r=[],n=0;n<t.length;n++){var s=parseInt(t[n],16);161<=s&&s<=191?(r.push("c2"),r.push(t[n])):192<=s&&s<=255?(r.push("c3"),r.push((s-64).toString(16))):r.push(t[n])}return r.join("")}function vn(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function bi(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function J1(e){return ji(e)}function Eb(e){return Gc(J1(e),64)}function Gc(e,t){return e=e.replace(new RegExp("(.{"+t+"})","g"),`$1\r
`),e=e.replace(/\s+$/,""),e}function Dv(e){var t=e.replace(/[^0-9A-Za-z\/+=]*/g,""),r=oo(t);return r}function Sb(e,t){return"-----BEGIN "+t+`-----\r
`+Gc(e,64)+`\r
-----END `+t+`-----\r
`}function Gr(e,t){return"-----BEGIN "+t+`-----\r
`+Gc(J1(e),64)+`\r
-----END `+t+`-----\r
`}function hr(e,t){if(e.indexOf("-----BEGIN ")==-1)throw new Error("can't find PEM header");return t!==void 0?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),""),e=e.replace(new RegExp("-----END "+t+"-----[^]*$"),"")):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,""),e=e.replace(/-----END [^-]+-----[^]*$/,"")),Dv(e)}function Ab(e){return e.indexOf("-----BEGIN ")==-1||e.indexOf("-----END ")==-1?null:(e=e.replace(/^[\s\S]*?-----BEGIN [^-]+-----/m,""),e=e.replace(/-----END [\s\S]+$/m,""),e=e.replace(/\s+/g,""),e.match(/^[0-9a-zA-Z+/=]+$/)?e:null)}function Cb(e){if(e.length%2!=0)throw"input is not even length";if(e.match(/^[0-9A-Fa-f]+$/)==null)throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(n*2,2),16));return t}function Ib(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t}function e0(e){var t,r,n,s,o,u,h,g,d,x;if(e=Ov(e),x=e.match(/^(\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/),x)return t=parseInt(x[1]),r=parseInt(x[2])-1,n=parseInt(x[3]),s=parseInt(x[4]),o=parseInt(x[5]),u=parseInt(x[6]),h=0,g=x[7],g!==""&&(d=(g.substr(1)+"00").substr(0,3),h=parseInt(d)),Date.UTC(t,r,n,s,o,u,h);throw new Error("unsupported zulu format: "+e)}function bb(e){var t=new Date(e),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),s=("00"+t.getUTCDate()).slice(-2),o=("00"+t.getUTCHours()).slice(-2),u=("00"+t.getUTCMinutes()).slice(-2),h=("00"+t.getUTCSeconds()).slice(-2),g=("000"+t.getUTCMilliseconds()).slice(-3);return g=g.replace(/0+$/,""),g=g!=""?"."+g:g,r+n+s+o+u+h+g+"Z"}function Rv(e){return Math.round(e0(e)/1e3)}function Tb(e){return new Date(e0(e))}function Nb(e,t,r){var n,s=e.getUTCFullYear();if(t){if(s<1950||2049<s)throw"not proper year for UTCTime: "+s;n=(""+s).slice(-2)}else n=("000"+s).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var o=e.getUTCMilliseconds();o!==0&&(o=("00"+o).slice(-3),o=o.replace(/0+$/g,""),n+="."+o)}return n+="Z",n}function Ov(e){return e.match(/^[0-9]{12}Z$/)||e.match(/^[0-9]{12}[.][0-9]*Z$/)?e.match(/^[0-4]/)?"20"+e:"19"+e:e}function qc(e){return e.replace(/%/g,"")}function Xc(e){return e.replace(/(..)/g,"%$1")}function Jh(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;e=e.toLowerCase();var r=e.split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2);e=e.replace("::",n);var s=e.split(":");if(s.length!=8)throw t;for(var o=0;o<8;o++)s[o]=("0000"+s[o]).slice(-4);return s.join("")}function ed(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);e=e.toLowerCase();var t=e.match(/.{1,4}/g);t=t.map(function(s){return s.replace(/^0+/,"")}),t=t.map(function(s){return s==""?"0":s}),e=":"+t.join(":")+":";var r=e.match(/:(0:){2,}/g);if(r==null)return e.slice(1,-1);var n=r.sort().slice(-1)[0];return e=e.replace(n.substr(0,n.length-1),":"),e.substr(0,2)!="::"&&(e=e.substr(1)),e.substr(-2,2)!="::"&&(e=e.substr(0,e.length-1)),e}function dc(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(e.length==8){var r;try{return r=parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16),r}catch{throw t}}else if(e.length==16)try{return dc(e.substr(0,8))+"/"+Lg(e.substr(8))}catch{throw t}else{if(e.length==32)return ed(e);if(e.length==64){try{return ed(e.substr(0,32))+"/"+Lg(e.substr(32))}catch{throw t}return}else return e}}function Lg(e){var t=new Error("malformed mask"),r;try{r=new ee(e,16).toString(2)}catch{throw t}if(!r.match(/^1*0*$/))throw t;return r.replace(/0+$/,"").length}function t0(e){var t=new Error("malformed IP address");if(e=e.toLowerCase(e),!e.match(/^[0-9a-f.:/]+$/))throw t;if(e.match(/^[0-9.]+$/)){var r=e.split(".");if(r.length!==4)throw t;var n="";try{for(var s=0;s<4;s++){var o=parseInt(r[s]);n+=("0"+o.toString(16)).slice(-2)}return n}catch{throw t}}else if(e.match(/^[0-9.]+\/[0-9]+$/)){var u=e.split("/");return t0(u[0])+kg(parseInt(u[1]),32)}else{if(e.match(/^[0-9a-f:]+$/)&&e.indexOf(":")!==-1)return Jh(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&e.indexOf(":")!==-1){var u=e.split("/");return Jh(u[0])+kg(parseInt(u[1]),128)}else throw t}}function kg(e,t){if(t==32&&e==0)return"00000000";if(t==128&&e==0)return"00000000000000000000000000000000";var r=Array(e+1).join("1")+Array(t-e+1).join("0");return new ee(r,2).toString(16)}function r0(e){function t(s){var o=parseInt(s.substr(0,2),16),u=parseInt(s.substr(2),16);if(o==0&u<128)return String.fromCharCode(u);if(o<8){var h=192|(o&7)<<3|(u&192)>>6,g=128|u&63;return _t(h.toString(16)+g.toString(16))}var h=224|(o&240)>>4,g=128|(o&15)<<2|(u&192)>>6,d=128|u&63;return _t(h.toString(16)+g.toString(16)+d.toString(16))}var r=e.match(/.{4}/g),n=r.map(t);return n.join("")}function Yc(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)t[n]=="%"?(r=r+t.substr(n,3),n=n+2):r=r+"%"+dn(t[n]);return r}function _b(e){return e=e.replace(/\r\n/mg,`
`),e}function Db(e){return e=e.replace(/\r\n/mg,`
`),e=e.replace(/\n/mg,`\r
`),e}E.lang.String.isInteger=function(e){return e.match(/^[0-9]+$/)?!0:!!e.match(/^-[0-9]+$/)};E.lang.String.isHex=function(e){return Fv(e)};function Fv(e){return!!(e.length%2==0&&(e.match(/^[0-9a-f]+$/)||e.match(/^[0-9A-F]+$/)))}E.lang.String.isBase64=function(e){return e=e.replace(/\s+/g,""),!!(e.match(/^[0-9A-Za-z+\/]+={0,3}$/)&&e.length%4==0)};E.lang.String.isBase64URL=function(e){return e.match(/[+/=]/)?!1:(e=Bl(e),E.lang.String.isBase64(e))};function n0(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}E.lang.String.isIntegerArray=function(e){return e=e.replace(/\s+/g,""),!!e.match(/^\[[0-9,]+\]$/)};E.lang.String.isPrintable=function(e){return e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)!==null};E.lang.String.isIA5=function(e){return e.match(/^[\x20-\x21\x23-\x7f]*$/)!==null};E.lang.String.isMail=function(e){return e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)!==null};function td(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}function Rb(e){e=e.replace(/^\s*\[\s*/,""),e=e.replace(/\s*\]\s*$/,""),e=e.replace(/\s*/g,"");try{var t=e.split(/,/).map(function(r,n,s){var o=parseInt(r);if(o<0||255<o)throw"integer not in range 0-255";var u=("00"+o.toString(16)).slice(-2);return u}).join("");return t}catch(r){throw"malformed integer array string: "+r}}var Ob=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1};function Pv(e){var t=function(h){var g=h.toString(16);return g.length==1&&(g="0"+g),g},r=function(h){var g="",d=parseInt(h,10),x=d.toString(2),v=7-x.length%7;v==7&&(v=0);for(var y="",S=0;S<v;S++)y+="0";x=y+x;for(var S=0;S<x.length-1;S+=7){var w=x.substr(S,7);S!=x.length-7&&(w="1"+w),g+=t(parseInt(w,2))}return g};try{if(!e.match(/^[0-9.]+$/))return null;var n="",s=e.split("."),o=parseInt(s[0],10)*40+parseInt(s[1],10);n+=t(o),s.splice(0,2);for(var u=0;u<s.length;u++)n+=r(s[u]);return n}catch{return null}}function Zc(e){if(!Fv(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var s=e.substr(2),o=[],u=0;u<s.length/2;u++)o.push(parseInt(s.substr(u*2,2),16));for(var h=[],g="",u=0;u<o.length;u++)o[u]&128?g=g+pc((o[u]&127).toString(2),7):(g=g+pc((o[u]&127).toString(2),7),h.push(new String(parseInt(g,2))),g="");var d=t.join(".");return h.length>0&&(d=d+"."+h.join(".")),d}catch{return null}}function Mv(e){var t=new ee(String(e),10);return Ll(t)}function Ll(e){var t=e.toString(16);if(t.substr(0,1)!="-")return t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t),t;var r=t.substr(1),n=r.length;n%2==1?n+=1:t.match(/^[0-7]/)||(n+=2);for(var s="",o=0;o<n;o++)s+="f";var u=new ee(s,16),h=u.xor(e).add(ee.ONE);return t=h.toString(16).replace(/^-/,""),t}var pc=function(e,t,r){return r==null&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function Bv(e){if(e.length%2!=0||(e=e.toLowerCase(),e.match(/^[0-9a-f]+$/)==null))return-1;try{var t=e.substr(0,2);if(t=="00")return parseInt(e.substr(2),16);var r=parseInt(t,16);if(r>7)return-1;var n=e.substr(2),s=parseInt(n,16).toString(2);s=="0"&&(s="00000000"),s=s.slice(0,0-r);var o=parseInt(s,2);return o==NaN?-1:o}catch{return-1}}function Lv(e){if(typeof e!="number"||e<0)return null;var t=Number(e).toString(2),r=8-t.length%8;r==8&&(r=0),t=t+pc("",r,"0");var n=parseInt(t,2).toString(16);n.length%2==1&&(n="0"+n);var s="0"+r;return s+n}function kv(e){if(typeof e!="string"||e.length%2!=0||!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var r=e.substr(2),n="",s=0;s<r.length;s+=2){var o=r.substr(s,2),u=parseInt(o,16).toString(2);u=("0000000"+u).slice(-8),n+=u}return n.substr(0,n.length-t)}catch{return null}}function Fb(e){if(typeof e!="string"||e.match(/^[01]+$/)==null)return null;try{var t=parseInt(e,2);return Lv(t)}catch{return null}}function gc(e,t){for(var r=0,n=0;n<e.length;n++)r|=1<<t[e[n]];for(var s=r.toString(2),o="",n=s.length-1;n>=0;n--)o+=s[n];return o}function jt(e,n,r){if(typeof e=="object"){for(var n=String(n).split("."),s=0;s<n.length&&e;s++){var o=n[s];o.match(/^[0-9]+$/)&&(o=parseInt(o)),e=e[o]}return e||e===!1?e:r}}function pe(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:Te.algo.MD5,sha1:Te.algo.SHA1,sha224:Te.algo.SHA224,sha256:Te.algo.SHA256,sha384:Te.algo.SHA384,sha512:Te.algo.SHA512,ripemd160:Te.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(typeof this.DIGESTINFOHEAD[t]>"u")throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),s=r/4;if(n.length+22>s)throw"key is too short for SigAlg: keylen="+r+","+t;for(var o="0001",u="00"+n,h="",g=s-o.length-u.length,d=0;d<g;d+=2)h+="ff";var x=o+h+u;return x},this.hashString=function(e,t){var r=new E.crypto.MessageDigest({alg:t});return r.digestString(e)},this.hashHex=function(e,t){var r=new E.crypto.MessageDigest({alg:t});return r.digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof rt||e instanceof E.crypto.DSA||e instanceof E.crypto.ECDSA}};E.crypto.Util.md5=function(e){var t=new E.crypto.MessageDigest({alg:"md5",prov:"cryptojs"});return t.digestString(e)};E.crypto.Util.ripemd160=function(e){var t=new E.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"});return t.digestString(e)};E.crypto.Util.SECURERANDOMGEN=new co;E.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return E.crypto.Util.SECURERANDOMGEN.nextBytes(t),Kc(t)};E.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new ee(E.crypto.Util.getRandomHexOfNbytes(e),16)};E.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=(e-t)/8,n=new Array(r+1);return E.crypto.Util.SECURERANDOMGEN.nextBytes(n),n[0]=(255<<t&255^255)&n[0],Kc(n)};E.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new ee(E.crypto.Util.getRandomHexOfNbits(e),16)};E.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=E.crypto.Util.getRandomBigIntegerOfNbits(t);if(e.compareTo(r)!=-1)return r}};E.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(r==1)throw"biMin is greater than biMax";if(r==0)return e;var n=t.subtract(e),s=E.crypto.Util.getRandomBigIntegerZeroToMax(n);return s.add(e)};E.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(t,r){if(t=E.crypto.MessageDigest.getCanonicalAlgName(t),t!==null&&r===void 0&&(r=E.crypto.Util.DEFAULTPROVIDER[t]),":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(t)!=-1&&r=="cryptojs"){try{this.md=E.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[t].create()}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(n){this.md.update(n)},this.updateHex=function(n){var s=Te.enc.Hex.parse(n);this.md.update(s)},this.digest=function(){var n=this.md.finalize();return n.toString(Te.enc.Hex)},this.digestString=function(n){return this.updateString(n),this.digest()},this.digestHex=function(n){return this.updateHex(n),this.digest()}}if(":sha256:".indexOf(t)!=-1&&r=="sjcl"){try{this.md=new sjcl.hash.sha256}catch(n){throw"setAlgAndProvider hash alg set fail alg="+t+"/"+n}this.updateString=function(n){this.md.update(n)},this.updateHex=function(n){var s=sjcl.codec.hex.toBits(n);this.md.update(s)},this.digest=function(){var n=this.md.finalize();return sjcl.codec.hex.fromBits(n)},this.digestString=function(n){return this.updateString(n),this.digest()},this.digestHex=function(n){return this.updateHex(n),this.digest()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},e!==void 0&&e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))};E.crypto.MessageDigest.getCanonicalAlgName=function(e){return typeof e=="string"&&(e=e.toLowerCase(),e=e.replace(/-/,"")),e};E.crypto.MessageDigest.getHashLength=function(e){var t=E.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(t.HASHLENGTH[r]===void 0)throw"not supported algorithm: "+e;return t.HASHLENGTH[r]};E.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20};E.crypto.Mac=function(e){this.setAlgAndProvider=function(t,r){if(t=t.toLowerCase(),t==null&&(t="hmacsha1"),t=t.toLowerCase(),t.substr(0,4)!="hmac")throw"setAlgAndProvider unsupported HMAC alg: "+t;r===void 0&&(r=E.crypto.Util.DEFAULTPROVIDER[t]),this.algProv=t+"/"+r;var n=t.substr(4);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(n)!=-1&&r=="cryptojs"){try{var s=E.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[n];this.mac=Te.algo.HMAC.create(s,this.pass)}catch(o){throw"setAlgAndProvider hash alg set fail hashAlg="+n+"/"+o}this.updateString=function(o){this.mac.update(o)},this.updateHex=function(o){var u=Te.enc.Hex.parse(o);this.mac.update(u)},this.doFinal=function(){var o=this.mac.finalize();return o.toString(Te.enc.Hex)},this.doFinalString=function(o){return this.updateString(o),this.doFinal()},this.doFinalHex=function(o){return this.updateHex(o),this.doFinal()}}},this.updateString=function(t){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(t){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(t){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(t){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(t){if(typeof t=="string"){var r=t;(t.length%2==1||!t.match(/^[0-9A-Fa-f]+$/))&&(r=bi(t)),this.pass=Te.enc.Hex.parse(r);return}if(typeof t!="object")throw"KJUR.crypto.Mac unsupported password type: "+t;var r=null;if(t.hex!==void 0){if(t.hex.length%2!=0||!t.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+t.hex;r=t.hex}if(t.utf8!==void 0&&(r=Wc(t.utf8)),t.rstr!==void 0&&(r=bi(t.rstr)),t.b64!==void 0&&(r=oo(t.b64)),t.b64u!==void 0&&(r=Zt(t.b64u)),r==null)throw"KJUR.crypto.Mac unsupported password type: "+t;this.pass=Te.enc.Hex.parse(r)},e!==void 0&&(e.pass!==void 0&&this.setPassword(e.pass),e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0&&(this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))};E.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var r=this.algName.match(/^(.+)with(.+)$/);r&&(this.mdAlgName=r[1].toLowerCase(),this.pubkeyAlgName=r[2].toLowerCase(),this.pubkeyAlgName=="rsaandmgf1"&&this.mdAlgName=="sha"&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(r,n){for(var s="",o=n/4-r.length,u=0;u<o;u++)s=s+"0";return s+r},this.setAlgAndProvider=function(r,n){if(this._setAlgNames(),n!="cryptojs/jsrsa")throw new Error("provider not supported: "+n);if(":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)!=-1){try{this.md=new E.crypto.MessageDigest({alg:this.mdAlgName})}catch(s){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+s)}this.init=function(s,o){var u=null;try{o===void 0?u=gt.getKey(s):u=gt.getKey(s,o)}catch(h){throw"init failed:"+h}if(u.isPrivate===!0)this.prvKey=u,this.state="SIGN";else if(u.isPublic===!0)this.pubKey=u,this.state="VERIFY";else throw"init failed.:"+u},this.updateString=function(s){this.md.updateString(s)},this.updateHex=function(s){this.md.updateHex(s)},this.sign=function(){if(this.sHashHex=this.md.digest(),this.prvKey===void 0&&this.ecprvhex!==void 0&&this.eccurvename!==void 0&&E.crypto.ECDSA!==void 0&&(this.prvKey=new E.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof rt&&this.pubkeyAlgName==="rsaandmgf1")this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof rt&&this.pubkeyAlgName==="rsa")this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof E.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else if(this.prvKey instanceof E.crypto.DSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;return this.hSign},this.signString=function(s){return this.updateString(s),this.sign()},this.signHex=function(s){return this.updateHex(s),this.sign()},this.verify=function(s){if(this.sHashHex=this.md.digest(),this.pubKey===void 0&&this.ecpubhex!==void 0&&this.eccurvename!==void 0&&E.crypto.ECDSA!==void 0&&(this.pubKey=new E.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof rt&&this.pubkeyAlgName==="rsaandmgf1")return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,s,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof rt&&this.pubkeyAlgName==="rsa")return this.pubKey.verifyWithMessageHash(this.sHashHex,s);if(E.crypto.ECDSA!==void 0&&this.pubKey instanceof E.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,s);if(E.crypto.DSA!==void 0&&this.pubKey instanceof E.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,s);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(r,n){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(r){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(r){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(r){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(r){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(r){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,e!==void 0&&(e.alg!==void 0&&(this.algName=e.alg,e.prov===void 0?this.provName=E.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),e.psssaltlen!==void 0&&(this.pssSaltLen=e.psssaltlen),e.prvkeypem!==void 0)){if(e.prvkeypas!==void 0)throw"both prvkeypem and prvkeypas parameters not supported";try{var t=gt.getKey(e.prvkeypem);this.init(t)}catch(r){throw"fatal error to load pem private key: "+r}}};E.crypto.Cipher=function(e){};E.crypto.Cipher.encrypt=function(e,t,r,n){if(jt(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var s=t,o=e;jt(n,"key")!=null&&(s=n.key),jt(n,"enc")!=null&&(hEnc=n.enc);var u=Te.enc.Hex.parse(s),h=Te.enc.Hex.parse(o),g=Te.enc.Hex.parse(n.iv),d;if(r=="des-EDE3-CBC")d=Te.TripleDES.encrypt(h,u,{iv:g});else if(r=="aes128-CBC"||r=="aes256-CBC")d=Te.AES.encrypt(h,u,{iv:g});else throw new Error("unsupported algorithm: "+r);return d+""}else throw new Error("Cipher.encrypt: unsupported key or algorithm")};E.crypto.Cipher.decrypt=function(e,t,r,n){if(jt(n,"enclag")!=null&&(r=n.encalg),typeof r=="string"&&r.substr(-4)=="-CBC"){var s=t,o=e;jt(n,"key")!=null&&(s=n.key),jt(n,"enc")!=null&&(o=n.enc);var u=Te.enc.Hex.parse(s),h=Te.enc.Hex.parse(o),g=Te.enc.Hex.parse(n.iv),d;if(r=="des-EDE3-CBC")d=Te.TripleDES.decrypt({ciphertext:h},u,{iv:g});else if(r=="aes128-CBC"||r=="aes256-CBC")d=Te.AES.decrypt({ciphertext:h},u,{iv:g});else throw new Error("unsupported algorithm: "+r);return Te.enc.Hex.stringify(d)}else throw new Error("Cipher.decrypt: unsupported key or algorithm")};E.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}};(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.ECDSA=function(e){var t="secp256r1",r=Error,n=ee,s=It,o=E.crypto.ECDSA,u=E.crypto.ECParameterDB,h=o.getName,g=we,d=g.getVbyListEx,x=g.isASN1HEX,v=new co;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(y){return new n(y.bitLength(),v).mod(y.subtract(n.ONE)).add(n.ONE)},this.setNamedCurve=function(y){this.ecparams=u.getByName(y),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=y},this.setPrivateKeyHex=function(y){this.isPrivate=!0,this.prvKeyHex=y},this.setPublicKeyHex=function(y){this.isPublic=!0,this.pubKeyHex=y},this.getPublicKeyXYHex=function(){var y=this.pubKeyHex;if(y.substr(0,2)!=="04")throw"this method supports uncompressed format(04) only";var S=this.ecparams.keycharlen;if(y.length!==2+S*2)throw"malformed public key hex length";var w={};return w.x=y.substr(2,S),w.y=y.substr(2+S),w},this.getShortNISTPCurveName=function(){var y=this.curveName;return y==="secp256r1"||y==="NIST P-256"||y==="P-256"||y==="prime256v1"?"P-256":y==="secp384r1"||y==="NIST P-384"||y==="P-384"?"P-384":y==="secp521r1"||y==="NIST P-521"||y==="P-521"?"P-521":null},this.generateKeyPairHex=function(){var y=this.ecparams.n,S=this.getBigRandom(y),w=this.ecparams.keycharlen,A=("0000000000"+S.toString(16)).slice(-w);this.setPrivateKeyHex(A);var b=this.generatePublicKeyHex();return{ecprvhex:A,ecpubhex:b}},this.generatePublicKeyHex=function(){var y=new n(this.prvKeyHex,16),S=this.ecparams.G.multiply(y),w=S.getX().toBigInteger(),A=S.getY().toBigInteger(),b=this.ecparams.keycharlen,I=("0000000000"+w.toString(16)).slice(-b),N=("0000000000"+A.toString(16)).slice(-b),F="04"+I+N;return this.setPublicKeyHex(F),F},this.signWithMessageHash=function(y){return this.signHex(y,this.prvKeyHex)},this.signHex=function(y,S){var w=new n(S,16),A=this.ecparams.n,b=new n(y.substring(0,this.ecparams.keycharlen),16);do var I=this.getBigRandom(A),N=this.ecparams.G,F=N.multiply(I),L=F.getX().toBigInteger().mod(A);while(L.compareTo(n.ZERO)<=0);var H=I.modInverse(A).multiply(b.add(w.multiply(L))).mod(A);return o.biRSSigToASN1Sig(L,H)},this.sign=function(y,S){var w=S,A=this.ecparams.n,b=n.fromByteArrayUnsigned(y);do var I=this.getBigRandom(A),N=this.ecparams.G,F=N.multiply(I),L=F.getX().toBigInteger().mod(A);while(L.compareTo(ee.ZERO)<=0);var H=I.modInverse(A).multiply(b.add(w.multiply(L))).mod(A);return this.serializeSig(L,H)},this.verifyWithMessageHash=function(y,S){return this.verifyHex(y,S,this.pubKeyHex)},this.verifyHex=function(y,S,w){try{var A,b,I=o.parseSigHex(S);A=I.r,b=I.s;var N=s.decodeFromHex(this.ecparams.curve,w),F=new n(y.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(F,A,b,N)}catch{return!1}},this.verify=function(y,S,w){var A,b;if(Bitcoin.Util.isArray(S)){var I=this.parseSig(S);A=I.r,b=I.s}else if(typeof S=="object"&&S.r&&S.s)A=S.r,b=S.s;else throw"Invalid value for signature";var N;if(w instanceof It)N=w;else if(Bitcoin.Util.isArray(w))N=s.decodeFrom(this.ecparams.curve,w);else throw"Invalid format for pubkey value, must be byte array or ECPointFp";var F=n.fromByteArrayUnsigned(y);return this.verifyRaw(F,A,b,N)},this.verifyRaw=function(y,S,w,A){var b=this.ecparams.n,I=this.ecparams.G;if(S.compareTo(n.ONE)<0||S.compareTo(b)>=0||w.compareTo(n.ONE)<0||w.compareTo(b)>=0)return!1;var N=w.modInverse(b),F=y.multiply(N).mod(b),L=S.multiply(N).mod(b),H=I.multiply(F).add(A.multiply(L)),_=H.getX().toBigInteger().mod(b);return _.equals(S)},this.serializeSig=function(y,S){var w=y.toByteArraySigned(),A=S.toByteArraySigned(),b=[];return b.push(2),b.push(w.length),b=b.concat(w),b.push(2),b.push(A.length),b=b.concat(A),b.unshift(b.length),b.unshift(48),b},this.parseSig=function(y){var S;if(y[0]!=48)throw new Error("Signature not a valid DERSequence");if(S=2,y[S]!=2)throw new Error("First element in signature must be a DERInteger");var w=y.slice(S+2,S+2+y[S+1]);if(S+=2+y[S+1],y[S]!=2)throw new Error("Second element in signature must be a DERInteger");var A=y.slice(S+2,S+2+y[S+1]);S+=2+y[S+1];var b=n.fromByteArrayUnsigned(w),I=n.fromByteArrayUnsigned(A);return{r:b,s:I}},this.parseSigCompact=function(y){if(y.length!==65)throw"Signature has the wrong length";var S=y[0]-27;if(S<0||S>7)throw"Invalid signature type";var w=this.ecparams.n,A=n.fromByteArrayUnsigned(y.slice(1,33)).mod(w),b=n.fromByteArrayUnsigned(y.slice(33,65)).mod(w);return{r:A,s:b,i:S}},this.readPKCS5PrvKeyHex=function(y){if(x(y)===!1)throw new Error("not ASN.1 hex string");var S,w,A;try{S=d(y,0,["[0]",0],"06"),w=d(y,0,[1],"04");try{A=d(y,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=h(S),this.curveName===void 0)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(A),this.setPrivateKeyHex(w),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(y){if(x(y)===!1)throw new r("not ASN.1 hex string");var S,w,A,b;try{S=d(y,0,[1,0],"06"),w=d(y,0,[1,1],"06"),A=d(y,0,[2,0,1],"04");try{b=d(y,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new r("malformed PKCS#8 plain ECC private key")}if(this.curveName=h(w),this.curveName===void 0)throw new r("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(b),this.setPrivateKeyHex(A),this.isPublic=!1},this.readPKCS8PubKeyHex=function(y){if(x(y)===!1)throw new r("not ASN.1 hex string");var S,w,A;try{S=d(y,0,[0,0],"06"),w=d(y,0,[0,1],"06"),A=d(y,0,[1],"03")}catch{throw new r("malformed PKCS#8 ECC public key")}if(this.curveName=h(w),this.curveName===null)throw new r("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(A)},this.readCertPubKeyHex=function(y,S){if(x(y)===!1)throw new r("not ASN.1 hex string");var w,A;try{w=d(y,0,[0,5,0,1],"06"),A=d(y,0,[0,5,1],"03")}catch{throw new r("malformed X.509 certificate ECC public key")}if(this.curveName=h(w),this.curveName===null)throw new r("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(A)},e!==void 0&&e.curve!==void 0&&(this.curveName=e.curve),this.curveName===void 0&&(this.curveName=t),this.setNamedCurve(this.curveName),e!==void 0&&(e.prv!==void 0&&this.setPrivateKeyHex(e.prv),e.pub!==void 0&&this.setPublicKeyHex(e.pub))};E.crypto.ECDSA.parseSigHex=function(e){var t=E.crypto.ECDSA.parseSigHexInHexRS(e),r=new ee(t.r,16),n=new ee(t.s,16);return{r,s:n}};E.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=we,r=t.getChildIdx,n=t.getV;if(t.checkStrictDER(e,0),e.substr(0,2)!="30")throw new Error("signature is not a ASN.1 sequence");var s=r(e,0);if(s.length!=2)throw new Error("signature shall have two elements");var o=s[0],u=s[1];if(e.substr(o,2)!="02")throw new Error("1st item not ASN.1 integer");if(e.substr(u,2)!="02")throw new Error("2nd item not ASN.1 integer");var h=n(e,o),g=n(e,u);return{r:h,s:g}};E.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=E.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if(r.length>=130&&r.length<=134){if(r.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");r.substr(0,2)=="00"&&(r=r.substr(2)),n.substr(0,2)=="00"&&(n=n.substr(2));var s=Math.max(r.length,n.length);return r=("000000"+r).slice(-s),n=("000000"+n).slice(-s),r+n}if(r.substr(0,2)=="00"&&r.length%32==2&&(r=r.substr(2)),n.substr(0,2)=="00"&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return r+n};E.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return E.crypto.ECDSA.hexRSSigToASN1Sig(t,r)};E.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new ee(e,16),n=new ee(t,16);return E.crypto.ECDSA.biRSSigToASN1Sig(r,n)};E.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=E.asn1,n=new r.DERInteger({bigint:e}),s=new r.DERInteger({bigint:t}),o=new r.DERSequence({array:[n,s]});return o.tohex()};E.crypto.ECDSA.getName=function(e){return e==="2b8104001f"?"secp192k1":e==="2a8648ce3d030107"?"secp256r1":e==="2b8104000a"?"secp256k1":e==="2b81040021"?"secp224r1":e==="2b81040022"?"secp384r1":e==="2b81040023"?"secp521r1":"|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)!==-1?"secp256r1":"|secp256k1|".indexOf(e)!==-1?"secp256k1":"|secp224r1|NIST P-224|P-224|".indexOf(e)!==-1?"secp224r1":"|secp384r1|NIST P-384|P-384|".indexOf(e)!==-1?"secp384r1":"|secp521r1|NIST P-521|P-521|".indexOf(e)!==-1?"secp521r1":null};(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.ECParameterDB=new function(){var e={},t={};function r(n){return new ee(n,16)}this.getByName=function(n){var s=n;if(typeof t[s]<"u"&&(s=t[n]),typeof e[s]<"u")return e[s];throw"unregistered EC curve name: "+s},this.regist=function(n,s,o,u,h,g,d,x,v,y,S,w){e[n]={};var A=r(o),b=r(u),I=r(h),N=r(g),F=r(d),L=new Wi(A,b,I),H=L.decodePointHex("04"+x+v);e[n].name=n,e[n].keylen=s,e[n].keycharlen=Math.ceil(s/8)*2,e[n].curve=L,e[n].G=H,e[n].n=N,e[n].h=F,e[n].oid=S,e[n].info=w;for(var _=0;_<y.length;_++)t[y[_]]=n}};E.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field");E.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field");E.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field");E.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]);E.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]);E.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]);E.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]);E.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]);E.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]);E.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);(typeof E>"u"||!E)&&(E={});(typeof E.crypto>"u"||!E.crypto)&&(E.crypto={});E.crypto.DSA=function(){var e=we;e.getVbyList;var t=e.getVbyListEx,r=e.isASN1HEX,n=ee;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(s,o,u,h,g){this.isPrivate=!0,this.p=s,this.q=o,this.g=u,this.y=h,this.x=g},this.setPrivateHex=function(s,o,u,h,g){var d,x,v,y,S;d=new ee(s,16),x=new ee(o,16),v=new ee(u,16),typeof h=="string"&&h.length>1?y=new ee(h,16):y=null,S=new ee(g,16),this.setPrivate(d,x,v,y,S)},this.setPublic=function(s,o,u,h){this.isPublic=!0,this.p=s,this.q=o,this.g=u,this.y=h,this.x=null},this.setPublicHex=function(s,o,u,h){var g,d,x,v;g=new ee(s,16),d=new ee(o,16),x=new ee(u,16),v=new ee(h,16),this.setPublic(g,d,x,v)},this.signWithMessageHash=function(s){var o=this.p,u=this.q,h=this.g;this.y;var g=this.x,d=E.crypto.Util.getRandomBigIntegerMinToMax(ee.ONE.add(ee.ONE),u.subtract(ee.ONE)),x=s.substr(0,u.bitLength()/4),v=new ee(x,16),y=h.modPow(d,o).mod(u),S=d.modInverse(u).multiply(v.add(g.multiply(y))).mod(u),w=E.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:y}},{int:{bigint:S}}]});return w},this.verifyWithMessageHash=function(s,o){var u=this.p,h=this.q,g=this.g,d=this.y,x=this.parseASN1Signature(o),v=x[0],y=x[1],S=s.substr(0,h.bitLength()/4),w=new ee(S,16);if(ee.ZERO.compareTo(v)>0||v.compareTo(h)>0||ee.ZERO.compareTo(y)>=0||y.compareTo(h)>0)throw"invalid DSA signature";var A=y.modInverse(h),b=w.multiply(A).mod(h),I=v.multiply(A).mod(h),N=g.modPow(b,u).multiply(d.modPow(I,u)).mod(u).mod(h);return N.compareTo(v)==0},this.parseASN1Signature=function(s){try{var o=new n(t(s,0,[0],"02"),16),u=new n(t(s,0,[1],"02"),16);return[o,u]}catch{throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(s){var o,u,h,g,d;if(r(s)===!1)throw new Error("not ASN.1 hex string");try{o=t(s,0,[1],"02"),u=t(s,0,[2],"02"),h=t(s,0,[3],"02"),g=t(s,0,[4],"02"),d=t(s,0,[5],"02")}catch{throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(o,u,h,g,d)},this.readPKCS8PrvKeyHex=function(s){var o,u,h,g;if(r(s)===!1)throw new Error("not ASN.1 hex string");try{o=t(s,0,[1,1,0],"02"),u=t(s,0,[1,1,1],"02"),h=t(s,0,[1,1,2],"02"),g=t(s,0,[2,0],"02")}catch{throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(o,u,h,null,g)},this.readPKCS8PubKeyHex=function(s){var o,u,h,g;if(r(s)===!1)throw new Error("not ASN.1 hex string");try{o=t(s,0,[0,1,0],"02"),u=t(s,0,[0,1,1],"02"),h=t(s,0,[0,1,2],"02"),g=t(s,0,[1,0],"02")}catch{throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(o,u,h,g)},this.readCertPubKeyHex=function(s,o){var u,h,g,d;if(r(s)===!1)throw new Error("not ASN.1 hex string");try{u=t(s,0,[0,5,0,1,0],"02"),h=t(s,0,[0,5,0,1,1],"02"),g=t(s,0,[0,5,0,1,2],"02"),d=t(s,0,[0,5,1,0],"02")}catch{throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(u,h,g,d)}};var gt=function(){var e=function(w,A,b){return n(Te.AES,w,A,b)},t=function(w,A,b){return n(Te.TripleDES,w,A,b)},r=function(w,A,b){return n(Te.DES,w,A,b)},n=function(w,A,b,I){var N=Te.enc.Hex.parse(A),F=Te.enc.Hex.parse(b),L=Te.enc.Hex.parse(I),H={};H.key=F,H.iv=L,H.ciphertext=N;var _=w.decrypt(H,F,{iv:L});return Te.enc.Hex.stringify(_)},s=function(w,A,b){return h(Te.AES,w,A,b)},o=function(w,A,b){return h(Te.TripleDES,w,A,b)},u=function(w,A,b){return h(Te.DES,w,A,b)},h=function(w,A,b,I){var N=Te.enc.Hex.parse(A),F=Te.enc.Hex.parse(b),L=Te.enc.Hex.parse(I),H=w.encrypt(N,F,{iv:L}),_=Te.enc.Hex.parse(H.toString()),R=Te.enc.Base64.stringify(_);return R},g={"AES-256-CBC":{proc:e,eproc:s,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:s,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:s,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:t,eproc:o,keylen:24,ivlen:8},"DES-CBC":{proc:r,eproc:u,keylen:8,ivlen:8}},d=function(w){var A=Te.lib.WordArray.random(w),b=Te.enc.Hex.stringify(A);return b},x=function(w){var A={},b=w.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));b&&(A.cipher=b[1],A.ivsalt=b[2]);var I=w.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));I&&(A.type=I[1]);var N=-1,F=0;w.indexOf(`\r
\r
`)!=-1&&(N=w.indexOf(`\r
\r
`),F=2),w.indexOf(`

`)!=-1&&(N=w.indexOf(`

`),F=1);var L=w.indexOf("-----END");if(N!=-1&&L!=-1){var H=w.substring(N+F*2,L-F);H=H.replace(/\s+/g,""),A.data=H}return A},v=function(w,A,b){for(var I=b.substring(0,16),N=Te.enc.Hex.parse(I),F=Te.enc.Utf8.parse(A),L=g[w].keylen+g[w].ivlen,H="",_=null;;){var R=Te.algo.MD5.create();if(_!=null&&R.update(_),R.update(F),R.update(N),_=R.finalize(),H=H+Te.enc.Hex.stringify(_),H.length>=L*2)break}var P={};return P.keyhex=H.substr(0,g[w].keylen*2),P.ivhex=H.substr(g[w].keylen*2,g[w].ivlen*2),P},y=function(w,A,b,I){var N=Te.enc.Base64.parse(w),F=Te.enc.Hex.stringify(N),L=g[A].proc,H=L(F,b,I);return H},S=function(w,A,b,I){var N=g[A].eproc,F=N(w,b,I);return F};return{version:"1.0.0",parsePKCS5PEM:function(w){return x(w)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(w,A,b){return v(w,A,b)},decryptKeyB64:function(w,A,b,I){return y(w,A,b,I)},getDecryptedKeyHex:function(w,A){var b=x(w),I=b.cipher,N=b.ivsalt,F=b.data,L=v(I,A,N),H=L.keyhex,_=y(F,I,H,N);return _},getEncryptedPKCS5PEMFromPrvKeyHex:function(w,A,b,I,N){var D="";if((typeof I>"u"||I==null)&&(I="AES-256-CBC"),typeof g[I]>"u")throw new Error("KEYUTIL unsupported algorithm: "+I);if(typeof N>"u"||N==null){var F=g[I].ivlen,L=d(F);N=L.toUpperCase()}var H=v(I,b,N),_=H.keyhex,R=S(A,I,_,N),P=R.replace(/(.{64})/g,`$1\r
`),D="-----BEGIN "+w+` PRIVATE KEY-----\r
`;return D+=`Proc-Type: 4,ENCRYPTED\r
`,D+="DEK-Info: "+I+","+N+`\r
`,D+=`\r
`,D+=P,D+=`\r
-----END `+w+` PRIVATE KEY-----\r
`,D},getEncryptedPKCS8PEM:function(w,A,b){var I=this.getEncryptedPKCS8Hex(w,A,b);return Gr(I,"ENCRYPTED PRIVATE KEY")},getEncryptedPKCS8Hex:function(w,A,b){var I;b==null||b==null?I={}:I=JSON.parse(JSON.stringify(b)),I.plain=w,this.initPBES2Param(I),this.encryptPBES2Param(I,A);var N=this.generatePBES2ASN1Param(I);return E.asn1.ASN1Util.newObject(N).tohex()},initPBES2Param:function(w){if(jt(w,"encalg")==null&&(w.encalg="aes256-CBC"),jt(w,"iter")==null&&(w.iter=2048),jt(w,"prf")==null&&(w.prf="hmacWithSHA256"),jt(w,"salt")==null&&(w.salt=Te.enc.Hex.stringify(Te.lib.WordArray.random(8))),jt(w,"enciv")==null){var A;w.encalg=="des-EDE3-CBC"&&(A=8),w.encalg=="aes128-CBC"&&(A=16),w.encalg=="aes256-CBC"&&(A=16),w.enciv=Te.enc.Hex.stringify(Te.lib.WordArray.random(A))}},encryptPBES2Param:function(w,A){var b=gt.getDKFromPBES2Param(w,A);try{var I=E.crypto.Cipher.encrypt(w.plain,b,w.encalg,{iv:w.enciv})}catch{throw new Error("encrypt error: "+w.plain+" "+b+" "+w.encalg+" "+w.enciv)}w.enc=I},generatePBES2ASN1Param:function(w){var A={seq:[{seq:[{oid:"pkcs5PBES2"},{seq:[{seq:[{oid:"pkcs5PBKDF2"},{seq:[{octstr:{hex:w.salt}},{int:{hex:Mv(w.iter)}}]}]},{seq:[{oid:w.encalg},{octstr:{hex:w.enciv}}]}]}]},{octstr:{hex:w.enc}}]};return w.prf!="hmacWithSHA1"&&A.seq[0].seq[1].seq[0].seq[1].seq.push({seq:[{oid:w.prf},{null:""}]}),A},parseHexOfEncryptedPKCS8:function(w){var A=we,b=A.getChildIdx,I=A.getV,N={},F=b(w,0);if(F.length!=2)throw new Error("malformed format: SEQUENCE(0).items != 2: "+F.length);N.ciphertext=I(w,F[1]);var L=b(w,F[0]);if(L.length!=2)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+L.length);if(I(w,L[0])!="2a864886f70d01050d")throw new Error("this only supports pkcs5PBES2");var H=b(w,L[1]);if(L.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+H.length);var _=b(w,H[1]);if(_.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+_.length);if(I(w,_[0])!="2a864886f70d0307")throw"this only supports TripleDES";N.encryptionSchemeAlg="TripleDES",N.encryptionSchemeIV=I(w,_[1]);var R=b(w,H[0]);if(R.length!=2)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+R.length);if(I(w,R[0])!="2a864886f70d01050c")throw new Error("this only supports pkcs5PBKDF2");var P=b(w,R[1]);if(P.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+P.length);N.pbkdf2Salt=I(w,P[0]);var D=I(w,P[1]);try{N.pbkdf2Iter=parseInt(D,16)}catch{throw new Error("malformed format pbkdf2Iter: "+D)}return N},getPBKDF2KeyHexFromParam:function(w,A){var b=Te.enc.Hex.parse(w.pbkdf2Salt),I=w.pbkdf2Iter,N=Te.PBKDF2(A,b,{keySize:192/32,iterations:I}),F=Te.enc.Hex.stringify(N);return F},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(w,A){var b=hr(w,"ENCRYPTED PRIVATE KEY"),I=this.parseHexOfEncryptedPKCS8(b),N=gt.getPBKDF2KeyHexFromParam(I,A),F={};F.ciphertext=Te.enc.Hex.parse(I.ciphertext);var L=Te.enc.Hex.parse(N),H=Te.enc.Hex.parse(I.encryptionSchemeIV),_=Te.TripleDES.decrypt(F,L,{iv:H}),R=Te.enc.Hex.stringify(_);return R},parsePBES2:function(w){var A=we.parse(w);if(jt(A,"seq.0.seq.0.oid")!="pkcs5PBES2"||jt(A,"seq.0.seq.1.seq.0.seq.0.oid")!="pkcs5PBKDF2")throw new Error("not pkcs5PBES2 and pkcs5PBKDF2 used");var b=jt(A,"seq.0.seq.1.seq.0.seq.1.seq");if(b==null)throw new Error("PBKDF2 parameter not found");var I=jt(b,"0.octstr.hex"),N=jt(b,"1.int.hex"),F=jt(b,"2.seq.0.oid","hmacWithSHA1"),L=-1;try{L=parseInt(N,16)}catch{throw new Error("iter not proper value")}var H=jt(A,"seq.0.seq.1.seq.1.seq.0.oid"),_=jt(A,"seq.0.seq.1.seq.1.seq.1.octstr.hex"),R=jt(A,"seq.1.octstr.hex");if(H==null||_==null||R==null)throw new Error("encalg, enciv or enc is undefined");var P={salt:I,iter:L,prf:F,encalg:H,enciv:_,enc:R};return P},getDKFromPBES2Param:function(w,A){var b={hmacWithSHA1:Te.algo.SHA1,hmacWithSHA224:Te.algo.SHA224,hmacWithSHA256:Te.algo.SHA256,hmacWithSHA384:Te.algo.SHA384,hmacWithSHA512:Te.algo.SHA512},I={"des-EDE3-CBC":192/32,"aes128-CBC":128/32,"aes256-CBC":256/32},N=b[w.prf];if(N==null)throw new Error("unsupported prf");var F=I[w.encalg];if(F==null)throw new Error("unsupported encalg");var L=Te.enc.Hex.parse(w.salt),H=w.iter;try{var _=Te.PBKDF2(A,L,{keySize:F,iterations:H,hasher:N});return Te.enc.Hex.stringify(_)}catch(R){throw new Error("PBKDF2 error: "+R+" "+JSON.stringify(w)+" "+A)}},getPlainHexFromEncryptedPKCS8PEM:function(w,A){if(w.indexOf("BEGIN ENCRYPTED PRIVATE KEY")==-1)throw new Error("not Encrypted PKCS#8 PEM string");var b=hr(w),I;try{I=gt.parsePBES2(b)}catch(F){throw new Error("malformed PBES2 format: "+F.message)}var N=gt.getDKFromPBES2Param(I,A);return E.crypto.Cipher.decrypt(I.enc,N,I.encalg,{iv:I.enciv})},getKeyFromEncryptedPKCS8PEM:function(w,A){var b=this.getPlainHexFromEncryptedPKCS8PEM(w,A),I=this.getKeyFromPlainPrivatePKCS8Hex(b);return I},parsePlainPrivatePKCS8Hex:function(w){var A=we,b=A.getChildIdx,I=A.getV,N={};if(N.algparam=null,w.substr(0,2)!="30")throw new Error("malformed plain PKCS8 private key(code:001)");var F=b(w,0);if(F.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if(w.substr(F[1],2)!="30")throw new Error("malformed PKCS8 private key(code:003)");var L=b(w,F[1]);if(L.length!=2)throw new Error("malformed PKCS8 private key(code:004)");if(w.substr(L[0],2)!="06")throw new Error("malformed PKCS8 private key(code:005)");if(N.algoid=I(w,L[0]),w.substr(L[1],2)=="06"&&(N.algparam=I(w,L[1])),w.substr(F[2],2)!="04")throw new Error("malformed PKCS8 private key(code:006)");return N.keyidx=A.getVidx(w,F[2]),N},getKeyFromPlainPrivatePKCS8PEM:function(w){var A=hr(w,"PRIVATE KEY"),b=this.getKeyFromPlainPrivatePKCS8Hex(A);return b},getKeyFromPlainPrivatePKCS8Hex:function(w){var A=this.parsePlainPrivatePKCS8Hex(w),b;if(A.algoid=="2a864886f70d010101")b=new rt;else if(A.algoid=="2a8648ce380401")b=new E.crypto.DSA;else if(A.algoid=="2a8648ce3d0201")b=new E.crypto.ECDSA;else throw new Error("unsupported private key algorithm");return b.readPKCS8PrvKeyHex(w),b},_getKeyFromPublicPKCS8Hex:function(w){var A,b=we.getVbyList(w,0,[0,0],"06");if(b==="2a864886f70d010101")A=new rt;else if(b==="2a8648ce380401")A=new E.crypto.DSA;else if(b==="2a8648ce3d0201")A=new E.crypto.ECDSA;else throw new Error("unsupported PKCS#8 public key hex");return A.readPKCS8PubKeyHex(w),A},parsePublicRawRSAKeyHex:function(w){var A=we,b=A.getChildIdx,I=A.getV,N={};if(w.substr(0,2)!="30")throw new Error("malformed RSA key(code:001)");var F=b(w,0);if(F.length!=2)throw new Error("malformed RSA key(code:002)");if(w.substr(F[0],2)!="02")throw new Error("malformed RSA key(code:003)");if(N.n=I(w,F[0]),w.substr(F[1],2)!="02")throw new Error("malformed RSA key(code:004)");return N.e=I(w,F[1]),N},parsePublicPKCS8Hex:function(w){var A=we,b=A.getChildIdx,I=A.getV,N={};N.algparam=null;var F=b(w,0);if(F.length!=2)throw new Error("outer DERSequence shall have 2 elements: "+F.length);var L=F[0];if(w.substr(L,2)!="30")throw new Error("malformed PKCS8 public key(code:001)");var H=b(w,L);if(H.length!=2)throw new Error("malformed PKCS8 public key(code:002)");if(w.substr(H[0],2)!="06")throw new Error("malformed PKCS8 public key(code:003)");if(N.algoid=I(w,H[0]),w.substr(H[1],2)=="06"?N.algparam=I(w,H[1]):w.substr(H[1],2)=="30"&&(N.algparam={},N.algparam.p=A.getVbyList(w,H[1],[0],"02"),N.algparam.q=A.getVbyList(w,H[1],[1],"02"),N.algparam.g=A.getVbyList(w,H[1],[2],"02")),w.substr(F[1],2)!="03")throw new Error("malformed PKCS8 public key(code:004)");return N.key=I(w,F[1]).substr(2),N}}}();gt.getKey=function(e,t,r){var n=we,s=n.getChildIdx;n.getV;var o=n.getVbyList,u=E.crypto,h=u.ECDSA,g=u.DSA,d=rt,x=hr,v=gt;if(typeof d<"u"&&e instanceof d||typeof h<"u"&&e instanceof h||typeof g<"u"&&e instanceof g)return e;if(e.curve!==void 0&&e.xy!==void 0&&e.d===void 0)return new h({pub:e.xy,curve:e.curve});if(e.curve!==void 0&&e.d!==void 0)return new h({prv:e.d,curve:e.curve});if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var y=new d;return y.setPublic(e.n,e.e),y}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.co!==void 0&&e.qi===void 0){var y=new d;return y.setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),y}if(e.kty===void 0&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p===void 0){var y=new d;return y.setPrivate(e.n,e.e,e.d),y}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x===void 0){var y=new g;return y.setPublic(e.p,e.q,e.g,e.y),y}if(e.p!==void 0&&e.q!==void 0&&e.g!==void 0&&e.y!==void 0&&e.x!==void 0){var y=new g;return y.setPrivate(e.p,e.q,e.g,e.y,e.x),y}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d===void 0){var y=new d;return y.setPublic(Zt(e.n),Zt(e.e)),y}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0&&e.p!==void 0&&e.q!==void 0&&e.dp!==void 0&&e.dq!==void 0&&e.qi!==void 0){var y=new d;return y.setPrivateEx(Zt(e.n),Zt(e.e),Zt(e.d),Zt(e.p),Zt(e.q),Zt(e.dp),Zt(e.dq),Zt(e.qi)),y}if(e.kty==="RSA"&&e.n!==void 0&&e.e!==void 0&&e.d!==void 0){var y=new d;return y.setPrivate(Zt(e.n),Zt(e.e),Zt(e.d)),y}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d===void 0){var S=new h({curve:e.crv}),w=S.ecparams.keycharlen,A=("0000000000"+Zt(e.x)).slice(-w),b=("0000000000"+Zt(e.y)).slice(-w),I="04"+A+b;return S.setPublicKeyHex(I),S}if(e.kty==="EC"&&e.crv!==void 0&&e.x!==void 0&&e.y!==void 0&&e.d!==void 0){var S=new h({curve:e.crv}),w=S.ecparams.keycharlen,A=("0000000000"+Zt(e.x)).slice(-w),b=("0000000000"+Zt(e.y)).slice(-w),I="04"+A+b,N=("0000000000"+Zt(e.d)).slice(-w);return S.setPublicKeyHex(I),S.setPrivateKeyHex(N),S}if(r==="pkcs5prv"){var F=e,n=we,L,y;if(L=s(F,0),L.length===9)y=new d,y.readPKCS5PrvKeyHex(F);else if(L.length===6)y=new g,y.readPKCS5PrvKeyHex(F);else if(L.length>2&&F.substr(L[1],2)==="04")y=new h,y.readPKCS5PrvKeyHex(F);else throw new Error("unsupported PKCS#1/5 hexadecimal key");return y}if(r==="pkcs8prv"){var y=v.getKeyFromPlainPrivatePKCS8Hex(e);return y}if(r==="pkcs8pub")return v._getKeyFromPublicPKCS8Hex(e);if(r==="x509pub")return Qe.getPublicKeyFromCertHex(e);if(e.indexOf("-END CERTIFICATE-",0)!=-1||e.indexOf("-END X509 CERTIFICATE-",0)!=-1||e.indexOf("-END TRUSTED CERTIFICATE-",0)!=-1)return Qe.getPublicKeyFromCertPEM(e);if(e.indexOf("-END PUBLIC KEY-")!=-1){var H=hr(e,"PUBLIC KEY");return v._getKeyFromPublicPKCS8Hex(H)}if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var _=x(e,"RSA PRIVATE KEY");return v.getKey(_,null,"pkcs5prv")}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var R=x(e,"DSA PRIVATE KEY"),P=o(R,0,[1],"02"),D=o(R,0,[2],"02"),k=o(R,0,[3],"02"),W=o(R,0,[4],"02"),K=o(R,0,[5],"02"),y=new g;return y.setPrivate(new ee(P,16),new ee(D,16),new ee(k,16),new ee(W,16),new ee(K,16)),y}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")==-1){var _=x(e,"EC PRIVATE KEY");return v.getKey(_,null,"pkcs5prv")}if(e.indexOf("-END PRIVATE KEY-")!=-1)return v.getKeyFromPlainPrivatePKCS8PEM(e);if(e.indexOf("-END RSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var ie=v.getDecryptedKeyHex(e,t),G=new rt;return G.readPKCS5PrvKeyHex(ie),G}if(e.indexOf("-END EC PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var R=v.getDecryptedKeyHex(e,t),y=o(R,0,[1],"04"),V=o(R,0,[2,0],"06"),ce=o(R,0,[3,0],"03").substr(2),te="";if(E.crypto.OID.oidhex2name[V]!==void 0)te=E.crypto.OID.oidhex2name[V];else throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+V);var S=new h({curve:te});return S.setPublicKeyHex(ce),S.setPrivateKeyHex(y),S.isPublic=!1,S}if(e.indexOf("-END DSA PRIVATE KEY-")!=-1&&e.indexOf("4,ENCRYPTED")!=-1){var R=v.getDecryptedKeyHex(e,t),P=o(R,0,[1],"02"),D=o(R,0,[2],"02"),k=o(R,0,[3],"02"),W=o(R,0,[4],"02"),K=o(R,0,[5],"02"),y=new g;return y.setPrivate(new ee(P,16),new ee(D,16),new ee(k,16),new ee(W,16),new ee(K,16)),y}if(e.indexOf("-END ENCRYPTED PRIVATE KEY-")!=-1)return v.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")};gt.generateKeypair=function(e,t){if(e=="RSA"){var r=t,n=new rt;n.generate(r,"10001"),n.isPrivate=!0,n.isPublic=!0;var s=new rt,o=n.n.toString(16),u=n.e.toString(16);s.setPublic(o,u),s.isPrivate=!1,s.isPublic=!0;var h={};return h.prvKeyObj=n,h.pubKeyObj=s,h}else if(e=="EC"){var g=t,d=new E.crypto.ECDSA({curve:g}),x=d.generateKeyPairHex(),n=new E.crypto.ECDSA({curve:g});n.setPublicKeyHex(x.ecpubhex),n.setPrivateKeyHex(x.ecprvhex),n.isPrivate=!0,n.isPublic=!1;var s=new E.crypto.ECDSA({curve:g});s.setPublicKeyHex(x.ecpubhex),s.isPrivate=!1,s.isPublic=!0;var h={};return h.prvKeyObj=n,h.pubKeyObj=s,h}else throw new Error("unknown algorithm: "+e)};gt.getPEM=function(e,t,r,n,s,o){var u=E,h=u.asn1,g=h.DERObjectIdentifier,d=h.DERInteger,x=h.ASN1Util.newObject,v=h.x509,y=v.SubjectPublicKeyInfo,S=u.crypto,w=S.DSA,A=S.ECDSA,b=rt;function I(V){var ce=x({seq:[{int:0},{int:{bigint:V.n}},{int:V.e},{int:{bigint:V.d}},{int:{bigint:V.p}},{int:{bigint:V.q}},{int:{bigint:V.dmp1}},{int:{bigint:V.dmq1}},{int:{bigint:V.coeff}}]});return ce}function N(V){var ce=x({seq:[{int:1},{octstr:{hex:V.prvKeyHex}},{tag:["a0",!0,{oid:{name:V.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+V.pubKeyHex}}]}]});return ce}function F(V){var ce=x({seq:[{int:0},{int:{bigint:V.p}},{int:{bigint:V.q}},{int:{bigint:V.g}},{int:{bigint:V.y}},{int:{bigint:V.x}}]});return ce}if((b!==void 0&&e instanceof b||w!==void 0&&e instanceof w||A!==void 0&&e instanceof A)&&e.isPublic==!0&&(t===void 0||t=="PKCS8PUB")){var L=new y(e),H=L.tohex();return Gr(H,"PUBLIC KEY")}if(t=="PKCS1PRV"&&b!==void 0&&e instanceof b&&(r===void 0||r==null)&&e.isPrivate==!0){var L=I(e),H=L.tohex();return Gr(H,"RSA PRIVATE KEY")}if(t=="PKCS1PRV"&&A!==void 0&&e instanceof A&&(r===void 0||r==null)&&e.isPrivate==!0){var _=new g({name:e.curveName}),R=_.tohex(),P=N(e),D=P.tohex(),k="";return k+=Gr(R,"EC PARAMETERS"),k+=Gr(D,"EC PRIVATE KEY"),k}if(t=="PKCS1PRV"&&w!==void 0&&e instanceof w&&(r===void 0||r==null)&&e.isPrivate==!0){var L=F(e),H=L.tohex();return Gr(H,"DSA PRIVATE KEY")}if(t=="PKCS5PRV"&&b!==void 0&&e instanceof b&&r!==void 0&&r!=null&&e.isPrivate==!0){var L=I(e),H=L.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",H,r,n,o)}if(t=="PKCS5PRV"&&A!==void 0&&e instanceof A&&r!==void 0&&r!=null&&e.isPrivate==!0){var L=N(e),H=L.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",H,r,n,o)}if(t=="PKCS5PRV"&&w!==void 0&&e instanceof w&&r!==void 0&&r!=null&&e.isPrivate==!0){var L=F(e),H=L.tohex();return n===void 0&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",H,r,n,o)}var W=function(V,ce){if(typeof ce=="string")return gt.getEncryptedPKCS8PEM(V,ce);if(typeof ce=="object"&&jt(ce,"passcode")!=null){var te=JSON.parse(JSON.stringify(ce)),Ee=te.passcode;return delete te.passcode,gt.getEncryptedPKCS8PEM(V,Ee,te)}};if(t=="PKCS8PRV"&&b!=null&&e instanceof b&&e.isPrivate==!0){var K=I(e),ie=K.tohex(),L=x({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:ie}}]}),H=L.tohex();return r===void 0||r==null?Gr(H,"PRIVATE KEY"):W(H,r)}if(t=="PKCS8PRV"&&A!==void 0&&e instanceof A&&e.isPrivate==!0){var G={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};typeof e.pubKeyHex=="string"&&G.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});var K=new x(G),ie=K.tohex(),L=x({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:ie}}]}),H=L.tohex();return r===void 0||r==null?Gr(H,"PRIVATE KEY"):W(H,r)}if(t=="PKCS8PRV"&&w!==void 0&&e instanceof w&&e.isPrivate==!0){var K=new d({bigint:e.x}),ie=K.tohex(),L=x({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:ie}}]}),H=L.tohex();return r===void 0||r==null?Gr(H,"PRIVATE KEY"):W(H,r)}throw new Error("unsupported object nor format")};gt.getKeyFromCSRPEM=function(e){var t=hr(e,"CERTIFICATE REQUEST"),r=gt.getKeyFromCSRHex(t);return r};gt.getKeyFromCSRHex=function(e){var t=gt.parseCSRHex(e),r=gt.getKey(t.p8pubkeyhex,null,"pkcs8pub");return r};gt.parseCSRHex=function(e){var t=we,r=t.getChildIdx,n=t.getTLV,s={},o=e;if(o.substr(0,2)!="30")throw new Error("malformed CSR(code:001)");var u=r(o,0);if(u.length<1)throw new Error("malformed CSR(code:002)");if(o.substr(u[0],2)!="30")throw new Error("malformed CSR(code:003)");var h=r(o,u[0]);if(h.length<3)throw new Error("malformed CSR(code:004)");return s.p8pubkeyhex=n(o,h[2]),s};gt.getKeyID=function(e){var t=gt,r=we;typeof e=="string"&&e.indexOf("BEGIN ")!=-1&&(e=t.getKey(e));var n=hr(t.getPEM(e)),s=r.getIdxbyList(n,0,[1]),o=r.getV(n,s).substring(2);return E.crypto.Util.hashHex(o,"sha1")};gt.getJWK=function(e,t,r,n,s){var o,u={},h,g=E.crypto.Util.hashHex;if(typeof e=="string")o=gt.getKey(e),e.indexOf("CERTIFICATE")!=-1&&(h=hr(e));else if(typeof e=="object")e instanceof Qe?(o=e.getPublicKey(),h=e.hex):o=e;else throw new Error("unsupported keyinfo type");if(o instanceof rt&&o.isPrivate)u.kty="RSA",u.n=Ir(o.n.toString(16)),u.e=Ir(o.e.toString(16)),u.d=Ir(o.d.toString(16)),u.p=Ir(o.p.toString(16)),u.q=Ir(o.q.toString(16)),u.dp=Ir(o.dmp1.toString(16)),u.dq=Ir(o.dmq1.toString(16)),u.qi=Ir(o.coeff.toString(16));else if(o instanceof rt&&o.isPublic)u.kty="RSA",u.n=Ir(o.n.toString(16)),u.e=Ir(o.e.toString(16));else if(o instanceof E.crypto.ECDSA&&o.isPrivate){var d=o.getShortNISTPCurveName();if(d!=="P-256"&&d!=="P-384"&&d!=="P-521")throw new Error("unsupported curve name for JWT: "+d);var x=o.getPublicKeyXYHex();u.kty="EC",u.crv=d,u.x=Ir(x.x),u.y=Ir(x.y),u.d=Ir(o.prvKeyHex)}else if(o instanceof E.crypto.ECDSA&&o.isPublic){var d=o.getShortNISTPCurveName();if(d!=="P-256"&&d!=="P-384"&&d!=="P-521")throw new Error("unsupported curve name for JWT: "+d);var x=o.getPublicKeyXYHex();u.kty="EC",u.crv=d,u.x=Ir(x.x),u.y=Ir(x.y)}if(u.kty==null)throw new Error("unsupported keyinfo");return!o.isPrivate&&t!=!0&&(u.kid=E.jws.JWS.getJWKthumbprint(u)),h!=null&&r!=!0&&(u.x5c=[ji(h)]),h!=null&&n!=!0&&(u.x5t=eo(ji(g(h,"sha1")))),h!=null&&s!=!0&&(u["x5t#S256"]=eo(ji(g(h,"sha256")))),u};gt.getJWKFromKey=function(e){return gt.getJWK(e,!0,!0,!0,!0)};rt.getPosArrayOfChildrenFromHex=function(e){return we.getChildIdx(e,0)};rt.getHexValueArrayOfChildrenFromHex=function(e){var t=we,r=t.getV,y=rt.getPosArrayOfChildrenFromHex(e),n=r(e,y[0]),s=r(e,y[1]),o=r(e,y[2]),u=r(e,y[3]),h=r(e,y[4]),g=r(e,y[5]),d=r(e,y[6]),x=r(e,y[7]),v=r(e,y[8]),y=new Array;return y.push(n,s,o,u,h,g,d,x,v),y};rt.prototype.readPrivateKeyFromPEMString=function(e){var t=hr(e),r=rt.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])};rt.prototype.readPKCS5PrvKeyHex=function(e){var t=rt.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])};rt.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,s,o,u,h,g,d=we,x=d.getVbyListEx;if(d.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");try{t=x(e,0,[2,0,1],"02"),r=x(e,0,[2,0,2],"02"),n=x(e,0,[2,0,3],"02"),s=x(e,0,[2,0,4],"02"),o=x(e,0,[2,0,5],"02"),u=x(e,0,[2,0,6],"02"),h=x(e,0,[2,0,7],"02"),g=x(e,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,s,o,u,h,g)};rt.prototype.readPKCS5PubKeyHex=function(e){var t=we,r=t.getV;if(t.isASN1HEX(e)===!1)throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(n.length!==2||e.substr(n[0],2)!=="02"||e.substr(n[1],2)!=="02")throw new Error("wrong hex for PKCS#5 public key");var s=r(e,n[0]),o=r(e,n[1]);this.setPublic(s,o)};rt.prototype.readPKCS8PubKeyHex=function(e){var t=we;if(t.isASN1HEX(e)===!1)throw new Error("not ASN.1 hex string");if(t.getTLVbyListEx(e,0,[0,0])!=="06092a864886f70d010101")throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)};rt.prototype.readCertPubKeyHex=function(e,t){var r,n;r=new Qe,r.readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};function jv(e,t){for(var r="",n=t/4-e.length,s=0;s<n;s++)r=r+"0";return r+e}rt.prototype.sign=function(e,t){var r=function(s){return E.crypto.Util.hashString(s,t)},n=r(e);return this.signWithMessageHash(n,t)};rt.prototype.signWithMessageHash=function(e,t){var r=E.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),n=cn(r,16),s=this.doPrivate(n),o=s.toString(16);return jv(o,this.n.bitLength())};function Hv(e,t,r){for(var n="",s=0;n.length<t;)n+=vn(r(bi(e+String.fromCharCode.apply(String,[(s&4278190080)>>24,(s&16711680)>>16,(s&65280)>>8,s&255])))),s+=1;return n}rt.prototype.signPSS=function(e,t,r){var n=function(o){return E.crypto.Util.hashHex(o,t)},s=n(bi(e));return r===void 0&&(r=-1),this.signWithMessageHashPSS(s,t,r)};rt.prototype.signWithMessageHashPSS=function(e,t,r){var n=vn(e),s=n.length,o=this.n.bitLength()-1,u=Math.ceil(o/8),h,g=function(b){return E.crypto.Util.hashHex(b,t)};if(r===-1||r===void 0)r=s;else if(r===-2)r=u-s-2;else if(r<-2)throw new Error("invalid salt length");if(u<s+r+2)throw new Error("data too long");var d="";r>0&&(d=new Array(r),new co().nextBytes(d),d=String.fromCharCode.apply(String,d));var x=vn(g(bi("\0\0\0\0\0\0\0\0"+n+d))),v=[];for(h=0;h<u-r-s-2;h+=1)v[h]=0;var y=String.fromCharCode.apply(String,v)+""+d,S=Hv(x,y.length,g),w=[];for(h=0;h<y.length;h+=1)w[h]=y.charCodeAt(h)^S.charCodeAt(h);var A=65280>>8*u-o&255;for(w[0]&=~A,h=0;h<s;h++)w.push(x.charCodeAt(h));return w.push(188),jv(this.doPrivate(new ee(w)).toString(16),this.n.bitLength())};function Uv(e){for(var t in E.crypto.Util.DIGESTINFOHEAD){var r=E.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r){var s=[t,e.substring(n)];return s}}return[]}rt.prototype.verify=function(e,t){if(t=t.toLowerCase(),t.match(/^[0-9a-f]+$/)==null)return!1;var r=cn(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var s=this.doPublic(r),o=s.toString(16);if(o.length+3!=n/4)return!1;var u=o.replace(/^1f+00/,""),h=Uv(u);if(h.length==0)return!1;var g=h[0],d=h[1],x=function(y){return E.crypto.Util.hashString(y,g)},v=x(e);return d==v};rt.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=cn(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=this.doPublic(r),s=n.toString(16).replace(/^1f+00/,""),o=Uv(s);if(o.length==0)return!1;o[0];var u=o[1];return u==e};rt.prototype.verifyPSS=function(e,t,r,n){var s=function(u){return E.crypto.Util.hashHex(u,r)},o=s(bi(e));return n===void 0&&(n=-1),this.verifyWithMessageHashPSS(o,t,r,n)};rt.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var s=new ee(t,16),o=function(N){return E.crypto.Util.hashHex(N,r)},u=vn(e),h=u.length,g=this.n.bitLength()-1,d=Math.ceil(g/8),x;if(n===-1||n===void 0)n=h;else if(n===-2)n=d-h-2;else if(n<-2)throw new Error("invalid salt length");if(d<h+n+2)throw new Error("data too long");var v=this.doPublic(s).toByteArray();for(x=0;x<v.length;x+=1)v[x]&=255;for(;v.length<d;)v.unshift(0);if(v[d-1]!==188)throw new Error("encoded message does not end in 0xbc");v=String.fromCharCode.apply(String,v);var y=v.substr(0,d-h-1),S=v.substr(y.length,h),w=65280>>8*d-g&255;if(y.charCodeAt(0)&w)throw new Error("bits beyond keysize not zero");var A=Hv(S,y.length,o),b=[];for(x=0;x<y.length;x+=1)b[x]=y.charCodeAt(x)^A.charCodeAt(x);b[0]&=~w;var I=d-h-n-2;for(x=0;x<I;x+=1)if(b[x]!==0)throw new Error("leftmost octets not zero");if(b[I]!==1)throw new Error("0x01 marker not found");return S===vn(o(bi("\0\0\0\0\0\0\0\0"+u+String.fromCharCode.apply(String,b.slice(-n)))))};rt.SALT_LEN_HLEN=-1;rt.SALT_LEN_MAX=-2;rt.SALT_LEN_RECOVER=-2;function Qe(e){var t=we,r=t.getChildIdx,n=t.getV;t.dump;var s=t.parse,o=t.getTLV,u=t.getVbyList,h=t.getVbyListEx,g=t.getTLVbyList,d=t.getTLVbyListEx,x=t.getIdxbyList,v=t.getIdxbyListEx,y=t.getVidx,S=t.getInt,w=t.oidname,A=t.hextooidstr,b=hr,I,N=Error;try{I=E.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(this.hex===null||this.version!==0)return this.version;var _=g(this.hex,0,[0,0]);if(_.substr(0,2)=="a0"){var R=g(_,0,[0]),P=S(R,0);if(P<0||2<P)throw new Error("malformed version field");return this.version=P+1,this.version}else return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return h(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var _=d(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(_)},this.getAlgorithmIdentifierName=function(_){for(var R in I)if(_===I[R])return R;return w(h(_,0,[0],"06"))},this.getIssuer=function(_,R){return this.getX500Name(this.getIssuerHex(),_,R)},this.getIssuerHex=function(){return g(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){var _=this.getIssuer();return _.str},this.getSubject=function(_,R){return this.getX500Name(this.getSubjectHex(),_,R)},this.getSubjectHex=function(){return g(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){var _=this.getSubject();return _.str},this.getNotBefore=function(){var _=u(this.hex,0,[0,4+this.foffset,0]);return _=_.replace(/(..)/g,"%$1"),_=decodeURIComponent(_),_},this.getNotAfter=function(){var _=u(this.hex,0,[0,4+this.foffset,1]);return _=_.replace(/(..)/g,"%$1"),_=decodeURIComponent(_),_},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return g(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var _=this.getSPKI();return _==null?null:u(_,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return x(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var _=this.getPublicKeyIdx();return x(this.hex,_,[1,0],"30")},this.getPublicKey=function(){return gt.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var _=g(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(_)},this.getSignatureValueHex=function(){return u(this.hex,0,[2],"03",!0)},this.verifySignature=function(_){var R=this.getSignatureAlgorithmField(),P=this.getSignatureValueHex(),D=g(this.hex,0,[0],"30"),k=new E.crypto.Signature({alg:R});return k.init(_),k.updateHex(D),k.verify(P)},this.parseExt=function(_){var R,P,D;if(_===void 0){if(D=this.hex,this.version!==3)return-1;R=x(D,0,[0,7,0],"30"),P=r(D,R)}else{D=hr(_);var k=x(D,0,[0,3,0,0],"06");if(n(D,k)!="2a864886f70d01090e"){this.aExtInfo=new Array;return}R=x(D,0,[0,3,0,1,0],"30"),P=r(D,R),this.hex=D}this.aExtInfo=new Array;for(var W=0;W<P.length;W++){var K={};K.critical=!1;var ie=r(D,P[W]),G=0;ie.length===3&&(K.critical=!0,G=1),K.oid=t.hextooidstr(u(D,P[W],[0],"06"));var V=x(D,P[W],[1+G]);K.vidx=y(D,V),this.aExtInfo.push(K)}},this.getExtInfo=function(_){var R=this.aExtInfo,P=_;if(_.match(/^[0-9.]+$/)||(P=E.asn1.x509.OID.name2oid(_)),P!==""){for(var D=0;D<R.length;D++)if(R[D].oid===P)return R[D]}},this.getCriticalExtV=function(_,R,P){if(R!=null)return[R,P];var D=this.getExtInfo(_);return D==null?[null,null]:[o(this.hex,D.vidx),D.critical]},this.getExtBasicConstraints=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("basicConstraints");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"basicConstraints"};if(R&&(D.critical=!0),_==="3000")return D;if(_==="30030101ff")return D.cA=!0,D;if(_.substr(0,12)==="30060101ff02"){var k=n(_,10),W=parseInt(k,16);return D.cA=!0,D.pathLen=W,D}throw new Error("hExtV parse error: "+_)},this.getExtNameConstraints=function(_,R){var P=this.getCriticalExtV("nameConstraints",_,R);if(_=P[0],R=P[1],_!=null){var D={extname:"nameConstraints"};R&&(D.critical=!0);for(var k=r(_,0),W=0;W<k.length;W++){for(var K=[],ie=r(_,k[W]),G=0;G<ie.length;G++){var V=o(_,ie[G]),ce=this.getGeneralSubtree(V);K.push(ce)}var te=_.substr(k[W],2);te=="a0"?D.permit=K:te=="a1"&&(D.exclude=K)}return D}},this.getGeneralSubtree=function(_){var R=r(_,0),P=R.length;if(P<1||2<P)throw new Error("wrong num elements");for(var D=this.getGeneralName(o(_,R[0])),k=1;k<P;k++){var W=_.substr(R[k],2),K=n(_,R[k]),ie=parseInt(K,16);W=="80"&&(D.min=ie),W=="81"&&(D.max=ie)}return D},this.getExtKeyUsage=function(_,R){var P=this.getCriticalExtV("keyUsage",_,R);if(_=P[0],R=P[1],_!=null){var D={extname:"keyUsage"};return R&&(D.critical=!0),D.names=this.getExtKeyUsageString(_).split(","),D}},this.getExtKeyUsageBin=function(_){if(_===void 0){var R=this.getExtInfo("keyUsage");if(R===void 0)return"";_=o(this.hex,R.vidx)}if(_.length!=8&&_.length!=10)throw new Error("malformed key usage value: "+_);var P="000000000000000"+parseInt(_.substr(6),16).toString(2);return _.length==8&&(P=P.slice(-8)),_.length==10&&(P=P.slice(-16)),P=P.replace(/0+$/,""),P==""&&(P="0"),P},this.getExtKeyUsageString=function(_){for(var R=this.getExtKeyUsageBin(_),P=new Array,D=0;D<R.length;D++)R.substr(D,1)=="1"&&P.push(Qe.KEYUSAGE_NAME[D]);return P.join(",")},this.getExtSubjectKeyIdentifier=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("subjectKeyIdentifier");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"subjectKeyIdentifier"};R&&(D.critical=!0);var k=n(_,0);return D.kid={hex:k},D},this.getExtAuthorityKeyIdentifier=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("authorityKeyIdentifier");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"authorityKeyIdentifier"};R&&(D.critical=!0);for(var k=r(_,0),W=0;W<k.length;W++){var K=_.substr(k[W],2);if(K==="80"&&(D.kid={hex:n(_,k[W])}),K==="a1"){var ie=o(_,k[W]),G=this.getGeneralNames(ie);D.issuer=G[0].dn}K==="82"&&(D.sn={hex:n(_,k[W])})}return D},this.getExtExtKeyUsage=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("extKeyUsage");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"extKeyUsage",array:[]};R&&(D.critical=!0);for(var k=r(_,0),W=0;W<k.length;W++)D.array.push(w(n(_,k[W])));return D},this.getExtExtKeyUsageName=function(){var _=this.getExtInfo("extKeyUsage");if(_===void 0)return _;var R=new Array,P=o(this.hex,_.vidx);if(P==="")return R;for(var D=r(P,0),k=0;k<D.length;k++)R.push(w(n(P,D[k])));return R},this.getExtSubjectAltName=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("subjectAltName");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"subjectAltName",array:[]};return R&&(D.critical=!0),D.array=this.getGeneralNames(_),D},this.getExtIssuerAltName=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("issuerAltName");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"issuerAltName",array:[]};return R&&(D.critical=!0),D.array=this.getGeneralNames(_),D},this.getGeneralNames=function(_){for(var R=r(_,0),P=[],D=0;D<R.length;D++){var k=this.getGeneralName(o(_,R[D]));k!==void 0&&P.push(k)}return P},this.getGeneralName=function(_){var R=_.substr(0,2),P=n(_,0),D=vn(P);if(R=="81")return{rfc822:D};if(R=="82")return{dns:D};if(R=="86")return{uri:D};if(R=="87")return{ip:dc(P)};if(R=="a4")return{dn:this.getX500Name(P)};if(R=="a0")return{other:this.getOtherName(_)}},this.getExtSubjectAltName2=function(){var _,R,P,D=this.getExtInfo("subjectAltName");if(D===void 0)return D;for(var k=new Array,W=o(this.hex,D.vidx),K=r(W,0),ie=0;ie<K.length;ie++)P=W.substr(K[ie],2),_=n(W,K[ie]),P==="81"&&(R=_t(_),k.push(["MAIL",R])),P==="82"&&(R=_t(_),k.push(["DNS",R])),P==="84"&&(R=Qe.hex2dn(_,0),k.push(["DN",R])),P==="86"&&(R=_t(_),k.push(["URI",R])),P==="87"&&(R=dc(_),k.push(["IP",R]));return k},this.getExtCRLDistributionPoints=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("cRLDistributionPoints");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"cRLDistributionPoints",array:[]};R&&(D.critical=!0);for(var k=r(_,0),W=0;W<k.length;W++){var K=o(_,k[W]);D.array.push(this.getDistributionPoint(K))}return D},this.getDistributionPoint=function(_){for(var R={},P=r(_,0),D=0;D<P.length;D++){var k=_.substr(P[D],2),W=o(_,P[D]);k=="a0"&&(R.dpname=this.getDistributionPointName(W))}return R},this.getDistributionPointName=function(_){for(var R={},P=r(_,0),D=0;D<P.length;D++){var k=_.substr(P[D],2),W=o(_,P[D]);k=="a0"&&(R.full=this.getGeneralNames(W))}return R},this.getExtCRLDistributionPointsURI=function(){var _=this.getExtCRLDistributionPoints();if(_==null)return _;for(var R=_.array,P=[],D=0;D<R.length;D++)try{R[D].dpname.full[0].uri!=null&&P.push(R[D].dpname.full[0].uri)}catch{}return P},this.getExtAIAInfo=function(){var _=this.getExtInfo("authorityInfoAccess");if(_===void 0)return _;for(var R={ocsp:[],caissuer:[]},P=r(this.hex,_.vidx),D=0;D<P.length;D++){var k=u(this.hex,P[D],[0],"06"),W=u(this.hex,P[D],[1],"86");k==="2b06010505073001"&&R.ocsp.push(_t(W)),k==="2b06010505073002"&&R.caissuer.push(_t(W))}return R},this.getExtAuthorityInfoAccess=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("authorityInfoAccess");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"authorityInfoAccess",array:[]};R&&(D.critical=!0);for(var k=r(_,0),W=0;W<k.length;W++){var K=h(_,k[W],[0],"06"),ie=u(_,k[W],[1],"86"),G=_t(ie);if(K=="2b06010505073001")D.array.push({ocsp:G});else if(K=="2b06010505073002")D.array.push({caissuer:G});else throw new Error("unknown method: "+K)}return D},this.getExtCertificatePolicies=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("certificatePolicies");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"certificatePolicies",array:[]};R&&(D.critical=!0);for(var k=r(_,0),W=0;W<k.length;W++){var K=o(_,k[W]),ie=this.getPolicyInformation(K);D.array.push(ie)}return D},this.getPolicyInformation=function(_){var R={},P=u(_,0,[0],"06");R.policyoid=w(P);var D=v(_,0,[1],"30");if(D!=-1){R.array=[];for(var k=r(_,D),W=0;W<k.length;W++){var K=o(_,k[W]),ie=this.getPolicyQualifierInfo(K);R.array.push(ie)}}return R},this.getOtherName=function(_){var R={},P=r(_,0),D=u(_,P[0],[],"06"),k=u(_,P[1],[]);return R.oid=w(D),R.value=s(k),R},this.getPolicyQualifierInfo=function(_){var R={},P=u(_,0,[0],"06");if(P==="2b06010505070201"){var D=h(_,0,[1],"16");R.cps=vn(D)}else if(P==="2b06010505070202"){var k=g(_,0,[1],"30");R.unotice=this.getUserNotice(k)}return R},this.getUserNotice=function(_){var R=null;try{R=t.parse(_);var P=this._asn1ToUnotice(R);return P}catch{return}},this._asn1ToUnotice=function(_){try{for(var R={},P=jt(_,"seq"),D=0;D<P.length;D++){var k=this._asn1ToNoticeRef(P[D]);k!=null&&(R.noticeref=k);var W=this.asn1ToDisplayText(P[D]);W!=null&&(R.exptext=W)}return Object.keys(R).length>0?R:void 0}catch{return}},this._asn1ToNoticeRef=function(_){try{for(var R={},P=jt(_,"seq"),D=0;D<P.length;D++){var k=this._asn1ToNoticeNum(P[D]);k!=null&&(R.noticenum=k);var W=this.asn1ToDisplayText(P[D]);W!=null&&(R.org=W)}return Object.keys(R).length>0?R:void 0}catch{return}},this._asn1ToNoticeNum=function(_){try{for(var R=jt(_,"seq"),P=[],D=0;D<R.length;D++){var k=R[D];P.push(parseInt(jt(k,"int.hex"),16))}return P}catch{return}},this.getDisplayText=function(_){var R={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"},P={};return P.type=R[_.substr(0,2)],P.str=vn(n(_,0)),P},this.asn1ToDisplayText=function(_){if(_.utf8str!=null)return{type:"utf8",str:_.utf8str.str};if(_.ia5str!=null)return{type:"ia5",str:_.ia5str.str};if(_.visstr!=null)return{type:"vis",str:_.visstr.str};if(_.bmpstr!=null)return{type:"bmp",str:_.bmpstr.str};if(_.prnstr!=null)return{type:"prn",str:_.prnstr.str}},this.getExtPolicyMappings=function(_,R){var P=this.getCriticalExtV("policyMappings",_,R);if(_=P[0],R=P[1],_!=null){var D={extname:"policyMappings"};R&&(D.critical=!0);try{for(var k=s(_),W=k.seq,K=[],ie=0;ie<W.length;ie++){var G=W[ie].seq;K.push([G[0].oid,G[1].oid])}D.array=K}catch{throw new N("malformed policyMappings")}return D}},this.getExtPolicyConstraints=function(_,R){var P=this.getCriticalExtV("policyConstraints",_,R);if(_=P[0],R=P[1],_!=null){var D={extname:"policyConstraints"};R&&(D.critical=!0);var k=s(_);try{for(var W=k.seq,K=0;K<W.length;K++){var ie=W[K].tag;ie.explicit==!1&&(ie.tag=="80"&&(D.reqexp=parseInt(ie.hex,16)),ie.tag=="81"&&(D.inhibit=parseInt(ie.hex,16)))}}catch{return new N("malformed policyConstraints value")}return D}},this.getExtInhibitAnyPolicy=function(_,R){var P=this.getCriticalExtV("inhibitAnyPolicy",_,R);if(_=P[0],R=P[1],_!=null){var D={extname:"inhibitAnyPolicy"};R&&(D.critical=!0);var k=S(_,0);return k==-1?new N("wrong value"):(D.skip=k,D)}},this.getExtCRLNumber=function(_,R){var P={extname:"cRLNumber"};if(R&&(P.critical=!0),_.substr(0,2)=="02")return P.num={hex:n(_,0)},P;throw new N("hExtV parse error: "+_)},this.getExtCRLReason=function(_,R){var P={extname:"cRLReason"};if(R&&(P.critical=!0),_.substr(0,2)=="0a")return P.code=parseInt(n(_,0),16),P;throw new Error("hExtV parse error: "+_)},this.getExtOcspNonce=function(_,R){var P={extname:"ocspNonce"};R&&(P.critical=!0);var D=n(_,0);return P.hex=D,P},this.getExtOcspNoCheck=function(_,R){var P={extname:"ocspNoCheck"};return R&&(P.critical=!0),P},this.getExtAdobeTimeStamp=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("adobeTimeStamp");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"adobeTimeStamp"};R&&(D.critical=!0);var k=r(_,0);if(k.length>1){var W=o(_,k[1]),K=this.getGeneralName(W);K.uri!=null&&(D.uri=K.uri)}if(k.length>2){var ie=o(_,k[2]);ie=="0101ff"&&(D.reqauth=!0),ie=="010100"&&(D.reqauth=!1)}return D},this.getExtSubjectDirectoryAttributes=function(_,R){if(_===void 0&&R===void 0){var P=this.getExtInfo("subjectDirectoryAttributes");if(P===void 0)return;_=o(this.hex,P.vidx),R=P.critical}var D={extname:"subjectDirectoryAttributes"};R&&(D.critical=!0);try{for(var k=s(_),W=[],K=0;K<k.seq.length;K++){var ie=k.seq[K],G=jt(ie,"seq.0.oid"),V=jt(ie,"seq.1.set");if(G==null||V==null)throw"error";W.push({attr:G,array:V})}return D.array=W,D}catch{throw new Error("malformed subjectDirectoryAttributes extension value")}};var F=function(_){var R={};try{var P=_.seq[0].oid,D=E.asn1.x509.OID.name2oid(P);R.type=E.asn1.x509.OID.oid2atype(D);var k=_.seq[1];if(k.utf8str!=null)R.ds="utf8",R.value=k.utf8str.str;else if(k.numstr!=null)R.ds="num",R.value=k.numstr.str;else if(k.telstr!=null)R.ds="tel",R.value=k.telstr.str;else if(k.prnstr!=null)R.ds="prn",R.value=k.prnstr.str;else if(k.ia5str!=null)R.ds="ia5",R.value=k.ia5str.str;else if(k.visstr!=null)R.ds="vis",R.value=k.visstr.str;else if(k.bmpstr!=null)R.ds="bmp",R.value=k.bmpstr.str;else throw"error";return R}catch{throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},L=function(_){try{return _.set.map(function(R){return F(R)})}catch(R){throw new Error("improper ASN.1 parsed RDN: "+R)}},H=function(_){try{return _.seq.map(function(R){return L(R)})}catch(R){throw new Error("improper ASN.1 parsed X500Name: "+R)}};this.getX500NameRule=function(_){for(var R=null,P=[],D=0;D<_.length;D++)for(var k=_[D],W=0;W<k.length;W++)P.push(k[W]);for(var D=0;D<P.length;D++){var K=P[D],ie=K.ds,G=K.value,V=K.type;if(ie!="prn"&&ie!="utf8"&&ie!="ia5")return"mixed";if(ie=="ia5"){if(V!="CN")return"mixed";if(E.lang.String.isMail(G))continue;return"mixed"}if(V=="C"){if(ie=="prn")continue;return"mixed"}if(R==null)R=ie;else if(R!==ie)return"mixed"}return R??"prn"},this.getAttrTypeAndValue=function(_){var R=s(_);return F(R)},this.getRDN=function(_){var R=s(_);return L(R)},this.getX500NameArray=function(_){var R=s(_);return H(R)},this.getX500Name=function(_,R,P){var D=this.getX500NameArray(_),k=this.dnarraytostr(D),W={str:k};return W.array=D,P==!0&&(W.hex=_),R==!0&&(W.canon=this.c14nRDNArray(D)),W},this.readCertPEM=function(_){this.readCertHex(b(_))},this.readCertHex=function(_){this.hex=_,this.getVersion();try{x(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(_){var R={};return _==null&&(_={}),R.version=this.getVersion(),R.serial={hex:this.getSerialNumberHex()},R.sigalg=this.getSignatureAlgorithmField(),R.issuer=this.getIssuer(_.dncanon,_.dnhex),R.notbefore=this.getNotBefore(),R.notafter=this.getNotAfter(),R.subject=this.getSubject(_.dncanon,_.dnhex),R.sbjpubkey=Gr(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo!=null&&this.aExtInfo.length>0&&(R.ext=this.getExtParamArray()),R.sighex=this.getSignatureValueHex(),_.tbshex==!0&&(R.tbshex=g(this.hex,0,[0])),_.nodnarray==!0&&(delete R.issuer.array,delete R.subject.array),R},this.getExtParamArray=function(_){if(_==null){var R=v(this.hex,0,[0,"[3]"]);R!=-1&&(_=d(this.hex,0,[0,"[3]",0],"30"))}for(var P=[],D=r(_,0),k=0;k<D.length;k++){var W=o(_,D[k]),K=this.getExtParam(W);K!=null&&P.push(K)}return P},this.getExtParam=function(_){var R=r(_,0),P=R.length;if(P!=2&&P!=3)throw new Error("wrong number elements in Extension: "+P+" "+_);var D=A(u(_,0,[0],"06")),k=!1;P==3&&g(_,0,[1])=="0101ff"&&(k=!0);var W=g(_,0,[P-1,0]),K=void 0;if(D=="2.5.29.14"?K=this.getExtSubjectKeyIdentifier(W,k):D=="2.5.29.15"?K=this.getExtKeyUsage(W,k):D=="2.5.29.17"?K=this.getExtSubjectAltName(W,k):D=="2.5.29.18"?K=this.getExtIssuerAltName(W,k):D=="2.5.29.19"?K=this.getExtBasicConstraints(W,k):D=="2.5.29.30"?K=this.getExtNameConstraints(W,k):D=="2.5.29.31"?K=this.getExtCRLDistributionPoints(W,k):D=="2.5.29.32"?K=this.getExtCertificatePolicies(W,k):D=="2.5.29.33"?K=this.getExtPolicyMappings(W,k):D=="2.5.29.35"?K=this.getExtAuthorityKeyIdentifier(W,k):D=="2.5.29.36"?K=this.getExtPolicyConstraints(W,k):D=="2.5.29.37"?K=this.getExtExtKeyUsage(W,k):D=="2.5.29.54"?K=this.getExtInhibitAnyPolicy(W,k):D=="1.3.6.1.5.5.7.1.1"?K=this.getExtAuthorityInfoAccess(W,k):D=="2.5.29.20"?K=this.getExtCRLNumber(W,k):D=="2.5.29.21"?K=this.getExtCRLReason(W,k):D=="2.5.29.9"?K=this.getExtSubjectDirectoryAttributes(W,k):D=="1.3.6.1.5.5.7.48.1.2"?K=this.getExtOcspNonce(W,k):D=="1.3.6.1.5.5.7.48.1.5"?K=this.getExtOcspNoCheck(W,k):D=="1.2.840.113583.1.1.9.1"?K=this.getExtAdobeTimeStamp(W,k):Qe.EXT_PARSER[D]!=null&&(K=Qe.EXT_PARSER[D](D,k,W)),K!=null)return K;var ie={extname:D,extn:W};try{ie.extn=s(W)}catch{}return k&&(ie.critical=!0),ie},this.findExt=function(_,R){for(var P=0;P<_.length;P++)if(_[P].extname==R)return _[P];return null},this.updateExtCDPFullURI=function(_,R){var P=this.findExt(_,"cRLDistributionPoints");if(P!=null&&P.array!=null){for(var D=P.array,k=0;k<D.length;k++)if(D[k].dpname!=null&&D[k].dpname.full!=null)for(var W=D[k].dpname.full,K=0;K<W.length;K++){var ie=W[k];ie.uri!=null&&(ie.uri=R)}}},this.updateExtAIAOCSP=function(_,R){var P=this.findExt(_,"authorityInfoAccess");if(P!=null&&P.array!=null)for(var D=P.array,k=0;k<D.length;k++)D[k].ocsp!=null&&(D[k].ocsp=R)},this.updateExtAIACAIssuer=function(_,R){var P=this.findExt(_,"authorityInfoAccess");if(P!=null&&P.array!=null)for(var D=P.array,k=0;k<D.length;k++)D[k].caissuer!=null&&(D[k].caissuer=R)},this.dnarraytostr=function(_){function R(D){return D.map(function(k){return P(k).replace(/\+/,"\\+")}).join("+")}function P(D){return D.type+"="+D.value}return"/"+_.map(function(D){return R(D).replace(/\//,"\\/")}).join("/")},this.setCanonicalizedDN=function(_){var R;if(_.str!=null&&_.array==null){var P=new E.asn1.x509.X500Name({str:_.str}),D=P.tohex();R=this.getX500NameArray(D)}else R=_.array;_.canon==null&&(_.canon=this.c14nRDNArray(R))},this.c14nRDNArray=function(_){for(var R=[],P=0;P<_.length;P++){for(var D=_[P],k=[],W=0;W<D.length;W++){var K=D[W],ie=K.value;ie=ie.replace(/^\s*/,""),ie=ie.replace(/\s*$/,""),ie=ie.replace(/\s+/g," "),ie=ie.toLowerCase(),k.push(K.type.toLowerCase()+"="+ie)}R.push(k.join("+"))}return"/"+R.join("/")},this.getInfo=function(){var _=function(J){for(var ve="",ye="    ",ke=`
`,Le=J.array,Ye=0;Ye<Le.length;Ye++){var Ze=Le[Ye];if(Ze.dn!=null&&(ve+=ye+"dn: "+Ze.dn.str+ke),Ze.ip!=null&&(ve+=ye+"ip: "+Ze.ip+ke),Ze.rfc822!=null&&(ve+=ye+"rfc822: "+Ze.rfc822+ke),Ze.dns!=null&&(ve+=ye+"dns: "+Ze.dns+ke),Ze.uri!=null&&(ve+=ye+"uri: "+Ze.uri+ke),Ze.other!=null){var tt=Ze.other.oid,dr=JSON.stringify(Ze.other.value).replace(/\"/g,"");ve+=ye+"other: "+tt+"="+dr+ke}}return ve=ve.replace(/\n$/,""),ve},R=function(J){for(var ve="",ye=J.array,ke=0;ke<ye.length;ke++){var Le=ye[ke];if(ve+="    policy oid: "+Le.policyoid+`
`,Le.array!==void 0)for(var Ye=0;Ye<Le.array.length;Ye++){var Ze=Le.array[Ye];Ze.cps!==void 0&&(ve+="    cps: "+Ze.cps+`
`)}}return ve},P=function(J){for(var ve="",ye=J.array,ke=0;ke<ye.length;ke++){var Le=ye[ke];try{Le.dpname.full[0].uri!==void 0&&(ve+="    "+Le.dpname.full[0].uri+`
`)}catch{}try{Le.dname.full[0].dn.hex!==void 0&&(ve+="    "+Qe.hex2dn(Le.dpname.full[0].dn.hex)+`
`)}catch{}}return ve},D=function(J){for(var ve="",ye=J.array,ke=0;ke<ye.length;ke++){var Le=ye[ke];Le.caissuer!==void 0&&(ve+="    caissuer: "+Le.caissuer+`
`),Le.ocsp!==void 0&&(ve+="    ocsp: "+Le.ocsp+`
`)}return ve},k,W,K;if(k=`Basic Fields
`,k+="  serial number: "+this.getSerialNumberHex()+`
`,k+="  signature algorithm: "+this.getSignatureAlgorithmField()+`
`,k+="  issuer: "+this.getIssuerString()+`
`,k+="  notBefore: "+this.getNotBefore()+`
`,k+="  notAfter: "+this.getNotAfter()+`
`,k+="  subject: "+this.getSubjectString()+`
`,k+=`  subject public key info: 
`,W=this.getPublicKey(),k+="    key algorithm: "+W.type+`
`,W.type==="RSA"&&(k+="    n="+td(W.n.toString(16)).substr(0,16)+`...
`,k+="    e="+td(W.e.toString(16))+`
`),K=this.aExtInfo,K!=null){k+=`X509v3 Extensions:
`;for(var ie=0;ie<K.length;ie++){var G=K[ie],V=E.asn1.x509.OID.oid2name(G.oid);V===""&&(V=G.oid);var ce="";if(G.critical===!0&&(ce="CRITICAL"),k+="  "+V+" "+ce+`:
`,V==="basicConstraints"){var te=this.getExtBasicConstraints();te.cA===void 0?k+=`    {}
`:(k+="    cA=true",te.pathLen!==void 0&&(k+=", pathLen="+te.pathLen),k+=`
`)}else if(V=="policyMappings"){var Ee=this.getExtPolicyMappings().array,be=Ee.map(function(J){var ve=J;return ve[0]+":"+ve[1]}).join(", ");k+="    "+be+`
`}else if(V=="policyConstraints"){var oe=this.getExtPolicyConstraints();k+="    ",oe.reqexp!=null&&(k+=" reqexp="+oe.reqexp),oe.inhibit!=null&&(k+=" inhibit="+oe.inhibit),k+=`
`}else if(V=="inhibitAnyPolicy"){var oe=this.getExtInhibitAnyPolicy();k+="    skip="+oe.skip+`
`}else if(V=="keyUsage")k+="    "+this.getExtKeyUsageString()+`
`;else if(V=="subjectKeyIdentifier")k+="    "+this.getExtSubjectKeyIdentifier().kid.hex+`
`;else if(V=="authorityKeyIdentifier"){var Y=this.getExtAuthorityKeyIdentifier();Y.kid!==void 0&&(k+="    kid="+Y.kid.hex+`
`)}else if(V=="extKeyUsage"){var le=this.getExtExtKeyUsage().array;k+="    "+le.join(", ")+`
`}else if(V=="subjectAltName"){var ne=_(this.getExtSubjectAltName());k+=ne+`
`}else if(V=="cRLDistributionPoints"){var U=this.getExtCRLDistributionPoints();k+=P(U)}else if(V=="authorityInfoAccess"){var q=this.getExtAuthorityInfoAccess();k+=D(q)}else V=="certificatePolicies"&&(k+=R(this.getExtCertificatePolicies()))}}return k+="signature algorithm: "+this.getSignatureAlgorithmName()+`
`,k+="signature: "+this.getSignatureValueHex().substr(0,16)+`...
`,k},typeof e=="string"&&(e.indexOf("-----BEGIN")!=-1?this.readCertPEM(e):E.lang.String.isHex(e)&&this.readCertHex(e))}Qe.EXT_PARSER={};Qe.registExtParser=function(e,t){Qe.EXT_PARSER[e]=t};Qe.hex2dn=function(e,t){t===void 0&&(t=0);var r=new Qe;we.getTLV(e,t);var n=r.getX500Name(e);return n.str};Qe.hex2rdn=function(e,t){if(t===void 0&&(t=0),e.substr(t,2)!=="31")throw new Error("malformed RDN");for(var r=new Array,n=we.getChildIdx(e,t),s=0;s<n.length;s++)r.push(Qe.hex2attrTypeValue(e,n[s]));return r=r.map(function(o){return o.replace("+","\\+")}),r.join("+")};Qe.hex2attrTypeValue=function(e,t){var r=we,n=r.getV;if(t===void 0&&(t=0),e.substr(t,2)!=="30")throw new Error("malformed attribute type and value");var s=r.getChildIdx(e,t);s.length!==2||e.substr(s[0],2);var o=n(e,s[0]),u=E.asn1.ASN1Util.oidHexToInt(o),h=E.asn1.x509.OID.oid2atype(u),g=n(e,s[1]),d=vn(g);return h+"="+d};Qe.getPublicKeyFromCertHex=function(e){var t=new Qe;return t.readCertHex(e),t.getPublicKey()};Qe.getPublicKeyFromCertPEM=function(e){var t=new Qe;return t.readCertPEM(e),t.getPublicKey()};Qe.getPublicKeyInfoPropOfCertPEM=function(e){var t=we,r=t.getVbyList,n={},s,o;return n.algparam=null,s=new Qe,s.readCertPEM(e),o=s.getPublicKeyHex(),n.keyhex=r(o,0,[1],"03").substr(2),n.algoid=r(o,0,[0,0],"06"),n.algoid==="2a8648ce3d0201"&&(n.algparam=r(o,0,[0,1],"06")),n};Qe.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];var Pb=function(e){var t=E,r=t.lang.String.isHex,n=we,s=n.getV,o=n.getTLV,u=n.getVbyList,h=n.getTLVbyList,g=n.getTLVbyListEx,d=n.getIdxbyList,x=n.getIdxbyListEx,v=n.getChildIdx,y=new Qe;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var S=d(this.hex,0,[0,0]),w=this.hex.substr(S,2);if(w=="02")this.posSigAlg=1;else if(w=="30")this.posSigAlg=0;else throw new Error("malformed 1st item of TBSCertList: "+w);var A=d(this.hex,0,[0,this.posSigAlg+3]),b=this.hex.substr(A,2);if(b=="17"||b=="18"){var I,N;I=d(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,I!=-1&&(N=this.hex.substr(I,2),N=="30"&&(this.posRevCert=this.posSigAlg+4))}else if(b=="30")this.posRevCert=this.posSigAlg+3;else if(b=="a0")this.posRevCert=null;else throw new Error("malformed nextUpdate or revCert tag: "+b)},this.getVersion=function(){return this.posSigAlg==0?null:parseInt(u(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var S=h(this.hex,0,[0,this.posSigAlg],"30");return y.getAlgorithmIdentifierName(S)},this.getIssuer=function(){return y.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return h(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var S=u(this.hex,0,[0,this.posSigAlg+2]);return result=vn(S)},this.getNextUpdate=function(){var S=d(this.hex,0,[0,this.posSigAlg+3]),w=this.hex.substr(S,2);return w!="17"&&w!="18"?null:vn(s(this.hex,S))},this.getRevCertArray=function(){if(this.posRevCert==null)return null;for(var S=[],w=d(this.hex,0,[0,this.posRevCert]),A=v(this.hex,w),b=0;b<A.length;b++){var I=o(this.hex,A[b]);S.push(this.getRevCert(I))}return S},this.getRevCert=function(S){var w={},A=v(S,0);return w.sn={hex:u(S,0,[0],"02")},w.date=vn(u(S,0,[1])),A.length==3&&(w.ext=y.getExtParamArray(h(S,0,[2]))),w},this.findRevCert=function(S){var w=new Qe(S),A=w.getSerialNumberHex();return this.findRevCertBySN(A)},this.findRevCertBySN=function(S){if(this.parsed==null&&this.getParam(),this.parsed.revcert==null)return null;for(var w=this.parsed.revcert,A=0;A<w.length;A++)if(S==w[A].sn.hex)return w[A];return null},this.getSignatureValueHex=function(){return u(this.hex,0,[2],"03",!0)},this.verifySignature=function(S){var w=this.getSignatureAlgorithmField(),A=this.getSignatureValueHex(),b=h(this.hex,0,[0],"30"),I=new E.crypto.Signature({alg:w});return I.init(S),I.updateHex(b),I.verify(A)},this.getParam=function(S){var w={},A=this.getVersion();A!=null&&(w.version=A),w.sigalg=this.getSignatureAlgorithmField(),w.issuer=this.getIssuer(),w.thisupdate=this.getThisUpdate();var b=this.getNextUpdate();b!=null&&(w.nextupdate=b);var I=this.getRevCertArray();I!=null&&(w.revcert=I);var N=x(this.hex,0,[0,"[0]"]);if(N!=-1){var F=g(this.hex,0,[0,"[0]",0]);w.ext=y.getExtParamArray(F)}return w.sighex=this.getSignatureValueHex(),this.parsed=w,typeof S=="object"&&(S.tbshex==!0&&(w.tbshex=h(this.hex,0,[0])),S.nodnarray==!0&&delete w.issuer.array),w},typeof e=="string"&&(r(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=hr(e)),this._setPos())};(typeof E>"u"||!E)&&(E={});(typeof E.jws>"u"||!E.jws)&&(E.jws={});E.jws.JWS=function(){var e=E,t=e.jws.JWS,r=t.isSafeJSONString;this.parseJWS=function(n,s){if(!(this.parsedJWS!==void 0&&(s||this.parsedJWS.sigvalH!==void 0))){var o=n.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(o==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var u=o[1],h=o[2],g=o[3],d=u+"."+h;if(this.parsedJWS={},this.parsedJWS.headB64U=u,this.parsedJWS.payloadB64U=h,this.parsedJWS.sigvalB64U=g,this.parsedJWS.si=d,!s){var x=Zt(g),v=cn(x,16);this.parsedJWS.sigvalH=x,this.parsedJWS.sigvalBI=v}var y=ci(u),S=ci(h);if(this.parsedJWS.headS=y,this.parsedJWS.payloadS=S,!r(y,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+y}}};E.jws.JWS.sign=function(e,t,r,n,s){var o=E,u=o.jws,h=u.JWS,g=h.readSafeJSONString,d=h.isSafeJSONString,x=o.crypto;x.ECDSA;var v=x.Mac,y=x.Signature,S=JSON,w,A,b;if(typeof t!="string"&&typeof t!="object")throw"spHeader must be JSON string or object: "+t;if(typeof t=="object"&&(A=t,w=S.stringify(A)),typeof t=="string"){if(w=t,!d(w))throw"JWS Head is not safe JSON string: "+w;A=g(w)}if(b=r,typeof r=="object"&&(b=S.stringify(r)),(e==""||e==null)&&A.alg!==void 0&&(e=A.alg),e!=""&&e!=null&&A.alg===void 0&&(A.alg=e,w=S.stringify(A)),e!==A.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+A.alg;var I=null;if(h.jwsalg2sigalg[e]===void 0)throw"unsupported alg name: "+e;I=h.jwsalg2sigalg[e];var N=Cl(w),F=Cl(b),L=N+"."+F,H="";if(I.substr(0,4)=="Hmac"){if(n===void 0)throw"mac key shall be specified for HS* alg";var _=new v({alg:I,prov:"cryptojs",pass:n});_.updateString(L),H=_.doFinal()}else if(I.indexOf("withECDSA")!=-1){var R=new y({alg:I});R.init(n,s),R.updateString(L);var P=R.sign();H=E.crypto.ECDSA.asn1SigToConcatSig(P)}else if(I!="none"){var R=new y({alg:I});R.init(n,s),R.updateString(L),H=R.sign()}var D=Ir(H);return L+"."+D};E.jws.JWS.verify=function(e,t,r){var n=E,s=n.jws,o=s.JWS,u=o.readSafeJSONString,h=n.crypto,g=h.ECDSA,d=h.Mac,x=h.Signature,v;if(typeof rt!==void 0&&(v=rt),!n0(e))return!1;var y=e.split(".");if(y.length!==3)return!1;var S=y[0],w=y[1],A=S+"."+w,b=Zt(y[2]),I=u(ci(y[0])),N=null,F=null;if(I.alg===void 0)throw"algorithm not specified in header";if(N=I.alg,F=N.substr(0,2),r!=null&&Object.prototype.toString.call(r)==="[object Array]"&&r.length>0){var L=":"+r.join(":")+":";if(L.indexOf(":"+N+":")==-1)throw"algorithm '"+N+"' not accepted in the list"}if(N!="none"&&t===null)throw"key shall be specified to verify.";if(typeof t=="string"&&t.indexOf("-----BEGIN ")!=-1&&(t=gt.getKey(t)),(F=="RS"||F=="PS")&&!(t instanceof v))throw"key shall be a RSAKey obj for RS* and PS* algs";if(F=="ES"&&!(t instanceof g))throw"key shall be a ECDSA obj for ES* algs";var H=null;if(o.jwsalg2sigalg[I.alg]===void 0)throw"unsupported alg name: "+N;if(H=o.jwsalg2sigalg[N],H=="none")throw"not supported";if(H.substr(0,4)=="Hmac"){var _=null;if(t===void 0)throw"hexadecimal key shall be specified for HMAC";var R=new d({alg:H,pass:t});return R.updateString(A),_=R.doFinal(),b==_}else if(H.indexOf("withECDSA")!=-1){var P=null;try{P=g.concatSigToASN1Sig(b)}catch{return!1}var D=new x({alg:H});return D.init(t),D.updateString(A),D.verify(P)}else{var D=new x({alg:H});return D.init(t),D.updateString(A),D.verify(b)}};E.jws.JWS.parse=function(e){var t=e.split("."),r={},n,s,o;if(t.length!=2&&t.length!=3)throw"malformed sJWS: wrong number of '.' splitted elements";return n=t[0],s=t[1],t.length==3&&(o=t[2]),r.headerObj=E.jws.JWS.readSafeJSONString(ci(n)),r.payloadObj=E.jws.JWS.readSafeJSONString(ci(s)),r.headerPP=JSON.stringify(r.headerObj,null,"  "),r.payloadObj==null?r.payloadPP=ci(s):r.payloadPP=JSON.stringify(r.payloadObj,null,"  "),o!==void 0&&(r.sigHex=Zt(o)),r};E.jws.JWS.verifyJWT=function(e,t,r){var n=E,s=n.jws,o=s.JWS,u=o.readSafeJSONString,h=o.inArray,g=o.includedArray;if(!n0(e))return!1;var d=e.split(".");if(d.length!=3)return!1;var x=d[0],v=d[1];Zt(d[2]);var y=u(ci(x)),S=u(ci(v));if(y.alg===void 0)return!1;if(r.alg===void 0)throw"acceptField.alg shall be specified";if(!h(y.alg,r.alg)||S.iss!==void 0&&typeof r.iss=="object"&&!h(S.iss,r.iss)||S.sub!==void 0&&typeof r.sub=="object"&&!h(S.sub,r.sub))return!1;if(S.aud!==void 0&&typeof r.aud=="object"){if(typeof S.aud=="string"){if(!h(S.aud,r.aud))return!1}else if(typeof S.aud=="object"&&!g(S.aud,r.aud))return!1}var w=s.IntDate.getNow();return r.verifyAt!==void 0&&typeof r.verifyAt=="number"&&(w=r.verifyAt),(r.gracePeriod===void 0||typeof r.gracePeriod!="number")&&(r.gracePeriod=0),!(S.exp!==void 0&&typeof S.exp=="number"&&S.exp+r.gracePeriod<w||S.nbf!==void 0&&typeof S.nbf=="number"&&w<S.nbf-r.gracePeriod||S.iat!==void 0&&typeof S.iat=="number"&&w<S.iat-r.gracePeriod||S.jti!==void 0&&r.jti!==void 0&&S.jti!==r.jti||!o.verify(e,t,r.alg))};E.jws.JWS.includedArray=function(e,t){var r=E.jws.JWS.inArray;if(e===null||typeof e!="object"||typeof e.length!="number")return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0};E.jws.JWS.inArray=function(e,t){if(t===null||typeof t!="object"||typeof t.length!="number")return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1};E.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"};E.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return n=Tv(e),typeof n!="object"||n.constructor===Array?0:(t&&(t[r]=n),1)}catch{return 0}};E.jws.JWS.readSafeJSONString=function(e){var t=null;try{return t=Tv(e),typeof t!="object"||t.constructor===Array?null:t}catch{return null}};E.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(t==null)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]};E.jws.JWS.getJWKthumbprint=function(e){if(e.kty!=="RSA"&&e.kty!=="EC"&&e.kty!=="oct")throw"unsupported algorithm for JWK Thumprint";var t="{";if(e.kty==="RSA"){if(typeof e.n!="string"||typeof e.e!="string")throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if(e.kty==="EC"){if(typeof e.crv!="string"||typeof e.x!="string"||typeof e.y!="string")throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if(e.kty==="oct"){if(typeof e.k!="string")throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=bi(t),n=E.crypto.Util.hashHex(r,"sha256"),s=Ir(n);return s};E.jws.IntDate={};E.jws.IntDate.get=function(e){var t=E.jws.IntDate,r=t.getNow,n=t.getZulu;if(e=="now")return r();if(e=="now + 1hour")return r()+60*60;if(e=="now + 1day")return r()+60*60*24;if(e=="now + 1month")return r()+60*60*24*30;if(e=="now + 1year")return r()+60*60*24*365;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e};E.jws.IntDate.getZulu=function(e){return Rv(e)};E.jws.IntDate.getNow=function(){var e=~~(new Date/1e3);return e};E.jws.IntDate.intDate2UTCString=function(e){var t=new Date(e*1e3);return t.toUTCString()};E.jws.IntDate.intDate2Zulu=function(e){var t=new Date(e*1e3),r=("0000"+t.getUTCFullYear()).slice(-4),n=("00"+(t.getUTCMonth()+1)).slice(-2),s=("00"+t.getUTCDate()).slice(-2),o=("00"+t.getUTCHours()).slice(-2),u=("00"+t.getUTCMinutes()).slice(-2),h=("00"+t.getUTCSeconds()).slice(-2);return r+n+s+o+u+h+"Z"};(typeof E>"u"||!E)&&(E={});(typeof E.jws>"u"||!E.jws)&&(E.jws={});E.jws.JWSJS=function(){var e=E,t=e.jws,r=t.JWS,n=r.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(s){this.init();var o=s.split(".");if(o.length!=3)throw"malformed input JWS";this.aHeader.push(o[0]),this.sPayload=o[1],this.aSignature.push(o[2])},this.addSignature=function(s,o,u,h){if(this.sPayload===void 0||this.sPayload===null)throw"there's no JSON-JS signature to add.";var g=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var d=E.jws.JWS.sign(s,o,this.sPayload,u,h),x=d.split("."),v=x[0],y=x[2];this.aHeader.push(x[0]),this.aSignature.push(x[2])}catch(S){throw this.aHeader.length>g&&this.aHeader.pop(),this.aSignature.length>g&&this.aSignature.pop(),"addSignature failed: "+S}},this.verifyAll=function(s){if(this.aHeader.length!==s.length||this.aSignature.length!==s.length)return!1;for(var o=0;o<s.length;o++){var u=s[o];if(u.length!==2)return!1;var h=this.verifyNth(o,u[0],u[1]);if(h===!1)return!1}return!0},this.verifyNth=function(s,o,u){if(this.aHeader.length<=s||this.aSignature.length<=s)return!1;var h=this.aHeader[s],g=this.aSignature[s],d=h+"."+this.sPayload+"."+g,x=!1;try{x=r.verify(d,o,u)}catch{return!1}return x},this.readJWSJS=function(s){if(typeof s=="string"){var o=n(s);if(o==null)throw"argument is not safe JSON object string";this.aHeader=o.headers,this.sPayload=o.payload,this.aSignature=o.signatures}else try{if(s.headers.length>0)this.aHeader=s.headers;else throw"malformed header";if(typeof s.payload=="string")this.sPayload=s.payload;else throw"malformed signatures";if(s.signatures.length>0)this.aSignature=s.signatures;else throw"malformed signatures"}catch(u){throw"malformed JWS-JS JSON object: "+u}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return this.aHeader.length==0?1:0}};Ie.SecureRandom=co;Ie.rng_seed_time=Q1;Ie.BigInteger=ee;Ie.RSAKey=rt;Ie.ECDSA=E.crypto.ECDSA;Ie.DSA=E.crypto.DSA;Ie.Signature=E.crypto.Signature;Ie.MessageDigest=E.crypto.MessageDigest;Ie.Mac=E.crypto.Mac;Ie.KEYUTIL=gt;Ie.ASN1HEX=we;Ie.X509=Qe;Ie.X509CRL=Pb;Ie.CryptoJS=Te;Ie.b64tohex=oo;Ie.b64toBA=Sv;Ie.ECFieldElementFp=_r;Ie.ECPointFp=It;Ie.ECCurveFp=Wi;Ie.stoBA=Nv;Ie.BAtos=_v;Ie.BAtohex=Kc;Ie.stohex=dn;Ie.stob64=pb;Ie.stob64u=gb;Ie.b64utos=mb;Ie.b64tob64u=eo;Ie.b64utob64=Bl;Ie.hex2b64=ji;Ie.hextob64u=Ir;Ie.b64utohex=Zt;Ie.utf8tob64u=Cl;Ie.b64utoutf8=ci;Ie.utf8tob64=yb;Ie.b64toutf8=vb;Ie.utf8tohex=Wc;Ie.hextoutf8=_t;Ie.hextorstr=vn;Ie.rstrtohex=bi;Ie.hextob64=J1;Ie.hextob64nl=Eb;Ie.b64nltohex=Dv;Ie.hextopem=Gr;Ie.pemtohex=hr;Ie.hextoArrayBuffer=Cb;Ie.ArrayBuffertohex=Ib;Ie.zulutomsec=e0;Ie.msectozulu=bb;Ie.zulutosec=Rv;Ie.zulutodate=Tb;Ie.datetozulu=Nb;Ie.uricmptohex=qc;Ie.hextouricmp=Xc;Ie.ipv6tohex=Jh;Ie.hextoipv6=ed;Ie.hextoip=dc;Ie.iptohex=t0;Ie.ucs2hextoutf8=r0;Ie.encodeURIComponentAll=Yc;Ie.newline_toUnix=_b;Ie.newline_toDos=Db;Ie.hextoposhex=td;Ie.intarystrtohex=Rb;Ie.strdiffidx=Ob;Ie.oidtohex=Pv;Ie.hextooid=Zc;Ie.strpad=pc;Ie.bitstrtoint=Bv;Ie.inttobitstr=Lv;Ie.bitstrtobinstr=kv;Ie.binstrtobitstr=Fb;Ie.isBase64URLDot=n0;Ie.namearraytobinstr=gc;Ie.extendClass=pe;Ie.foldnl=Gc;Ie.b64topem=Sb;Ie.pemtob64=Ab;Ie.timeogen=Ov;Ie.aryval=jt;Ie.inttohex=Mv;Ie.twoscompl=Ll;Ie.KJUR=E;Ie.crypto=E.crypto;Ie.asn1=E.asn1;Ie.jws=E.jws;Ie.lang=E.lang;Ie.VERSION=zC;Ie.VERSION_FULL=KC;const Mb=new $C;async function Bb(e){const r=await(await fetch("/verify/schema.json")).json(),n=Lb(e,r);if(!n.ok)return{ok:!1,errorCode:"invalid_format"};const{header:s,payload:o,jws:u}=n,h=jb(o),d=await(await fetch("/verify/authorities.json")).json(),x=d[h.issuer],v=d[h.issued_for],y=await fetch(`${jg(x)}/verify/${e}`);if(y.ok){const S=await y.json();return S.issuer=x.name,S.issued_for=v.name,{ok:!0,permit:S}}else{const S=await kb(jg(x),s.kid);if(!S.ok)return{ok:!1,errorCode:"invalid_key"};const w=Ie.KEYUTIL.getKey(S.jwk);if(!Ie.KJUR.jws.JWS.verify(u,w,[s.alg]))return{ok:!1,errorCode:"invalid_signature"}}}function Lb(e,t){const r=e.split("."),n=JSON.parse(Hg(r[0])),s=JSON.parse(Hg(r[1])),o=Mb.compile(t);return o({header:n,payload:s,sig:r[2]})?{ok:!0,payload:s,header:n,jws:`${r[1]}.${r[2]}.${r[3]}`}:(console.log("Validation error"),console.error(o.errors),{ok:!1})}async function kb(e,t){const s=(await(await fetch(e)).json()).keys.find(o=>o.kid===t);return s?{ok:!0,jwk:s}:{ok:!1}}function jb(e){const t=e.id.split("-");return{id:e.id,issuer:t[0],issued_for:t[1],year:t[2],type:t[3],issued_at:e.iat,expire_at:e.exp,plate_number:e.pn,company_name:e.cn}}function jg(e){return e["prod-url"]}function Hg(e){const t=e.length%4;return atob(e.replace(/-/g,"+").replace(/_/g,"/").padEnd(e.length+(t===0?0:4-t),"="))}function Hb(){const e=Sy(),{qrCode:t}=A4(),[r,n]=Re.useState();Re.useEffect(()=>{(async()=>{const u=await Bb(t);n(u==null?void 0:u.permit)})().catch(console.error)},[]);const s=()=>{e("/")};return qe.jsx("div",{children:r&&qe.jsxs("div",{children:[qe.jsxs("div",{className:"flex justify-between",children:[qe.jsx("div",{className:"self-center",children:qe.jsx("h3",{className:"text-base font-semibold leading-7 text-gray-900",children:"E- PERMIT"})}),qe.jsxs("div",{className:"flex flex-col items-center justify-center text-emerald-600 ",children:[qe.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-9",children:qe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"})}),qe.jsx("span",{className:"font-semibold",children:"Verified"})]})]}),qe.jsx("div",{className:"mt-6 border-t border-gray-100",children:qe.jsxs("dl",{className:"divide-y divide-gray-100",children:[qe.jsxs("div",{className:"bg-gray-50 px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"ID"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.permit_id})]}),qe.jsxs("div",{className:"bg-white px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Issuer"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.issuer})]}),qe.jsxs("div",{className:"bg-gray-50 px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Issued for"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.issued_for})]}),qe.jsxs("div",{className:"bg-white px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Year"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.permit_year})]}),qe.jsxs("div",{className:"bg-gray-50 px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Type"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.permit_type})]}),qe.jsxs("div",{className:"bg-white px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Issued at"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.issued_at})]}),qe.jsxs("div",{className:"bg-gray-50 px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Expires at"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.expires_at})]}),qe.jsxs("div",{className:"bg-white px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Plate Number"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.plate_number})]}),qe.jsxs("div",{className:"bg-gray-50 px-4 py-4 sm:grid sm:grid-cols-3 sm:gap-2 sm:px-3",children:[qe.jsx("dt",{className:"text-sm font-medium leading-6 text-gray-900",children:"Company Name"}),qe.jsx("dd",{className:"mt-1 text-sm leading-6 text-gray-700 sm:col-span-2 sm:mt-0",children:r.company_name})]})]})}),qe.jsx("div",{className:"flex justify-center m-10",children:qe.jsx("button",{className:"bg-gray-200 px-2.5 py-1 text-gray-900  font-semibold shadow-sm p-10 rounded-full ring-1 ring-inset ring-gray-300",onClick:s,children:qe.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"black",className:"size-6",children:[qe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 3.75 9.375v-4.5ZM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 0 1-1.125-1.125v-4.5ZM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0 1 13.5 9.375v-4.5Z"}),qe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75ZM6.75 16.5h.75v.75h-.75v-.75ZM16.5 6.75h.75v.75h-.75v-.75ZM13.5 13.5h.75v.75h-.75v-.75ZM13.5 19.5h.75v.75h-.75v-.75ZM19.5 13.5h.75v.75h-.75v-.75ZM19.5 19.5h.75v.75h-.75v-.75ZM16.5 16.5h.75v.75h-.75v-.75Z"})]})})})]})})}const Ub=j4([{path:"/",element:qe.jsx(Q4,{})},{path:"/permits/:qrCode",element:qe.jsx(Hb,{})}],{basename:"/verify"});Wf.createRoot(document.getElementById("root")).render(qe.jsx("div",{className:"sm:px-2 md:px-4 px-6 sm:py-4 md:py-8 py-10",children:qe.jsx(q4,{router:Ub})}));
