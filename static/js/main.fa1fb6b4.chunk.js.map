{"version":3,"sources":["Flags.js","PermitView.js","utils.js","App.js","serviceWorker.js","index.js"],"names":["code","SvgIcon","viewBox","fill","d","cx","cy","r","transform","id","xlinkHref","y","x","width","height","useStyles","makeStyles","theme","root","maxWidth","backgroundColor","palette","background","paper","dividerFullWidth","margin","spacing","dividerInset","layout","marginLeft","marginRight","breakpoints","up","marginTop","marginBottom","padding","CredentialView","permit","locale","console","log","classes","className","Paper","Typography","component","variant","align","List","ListItem","ListItemText","primary","Alert","severity","valid_signature_message","Divider","issuer_label","secondary","Grid","container","alignItems","item","Flags","issuer","issued_for_label","issued_for","issued_at_label","Date","issued_at","toLocaleDateString","plate_number_label","plate_number","permit_type_label","permit_type","permit_year_label","permit_year","serial_number_label","serial_number","company_name_label","company_name","rs","require","base64url","AUTHORITIES_URL","validatePermit","jws","a","arr","split","header","JSON","parse","decode","payload","claims","permit_id","toUpperCase","fetch","res","json","authoritiesResult","AUD_URI","authorities","find","uri","audRes","authority","Object","keys","length","result","isValid","errorCode","publicKey","kid","jwk","pubKey","KEYUTIL","getKey","KJUR","JWS","verify","alg","App","useState","jwsResult","setJwsResult","setLocale","url","window","location","pathname","substring","lastIndexOf","useEffect","verifyPermit","CircularProgress","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.fa1fb6b4.chunk.js","sourcesContent":["import React from 'react';\nimport { SvgIcon } from '@material-ui/core';\n\nexport default ({ code }) => {\n    if (code === \"tr\") {\n        return <SvgIcon viewBox=\"0 0 8 12\">\n            <path fill=\"#E30A17\" d=\"M0 0h12v8H0z\" />\n            <circle cx=\"4.25\" cy=\"4\" r=\"2\" fill=\"#fff\" />\n            <circle cx=\"4.75\" cy=\"4\" r=\"1.6\" fill=\"#e30a17\" />\n            <path fill=\"#fff\" d=\"M5.83334 4l1.80901 .58779-1.11804-1.53885v1.90212l1.11804-1.53885z\" />\n        </SvgIcon>;\n    } else if (code === \"ua\") {\n        return <SvgIcon viewBox=\"0 0 3 2\">\n            <path fill=\"#0057B7\" d=\"M0 0h3v2H0z\" />\n            <path fill=\"gold\" d=\"M0 1h3v1H0z\" />\n        </SvgIcon>;\n    } else if (code === \"uz\") {\n        return <SvgIcon viewBox=\"0 0 500 250\">\n            <path fill=\"#1eb53a\" d=\"M0 0h500v250H0z\" />\n            <path fill=\"#0099b5\" d=\"M0 0h500v125H0z\" />\n            <path fill=\"#ce1126\" d=\"M0 80h500v90H0z\" />\n            <path fill=\"#fff\" d=\"M0 85h500v80H0z\" />\n            <circle cx=\"70\" cy=\"40\" r=\"30\" fill=\"#fff\" />\n            <circle cx=\"80\" cy=\"40\" r=\"30\" fill=\"#0099b5\" />\n            <g fill=\"#fff\" transform=\"translate(136 64)\">\n                <g id=\"e\">\n                    <g id=\"d\">\n                        <g id=\"c\">\n                            <g id=\"b\">\n                                <path id=\"a\" d=\"M0-6v6h3\" transform=\"rotate(18 0 -6)\" />\n                                <use xlinkHref=\"#a\" transform=\"scale(-1 1)\" />\n                            </g>\n                            <use xlinkHref=\"#b\" transform=\"rotate(72)\" />\n                        </g><use xlinkHref=\"#b\" transform=\"rotate(-72)\" />\n                        <use xlinkHref=\"#c\" transform=\"rotate(144)\" />\n                    </g>\n                    <use xlinkHref=\"#d\" y=\"-24\" />\n                    <use xlinkHref=\"#d\" y=\"-48\" />\n                </g>\n                <use xlinkHref=\"#e\" x=\"24\" />\n                <use xlinkHref=\"#e\" x=\"48\" />\n                <use xlinkHref=\"#d\" x=\"-48\" />\n                <use xlinkHref=\"#d\" x=\"-24\" />\n                <use xlinkHref=\"#d\" x=\"-24\" y=\"-24\" />\n            </g>\n        </SvgIcon>;\n    } else if (code === \"ru\") {\n        return <SvgIcon viewBox=\"0 0 9 6\">\n        <rect fill=\"#fff\" width=\"9\" height=\"3\"/>\n        <rect fill=\"#d52b1e\" y=\"3\" width=\"9\" height=\"3\"/>\n        <rect fill=\"#0039a6\" y=\"2\" width=\"9\" height=\"2\"/>        \n        </SvgIcon>;\n    }\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Divider from \"@material-ui/core/Divider\";\nimport { Grid, Paper, Typography } from \"@material-ui/core\";\nimport { Alert } from \"@material-ui/lab\";\nimport Flags from \"./Flags\";\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: \"100%\",\n        maxWidth: 500,\n        backgroundColor: theme.palette.background.paper\n    },\n    dividerFullWidth: {\n        margin: `5px 0 0 ${theme.spacing(2)}px`\n    },\n    dividerInset: {\n        margin: `5px 0 0 ${theme.spacing(9)}px`\n    },\n    layout: {\n        width: 'auto',\n        marginLeft: theme.spacing(2),\n        marginRight: theme.spacing(2),\n        [theme.breakpoints.up(600 + theme.spacing(2) * 2)]: {\n            width: 600,\n            marginLeft: 'auto',\n            marginRight: 'auto',\n        },\n    },\n    paper: {\n        marginTop: theme.spacing(3),\n        marginBottom: theme.spacing(3),\n        padding: theme.spacing(2),\n        [theme.breakpoints.up(600 + theme.spacing(3) * 2)]: {\n            marginTop: theme.spacing(6),\n            marginBottom: theme.spacing(6),\n            padding: theme.spacing(3),\n        },\n    },\n}));\n\nexport default function CredentialView({ permit, locale }) {\n    console.log(permit);\n    const classes = useStyles();\n    return (\n        <main className={classes.layout}>\n            <Paper className={classes.paper}>\n                <Typography component=\"h4\" variant=\"h5\" align=\"center\">\n                    E-PERMIT VERIFICATION\n                </Typography>\n                <List className={classes.root}>\n                    <ListItem>\n                        <ListItemText\n                            primary={\n                                <Alert severity=\"success\">\n                                    {locale.valid_signature_message}\n                                </Alert>\n                            }\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.issuer_label}\n                            secondary={\n                                <div className={classes.root}>\n                                    <Grid container alignItems=\"center\" spacing={3}>\n                                        <Grid item>\n                                            <Flags code={permit.issuer} />\n                                        </Grid>\n                                        <Grid item>{locale[\"authority_name_\" + permit.issuer]}</Grid>\n                                    </Grid>\n                                </div>\n                            }\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.issued_for_label}\n                            secondary={\n                                <div className={classes.root}>\n                                    <Grid container alignItems=\"center\" spacing={3}>\n                                        <Grid item>\n                                            <Flags code={permit.issued_for} />\n                                        </Grid>\n                                        <Grid item>{locale[\"authority_name_\" + permit.issued_for]}</Grid>\n                                    </Grid>\n                                </div>\n                            }                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.issued_at_label}\n                            secondary={<div className={classes.root}>{new Date(permit.issued_at * 1000).toLocaleDateString()}</div>}\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.plate_number_label}\n                            secondary={<div className={classes.root}>{permit.plate_number}</div>}\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.permit_type_label}\n                            secondary={<div className={classes.root}>{locale[\"permit_type_\" + permit.permit_type + \"_text\"]}</div>}\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.permit_year_label}\n                            secondary={<div className={classes.root}>{permit.permit_year}</div>}\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.serial_number_label}\n                            secondary={<div className={classes.root}>{permit.serial_number}</div>}\n                        />\n                    </ListItem>\n                    <Divider component=\"li\" />\n                    <ListItem>\n                        <ListItemText\n                            primary={locale.company_name_label}\n                            secondary={<div className={classes.root}>{permit.company_name}</div>}\n                        />\n                    </ListItem>\n                </List>\n            </Paper>\n        </main>\n    );\n}\n","const rs = require(\"jsrsasign\");\nconst base64url = require(\"base64-url\");\nconst AUTHORITIES_URL = \"/verify/authorities.json\";\n\nexport async function validatePermit(jws) {\n    const arr = jws.split(\".\");\n    const header = JSON.parse(base64url.decode(arr[0]));\n    const payload = base64url.decode(arr[1]);\n    const claims = payload.split(\"#\");\n    const permit = {\n        issuer: claims[0],\n        issued_for: claims[1],\n        permit_year: claims[2],\n        permit_type: claims[3],\n        permit_id: claims[4],\n        issued_at: claims[5],\n        plate_number: claims[6],\n        company_name: claims[7],\n        serial_number: `${claims[0].toUpperCase()}-${claims[1].toUpperCase()}-${claims[2]}-${claims[3]}-${claims[4]}`\n    }\n    const res = await fetch(AUTHORITIES_URL);\n    const authoritiesResult = await res.json();\n    const AUD_URI = authoritiesResult.authorities.find((x) => x.code === permit.issued_for).uri;\n    const audRes = await fetch(AUD_URI);\n    const authority = await audRes.json();\n    const issuer = authority.authorities.find((x) => x.code === permit.issuer);\n    if (!issuer || Object.keys(issuer).length === 0) {\n        return { result: { isValid: false, errorCode: \"iss_notfound\" }, locale: authority.locale };\n    }\n    const publicKey = issuer.keys.find((x) => x.kid === header.kid);\n    if (!publicKey || !publicKey.jwk) {\n        return { result: { isValid: false, errorCode: \"jwk_notfound\" }, locale: authority.locale };\n    }\n    const pubKey = rs.KEYUTIL.getKey(JSON.parse(publicKey.jwk));\n    const isValid = rs.KJUR.jws.JWS.verify(jws, pubKey, [header.alg]);\n    if (!isValid) {\n        return { result: { isValid: false, errorCode: \"invalid_signature\" }, locale: authority.locale };\n    }\n    \n    return { result: { isValid: true, permit: permit }, locale: authority.locale };\n}","import React, { useEffect, useState } from \"react\";\nimport { Alert } from \"@material-ui/lab\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport PermitView from \"./PermitView\";\nimport { validatePermit } from \"./utils\";\n\nfunction App() {\n  const [jwsResult, setJwsResult] = useState();\n  const [locale, setLocale] = useState();\n  async function verifyPermit() {\n    var url = window.location.pathname;\n    const jws = url.substring(url.lastIndexOf('/') + 1);\n    const res = await validatePermit(jws);  \n    setLocale(res.locale);\n    setJwsResult(res.result);\n  }\n  useEffect(() => verifyPermit(), []);\n\n  if (!jwsResult) {\n    return <CircularProgress />;\n  } else if (jwsResult.isValid) {\n    return <PermitView permit={jwsResult.permit} locale={locale} />;\n  } else {\n    return (\n      <Alert severity=\"error\">\n        {locale[jwsResult.errorCode + \"_message\"]}\n      </Alert>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}