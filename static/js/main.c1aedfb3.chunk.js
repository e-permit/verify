(this.webpackJsonpverify=this.webpackJsonpverify||[]).push([[0],{57:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(10),i=r.n(a),s=r(14),o=r.n(s),l=r(21),j=r(27),d=r(88),u=r(86),b=r(26),x=r(80),p=r(82),f=r(89),h=r(83),O=r(84),m=r(81),g=r(24),v=r(85),y=r(78),w=r(2),_=function(e){var t=e.code;return"tr"===t?Object(w.jsxs)(y.a,{viewBox:"0 0 8 12",children:[Object(w.jsx)("path",{fill:"#E30A17",d:"M0 0h12v8H0z"}),Object(w.jsx)("circle",{cx:"4.25",cy:"4",r:"2",fill:"#fff"}),Object(w.jsx)("circle",{cx:"4.75",cy:"4",r:"1.6",fill:"#e30a17"}),Object(w.jsx)("path",{fill:"#fff",d:"M5.83334 4l1.80901 .58779-1.11804-1.53885v1.90212l1.11804-1.53885z"})]}):"ua"===t?Object(w.jsxs)(y.a,{viewBox:"0 0 3 2",children:[Object(w.jsx)("path",{fill:"#0057B7",d:"M0 0h3v2H0z"}),Object(w.jsx)("path",{fill:"gold",d:"M0 1h3v1H0z"})]}):"uz"===t?Object(w.jsxs)(y.a,{viewBox:"0 0 500 250",children:[Object(w.jsx)("path",{fill:"#1eb53a",d:"M0 0h500v250H0z"}),Object(w.jsx)("path",{fill:"#0099b5",d:"M0 0h500v125H0z"}),Object(w.jsx)("path",{fill:"#ce1126",d:"M0 80h500v90H0z"}),Object(w.jsx)("path",{fill:"#fff",d:"M0 85h500v80H0z"}),Object(w.jsx)("circle",{cx:"70",cy:"40",r:"30",fill:"#fff"}),Object(w.jsx)("circle",{cx:"80",cy:"40",r:"30",fill:"#0099b5"}),Object(w.jsxs)("g",{fill:"#fff",transform:"translate(136 64)",children:[Object(w.jsxs)("g",{id:"e",children:[Object(w.jsxs)("g",{id:"d",children:[Object(w.jsxs)("g",{id:"c",children:[Object(w.jsxs)("g",{id:"b",children:[Object(w.jsx)("path",{id:"a",d:"M0-6v6h3",transform:"rotate(18 0 -6)"}),Object(w.jsx)("use",{xlinkHref:"#a",transform:"scale(-1 1)"})]}),Object(w.jsx)("use",{xlinkHref:"#b",transform:"rotate(72)"})]}),Object(w.jsx)("use",{xlinkHref:"#b",transform:"rotate(-72)"}),Object(w.jsx)("use",{xlinkHref:"#c",transform:"rotate(144)"})]}),Object(w.jsx)("use",{xlinkHref:"#d",y:"-24"}),Object(w.jsx)("use",{xlinkHref:"#d",y:"-48"})]}),Object(w.jsx)("use",{xlinkHref:"#e",x:"24"}),Object(w.jsx)("use",{xlinkHref:"#e",x:"48"}),Object(w.jsx)("use",{xlinkHref:"#d",x:"-48"}),Object(w.jsx)("use",{xlinkHref:"#d",x:"-24"}),Object(w.jsx)("use",{xlinkHref:"#d",x:"-24",y:"-24"})]})]}):"ru"===t?Object(w.jsxs)(y.a,{viewBox:"0 0 9 6",children:[Object(w.jsx)("rect",{fill:"#fff",width:"9",height:"3"}),Object(w.jsx)("rect",{fill:"#d52b1e",y:"3",width:"9",height:"3"}),Object(w.jsx)("rect",{fill:"#0039a6",y:"2",width:"9",height:"2"})]}):void 0},k=Object(x.a)((function(e){return{root:{width:"100%",maxWidth:500,backgroundColor:e.palette.background.paper},dividerFullWidth:{margin:"5px 0 0 ".concat(e.spacing(2),"px")},dividerInset:{margin:"5px 0 0 ".concat(e.spacing(9),"px")},layout:Object(b.a)({width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(b.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)})}}));function H(e){var t=e.permit,r=e.locale;console.log(t);var n=k();return Object(w.jsx)("main",{className:n.layout,children:Object(w.jsxs)(m.a,{className:n.paper,children:[Object(w.jsx)(g.a,{component:"h4",variant:"h5",align:"center",children:"E-PERMIT VERIFICATION"}),Object(w.jsxs)(p.a,{className:n.root,children:[Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:Object(w.jsx)(d.a,{severity:"success",children:r.valid_signature_message})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.issuer_label,secondary:Object(w.jsx)("div",{className:n.root,children:Object(w.jsxs)(v.a,{container:!0,alignItems:"center",spacing:3,children:[Object(w.jsx)(v.a,{item:!0,children:Object(w.jsx)(_,{code:t.issuer})}),Object(w.jsx)(v.a,{item:!0,children:r["authority_name_"+t.issuer]})]})})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.issued_for_label,secondary:Object(w.jsx)("div",{className:n.root,children:Object(w.jsxs)(v.a,{container:!0,alignItems:"center",spacing:3,children:[Object(w.jsx)(v.a,{item:!0,children:Object(w.jsx)(_,{code:t.issued_for})}),Object(w.jsx)(v.a,{item:!0,children:r["authority_name_"+t.issued_for]})]})})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.issued_at_label,secondary:Object(w.jsx)("div",{className:n.root,children:new Date(1e3*t.issued_at).toLocaleDateString()})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.plate_number_label,secondary:Object(w.jsx)("div",{className:n.root,children:t.plate_number})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.permit_type_label,secondary:Object(w.jsx)("div",{className:n.root,children:r["permit_type_"+t.permit_type+"_text"]})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.permit_year_label,secondary:Object(w.jsx)("div",{className:n.root,children:t.permit_year})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.serial_number_label,secondary:Object(w.jsx)("div",{className:n.root,children:t.serial_number})})}),Object(w.jsx)(O.a,{component:"li"}),Object(w.jsx)(f.a,{children:Object(w.jsx)(h.a,{primary:r.company_name_label,secondary:Object(w.jsx)("div",{className:n.root,children:t.company_name})})})]})]})})}var N=r(51),C=r(56),M="/verify/authorities.json";function S(e){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(o.a.mark((function e(t){var r,n,c,a,i,s,l,j,d,u,b,x,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.split("."),n=JSON.parse(C.decode(r[0])),c=C.decode(r[1]),a=c.split("#"),i={issuer:a[0],issued_for:a[1],permit_year:a[2],permit_type:a[3],permit_id:a[4],issued_at:a[5],plate_number:a[6],company_name:a[7],serial_number:"".concat(a[0].toUpperCase(),"-").concat(a[1].toUpperCase(),"-").concat(a[2],"-").concat(a[3],"-").concat(a[4])},e.next=7,fetch(M);case 7:return s=e.sent,e.next=10,s.json();case 10:return l=e.sent,j=l.authorities.find((function(e){return e.code===i.issued_for})).uri,e.next=14,fetch(j);case 14:return d=e.sent,e.next=17,d.json();case 17:if(u=e.sent,(b=u.authorities.find((function(e){return e.code===i.issuer})))&&0!==Object.keys(b).length){e.next=21;break}return e.abrupt("return",{result:{isValid:!1,errorCode:"iss_notfound"},locale:u.locale});case 21:if((x=b.keys.find((function(e){return e.kid===n.kid})))&&x.jwk){e.next=24;break}return e.abrupt("return",{result:{isValid:!1,errorCode:"jwk_notfound"},locale:u.locale});case 24:if(p=N.KEYUTIL.getKey(JSON.parse(x.jwk)),N.KJUR.jws.JWS.verify(t,p,[n.alg])){e.next=28;break}return e.abrupt("return",{result:{isValid:!1,errorCode:"invalid_signature"},locale:u.locale});case 28:return e.abrupt("return",{result:{isValid:!0,permit:i},locale:u.locale});case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var I=function(){var e=Object(n.useState)(),t=Object(j.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(),i=Object(j.a)(a,2),s=i[0],b=i[1];function x(){return(x=Object(l.a)(o.a.mark((function e(){var t,r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.pathname,r=t.substring(t.lastIndexOf("#")+1),e.next=4,S(r);case 4:n=e.sent,b(n.locale),c(n.result);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){return function(){return x.apply(this,arguments)}()}),[]),r?r.isValid?Object(w.jsx)(H,{permit:r.permit,locale:s}):Object(w.jsx)(d.a,{severity:"error",children:s[r.errorCode+"_message"]}):Object(w.jsx)(u.a,{})},z=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function B(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(I,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/verify",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/verify","/service-worker.js");z?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var n=r.headers.get("content-type");404===r.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):B(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):B(t,e)}))}}()}},[[57,1,2]]]);
//# sourceMappingURL=main.c1aedfb3.chunk.js.map