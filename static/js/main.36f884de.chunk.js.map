{"version":3,"sources":["context.js","components/SelectAuthority.js","utils.js","components/CredentialView.js","components/ScanResult.js","components/Scan.js","App.js","serviceWorker.js","index.js"],"names":["initialState","authority","changes","revocations","credential","reducer","state","action","type","change","AppContext","createContext","dispatch","AppProvider","children","useReducer","useEffect","a","get","persistedState","Object","keys","fetchUser","set","Provider","value","URL","process","AUTHORITIES_URL","useStyles","makeStyles","theme","text","padding","spacing","paper","paddingBottom","list","marginBottom","subheader","backgroundColor","palette","background","grow","flexGrow","SelectAuthority","classes","useState","authorities","setAuthorities","React","useContext","fetch","res","json","result","fetchAuthorities","Paper","square","className","Typography","variant","gutterBottom","List","ListSubheader","map","id","uri","title","Fragment","key","ListItem","button","onClick","ListItemAvatar","Avatar","alt","src","ListItemText","primary","rs","require","base64url","ajv","Ajv","convertPayload","payload","iatDate","Date","iat","toLocaleDateString","expDate","exp","issuer","find","x","iss","verifier","aud","c","issuer_code","issuer_name","verifier_code","verifier_name","sub","cred_id","cid","cred_type","titles","ct","cred_year","cy","org_id","oid","on","org_name","restrictions","getCredential","cred","arr","split","jws","header","JSON","parse","decode","validate","compile","schema","sig","alert","stringify","errors","isValid","errorCode","Math","floor","now","length","publicJwk","kid","pubKey","KEYUTIL","getKey","KJUR","JWS","verify","alg","some","convertedCred","Error","root","width","maxWidth","dividerFullWidth","margin","dividerInset","CredentialView","props","Alert","severity","valid_signature_message","Divider","component","secondary","Grid","container","alignItems","item","ScanResult","setState","data","console","log","getResult","invalid_signature_message","CircularProgress","appBar","top","bottom","fabButton","position","zIndex","left","right","Scan","page","pageState","setPageState","CssBaseline","delay","onError","err","error","onScan","style","AppBar","color","Toolbar","IconButton","edge","aria-label","Fab","Page","App","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","href","origin","addEventListener","headers","response","contentType","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.36f884de.chunk.js","sourcesContent":["import React, { useEffect, useReducer, createContext } from \"react\";\nimport { set, get } from \"idb-keyval\";\nconst initialState = {\n  authority: {},\n  changes: [],\n  revocations: [],\n  credential: {} // error - view\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case \"reset\":\n      return initialState;\n    case \"init\":\n      return { ...action.state };\n    case \"login\":\n      return { ...state, authority: action.authority };\n    case \"addChange\":\n      return { ...state, changes: action.change };\n    case \"removeChanges\":\n      return { ...state, changes: [] };\n    default:\n      return initialState;\n  }\n}\n\nconst AppContext = createContext({\n  state: initialState,\n  dispatch: () => null\n});\n\nconst AppProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    async function fetchUser() {\n      let persistedState = await get(\"state\");\n      if (persistedState && Object.keys(persistedState.authority) !== 0) {\n        dispatch({ type: \"reset\", state: persistedState });\n      }\n    }\n    fetchUser();\n  }, []);\n\n  useEffect(() => {\n    set(\"state\", state);\n  }, [state]);\n\n  return (\n    <AppContext.Provider value={{ state, dispatch }}>\n      {children}\n    </AppContext.Provider>\n  );\n};\n\nexport { AppProvider, AppContext };\n","//import DirectionsBusIcon from \"@material-ui/icons/DirectionsBus\";\n//import CropFreeIcon from \"@material-ui/icons/CropFree\";\nimport React, { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport { AppContext } from \"../context\";\n\nconst URL = process.env.AUTHORITIES_URL || \"https://e-permit.github.io/demo/authorities.json\";\n\nconst useStyles = makeStyles((theme) => ({\n  text: {\n    padding: theme.spacing(2, 2, 0)\n  },\n  paper: {\n    paddingBottom: 50\n  },\n  list: {\n    marginBottom: theme.spacing(2)\n  },\n  subheader: {\n    backgroundColor: theme.palette.background.paper\n  },\n  grow: {\n    flexGrow: 1\n  }\n}));\n\nexport default function SelectAuthority() {\n  const classes = useStyles();\n  const [authorities, setAuthorities] = useState([]);\n  const { dispatch } = React.useContext(AppContext);\n\n  useEffect(() => {\n    async function fetchAuthorities() {\n      const res = await fetch(URL);\n      const result = await res.json();\n      setAuthorities(result.authorities);\n    }\n    fetchAuthorities();\n  }, [])\n  return (\n    <Paper square className={classes.paper}>\n      <Typography className={classes.text} variant=\"h5\" gutterBottom>\n        Authorities\n      </Typography>\n      <List className={classes.list}>\n        <ListSubheader className={classes.subheader}>\n          -- Select Authority --\n        </ListSubheader>\n        {authorities.map(({ id, uri, title }) => (\n          <React.Fragment key={id}>\n            <ListItem\n              button\n              onClick={async () => {\n                if (uri) {\n                  const res = await fetch(uri);\n                  let authority = await res.json();\n                  dispatch({\n                    type: \"login\",\n                    authority: authority\n                  });\n                }\n              }\n              }\n            >\n              <ListItemAvatar>\n                <Avatar\n                  alt=\"Flag\"\n                  src={`https://www.countryflags.io/${id}/flat/64.png`}\n                />\n              </ListItemAvatar>\n              <ListItemText primary={title} />\n            </ListItem>\n          </React.Fragment>\n        ))}\n      </List>{\" \"}\n    </Paper>\n  );\n}\n","import Ajv from \"ajv\";\r\nimport * as schema from \"./schema.json\";\r\nconst rs = require(\"jsrsasign\");\r\nconst base64url = require(\"base64-url\");\r\nconst ajv = new Ajv();\r\nfunction convertPayload(payload, authority) {\r\n  const iatDate = new Date(payload.iat * 1000).toLocaleDateString();\r\n  const expDate = new Date(payload.exp * 1000).toLocaleDateString();\r\n  const issuer = authority.authorities.find((x) => x.id === payload.iss);\r\n  const verifier = authority.authorities.find((x) => x.id === payload.aud);\r\n  const c = {\r\n    iatDate,\r\n    expDate,\r\n    issuer_code: issuer.id,\r\n    issuer_name: issuer.title,\r\n    verifier_code: verifier.id,\r\n    verifier_name: verifier.title,\r\n    sub: payload.sub,\r\n    cred_id: payload.cid,\r\n    cred_type: authority.titles[\"ct_\" + payload.ct],\r\n    cred_year: payload.cy,\r\n    org_id: payload.oid\r\n  };\r\n  if (payload.on) {\r\n    c.org_name = payload.on;\r\n  }\r\n  if (payload.res) {\r\n    c.restrictions = payload.res;\r\n  }\r\n\r\n  return c;\r\n}\r\n\r\nexport async function getCredential(cred, authority, revocations) {\r\n  const arr = cred.split(\".\");\r\n  const version = arr[0];\r\n  if (version === \"v1\") {\r\n    const jws = arr[1] + \".\" + arr[2] + \".\" + arr[3];\r\n    const header = JSON.parse(base64url.decode(arr[1]));\r\n    const payload = JSON.parse(base64url.decode(arr[2]));\r\n    const validate = ajv.compile(schema);\r\n    const valid = validate({ header: header, payload: payload, sig: arr[3] });\r\n    if (!valid) {\r\n      alert(JSON.stringify(validate.errors));\r\n      return { isValid: false, errorCode: \"invalid_cred\" };\r\n    }\r\n    if (!(payload.aud === authority.id || payload.iss === authority.id)) {\r\n      return { isValid: false, errorCode: \"invalid_aud\" };\r\n    }\r\n    const clockTimestamp = Math.floor(Date.now() / 1000);\r\n    if (clockTimestamp >= payload.exp) {\r\n      return { isValid: false, errorCode: \"invalid_exp\" };\r\n    }\r\n    const issuer = authority.authorities.find((x) => x.id === payload.iss);\r\n    if (!issuer || Object.keys(issuer).length === 0) {\r\n      return { isValid: false, errorCode: \"iss_notfound\" };\r\n    }\r\n    const publicJwk = issuer.keys.find((x) => x.kid === header.kid);\r\n    if (!publicJwk || Object.keys(publicJwk).length === 0) {\r\n      return { isValid: false, errorCode: \"jwk_notfound\" };\r\n    }\r\n    const pubKey = rs.KEYUTIL.getKey(publicJwk);\r\n    const isValid = rs.KJUR.jws.JWS.verify(jws, pubKey, [header.alg]);\r\n    if (!isValid) {\r\n      return { isValid: false, errorCode: \"invalid_signature\" };\r\n    }\r\n    if (revocations.some((x) => x.cid === payload.cid)) {\r\n      return { isValid: false, errorCode: \"revoked_cred\" };\r\n    }\r\n    const convertedCred = convertPayload(payload, authority);\r\n    return { isValid: true, cred: convertedCred };\r\n  }\r\n  throw Error(\"Version is not supported\");\r\n}\r\n/*export async function getCredential(encodedCred, authority, revocations) {\r\n  const cred = decodeCred(encodedCred);\r\n  var validate = ajv.compile(schema);\r\n  var valid = validate(cred);\r\n  if (!valid) {\r\n    alert(JSON.stringify(validate.errors));\r\n    return { isValid: false, errorCode: \"invalid_cred\" };\r\n  }\r\n  if (\r\n    !(cred.payload.aud === authority.id || cred.payload.iss === authority.id)\r\n  ) {\r\n    return { isValid: false, errorCode: \"invalid_aud\" };\r\n  }\r\n  const clockTimestamp = Math.floor(Date.now() / 1000);\r\n  if (clockTimestamp >= cred.payload.exp) {\r\n    return { isValid: false, errorCode: \"invalid_exp\" };\r\n  }\r\n  const issuer = authority.authorities.find((x) => x.id === cred.payload.iss);\r\n  if (!issuer || Object.keys(issuer).length === 0) {\r\n    return { isValid: false, errorCode: \"iss_notfound\" };\r\n  }\r\n  const publicJwk = issuer.keys.find((x) => x.kid === cred.header.kid);\r\n  if (!publicJwk || Object.keys(publicJwk).length === 0) {\r\n    return { isValid: false, errorCode: \"jwk_notfound\" };\r\n  }\r\n  const pubKey = rs.KEYUTIL.getKey(publicJwk);\r\n  const headerBase64 = base64url.encode(JSON.stringify(cred.header));\r\n  const payloadBase64 = base64url.encode(JSON.stringify(cred.payload));\r\n  const sigBase64 = base64url.encode(cred.sig, \"binary\");\r\n  const sJws = `${headerBase64}.${payloadBase64}.${sigBase64}`;\r\n  const isValid = rs.KJUR.jws.JWS.verify(sJws, pubKey, [cred.header.alg]);\r\n  if (!isValid) {\r\n    return { isValid: false, errorCode: \"invalid_signature\" };\r\n  }\r\n  if (revocations.some((x) => x.cred_id === cred.payload.cred_id)) {\r\n    return { isValid: false, errorCode: \"revoked_cred\" };\r\n  }\r\n  const convertedCred = convertPayload(cred.payload, authority);\r\n  return { isValid: true, cred: convertedCred };\r\n}\r\n\r\n\r\nexport function decodeCred(credStr) {\r\n  const cred = { header: {}, payload: {} };\r\n  cred.header.alg = \"ES256\";\r\n  cred.header.kid = credStr.substring(1, 2);\r\n  cred.sig = credStr.substring(2, 66);\r\n  cred.payload.iss = credStr.substring(66, 68);\r\n  cred.payload.aud = credStr.substring(68, 70);\r\n  cred.payload.iat = credStr.substring(70, 80);\r\n  cred.payload.exp = credStr.substring(80, 90);\r\n  cred.payload.cid = credStr.substring(90, 100);\r\n  cred.payload.ct = credStr.substring(100, 101);\r\n  cred.payload.cy = credStr.substring(101, 105);\r\n  const decoded = credStr.substring(105).split(\":\");\r\n  cred.payload.sub = decoded[0];\r\n  cred.payload.oid = decoded[1];\r\n  if (decoded[2]) {\r\n    cred.payload.on = decoded[2];\r\n  }\r\n  if (decoded[3]) {\r\n    cred.payload.res = decoded[3];\r\n  }\r\n  return cred;\r\n}*/\r\n\r\n\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: \"100%\",\r\n    maxWidth: 500,\r\n    backgroundColor: theme.palette.background.paper\r\n  },\r\n  dividerFullWidth: {\r\n    margin: `5px 0 0 ${theme.spacing(2)}px`\r\n  },\r\n  dividerInset: {\r\n    margin: `5px 0 0 ${theme.spacing(9)}px`\r\n  }\r\n}));\r\n\r\nexport default function CredentialView(props) {\r\n  const classes = useStyles();\r\n  return (\r\n    <List className={classes.root}>\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={\r\n            <Alert severity=\"success\">\r\n              {props.authority.titles.valid_signature_message}\r\n            </Alert>\r\n          }\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.iss}\r\n          secondary={\r\n            <div className={classes.root}>\r\n              <Grid container alignItems=\"center\" spacing={3}>\r\n                <Grid item>\r\n                  <img\r\n                    alt=\"Flag\"\r\n                    src={`https://www.countryflags.io/${props.cred.issuer_code}/flat/32.png`}\r\n                  />\r\n                </Grid>\r\n                <Grid item>{props.cred.issuer_name}</Grid>\r\n              </Grid>\r\n            </div>\r\n          }\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.aud}\r\n          secondary={\r\n            <div className={classes.root}>\r\n              <Grid container alignItems=\"center\" spacing={3}>\r\n                <Grid item>\r\n                  <img\r\n                    alt=\"Flag\"\r\n                    src={`https://www.countryflags.io/${props.cred.verifier_code}/flat/32.png`}\r\n                  />\r\n                </Grid>\r\n                <Grid item>{props.cred.verifier_name}</Grid>\r\n              </Grid>\r\n            </div>\r\n          }\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.iat}\r\n          secondary={<div className={classes.root}>{props.cred.iatDate}</div>}\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.exp}\r\n          secondary={<div className={classes.root}>{props.cred.expDate}</div>}\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.sub}\r\n          secondary={<div className={classes.root}>{props.cred.sub}</div>}\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.ct}\r\n          secondary={<div className={classes.root}>{props.cred.cred_type}</div>}\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.cy}\r\n          secondary={<div className={classes.root}>{props.cred.cred_year}</div>}\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.cid}\r\n          secondary={<div className={classes.root}>{props.cred.cred_id}</div>}\r\n        />\r\n      </ListItem>\r\n      <Divider component=\"li\" />\r\n      <ListItem>\r\n        <ListItemText\r\n          primary={props.authority.titles.oid}\r\n          secondary={<div className={classes.root}>{props.cred.org_id}</div>}\r\n        />\r\n      </ListItem>\r\n\r\n      {props.cred.org_name && (\r\n        <React.Fragment>\r\n          {\" \"}\r\n          <Divider component=\"li\" />\r\n          <ListItem>\r\n            <ListItemText\r\n              primary={props.authority.titles.on}\r\n              secondary={\r\n                <div className={classes.root}>{props.cred.org_name}</div>\r\n              }\r\n            />\r\n          </ListItem>\r\n        </React.Fragment>\r\n      )}\r\n      {props.cred.restrictions && (\r\n        <React.Fragment>\r\n          {\" \"}\r\n          <Divider component=\"li\" />\r\n          <ListItem>\r\n            <ListItemText\r\n              primary={props.authority.titles.res}\r\n              secondary={\r\n                <div className={classes.root}>{props.cred.restrictions}</div>\r\n              }\r\n            />\r\n          </ListItem>\r\n        </React.Fragment>\r\n      )}\r\n    </List>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { getCredential } from \"../utils\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport CredentialView from \"./CredentialView\";\r\nimport { CircularProgress } from \"@material-ui/core\";\r\n\r\nexport default function ScanResult(props) {\r\n  const [state, setState] = useState();\r\n  useEffect(() => {\r\n    async function getResult() {\r\n      try {\r\n        const result = await getCredential(\r\n          props.data,\r\n          props.authority,\r\n          props.revocations\r\n        );\r\n        console.log(result);\r\n        setState(result);\r\n      }\r\n      catch (error) {\r\n        alert(error);\r\n      }\r\n    }\r\n    getResult();\r\n  }, [props]);\r\n  if (!state) {\r\n    return <CircularProgress />;\r\n  } else if (state.isValid) {\r\n    return <CredentialView cred={state.cred} authority={props.authority} />;\r\n  }  else {\r\n    return (\r\n      <Alert severity=\"error\">\r\n        {props.authority.titles.invalid_signature_message}\r\n      </Alert>\r\n    );\r\n  }\r\n}\r\n\r\n/*if (state.isValid) {\r\n    return (\r\n      <List className={classes.root}>\r\n        <ListItem>\r\n          <ListItemText\r\n            primary=\"Issuer\"\r\n            secondary={\r\n              <div className={classes.root}>\r\n                <Grid container alignItems=\"center\" spacing={3}>\r\n                  <Grid item>\r\n                    <img\r\n                      alt=\"Flag\"\r\n                      src={`https://www.countryflags.io/${state.cred.issuer_code}/flat/32.png`}\r\n                    />\r\n                  </Grid>\r\n                  <Grid item>{state.cred.issuer_title}</Grid>\r\n                </Grid>\r\n              </div>\r\n            }\r\n          />\r\n        </ListItem>\r\n        <Divider component=\"li\" />\r\n        <ListItem>\r\n          <ListItemText\r\n            primary=\"Issuance Date\"\r\n            secondary={<div className={classes.root}>{state.cred.iatDate}</div>}\r\n          />\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemText\r\n            primary=\"Expiration Date\"\r\n            secondary={<div className={classes.root}>{state.cred.expDate}</div>}\r\n          />\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemText\r\n            primary=\"Vehicle Registration Plate\"\r\n            secondary={<div className={classes.root}>{state.cred.vrp}</div>}\r\n          />\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemText\r\n            primary=\"Organization\"\r\n            secondary={\r\n              <div className={classes.root}>\r\n                {state.cred.org_id}-{state.cred.org_name}\r\n              </div>\r\n            }\r\n          />\r\n        </ListItem>\r\n        <ListItem>\r\n          <ListItemText\r\n            primary=\"Type - Year\"\r\n            secondary={\r\n              <div className={classes.root}>\r\n                {state.cred.cred_type}-{state.cred.cred_year}\r\n              </div>\r\n            }\r\n          />\r\n        </ListItem>\r\n      </List>\r\n    );\r\n  }\r\n  }*/\r\n","import React, { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Fab from \"@material-ui/core/Fab\";\nimport CropFreeIcon from \"@material-ui/icons/CropFree\";\nimport { AppContext } from \"../context\";\nimport QrReader from \"react-qr-reader\";\nimport ScanResult from \"./ScanResult\";\n\nconst useStyles = makeStyles((theme) => ({\n  text: {\n    padding: theme.spacing(2, 2, 0)\n  },\n  paper: {\n    paddingBottom: 50\n  },\n  list: {\n    marginBottom: theme.spacing(2)\n  },\n  subheader: {\n    backgroundColor: theme.palette.background.paper\n  },\n  appBar: {\n    top: \"auto\",\n    bottom: 0\n  },\n  grow: {\n    flexGrow: 1\n  },\n  fabButton: {\n    position: \"absolute\",\n    zIndex: 1,\n    top: -30,\n    left: 0,\n    right: 0,\n    margin: \"0 auto\"\n  }\n}));\n\nexport default function Scan() {\n  const classes = useStyles();\n  const { state } = React.useContext(AppContext);\n  const [pageState, setPageState] = useState({ page: \"scan\", data: \"\" });\n  //const [pageState, setPageState] = useState({ page: \"result\", data: \"v1.eyJhbGciOiJFUzI1NiIsImtpZCI6IjEifQ.eyJpc3MiOiJ0ciIsImF1ZCI6InVhIiwiaWF0IjoiMTYwMDkwNTYwMCIsImV4cCI6IjE2MDg3NjgwMDAiLCJjaWQiOiIxMjM0NTY3ODkwIiwiY3QiOiIxIiwiY3kiOiIyMDIwIiwic3ViIjoiMDZCQjI1NDUiLCJvaWQiOiJBMTQyNTY4NzQyNjI0MjU1NSIsIm9uIjoiQUtBTkxBUiBVTFVTTEFSIEFSQVNJIFRBU0lNQUNJTElLIExJTUlURUQgU0lSS0VUSSJ9.KGfbd5i-AEmfTyKtLj4Bbw0gl9-82cC51QY-pIubUaiti3r6pzCLRJLNzrQX0va4fMfTtPEnACVq42iJnrcCAQ\" });\n  async function handleScan(data) {\n    if (data) {\n      setPageState({ page: \"result\", data: data });\n    }\n  }\n  function handleError(err) {\n    console.error(err);\n  }\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <Paper square variant=\"outlined\" className={classes.paper}>\n        {pageState.page === \"result\" ? (\n          <ScanResult\n            data={pageState.data}\n            authority={state.authority}\n            revocations={state.revocations}\n          />\n        ) : (\n            <QrReader\n              delay={300}\n              onError={handleError}\n              onScan={handleScan}\n              style={{ width: \"100%\" }}\n            />\n          )}\n      </Paper>\n      <AppBar position=\"fixed\" color=\"primary\" className={classes.appBar}>\n        <Toolbar>\n          <IconButton edge=\"start\" color=\"inherit\" aria-label=\"open drawer\">\n            <img\n              alt=\"Flag\"\n              src={`https://www.countryflags.io/${state.authority.id}/flat/32.png`}\n            />\n          </IconButton>\n          {state.authority.title}\n\n          {Object.keys(state.authority).length !== 0 && (\n            <Fab\n              color=\"secondary\"\n              aria-label=\"add\"\n              className={classes.fabButton}\n              onClick={() => {\n                setPageState({ page: \"scan\", data: \"\" });\n              }}\n            >\n              <CropFreeIcon />\n            </Fab>\n          )}\n        </Toolbar>\n      </AppBar>\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport { AppProvider, AppContext } from \"./context\";\nimport SelectAuthority from \"./components/SelectAuthority\";\nimport Scan from \"./components/Scan\";\n\nfunction Page() {\n  const { state } = React.useContext(AppContext);\n  console.log(state);\n  return (\n    <React.Fragment>\n      {Object.keys(state.authority).length === 0 ? (\n        <SelectAuthority />\n      ) : (\n        <Scan />\n      )}\n    </React.Fragment>\n  );\n}\nfunction App() {\n  return (\n    <AppProvider>\n      <Page />\n    </AppProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}